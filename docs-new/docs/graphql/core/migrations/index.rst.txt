<div class="meta"
description="Manage Hasura migrations and metadata in CI/CD"
keywords="hasura, docs, migration, metadata, ci, cd">

</div>

# Migrations & Metadata (CI/CD)

<div class="contents" backlinks="none" depth="2" local="">

Table of contents

</div>

## Introduction

It is a typical requirement to export an existing Hasura "setup" so that
you can apply it on another instance to reproduce the same setup. For
example, to achieve a dev -> staging -> production environment promotion
scenario.

<div class="note">

<div class="title">

Note

</div>

This documentation is for Hasura migrations `config v3`, supported from
`v2.0.0-alpha.1`. (See `upgrade guide <migrations_upgrade_v3>`).

For `config v2`, see `migrations_v2`.

</div>

## How is Hasura state managed?

Hasura needs 2 pieces of information to recreate your GraphQL API, the
underlying PG database schema and the Hasura metadata which is used to
describe the exposed GraphQL API.

The `Hasura CLI <hasuracli_manual>` lets you manage these pieces of
information as you build your project via:

### Database migration files

The state of your PG database is managed via incremental SQL migration
files. These migration files can be applied one after the other to
achieve the final DB schema.

DB migration files can be generated incrementally and can by applied in
parts to reach particular checkpoints. They can be used to roll-back the
DB schema as well.

<div class="note">

<div class="title">

Note

</div>

You can choose to manage database migrations using external tools like
knex, TypeORM, Django/Rails migrations, etc. as well.

</div>

### Hasura metadata files

The state of Hasura metadata is managed via snapshots of the metadata.
These snapshots can be applied as a whole to configure Hasura to a state
represented in the snapshot.

Hasura metadata can be exported and imported as a whole.

## Setting up migrations

See `migrations_setup`.

## Advanced use cases

-   `auto_apply_migrations`
-   `manual_migrations`
-   `roll_back_migrations`
-   `seed_data_migration`

## Reference documentation

-   `migrations_how_it_works`
-   `Migration file format <migration_file_format>`
-   `Metadata format <metadata_format>`

<div class="toctree" maxdepth="10" hidden="">

Setting up migrations \<migrations-setup> Managing metadata
\<manage-metadata> Advanced use cases \<advanced/index> Reference
documentation \<reference/index> Upgrading to config v3 \<upgrade-v3>
Config v2 \<config-v2/index> Config v1 \<config-v1/index>

</div>
