<div class="meta"
description="Manage scheduled triggers with the Hasura schema/metadata API"
keywords="hasura, docs, schema/metadata API, API reference, scheduled trigger">

</div>

# Schema/Metadata API Reference: Scheduled Triggers (Deprecated)

<div class="contents" backlinks="none" depth="1" local="">

Table of contents

</div>

## Introduction

Scheduled triggers are used to invoke webhooks based on a timestamp or
cron.

<div class="admonition">

Supported from

Scheduled triggers are supported from versions `v1.3.0` and above.

</div>

<div class="admonition">

Deprecation

In versions `v2.0.0` and above, the schema/metadata API is deprecated in
favour of the `schema API <schema_apis>` and the
`metadata API <metadata_apis>`.

Though for backwards compatibility, the schema/metadata APIs will
continue to function.

</div>

## create_cron_trigger

`create_cron_trigger` is used to create a new cron trigger.

``` http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type" : "create_cron_trigger",
    "args" : {
        "name": "sample_cron",
        "webhook": "https://httpbin.org/post",
        "schedule":  "* * * * *",
        "payload": {
            "key1": "value1",
            "key2": "value2"
        },
        "include_in_metadata":false,
        "comment":"sample_cron commment"
    }
}
```

### Args syntax

| Key                 | Required | Schema                                                                       | Description                                                                                                                                                                                                     |
|---------------------|----------|------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| name                | true     | `TriggerName <TriggerName>`                                                  | Name of the cron trigger                                                                                                                                                                                        |
| webhook             | true     | `WebhookURL <WebhookURL>`                                                    | URL of the webhook                                                                                                                                                                                              |
| schedule            | true     | Cron Expression                                                              | Cron expression at which the trigger should be invoked.                                                                                                                                                         |
| payload             | false    | JSON                                                                         | Any JSON payload which will be sent when the webhook is invoked.                                                                                                                                                |
| headers             | false    | \[ `HeaderFromValue <HeaderFromValue>` \| `HeaderFromEnv <HeaderFromEnv>` \] | List of headers to be sent with the webhook                                                                                                                                                                     |
| retry_conf          | false    | `RetryConfST`                                                                | Retry configuration if scheduled invocation delivery fails                                                                                                                                                      |
| include_in_metadata | true     | Boolean                                                                      | Flag to indicate whether a trigger should be included in the metadata. When a cron trigger is included in the metadata, the user will be able to export it when the metadata of the graphql-engine is exported. |
| comment             | false    | Text                                                                         | Custom comment.                                                                                                                                                                                                 |
| replace             | false    | Bool                                                                         | When replace is set to `true`, the cron trigger will be updated(if exists) and when it's `false` or the field is omitted, then a new cron trigger will be created.                                              |

<div class="admonition">

Supported from

Scheduled triggers are supported from versions `v1.3.0` and above.

</div>

## delete_cron_trigger

`delete_cron_trigger` is used to delete an existing cron trigger. The
scheduled events associated with the cron trigger will also be deleted.

``` http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type" : "delete_cron_trigger",
    "args" : {
        "name": "sample_cron"
    }
}
```

### Args syntax

| Key  | Required | Schema                      | Description              |
|------|----------|-----------------------------|--------------------------|
| name | true     | `TriggerName <TriggerName>` | Name of the cron trigger |

<div class="admonition">

Supported from

Scheduled triggers are supported from versions `v1.3.0` and above.

</div>

## create_scheduled_event

`create_scheduled_event` is used to create a scheduled event.

``` http
POST /v1/query HTTP/1.1
Content-Type: application/json
X-Hasura-Role: admin

{
    "type" : "create_scheduled_event",
    "args" : {
        "webhook": "https://httpbin.org/post",
        "schedule_at": "2019-09-09T22:00:00Z",
        "payload": {
            "key1": "value1",
            "key2": "value2"
        },
        "headers" : [{
            "name":"header-key",
            "value":"header-value"
        }],
        "comment":"sample scheduled event comment"
    }
}
```

### Args syntax

| Key         | Required | Schema                                                                       | Description                                                      |
|-------------|----------|------------------------------------------------------------------------------|------------------------------------------------------------------|
| webhook     | true     | `WebhookURL <WebhookURL>`                                                    | URL of the webhook                                               |
| schedule_at | true     | Timestamp (ISO8601 format)                                                   | The time at which the invocation should be invoked.              |
| payload     | false    | JSON                                                                         | Any JSON payload which will be sent when the webhook is invoked. |
| headers     | false    | \[ `HeaderFromValue <HeaderFromValue>` \| `HeaderFromEnv <HeaderFromEnv>` \] | List of headers to be sent with the webhook                      |
| retry_conf  | false    | `RetryConfST`                                                                | Retry configuration if scheduled event delivery fails            |
| comment     | false    | Text                                                                         | Custom comment.                                                  |

<div class="admonition">

Supported from

Scheduled triggers are supported from versions `v1.3.0` and above.

</div>
