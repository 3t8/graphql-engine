<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24maxtag_7LBPmu5RO479kdfJtN87OG"><span id="%24tag2con_7LBPmu5RO479kdfJtN87OG"><span id="%24con2tag_7LBPmu5RO479kdfJtN87OG"></span></span></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.RQL.DDL.WebhookTransforms</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier">applyRequestTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier">applyResponseTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier">buildReqTransformCtx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier">buildRespTransformCtx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier">mkRequestTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier">mkResponseTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier">RequestMethod</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier">RemoveOrTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier">StringTemplateText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier">TemplatingEngine</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier">TemplateText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier">TransformHeaders</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier">RequestTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier">ResponseTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier">Version</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bimap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.CaseInsensitive</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CI</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either.Validation</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TE</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Validation</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Incremental.html"><span class="hs-identifier">Hasura.Incremental</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier">Cacheable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Session.html"><span class="hs-identifier">Hasura.Session</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier">SessionVariables</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.Session.html#getSessionVariableValue"><span class="hs-identifier">getSessionVariableValue</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.Session.html#mkSessionVariable"><span class="hs-identifier">mkSessionVariable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SerializedError</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runKriti</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runKritiWith</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CustomFunctionError</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">serialize</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parser</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html"><span class="hs-identifier">Network.HTTP.Client.Transformable</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HTTP</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.URI</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">URI</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-comment">{-

Webhook Transformations are data transformations used to modify HTTP
Requests before those requests are executed or Responses after
requests are executed.

'MetadataRequestTransform'/'MetadataResponseTransform' values are
stored in Metadata within the 'CreateAction' and
'CreateEventTriggerQuery' Types and then converted into
'RequestTransform'/'ResponseTransform' values using
'mkRequestTransform'/'mkResponseTransform'.

'RequestTransforms' and 'ResponseTransforms' are applied to an HTTP
Request/Response using 'applyRequestTransform' and
'applyResponseTransform'.

In the case of body transformations, a user specified templating
script is applied.

-}</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-69"></span><span class="hs-comment">--- Types ---</span><span>
</span><span id="line-70"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">data</span><span> </span><span id="ReqTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-var">ReqTransformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReqTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-var">ReqTransformCtx</span></a></span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="tcUrl"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcUrl"><span class="hs-identifier hs-var hs-var">tcUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span id="tcBody"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcBody"><span class="hs-identifier hs-var hs-var">tcBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span id="tcSessionVars"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcSessionVars"><span class="hs-identifier hs-var hs-var">tcSessionVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span id="tcQueryParams"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcQueryParams"><span class="hs-identifier hs-var hs-var">tcQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span id="tcFunctions"><span class="annot"><span class="annottext">ReqTransformCtx
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcFunctions"><span class="hs-identifier hs-var hs-var">tcFunctions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CustomFunctionError</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104593"><span id="local-6989586621688104595"><span id="local-6989586621688104597"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621688104591"><span class="annot"><span class="annottext">toJSON :: ReqTransformCtx -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104585"><span id="local-6989586621688104586"><span id="local-6989586621688104587"><span id="local-6989586621688104588"><span id="local-6989586621688104589"><span class="annot"><span class="annottext">Maybe Value
HashMap Text (Value -&gt; Either CustomFunctionError Value)
Value
tcFunctions :: HashMap Text (Value -&gt; Either CustomFunctionError Value)
tcQueryParams :: Maybe Value
tcSessionVars :: Value
tcBody :: Value
tcUrl :: Maybe Value
tcFunctions :: ReqTransformCtx
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
tcQueryParams :: ReqTransformCtx -&gt; Maybe Value
tcSessionVars :: ReqTransformCtx -&gt; Value
tcBody :: ReqTransformCtx -&gt; Value
tcUrl :: ReqTransformCtx -&gt; Maybe Value
</span><a href="#local-6989586621688104585"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;base_url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688104589"><span class="hs-identifier hs-var">tcUrl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688104588"><span class="hs-identifier hs-var">tcBody</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;session_variables&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688104587"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688104586"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">data</span><span> </span><span id="RespTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-var">RespTransformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RespTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-var">RespTransformCtx</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rtcBody"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcBody"><span class="hs-identifier hs-var hs-var">rtcBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span id="rtcReqCtx"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcReqCtx"><span class="hs-identifier hs-var hs-var">rtcReqCtx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-comment">-- | A set of data transformation functions and substitutions</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- generated from a 'MetadataRequestTransform'. 'Nothing' values mean</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- use the original request value, unless otherwise indicated.</span><span>
</span><span id="line-92"></span><span class="hs-keyword">data</span><span> </span><span id="RequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Change the request method to one provided here. Nothing means POST.</span><span>
</span><span id="line-94"></span><span>    </span><span id="reqTransformRequestMethod"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe
     (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestMethod"><span class="hs-identifier hs-var hs-var">reqTransformRequestMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-comment">-- | A function which contructs a new URL given the request context.</span><span>
</span><span id="line-96"></span><span>    </span><span id="reqTransformRequestURL"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestURL"><span class="hs-identifier hs-var hs-var">reqTransformRequestURL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- | A function for transforming the request body.</span><span>
</span><span id="line-98"></span><span>    </span><span id="reqTransformBody"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe
     (RemoveOrTransform
        (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformBody"><span class="hs-identifier hs-var hs-var">reqTransformBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-comment">-- | A function which contructs new query parameters given the request context.</span><span>
</span><span id="line-100"></span><span>    </span><span id="reqTransformQueryParams"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformQueryParams"><span class="hs-identifier hs-var hs-var">reqTransformQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-comment">-- | A function which contructs new Headers given the request context.</span><span>
</span><span id="line-102"></span><span>    </span><span id="reqTransformRequestHeaders"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestHeaders"><span class="hs-identifier hs-var hs-var">reqTransformRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | A set of data transformation functions generated from a</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- 'MetadataResponseTransform'. 'Nothing' means use the original</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- response value.</span><span>
</span><span id="line-108"></span><span class="hs-keyword">newtype</span><span> </span><span id="ResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span></span><span> </span><span class="hs-special">{</span><span id="respTransformBody"><span class="annot"><span class="annottext">ResponseTransform
-&gt; Maybe
     (RemoveOrTransform
        (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#respTransformBody"><span class="hs-identifier hs-var hs-var">respTransformBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | A de/serializable request transformation template which can be stored in</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- the metadata associated with an action/event trigger/etc. and used to produce</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- a 'RequestTransform'.</span><span>
</span><span id="line-113"></span><span class="hs-comment">--</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- NOTE: This data type is _only_ intended to be parsed from and stored as user</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- metadata; no direct logical transformations should be done upon it.</span><span>
</span><span id="line-116"></span><span class="hs-comment">--</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- NOTE: Users should convert this to 'RequestTransform' as close as possible to</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- the call site that performs a transformed HTTP request, as 'RequestTransform'</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- has a representation that makes it more difficult to deserialize for</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- debugging.</span><span>
</span><span id="line-121"></span><span class="hs-comment">--</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- Nothing values mean use the original request value, unless</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- otherwise indicated.</span><span>
</span><span id="line-124"></span><span id="local-6989586621688104568"><span id="local-6989586621688104569"></span></span><span class="hs-keyword">data</span><span> </span><span id="MetadataRequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataRequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The Schema Version</span><span>
</span><span id="line-126"></span><span>    </span><span id="mtVersion"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtVersion"><span class="hs-identifier hs-var hs-var">mtVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier hs-type">Version</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-comment">-- | Change the request method to one provided here. Nothing means POST.</span><span>
</span><span id="line-128"></span><span>    </span><span id="mtRequestMethod"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestMethod"><span class="hs-identifier hs-var hs-var">mtRequestMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">-- | Template script for transforming the URL.</span><span>
</span><span id="line-130"></span><span>    </span><span id="mtRequestURL"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestURL"><span class="hs-identifier hs-var hs-var">mtRequestURL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-comment">-- | Template script for transforming the request body.</span><span>
</span><span id="line-132"></span><span>    </span><span id="mtBodyTransform"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe (RemoveOrTransform TemplateText)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtBodyTransform"><span class="hs-identifier hs-var hs-var">mtBodyTransform</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-comment">-- | A list of template scripts for constructing new Query Params.</span><span>
</span><span id="line-134"></span><span>    </span><span id="mtQueryParams"><span class="annot"><span class="annottext">MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtQueryParams"><span class="hs-identifier hs-var hs-var">mtQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-comment">-- | A list of template scripts for constructing headers.</span><span>
</span><span id="line-136"></span><span>    </span><span id="mtRequestHeaders"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe TransformHeaders
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestHeaders"><span class="hs-identifier hs-var hs-var">mtRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-comment">-- | The template engine to use for transformations. Default: Kriti</span><span>
</span><span id="line-138"></span><span>    </span><span id="mtTemplatingEngine"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtTemplatingEngine"><span class="hs-identifier hs-var hs-var">mtTemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104554"><span id="local-6989586621688104556"><span id="local-6989586621688104558"><span class="annot"><span class="annottext">Int -&gt; MetadataRequestTransform -&gt; ShowS
[MetadataRequestTransform] -&gt; ShowS
MetadataRequestTransform -&gt; String
(Int -&gt; MetadataRequestTransform -&gt; ShowS)
-&gt; (MetadataRequestTransform -&gt; String)
-&gt; ([MetadataRequestTransform] -&gt; ShowS)
-&gt; Show MetadataRequestTransform
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MetadataRequestTransform] -&gt; ShowS
$cshowList :: [MetadataRequestTransform] -&gt; ShowS
show :: MetadataRequestTransform -&gt; String
$cshow :: MetadataRequestTransform -&gt; String
showsPrec :: Int -&gt; MetadataRequestTransform -&gt; ShowS
$cshowsPrec :: Int -&gt; MetadataRequestTransform -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104549"><span id="local-6989586621688104551"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
(MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool)
-&gt; (MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool)
-&gt; Eq MetadataRequestTransform
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$c/= :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
== :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$c== :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 MetadataRequestTransform -&gt; Rep MetadataRequestTransform x)
-&gt; (forall x.
    Rep MetadataRequestTransform x -&gt; MetadataRequestTransform)
-&gt; Generic MetadataRequestTransform
forall x.
Rep MetadataRequestTransform x -&gt; MetadataRequestTransform
forall x.
MetadataRequestTransform -&gt; Rep MetadataRequestTransform x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep MetadataRequestTransform x -&gt; MetadataRequestTransform
$cfrom :: forall x.
MetadataRequestTransform -&gt; Rep MetadataRequestTransform x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104543"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; ()
(MetadataRequestTransform -&gt; ()) -&gt; NFData MetadataRequestTransform
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: MetadataRequestTransform -&gt; ()
$crnf :: MetadataRequestTransform -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104539"><span class="annot"><span class="annottext">Eq MetadataRequestTransform
Eq MetadataRequestTransform
-&gt; (Accesses
    -&gt; MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool)
-&gt; Cacheable MetadataRequestTransform
Accesses
-&gt; MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses
-&gt; MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$cunchanged :: Accesses
-&gt; MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$cp1Cacheable :: Eq MetadataRequestTransform
</span><a href="Hasura.Incremental.Internal.Dependency.html#C%3ACacheable"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104531"><span id="local-6989586621688104533"><span id="local-6989586621688104535"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621688104530"><span class="annot"><span class="annottext">toJSON :: MetadataRequestTransform -&gt; Value
</span><a href="#local-6989586621688104530"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104523"><span id="local-6989586621688104524"><span id="local-6989586621688104525"><span id="local-6989586621688104526"><span id="local-6989586621688104527"><span id="local-6989586621688104528"><span id="local-6989586621688104529"><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
Maybe TransformHeaders
Maybe StringTemplateText
Maybe (RemoveOrTransform TemplateText)
Version
TemplatingEngine
mtTemplatingEngine :: TemplatingEngine
mtRequestHeaders :: Maybe TransformHeaders
mtQueryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtBodyTransform :: Maybe (RemoveOrTransform TemplateText)
mtRequestURL :: Maybe StringTemplateText
mtRequestMethod :: Maybe StringTemplateText
mtVersion :: Version
mtTemplatingEngine :: MetadataRequestTransform -&gt; TemplatingEngine
mtRequestHeaders :: MetadataRequestTransform -&gt; Maybe TransformHeaders
mtQueryParams :: MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtBodyTransform :: MetadataRequestTransform -&gt; Maybe (RemoveOrTransform TemplateText)
mtRequestURL :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtRequestMethod :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtVersion :: MetadataRequestTransform -&gt; Version
</span><a href="#local-6989586621688104523"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104522"><span class="annot"><span class="annottext">body :: Maybe Pair
</span><a href="#local-6989586621688104522"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104529"><span class="hs-identifier hs-var">mtVersion</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-146"></span><span>          </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104526"><span class="hs-identifier hs-var">mtBodyTransform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-type">Transform</span></a></span><span> </span><span id="local-6989586621688104519"><span class="annot"><span class="annottext">TemplateText
</span><a href="#local-6989586621688104519"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Maybe Pair
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">TemplateText
</span><a href="#local-6989586621688104519"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Pair
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-149"></span><span>          </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (RemoveOrTransform TemplateText) -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104526"><span class="hs-identifier hs-var">mtBodyTransform</span></a></span><span>
</span><span id="line-150"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplatingEngine -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688104523"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Version -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104529"><span class="hs-identifier hs-var">mtVersion</span></a></span><span>
</span><span id="line-153"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-154"></span><span>            </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-155"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe StringTemplateText -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104528"><span class="hs-identifier hs-var">mtRequestMethod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe StringTemplateText -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104527"><span class="hs-identifier hs-var">mtRequestURL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">([(StringTemplateText, Maybe StringTemplateText)]
 -&gt; HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
-&gt; HashMap StringTemplateText (Maybe StringTemplateText)
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688104525"><span class="hs-identifier hs-var">mtQueryParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;request_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe TransformHeaders -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621688104524"><span class="hs-identifier hs-var">mtRequestHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>                </span><span class="annot"><span class="annottext">Maybe Pair
</span><a href="#local-6989586621688104522"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-160"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104513"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621688104511"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MetadataRequestTransform
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser MetadataRequestTransform)
-&gt; Value
-&gt; Parser MetadataRequestTransform
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser MetadataRequestTransform)
 -&gt; Value -&gt; Parser MetadataRequestTransform)
-&gt; (Object -&gt; Parser MetadataRequestTransform)
-&gt; Value
-&gt; Parser MetadataRequestTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104508"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621688104507"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104507"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Version)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Version) -&gt; Version -&gt; Parser Version
forall a. Parser (Maybe a) -&gt; a -&gt; Parser a
</span><span class="hs-operator hs-var">J..!=</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621688104504"><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104504"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe StringTemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;method&quot;</span></span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621688104503"><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104503"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe StringTemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;url&quot;</span></span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621688104502"><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104502"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104507"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-168"></span><span>      </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-169"></span><span>        </span><span id="local-6989586621688104501"><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621688104501"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
-&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (RemoveOrTransform TemplateText)
 -&gt; Parser (Maybe (RemoveOrTransform TemplateText)))
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TemplateText -&gt; RemoveOrTransform TemplateText)
-&gt; Maybe TemplateText -&gt; Maybe (RemoveOrTransform TemplateText)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; RemoveOrTransform TemplateText
forall a. a -&gt; RemoveOrTransform a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-var">Transform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621688104501"><span class="hs-identifier hs-var">template</span></a></span><span>
</span><span id="line-171"></span><span>      </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621688104500"><span class="annot"><span class="annottext">Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
</span><a href="#local-6989586621688104500"><span class="hs-identifier hs-var">queryParams'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object
-&gt; Text
-&gt; Parser
     (Maybe (HashMap StringTemplateText (Maybe StringTemplateText)))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104499"><span class="annot"><span class="annottext">queryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688104499"><span class="hs-identifier hs-var hs-var">queryParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HashMap StringTemplateText (Maybe StringTemplateText)
 -&gt; [(StringTemplateText, Maybe StringTemplateText)])
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HashMap StringTemplateText (Maybe StringTemplateText)
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
</span><a href="#local-6989586621688104500"><span class="hs-identifier hs-var">queryParams'</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621688104497"><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621688104497"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TransformHeaders)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;request_headers&quot;</span></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621688104496"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688104496"><span class="hs-identifier hs-var">templateEngine</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104508"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplatingEngine)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Maybe TemplatingEngine)
-&gt; TemplatingEngine -&gt; Parser TemplatingEngine
forall a. Parser (Maybe a) -&gt; a -&gt; Parser a
</span><span class="hs-operator hs-var">J..!=</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Parser MetadataRequestTransform
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(MetadataRequestTransform -&gt; Parser MetadataRequestTransform)
-&gt; MetadataRequestTransform -&gt; Parser MetadataRequestTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Maybe StringTemplateText
-&gt; Maybe StringTemplateText
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe TransformHeaders
-&gt; TemplatingEngine
-&gt; MetadataRequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104507"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104504"><span class="hs-identifier hs-var">method</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688104503"><span class="hs-identifier hs-var">url</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104502"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688104499"><span class="hs-identifier hs-var">queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621688104497"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688104496"><span class="hs-identifier hs-var">templateEngine</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span id="local-6989586621688104493"><span id="local-6989586621688104494"></span></span><span class="hs-keyword">data</span><span> </span><span id="MetadataResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span></span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The Schema Version</span><span>
</span><span id="line-180"></span><span>    </span><span id="mrtVersion"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mrtVersion"><span class="hs-identifier hs-var hs-var">mrtVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier hs-type">Version</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">-- | Template script for transforming the response body.</span><span>
</span><span id="line-182"></span><span>    </span><span id="mrtBodyTransform"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; Maybe (RemoveOrTransform TemplateText)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mrtBodyTransform"><span class="hs-identifier hs-var hs-var">mrtBodyTransform</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-comment">-- | The template engine to use for transformations. Default: Kriti</span><span>
</span><span id="line-184"></span><span>    </span><span id="mrtTemplatingEngine"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mrtTemplatingEngine"><span class="hs-identifier hs-var hs-var">mrtTemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104483"><span id="local-6989586621688104485"><span id="local-6989586621688104487"><span class="annot"><span class="annottext">Int -&gt; MetadataResponseTransform -&gt; ShowS
[MetadataResponseTransform] -&gt; ShowS
MetadataResponseTransform -&gt; String
(Int -&gt; MetadataResponseTransform -&gt; ShowS)
-&gt; (MetadataResponseTransform -&gt; String)
-&gt; ([MetadataResponseTransform] -&gt; ShowS)
-&gt; Show MetadataResponseTransform
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MetadataResponseTransform] -&gt; ShowS
$cshowList :: [MetadataResponseTransform] -&gt; ShowS
show :: MetadataResponseTransform -&gt; String
$cshow :: MetadataResponseTransform -&gt; String
showsPrec :: Int -&gt; MetadataResponseTransform -&gt; ShowS
$cshowsPrec :: Int -&gt; MetadataResponseTransform -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104479"><span id="local-6989586621688104481"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
(MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool)
-&gt; (MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool)
-&gt; Eq MetadataResponseTransform
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$c/= :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
== :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$c== :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 MetadataResponseTransform -&gt; Rep MetadataResponseTransform x)
-&gt; (forall x.
    Rep MetadataResponseTransform x -&gt; MetadataResponseTransform)
-&gt; Generic MetadataResponseTransform
forall x.
Rep MetadataResponseTransform x -&gt; MetadataResponseTransform
forall x.
MetadataResponseTransform -&gt; Rep MetadataResponseTransform x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep MetadataResponseTransform x -&gt; MetadataResponseTransform
$cfrom :: forall x.
MetadataResponseTransform -&gt; Rep MetadataResponseTransform x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104475"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; ()
(MetadataResponseTransform -&gt; ())
-&gt; NFData MetadataResponseTransform
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: MetadataResponseTransform -&gt; ()
$crnf :: MetadataResponseTransform -&gt; ()
</span><a href="#local-6989586621688104475"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104472"><span class="annot"><span class="annottext">Eq MetadataResponseTransform
Eq MetadataResponseTransform
-&gt; (Accesses
    -&gt; MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool)
-&gt; Cacheable MetadataResponseTransform
Accesses
-&gt; MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses
-&gt; MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$cunchanged :: Accesses
-&gt; MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$cp1Cacheable :: Eq MetadataResponseTransform
</span><a href="#local-6989586621688104472"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104465"><span id="local-6989586621688104467"><span id="local-6989586621688104469"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621688104464"><span class="annot"><span class="annottext">toJSON :: MetadataResponseTransform -&gt; Value
</span><a href="#local-6989586621688104464"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104461"><span id="local-6989586621688104462"><span id="local-6989586621688104463"><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
Version
TemplatingEngine
mrtTemplatingEngine :: TemplatingEngine
mrtBodyTransform :: Maybe (RemoveOrTransform TemplateText)
mrtVersion :: Version
mrtTemplatingEngine :: MetadataResponseTransform -&gt; TemplatingEngine
mrtBodyTransform :: MetadataResponseTransform -&gt; Maybe (RemoveOrTransform TemplateText)
mrtVersion :: MetadataResponseTransform -&gt; Version
</span><a href="#local-6989586621688104461"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104460"><span class="annot"><span class="annottext">body :: Maybe Pair
</span><a href="#local-6989586621688104460"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104463"><span class="hs-identifier hs-var">mrtVersion</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>          </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104462"><span class="hs-identifier hs-var">mrtBodyTransform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-193"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-type">Transform</span></a></span><span> </span><span id="local-6989586621688104459"><span class="annot"><span class="annottext">TemplateText
</span><a href="#local-6989586621688104459"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pair -&gt; Maybe Pair
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">TemplateText
</span><a href="#local-6989586621688104459"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>            </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Pair
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-195"></span><span>          </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (RemoveOrTransform TemplateText) -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104462"><span class="hs-identifier hs-var">mrtBodyTransform</span></a></span><span>
</span><span id="line-196"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplatingEngine -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688104461"><span class="hs-identifier hs-var">mrtTemplatingEngine</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Version -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104463"><span class="hs-identifier hs-var">mrtVersion</span></a></span><span>
</span><span id="line-199"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-200"></span><span>            </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe Pair
</span><a href="#local-6989586621688104460"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104456"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-203"></span><span>  </span><span id="local-6989586621688104455"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MetadataResponseTransform
</span><a href="#local-6989586621688104455"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser MetadataResponseTransform)
-&gt; Value
-&gt; Parser MetadataResponseTransform
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser MetadataResponseTransform)
 -&gt; Value -&gt; Parser MetadataResponseTransform)
-&gt; (Object -&gt; Parser MetadataResponseTransform)
-&gt; Value
-&gt; Parser MetadataResponseTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104454"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104454"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>    </span><span id="local-6989586621688104453"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104453"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104454"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Version)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Version) -&gt; Version -&gt; Parser Version
forall a. Parser (Maybe a) -&gt; a -&gt; Parser a
</span><span class="hs-operator hs-var">J..!=</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621688104452"><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104452"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104453"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-207"></span><span>        </span><span id="local-6989586621688104451"><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621688104451"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104454"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-208"></span><span>        </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
-&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (RemoveOrTransform TemplateText)
 -&gt; Parser (Maybe (RemoveOrTransform TemplateText)))
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TemplateText -&gt; RemoveOrTransform TemplateText)
-&gt; Maybe TemplateText -&gt; Maybe (RemoveOrTransform TemplateText)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; RemoveOrTransform TemplateText
forall a. a -&gt; RemoveOrTransform a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-var">Transform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621688104451"><span class="hs-identifier hs-var">template</span></a></span><span>
</span><span id="line-209"></span><span>      </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104454"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe (RemoveOrTransform TemplateText))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-210"></span><span>    </span><span id="local-6989586621688104450"><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621688104450"><span class="hs-identifier hs-var">templateEngine</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104454"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplatingEngine)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104449"><span class="annot"><span class="annottext">templateEngine' :: TemplatingEngine
</span><a href="#local-6989586621688104449"><span class="hs-identifier hs-var hs-var">templateEngine'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Maybe TemplatingEngine -&gt; TemplatingEngine
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621688104450"><span class="hs-identifier hs-var">templateEngine</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; Parser MetadataResponseTransform
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(MetadataResponseTransform -&gt; Parser MetadataResponseTransform)
-&gt; MetadataResponseTransform -&gt; Parser MetadataResponseTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; TemplatingEngine
-&gt; MetadataResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621688104453"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688104452"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688104449"><span class="hs-identifier hs-var">templateEngine'</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621688104446"><span id="local-6989586621688104447"></span></span><span class="hs-keyword">data</span><span> </span><span id="RemoveOrTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-var">RemoveOrTransform</span></a></span></span><span> </span><span id="local-6989586621688104791"><span class="annot"><a href="#local-6989586621688104791"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Remove"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Transform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-var">Transform</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621688104791"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104439"><span id="local-6989586621688104441"><span id="local-6989586621688104443"><span class="annot"><span class="annottext">Int -&gt; RemoveOrTransform a -&gt; ShowS
[RemoveOrTransform a] -&gt; ShowS
RemoveOrTransform a -&gt; String
(Int -&gt; RemoveOrTransform a -&gt; ShowS)
-&gt; (RemoveOrTransform a -&gt; String)
-&gt; ([RemoveOrTransform a] -&gt; ShowS)
-&gt; Show (RemoveOrTransform a)
forall a. Show a =&gt; Int -&gt; RemoveOrTransform a -&gt; ShowS
forall a. Show a =&gt; [RemoveOrTransform a] -&gt; ShowS
forall a. Show a =&gt; RemoveOrTransform a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RemoveOrTransform a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [RemoveOrTransform a] -&gt; ShowS
show :: RemoveOrTransform a -&gt; String
$cshow :: forall a. Show a =&gt; RemoveOrTransform a -&gt; String
showsPrec :: Int -&gt; RemoveOrTransform a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; RemoveOrTransform a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104435"><span id="local-6989586621688104437"><span class="annot"><span class="annottext">RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
(RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool)
-&gt; (RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool)
-&gt; Eq (RemoveOrTransform a)
forall a.
Eq a =&gt;
RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
$c/= :: forall a.
Eq a =&gt;
RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
== :: RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
$c== :: forall a.
Eq a =&gt;
RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104431"><span id="local-6989586621688104433"><span class="annot"><span class="annottext">a -&gt; RemoveOrTransform b -&gt; RemoveOrTransform a
(a -&gt; b) -&gt; RemoveOrTransform a -&gt; RemoveOrTransform b
(forall a b.
 (a -&gt; b) -&gt; RemoveOrTransform a -&gt; RemoveOrTransform b)
-&gt; (forall a b. a -&gt; RemoveOrTransform b -&gt; RemoveOrTransform a)
-&gt; Functor RemoveOrTransform
forall a b. a -&gt; RemoveOrTransform b -&gt; RemoveOrTransform a
forall a b. (a -&gt; b) -&gt; RemoveOrTransform a -&gt; RemoveOrTransform b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; RemoveOrTransform b -&gt; RemoveOrTransform a
$c&lt;$ :: forall a b. a -&gt; RemoveOrTransform b -&gt; RemoveOrTransform a
fmap :: (a -&gt; b) -&gt; RemoveOrTransform a -&gt; RemoveOrTransform b
$cfmap :: forall a b. (a -&gt; b) -&gt; RemoveOrTransform a -&gt; RemoveOrTransform b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. RemoveOrTransform a -&gt; Rep (RemoveOrTransform a) x)
-&gt; (forall x. Rep (RemoveOrTransform a) x -&gt; RemoveOrTransform a)
-&gt; Generic (RemoveOrTransform a)
forall x. Rep (RemoveOrTransform a) x -&gt; RemoveOrTransform a
forall x. RemoveOrTransform a -&gt; Rep (RemoveOrTransform a) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall a x. Rep (RemoveOrTransform a) x -&gt; RemoveOrTransform a
forall a x. RemoveOrTransform a -&gt; Rep (RemoveOrTransform a) x
$cto :: forall a x. Rep (RemoveOrTransform a) x -&gt; RemoveOrTransform a
$cfrom :: forall a x. RemoveOrTransform a -&gt; Rep (RemoveOrTransform a) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104426"><span class="annot"><span class="annottext">RemoveOrTransform a -&gt; ()
(RemoveOrTransform a -&gt; ()) -&gt; NFData (RemoveOrTransform a)
forall a. NFData a =&gt; RemoveOrTransform a -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: RemoveOrTransform a -&gt; ()
$crnf :: forall a. NFData a =&gt; RemoveOrTransform a -&gt; ()
</span><a href="#local-6989586621688104426"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104423"><span class="annot"><span class="annottext">Eq (RemoveOrTransform a)
Eq (RemoveOrTransform a)
-&gt; (Accesses -&gt; RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool)
-&gt; Cacheable (RemoveOrTransform a)
Accesses -&gt; RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
forall a. Cacheable a =&gt; Eq (RemoveOrTransform a)
forall a.
Cacheable a =&gt;
Accesses -&gt; RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
unchanged :: Accesses -&gt; RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
$cunchanged :: forall a.
Cacheable a =&gt;
Accesses -&gt; RemoveOrTransform a -&gt; RemoveOrTransform a -&gt; Bool
$cp1Cacheable :: forall a. Cacheable a =&gt; Eq (RemoveOrTransform a)
</span><a href="#local-6989586621688104423"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span id="local-6989586621688104422"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104415"><span id="local-6989586621688104417"><span id="local-6989586621688104419"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621688104422"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688104422"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>  </span><span id="local-6989586621688104414"><span class="annot"><span class="annottext">toJSON :: RemoveOrTransform a -&gt; Value
</span><a href="#local-6989586621688104414"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">RemoveOrTransform a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-type">Transform</span></a></span><span> </span><span id="local-6989586621688104413"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688104413"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-222"></span><span>      </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;transform&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-224"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688104413"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-special">]</span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span id="local-6989586621688104412"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104409"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621688104412"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RemoveOrTransform"><span class="hs-identifier hs-type">RemoveOrTransform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688104412"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621688104408"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (RemoveOrTransform a)
</span><a href="#local-6989586621688104408"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (RemoveOrTransform a))
-&gt; Value
-&gt; Parser (RemoveOrTransform a)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RemoveOrTransform&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser (RemoveOrTransform a))
 -&gt; Value -&gt; Parser (RemoveOrTransform a))
-&gt; (Object -&gt; Parser (RemoveOrTransform a))
-&gt; Value
-&gt; Parser (RemoveOrTransform a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104407"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104407"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621688104406"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104406"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104407"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action&quot;</span></span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104406"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove&quot;</span></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">RemoveOrTransform a -&gt; Parser (RemoveOrTransform a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RemoveOrTransform a
forall a. RemoveOrTransform a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;transform&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104407"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;action&quot;</span></span><span>
</span><span id="line-234"></span><span>        </span><span id="local-6989586621688104404"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688104404"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104407"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser a
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">J..:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template&quot;</span></span><span>
</span><span id="line-235"></span><span>        </span><span class="annot"><span class="annottext">RemoveOrTransform a -&gt; Parser (RemoveOrTransform a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RemoveOrTransform a -&gt; Parser (RemoveOrTransform a))
-&gt; RemoveOrTransform a -&gt; Parser (RemoveOrTransform a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; RemoveOrTransform a
forall a. a -&gt; RemoveOrTransform a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-var">Transform</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621688104404"><span class="hs-identifier hs-var">template</span></a></span></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span id="local-6989586621688104402"><span id="local-6989586621688104403"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="RequestMethod"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-var">RequestMethod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestMethod"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-var">RequestMethod</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall x. RequestMethod -&gt; Rep RequestMethod x)
-&gt; (forall x. Rep RequestMethod x -&gt; RequestMethod)
-&gt; Generic RequestMethod
forall x. Rep RequestMethod x -&gt; RequestMethod
forall x. RequestMethod -&gt; Rep RequestMethod x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RequestMethod x -&gt; RequestMethod
$cfrom :: forall x. RequestMethod -&gt; Rep RequestMethod x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104393"><span id="local-6989586621688104395"><span id="local-6989586621688104397"><span class="annot"><span class="annottext">Int -&gt; RequestMethod -&gt; ShowS
[RequestMethod] -&gt; ShowS
RequestMethod -&gt; String
(Int -&gt; RequestMethod -&gt; ShowS)
-&gt; (RequestMethod -&gt; String)
-&gt; ([RequestMethod] -&gt; ShowS)
-&gt; Show RequestMethod
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RequestMethod] -&gt; ShowS
$cshowList :: [RequestMethod] -&gt; ShowS
show :: RequestMethod -&gt; String
$cshow :: RequestMethod -&gt; String
showsPrec :: Int -&gt; RequestMethod -&gt; ShowS
$cshowsPrec :: Int -&gt; RequestMethod -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104389"><span id="local-6989586621688104391"><span class="annot"><span class="annottext">RequestMethod -&gt; RequestMethod -&gt; Bool
(RequestMethod -&gt; RequestMethod -&gt; Bool)
-&gt; (RequestMethod -&gt; RequestMethod -&gt; Bool) -&gt; Eq RequestMethod
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RequestMethod -&gt; RequestMethod -&gt; Bool
$c/= :: RequestMethod -&gt; RequestMethod -&gt; Bool
== :: RequestMethod -&gt; RequestMethod -&gt; Bool
$c== :: RequestMethod -&gt; RequestMethod -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104387"><span class="annot"><span class="annottext">RequestMethod -&gt; ()
(RequestMethod -&gt; ()) -&gt; NFData RequestMethod
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: RequestMethod -&gt; ()
$crnf :: RequestMethod -&gt; ()
</span><a href="#local-6989586621688104387"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104384"><span class="annot"><span class="annottext">Eq RequestMethod
Eq RequestMethod
-&gt; (Accesses -&gt; RequestMethod -&gt; RequestMethod -&gt; Bool)
-&gt; Cacheable RequestMethod
Accesses -&gt; RequestMethod -&gt; RequestMethod -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; RequestMethod -&gt; RequestMethod -&gt; Bool
$cunchanged :: Accesses -&gt; RequestMethod -&gt; RequestMethod -&gt; Bool
$cp1Cacheable :: Eq RequestMethod
</span><a href="#local-6989586621688104384"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104377"><span id="local-6989586621688104379"><span id="local-6989586621688104381"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621688104376"><span class="annot"><span class="annottext">toJSON :: RequestMethod -&gt; Value
</span><a href="#local-6989586621688104376"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (RequestMethod -&gt; Text) -&gt; RequestMethod -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; Text)
-&gt; (RequestMethod -&gt; CI Text) -&gt; RequestMethod -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; CI Text
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104370"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621688104369"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser RequestMethod
</span><a href="#local-6989586621688104369"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser RequestMethod) -&gt; Value -&gt; Parser RequestMethod
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RequestMethod&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RequestMethod -&gt; Parser RequestMethod)
-&gt; (Text -&gt; RequestMethod) -&gt; Text -&gt; Parser RequestMethod
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; RequestMethod
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; RequestMethod)
-&gt; (Text -&gt; CI Text) -&gt; Text -&gt; RequestMethod
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Available Template Languages</span><span>
</span><span id="line-249"></span><span id="local-6989586621688104365"><span id="local-6989586621688104366"></span></span><span class="hs-keyword">data</span><span> </span><span id="TemplatingEngine"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-var">TemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Kriti"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104359"><span id="local-6989586621688104361"><span id="local-6989586621688104363"><span class="annot"><span class="annottext">Int -&gt; TemplatingEngine -&gt; ShowS
[TemplatingEngine] -&gt; ShowS
TemplatingEngine -&gt; String
(Int -&gt; TemplatingEngine -&gt; ShowS)
-&gt; (TemplatingEngine -&gt; String)
-&gt; ([TemplatingEngine] -&gt; ShowS)
-&gt; Show TemplatingEngine
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TemplatingEngine] -&gt; ShowS
$cshowList :: [TemplatingEngine] -&gt; ShowS
show :: TemplatingEngine -&gt; String
$cshow :: TemplatingEngine -&gt; String
showsPrec :: Int -&gt; TemplatingEngine -&gt; ShowS
$cshowsPrec :: Int -&gt; TemplatingEngine -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104355"><span id="local-6989586621688104357"><span class="annot"><span class="annottext">TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
(TemplatingEngine -&gt; TemplatingEngine -&gt; Bool)
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; Bool)
-&gt; Eq TemplatingEngine
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$c/= :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
== :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$c== :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104339"><span id="local-6989586621688104341"><span id="local-6989586621688104343"><span id="local-6989586621688104345"><span id="local-6989586621688104347"><span id="local-6989586621688104349"><span id="local-6989586621688104351"><span id="local-6989586621688104353"><span class="annot"><span class="annottext">Int -&gt; TemplatingEngine
TemplatingEngine -&gt; Int
TemplatingEngine -&gt; [TemplatingEngine]
TemplatingEngine -&gt; TemplatingEngine
TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
(TemplatingEngine -&gt; TemplatingEngine)
-&gt; (TemplatingEngine -&gt; TemplatingEngine)
-&gt; (Int -&gt; TemplatingEngine)
-&gt; (TemplatingEngine -&gt; Int)
-&gt; (TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine
    -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; Enum TemplatingEngine
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromThenTo :: TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFromTo :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromTo :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFromThen :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromThen :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFrom :: TemplatingEngine -&gt; [TemplatingEngine]
$cenumFrom :: TemplatingEngine -&gt; [TemplatingEngine]
fromEnum :: TemplatingEngine -&gt; Int
$cfromEnum :: TemplatingEngine -&gt; Int
toEnum :: Int -&gt; TemplatingEngine
$ctoEnum :: Int -&gt; TemplatingEngine
pred :: TemplatingEngine -&gt; TemplatingEngine
$cpred :: TemplatingEngine -&gt; TemplatingEngine
succ :: TemplatingEngine -&gt; TemplatingEngine
$csucc :: TemplatingEngine -&gt; TemplatingEngine
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104334"><span id="local-6989586621688104336"><span class="annot"><span class="annottext">TemplatingEngine
TemplatingEngine -&gt; TemplatingEngine -&gt; Bounded TemplatingEngine
forall a. a -&gt; a -&gt; Bounded a
maxBound :: TemplatingEngine
$cmaxBound :: TemplatingEngine
minBound :: TemplatingEngine
$cminBound :: TemplatingEngine
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TemplatingEngine -&gt; Rep TemplatingEngine x)
-&gt; (forall x. Rep TemplatingEngine x -&gt; TemplatingEngine)
-&gt; Generic TemplatingEngine
forall x. Rep TemplatingEngine x -&gt; TemplatingEngine
forall x. TemplatingEngine -&gt; Rep TemplatingEngine x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TemplatingEngine x -&gt; TemplatingEngine
$cfrom :: forall x. TemplatingEngine -&gt; Rep TemplatingEngine x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104329"><span class="annot"><span class="annottext">TemplatingEngine -&gt; ()
(TemplatingEngine -&gt; ()) -&gt; NFData TemplatingEngine
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: TemplatingEngine -&gt; ()
$crnf :: TemplatingEngine -&gt; ()
</span><a href="#local-6989586621688104329"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104326"><span class="annot"><span class="annottext">Eq TemplatingEngine
Eq TemplatingEngine
-&gt; (Accesses -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; Bool)
-&gt; Cacheable TemplatingEngine
Accesses -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$cunchanged :: Accesses -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$cp1Cacheable :: Eq TemplatingEngine
</span><a href="#local-6989586621688104326"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-type">renderTemplatingEngine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-254"></span><span id="renderTemplatingEngine"><span class="annot"><span class="annottext">renderTemplatingEngine :: TemplatingEngine -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-var hs-var">renderTemplatingEngine</span></a></span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Kriti&quot;</span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104322"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-257"></span><span>  </span><span id="local-6989586621688104321"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TemplatingEngine
</span><a href="#local-6989586621688104321"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser TemplatingEngine)
-&gt; Value
-&gt; Parser TemplatingEngine
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TemplatingEngine&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Kriti&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Parser TemplatingEngine
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser TemplatingEngine
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid TemplatingEngine&quot;</span></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104314"><span id="local-6989586621688104316"><span id="local-6989586621688104318"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621688104313"><span class="annot"><span class="annottext">toJSON :: TemplatingEngine -&gt; Value
</span><a href="#local-6989586621688104313"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (TemplatingEngine -&gt; Text) -&gt; TemplatingEngine -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-var">renderTemplatingEngine</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621688104311"><span id="local-6989586621688104312"></span></span><span class="hs-keyword">data</span><span> </span><span id="Version"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier hs-var">Version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="V1"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="V2"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span></span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104305"><span id="local-6989586621688104307"><span id="local-6989586621688104309"><span class="annot"><span class="annottext">Int -&gt; Version -&gt; ShowS
[Version] -&gt; ShowS
Version -&gt; String
(Int -&gt; Version -&gt; ShowS)
-&gt; (Version -&gt; String) -&gt; ([Version] -&gt; ShowS) -&gt; Show Version
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Version] -&gt; ShowS
$cshowList :: [Version] -&gt; ShowS
show :: Version -&gt; String
$cshow :: Version -&gt; String
showsPrec :: Int -&gt; Version -&gt; ShowS
$cshowsPrec :: Int -&gt; Version -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104301"><span id="local-6989586621688104303"><span class="annot"><span class="annottext">Version -&gt; Version -&gt; Bool
(Version -&gt; Version -&gt; Bool)
-&gt; (Version -&gt; Version -&gt; Bool) -&gt; Eq Version
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Version -&gt; Version -&gt; Bool
$c/= :: Version -&gt; Version -&gt; Bool
== :: Version -&gt; Version -&gt; Bool
$c== :: Version -&gt; Version -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Version -&gt; Rep Version x)
-&gt; (forall x. Rep Version x -&gt; Version) -&gt; Generic Version
forall x. Rep Version x -&gt; Version
forall x. Version -&gt; Rep Version x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Version x -&gt; Version
$cfrom :: forall x. Version -&gt; Rep Version x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104297"><span class="annot"><span class="annottext">Version -&gt; ()
(Version -&gt; ()) -&gt; NFData Version
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: Version -&gt; ()
$crnf :: Version -&gt; ()
</span><a href="#local-6989586621688104297"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104294"><span class="annot"><span class="annottext">Eq Version
Eq Version
-&gt; (Accesses -&gt; Version -&gt; Version -&gt; Bool) -&gt; Cacheable Version
Accesses -&gt; Version -&gt; Version -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; Version -&gt; Version -&gt; Bool
$cunchanged :: Accesses -&gt; Version -&gt; Version -&gt; Bool
$cp1Cacheable :: Eq Version
</span><a href="#local-6989586621688104294"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104290"><span id="local-6989586621688104292"><span class="annot"><span class="annottext">Int -&gt; Version -&gt; Int
Version -&gt; Int
(Int -&gt; Version -&gt; Int) -&gt; (Version -&gt; Int) -&gt; Hashable Version
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: Version -&gt; Int
$chash :: Version -&gt; Int
hashWithSalt :: Int -&gt; Version -&gt; Int
$chashWithSalt :: Int -&gt; Version -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104286"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier hs-type">Version</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-269"></span><span>  </span><span id="local-6989586621688104285"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Version
</span><a href="#local-6989586621688104285"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621688104284"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688104284"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-270"></span><span>    </span><span id="local-6989586621688104283"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688104283"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Int
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688104284"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688104283"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Version -&gt; Parser Version
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span>
</span><span id="line-273"></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Version -&gt; Parser Version
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span>
</span><span id="line-274"></span><span>      </span><span id="local-6989586621688104282"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688104282"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser Version
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser Version) -&gt; String -&gt; Parser Version
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expected 1 or 3, encountered &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688104282"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104274"><span id="local-6989586621688104276"><span id="local-6989586621688104278"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Version"><span class="hs-identifier hs-type">Version</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621688104273"><span class="annot"><span class="annottext">toJSON :: Version -&gt; Value
</span><a href="#local-6989586621688104273"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V1"><span class="hs-identifier hs-var">V1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">Version
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#V2"><span class="hs-identifier hs-var">V2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | Unparsed Kriti templating code</span><span>
</span><span id="line-282"></span><span id="local-6989586621688104271"><span id="local-6989586621688104272"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="TemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unTemplateText"><span class="annot"><span class="annottext">TemplateText -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unTemplateText"><span class="hs-identifier hs-var hs-var">unTemplateText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104263"><span id="local-6989586621688104265"><span id="local-6989586621688104267"><span class="annot"><span class="annottext">Int -&gt; TemplateText -&gt; ShowS
[TemplateText] -&gt; ShowS
TemplateText -&gt; String
(Int -&gt; TemplateText -&gt; ShowS)
-&gt; (TemplateText -&gt; String)
-&gt; ([TemplateText] -&gt; ShowS)
-&gt; Show TemplateText
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TemplateText] -&gt; ShowS
$cshowList :: [TemplateText] -&gt; ShowS
show :: TemplateText -&gt; String
$cshow :: TemplateText -&gt; String
showsPrec :: Int -&gt; TemplateText -&gt; ShowS
$cshowsPrec :: Int -&gt; TemplateText -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104259"><span id="local-6989586621688104261"><span class="annot"><span class="annottext">TemplateText -&gt; TemplateText -&gt; Bool
(TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool) -&gt; Eq TemplateText
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TemplateText -&gt; TemplateText -&gt; Bool
$c/= :: TemplateText -&gt; TemplateText -&gt; Bool
== :: TemplateText -&gt; TemplateText -&gt; Bool
$c== :: TemplateText -&gt; TemplateText -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104244"><span id="local-6989586621688104246"><span id="local-6989586621688104248"><span id="local-6989586621688104250"><span id="local-6989586621688104252"><span id="local-6989586621688104254"><span id="local-6989586621688104256"><span class="annot"><span class="annottext">Eq TemplateText
Eq TemplateText
-&gt; (TemplateText -&gt; TemplateText -&gt; Ordering)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; TemplateText)
-&gt; (TemplateText -&gt; TemplateText -&gt; TemplateText)
-&gt; Ord TemplateText
TemplateText -&gt; TemplateText -&gt; Bool
TemplateText -&gt; TemplateText -&gt; Ordering
TemplateText -&gt; TemplateText -&gt; TemplateText
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TemplateText -&gt; TemplateText -&gt; TemplateText
$cmin :: TemplateText -&gt; TemplateText -&gt; TemplateText
max :: TemplateText -&gt; TemplateText -&gt; TemplateText
$cmax :: TemplateText -&gt; TemplateText -&gt; TemplateText
&gt;= :: TemplateText -&gt; TemplateText -&gt; Bool
$c&gt;= :: TemplateText -&gt; TemplateText -&gt; Bool
&gt; :: TemplateText -&gt; TemplateText -&gt; Bool
$c&gt; :: TemplateText -&gt; TemplateText -&gt; Bool
&lt;= :: TemplateText -&gt; TemplateText -&gt; Bool
$c&lt;= :: TemplateText -&gt; TemplateText -&gt; Bool
&lt; :: TemplateText -&gt; TemplateText -&gt; Bool
$c&lt; :: TemplateText -&gt; TemplateText -&gt; Bool
compare :: TemplateText -&gt; TemplateText -&gt; Ordering
$ccompare :: TemplateText -&gt; TemplateText -&gt; Ordering
$cp1Ord :: Eq TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TemplateText -&gt; Rep TemplateText x)
-&gt; (forall x. Rep TemplateText x -&gt; TemplateText)
-&gt; Generic TemplateText
forall x. Rep TemplateText x -&gt; TemplateText
forall x. TemplateText -&gt; Rep TemplateText x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TemplateText x -&gt; TemplateText
$cfrom :: forall x. TemplateText -&gt; Rep TemplateText x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104237"><span id="local-6989586621688104239"><span class="annot"><span class="annottext">Int -&gt; TemplateText -&gt; Int
TemplateText -&gt; Int
(Int -&gt; TemplateText -&gt; Int)
-&gt; (TemplateText -&gt; Int) -&gt; Hashable TemplateText
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: TemplateText -&gt; Int
$chash :: TemplateText -&gt; Int
hashWithSalt :: Int -&gt; TemplateText -&gt; Int
$chashWithSalt :: Int -&gt; TemplateText -&gt; Int
</span><a href="#local-6989586621688104237"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104233"><span id="local-6989586621688104235"><span class="annot"><span class="annottext">ToJSONKeyFunction [TemplateText]
ToJSONKeyFunction TemplateText
ToJSONKeyFunction TemplateText
-&gt; ToJSONKeyFunction [TemplateText] -&gt; ToJSONKey TemplateText
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [TemplateText]
$ctoJSONKeyList :: ToJSONKeyFunction [TemplateText]
toJSONKey :: ToJSONKeyFunction TemplateText
$ctoJSONKey :: ToJSONKeyFunction TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104228"><span id="local-6989586621688104230"><span class="annot"><span class="annottext">FromJSONKeyFunction [TemplateText]
FromJSONKeyFunction TemplateText
FromJSONKeyFunction TemplateText
-&gt; FromJSONKeyFunction [TemplateText] -&gt; FromJSONKey TemplateText
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [TemplateText]
$cfromJSONKeyList :: FromJSONKeyFunction [TemplateText]
fromJSONKey :: FromJSONKeyFunction TemplateText
$cfromJSONKey :: FromJSONKeyFunction TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSONKey</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104225"><span class="annot"><span class="annottext">TemplateText -&gt; ()
(TemplateText -&gt; ()) -&gt; NFData TemplateText
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: TemplateText -&gt; ()
$crnf :: TemplateText -&gt; ()
</span><a href="#local-6989586621688104225"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104222"><span class="annot"><span class="annottext">Eq TemplateText
Eq TemplateText
-&gt; (Accesses -&gt; TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; Cacheable TemplateText
Accesses -&gt; TemplateText -&gt; TemplateText -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; TemplateText -&gt; TemplateText -&gt; Bool
$cunchanged :: Accesses -&gt; TemplateText -&gt; TemplateText -&gt; Bool
$cp1Cacheable :: Eq TemplateText
</span><a href="#local-6989586621688104222"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104219"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>  </span><span id="local-6989586621688104218"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TemplateText
</span><a href="#local-6989586621688104218"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser TemplateText) -&gt; Value -&gt; Parser TemplateText
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TemplateText&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104217"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104217"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104216"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621688104216"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104217"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-290"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either ParseError ValueExt
</span><span class="hs-identifier hs-var">parser</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688104216"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-291"></span><span>          </span><span class="hs-comment">-- TODO: Use the parsed ValueExt in MetadataRequestTransform so that we</span><span>
</span><span id="line-292"></span><span>          </span><span class="hs-comment">-- don't have to parse at every request.</span><span>
</span><span id="line-293"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ValueExt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Parser TemplateText
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TemplateText -&gt; Parser TemplateText)
-&gt; TemplateText -&gt; Parser TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104217"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-294"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621688104214"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621688104214"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-295"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SerializedError</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104212"><span class="annot"><span class="annottext">Text
_message :: SerializedError -&gt; Text
_message :: Text
</span><span class="hs-identifier hs-var hs-var">_message</span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; SerializedError
forall e. SerializeError e =&gt; e -&gt; SerializedError
</span><span class="hs-identifier hs-var">serialize</span></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621688104214"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-296"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser TemplateText
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser TemplateText) -&gt; String -&gt; Parser TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104212"><span class="hs-identifier hs-var">_message</span></a></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104203"><span id="local-6989586621688104205"><span id="local-6989586621688104207"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621688104202"><span class="annot"><span class="annottext">toJSON :: TemplateText -&gt; Value
</span><a href="#local-6989586621688104202"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (TemplateText -&gt; Text) -&gt; TemplateText -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Text
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-comment">-- | Unparsed Kriti templating code for string interpolations only.</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- NOTE: WE are highly coupled to Kriti at this point and will likely</span><span>
</span><span id="line-303"></span><span class="hs-comment">-- need to rethink Kriti string interpolation when we start adding</span><span>
</span><span id="line-304"></span><span class="hs-comment">-- other template engines.</span><span>
</span><span id="line-305"></span><span id="local-6989586621688104200"><span id="local-6989586621688104201"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="StringTemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StringTemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unStringTemplateText"><span class="annot"><span class="annottext">StringTemplateText -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unStringTemplateText"><span class="hs-identifier hs-var hs-var">unStringTemplateText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104192"><span id="local-6989586621688104194"><span id="local-6989586621688104196"><span class="annot"><span class="annottext">Int -&gt; StringTemplateText -&gt; ShowS
[StringTemplateText] -&gt; ShowS
StringTemplateText -&gt; String
(Int -&gt; StringTemplateText -&gt; ShowS)
-&gt; (StringTemplateText -&gt; String)
-&gt; ([StringTemplateText] -&gt; ShowS)
-&gt; Show StringTemplateText
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [StringTemplateText] -&gt; ShowS
$cshowList :: [StringTemplateText] -&gt; ShowS
show :: StringTemplateText -&gt; String
$cshow :: StringTemplateText -&gt; String
showsPrec :: Int -&gt; StringTemplateText -&gt; ShowS
$cshowsPrec :: Int -&gt; StringTemplateText -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104188"><span id="local-6989586621688104190"><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText -&gt; Bool
(StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; Eq StringTemplateText
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c/= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
== :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c== :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104173"><span id="local-6989586621688104175"><span id="local-6989586621688104177"><span id="local-6989586621688104179"><span id="local-6989586621688104181"><span id="local-6989586621688104183"><span id="local-6989586621688104185"><span class="annot"><span class="annottext">Eq StringTemplateText
Eq StringTemplateText
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Ordering)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText)
-&gt; Ord StringTemplateText
StringTemplateText -&gt; StringTemplateText -&gt; Bool
StringTemplateText -&gt; StringTemplateText -&gt; Ordering
StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
$cmin :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
max :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
$cmax :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
&gt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&gt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&gt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&gt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&lt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&lt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&lt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&lt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
compare :: StringTemplateText -&gt; StringTemplateText -&gt; Ordering
$ccompare :: StringTemplateText -&gt; StringTemplateText -&gt; Ordering
$cp1Ord :: Eq StringTemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. StringTemplateText -&gt; Rep StringTemplateText x)
-&gt; (forall x. Rep StringTemplateText x -&gt; StringTemplateText)
-&gt; Generic StringTemplateText
forall x. Rep StringTemplateText x -&gt; StringTemplateText
forall x. StringTemplateText -&gt; Rep StringTemplateText x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep StringTemplateText x -&gt; StringTemplateText
$cfrom :: forall x. StringTemplateText -&gt; Rep StringTemplateText x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104167"><span id="local-6989586621688104169"><span class="annot"><span class="annottext">Int -&gt; StringTemplateText -&gt; Int
StringTemplateText -&gt; Int
(Int -&gt; StringTemplateText -&gt; Int)
-&gt; (StringTemplateText -&gt; Int) -&gt; Hashable StringTemplateText
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: StringTemplateText -&gt; Int
$chash :: StringTemplateText -&gt; Int
hashWithSalt :: Int -&gt; StringTemplateText -&gt; Int
$chashWithSalt :: Int -&gt; StringTemplateText -&gt; Int
</span><a href="#local-6989586621688104167"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104163"><span id="local-6989586621688104165"><span class="annot"><span class="annottext">ToJSONKeyFunction [StringTemplateText]
ToJSONKeyFunction StringTemplateText
ToJSONKeyFunction StringTemplateText
-&gt; ToJSONKeyFunction [StringTemplateText]
-&gt; ToJSONKey StringTemplateText
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [StringTemplateText]
$ctoJSONKeyList :: ToJSONKeyFunction [StringTemplateText]
toJSONKey :: ToJSONKeyFunction StringTemplateText
$ctoJSONKey :: ToJSONKeyFunction StringTemplateText
</span><a href="#local-6989586621688104163"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSONKey</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104159"><span id="local-6989586621688104161"><span class="annot"><span class="annottext">FromJSONKeyFunction [StringTemplateText]
FromJSONKeyFunction StringTemplateText
FromJSONKeyFunction StringTemplateText
-&gt; FromJSONKeyFunction [StringTemplateText]
-&gt; FromJSONKey StringTemplateText
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [StringTemplateText]
$cfromJSONKeyList :: FromJSONKeyFunction [StringTemplateText]
fromJSONKey :: FromJSONKeyFunction StringTemplateText
$cfromJSONKey :: FromJSONKeyFunction StringTemplateText
</span><a href="#local-6989586621688104159"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSONKey</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104157"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104154"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104151"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621688104150"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser StringTemplateText
</span><a href="#local-6989586621688104150"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser StringTemplateText)
-&gt; Value
-&gt; Parser StringTemplateText
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StringTemplateText&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104149"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104149"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104148"><span class="annot"><span class="annottext">wrapped :: Text
</span><a href="#local-6989586621688104148"><span class="hs-identifier hs-var hs-var">wrapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104149"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-316"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either ParseError ValueExt
</span><span class="hs-identifier hs-var">parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104148"><span class="hs-identifier hs-var">wrapped</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-317"></span><span>          </span><span class="hs-comment">-- NOTE: We can't simplfy use the wrapped value because the</span><span>
</span><span id="line-318"></span><span>          </span><span class="hs-comment">-- 'FromJSONKey' instance uses coercion rather then this</span><span>
</span><span id="line-319"></span><span>          </span><span class="hs-comment">-- instance to wrap the newtype.  This means we would need to</span><span>
</span><span id="line-320"></span><span>          </span><span class="hs-comment">-- handle QueryParam keys explicitly in 'mkQueryParamsTransform'</span><span>
</span><span id="line-321"></span><span>          </span><span class="hs-comment">-- while values would be handled implicitliy via this aeson</span><span>
</span><span id="line-322"></span><span>          </span><span class="hs-comment">-- instance. That is confusing, so we just handle everything</span><span>
</span><span id="line-323"></span><span>          </span><span class="hs-comment">-- explicitly down the call stack.</span><span>
</span><span id="line-324"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ValueExt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Parser StringTemplateText
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Parser StringTemplateText)
-&gt; StringTemplateText -&gt; Parser StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104149"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-325"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621688104147"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621688104147"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-326"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SerializedError</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104146"><span class="annot"><span class="annottext">Text
_message :: Text
_message :: SerializedError -&gt; Text
</span><a href="#local-6989586621688104146"><span class="hs-identifier hs-var hs-var">_message</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; SerializedError
forall e. SerializeError e =&gt; e -&gt; SerializedError
</span><span class="hs-identifier hs-var">serialize</span></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621688104147"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-327"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser StringTemplateText
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser StringTemplateText)
-&gt; String -&gt; Parser StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104146"><span class="hs-identifier hs-var">_message</span></a></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104139"><span id="local-6989586621688104141"><span id="local-6989586621688104143"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>  </span><span id="local-6989586621688104138"><span class="annot"><span class="annottext">toJSON :: StringTemplateText -&gt; Value
</span><a href="#local-6989586621688104138"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (StringTemplateText -&gt; Text) -&gt; StringTemplateText -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Text
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | This newtype exists solely to anchor a `FromJSON` instance and is</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- eliminated in the `TransformHeaders` `FromJSON` instance.</span><span>
</span><span id="line-334"></span><span id="local-6989586621688104136"><span id="local-6989586621688104137"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="HeaderKey"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HeaderKey"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unHeaderKey"><span class="annot"><span class="annottext">HeaderKey -&gt; CI Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unHeaderKey"><span class="hs-identifier hs-var hs-var">unHeaderKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104128"><span id="local-6989586621688104130"><span id="local-6989586621688104132"><span class="annot"><span class="annottext">Int -&gt; HeaderKey -&gt; ShowS
[HeaderKey] -&gt; ShowS
HeaderKey -&gt; String
(Int -&gt; HeaderKey -&gt; ShowS)
-&gt; (HeaderKey -&gt; String)
-&gt; ([HeaderKey] -&gt; ShowS)
-&gt; Show HeaderKey
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HeaderKey] -&gt; ShowS
$cshowList :: [HeaderKey] -&gt; ShowS
show :: HeaderKey -&gt; String
$cshow :: HeaderKey -&gt; String
showsPrec :: Int -&gt; HeaderKey -&gt; ShowS
$cshowsPrec :: Int -&gt; HeaderKey -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104124"><span id="local-6989586621688104126"><span class="annot"><span class="annottext">HeaderKey -&gt; HeaderKey -&gt; Bool
(HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool) -&gt; Eq HeaderKey
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c/= :: HeaderKey -&gt; HeaderKey -&gt; Bool
== :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c== :: HeaderKey -&gt; HeaderKey -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104109"><span id="local-6989586621688104111"><span id="local-6989586621688104113"><span id="local-6989586621688104115"><span id="local-6989586621688104117"><span id="local-6989586621688104119"><span id="local-6989586621688104121"><span class="annot"><span class="annottext">Eq HeaderKey
Eq HeaderKey
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Ordering)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; HeaderKey)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; HeaderKey)
-&gt; Ord HeaderKey
HeaderKey -&gt; HeaderKey -&gt; Bool
HeaderKey -&gt; HeaderKey -&gt; Ordering
HeaderKey -&gt; HeaderKey -&gt; HeaderKey
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
$cmin :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
max :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
$cmax :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
&gt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&gt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
&gt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&gt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
&lt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&lt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
&lt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&lt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
compare :: HeaderKey -&gt; HeaderKey -&gt; Ordering
$ccompare :: HeaderKey -&gt; HeaderKey -&gt; Ordering
$cp1Ord :: Eq HeaderKey
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. HeaderKey -&gt; Rep HeaderKey x)
-&gt; (forall x. Rep HeaderKey x -&gt; HeaderKey) -&gt; Generic HeaderKey
forall x. Rep HeaderKey x -&gt; HeaderKey
forall x. HeaderKey -&gt; Rep HeaderKey x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep HeaderKey x -&gt; HeaderKey
$cfrom :: forall x. HeaderKey -&gt; Rep HeaderKey x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104105"><span class="annot"><span class="annottext">HeaderKey -&gt; ()
(HeaderKey -&gt; ()) -&gt; NFData HeaderKey
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: HeaderKey -&gt; ()
$crnf :: HeaderKey -&gt; ()
</span><a href="#local-6989586621688104105"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104102"><span class="annot"><span class="annottext">Eq HeaderKey
Eq HeaderKey
-&gt; (Accesses -&gt; HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; Cacheable HeaderKey
Accesses -&gt; HeaderKey -&gt; HeaderKey -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; HeaderKey -&gt; HeaderKey -&gt; Bool
$cunchanged :: Accesses -&gt; HeaderKey -&gt; HeaderKey -&gt; Bool
$cp1Cacheable :: Eq HeaderKey
</span><a href="#local-6989586621688104102"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104099"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-type">HeaderKey</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-339"></span><span>  </span><span id="local-6989586621688104098"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HeaderKey
</span><a href="#local-6989586621688104098"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser HeaderKey) -&gt; Value -&gt; Parser HeaderKey
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HeaderKey&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104097"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104097"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688104097"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621688104096"><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621688104096"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HeaderKey -&gt; Parser HeaderKey
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(HeaderKey -&gt; Parser HeaderKey) -&gt; HeaderKey -&gt; Parser HeaderKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; HeaderKey
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span><span> </span><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621688104096"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span id="local-6989586621688104094"><span id="local-6989586621688104095"></span></span><span class="hs-keyword">data</span><span> </span><span id="TransformHeaders"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransformHeaders"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="addHeaders"><span class="annot"><span class="annottext">TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#addHeaders"><span class="hs-identifier hs-var hs-var">addHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-344"></span><span>    </span><span id="removeHeaders"><span class="annot"><span class="annottext">TransformHeaders -&gt; [CI Text]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#removeHeaders"><span class="hs-identifier hs-var hs-var">removeHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104085"><span id="local-6989586621688104087"><span id="local-6989586621688104089"><span class="annot"><span class="annottext">Int -&gt; TransformHeaders -&gt; ShowS
[TransformHeaders] -&gt; ShowS
TransformHeaders -&gt; String
(Int -&gt; TransformHeaders -&gt; ShowS)
-&gt; (TransformHeaders -&gt; String)
-&gt; ([TransformHeaders] -&gt; ShowS)
-&gt; Show TransformHeaders
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransformHeaders] -&gt; ShowS
$cshowList :: [TransformHeaders] -&gt; ShowS
show :: TransformHeaders -&gt; String
$cshow :: TransformHeaders -&gt; String
showsPrec :: Int -&gt; TransformHeaders -&gt; ShowS
$cshowsPrec :: Int -&gt; TransformHeaders -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104081"><span id="local-6989586621688104083"><span class="annot"><span class="annottext">TransformHeaders -&gt; TransformHeaders -&gt; Bool
(TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; Eq TransformHeaders
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c/= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
== :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c== :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104066"><span id="local-6989586621688104068"><span id="local-6989586621688104070"><span id="local-6989586621688104072"><span id="local-6989586621688104074"><span id="local-6989586621688104076"><span id="local-6989586621688104078"><span class="annot"><span class="annottext">Eq TransformHeaders
Eq TransformHeaders
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Ordering)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders)
-&gt; Ord TransformHeaders
TransformHeaders -&gt; TransformHeaders -&gt; Bool
TransformHeaders -&gt; TransformHeaders -&gt; Ordering
TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
$cmin :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
max :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
$cmax :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
&gt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&gt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&gt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&gt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&lt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&lt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&lt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&lt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
compare :: TransformHeaders -&gt; TransformHeaders -&gt; Ordering
$ccompare :: TransformHeaders -&gt; TransformHeaders -&gt; Ordering
$cp1Ord :: Eq TransformHeaders
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TransformHeaders -&gt; Rep TransformHeaders x)
-&gt; (forall x. Rep TransformHeaders x -&gt; TransformHeaders)
-&gt; Generic TransformHeaders
forall x. Rep TransformHeaders x -&gt; TransformHeaders
forall x. TransformHeaders -&gt; Rep TransformHeaders x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TransformHeaders x -&gt; TransformHeaders
$cfrom :: forall x. TransformHeaders -&gt; Rep TransformHeaders x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104062"><span class="annot"><span class="annottext">TransformHeaders -&gt; ()
(TransformHeaders -&gt; ()) -&gt; NFData TransformHeaders
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: TransformHeaders -&gt; ()
$crnf :: TransformHeaders -&gt; ()
</span><a href="#local-6989586621688104062"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104059"><span class="annot"><span class="annottext">Eq TransformHeaders
Eq TransformHeaders
-&gt; (Accesses -&gt; TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; Cacheable TransformHeaders
Accesses -&gt; TransformHeaders -&gt; TransformHeaders -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; TransformHeaders -&gt; TransformHeaders -&gt; Bool
$cunchanged :: Accesses -&gt; TransformHeaders -&gt; TransformHeaders -&gt; Bool
$cp1Cacheable :: Eq TransformHeaders
</span><a href="#local-6989586621688104059"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104052"><span id="local-6989586621688104054"><span id="local-6989586621688104056"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-350"></span><span>  </span><span id="local-6989586621688104051"><span class="annot"><span class="annottext">toJSON :: TransformHeaders -&gt; Value
</span><a href="#local-6989586621688104051"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688104049"><span id="local-6989586621688104050"><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
[CI Text]
removeHeaders :: [CI Text]
addHeaders :: [(CI Text, StringTemplateText)]
removeHeaders :: TransformHeaders -&gt; [CI Text]
addHeaders :: TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688104049"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;add_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashMap Text StringTemplateText -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">[(Text, StringTemplateText)] -&gt; HashMap Text StringTemplateText
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((CI Text, StringTemplateText) -&gt; (Text, StringTemplateText))
-&gt; [(CI Text, StringTemplateText)] -&gt; [(Text, StringTemplateText)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; Text)
-&gt; (CI Text, StringTemplateText) -&gt; (Text, StringTemplateText)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688104050"><span class="hs-identifier hs-var">addHeaders</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-353"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; Text) -&gt; [CI Text] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621688104049"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688104046"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>  </span><span id="local-6989586621688104045"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TransformHeaders
</span><a href="#local-6989586621688104045"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser TransformHeaders)
-&gt; Value
-&gt; Parser TransformHeaders
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TransformHeaders&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser TransformHeaders)
 -&gt; Value -&gt; Parser TransformHeaders)
-&gt; (Object -&gt; Parser TransformHeaders)
-&gt; Value
-&gt; Parser TransformHeaders
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688104044"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104044"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621688104043"><span class="annot"><span class="annottext">HashMap Text StringTemplateText
</span><a href="#local-6989586621688104043"><span class="hs-identifier hs-var">addHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
-&gt; Maybe (HashMap Text StringTemplateText)
-&gt; HashMap Text StringTemplateText
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (HashMap Text StringTemplateText)
 -&gt; HashMap Text StringTemplateText)
-&gt; Parser (Maybe (HashMap Text StringTemplateText))
-&gt; Parser (HashMap Text StringTemplateText)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104044"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe (HashMap Text StringTemplateText))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;add_headers&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104042"><span class="annot"><span class="annottext">headers :: [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688104042"><span class="hs-identifier hs-var hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap (CI Text) StringTemplateText
-&gt; [(CI Text, StringTemplateText)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">(HashMap (CI Text) StringTemplateText
 -&gt; [(CI Text, StringTemplateText)])
-&gt; HashMap (CI Text) StringTemplateText
-&gt; [(CI Text, StringTemplateText)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; CI Text)
-&gt; HashMap Text StringTemplateText
-&gt; HashMap (CI Text) StringTemplateText
forall k2 k1 v.
(Eq k2, Hashable k2) =&gt;
(k1 -&gt; k2) -&gt; HashMap k1 v -&gt; HashMap k2 v
</span><span class="hs-identifier hs-var">mapKeys</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
</span><a href="#local-6989586621688104043"><span class="hs-identifier hs-var">addHeaders</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621688104040"><span class="annot"><span class="annottext">Maybe [HeaderKey]
</span><a href="#local-6989586621688104040"><span class="hs-identifier hs-var">removeHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688104044"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe [HeaderKey])
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove_headers&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688104039"><span class="annot"><span class="annottext">removeHeaders' :: [CI Text]
</span><a href="#local-6989586621688104039"><span class="hs-identifier hs-var hs-var">removeHeaders'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HeaderKey -&gt; CI Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unHeaderKey"><span class="hs-identifier hs-var hs-var">unHeaderKey</span></a></span><span> </span><span class="annot"><span class="annottext">(HeaderKey -&gt; CI Text) -&gt; [HeaderKey] -&gt; [CI Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[HeaderKey] -&gt; Maybe [HeaderKey] -&gt; [HeaderKey]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">[HeaderKey]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Maybe [HeaderKey]
</span><a href="#local-6989586621688104040"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><span class="annottext">TransformHeaders -&gt; Parser TransformHeaders
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TransformHeaders -&gt; Parser TransformHeaders)
-&gt; TransformHeaders -&gt; Parser TransformHeaders
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)] -&gt; [CI Text] -&gt; TransformHeaders
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688104042"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621688104039"><span class="hs-identifier hs-var">removeHeaders'</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span id="local-6989586621688104037"><span id="local-6989586621688104038"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="TransformErrorBundle"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransformErrorBundle"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span></span><span> </span><span class="hs-special">{</span><span id="teMessages"><span class="annot"><span class="annottext">TransformErrorBundle -&gt; [Value]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#teMessages"><span class="hs-identifier hs-var hs-var">teMessages</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104029"><span id="local-6989586621688104031"><span id="local-6989586621688104033"><span class="annot"><span class="annottext">Int -&gt; TransformErrorBundle -&gt; ShowS
[TransformErrorBundle] -&gt; ShowS
TransformErrorBundle -&gt; String
(Int -&gt; TransformErrorBundle -&gt; ShowS)
-&gt; (TransformErrorBundle -&gt; String)
-&gt; ([TransformErrorBundle] -&gt; ShowS)
-&gt; Show TransformErrorBundle
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransformErrorBundle] -&gt; ShowS
$cshowList :: [TransformErrorBundle] -&gt; ShowS
show :: TransformErrorBundle -&gt; String
$cshow :: TransformErrorBundle -&gt; String
showsPrec :: Int -&gt; TransformErrorBundle -&gt; ShowS
$cshowsPrec :: Int -&gt; TransformErrorBundle -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104025"><span id="local-6989586621688104027"><span class="annot"><span class="annottext">TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
(TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool)
-&gt; (TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool)
-&gt; Eq TransformErrorBundle
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$c/= :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
== :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$c== :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x)
-&gt; (forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle)
-&gt; Generic TransformErrorBundle
forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle
forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle
$cfrom :: forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688104017"><span id="local-6989586621688104019"><span id="local-6989586621688104021"><span class="annot"><span class="annottext">b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
(TransformErrorBundle
 -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; (NonEmpty TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; (forall b.
    Integral b =&gt;
    b -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; Semigroup TransformErrorBundle
forall b.
Integral b =&gt;
b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
$cstimes :: forall b.
Integral b =&gt;
b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
sconcat :: NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
$csconcat :: NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
&lt;&gt; :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
$c&lt;&gt; :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104009"><span id="local-6989586621688104011"><span id="local-6989586621688104013"><span class="annot"><span class="annottext">Semigroup TransformErrorBundle
TransformErrorBundle
Semigroup TransformErrorBundle
-&gt; TransformErrorBundle
-&gt; (TransformErrorBundle
    -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; ([TransformErrorBundle] -&gt; TransformErrorBundle)
-&gt; Monoid TransformErrorBundle
[TransformErrorBundle] -&gt; TransformErrorBundle
TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [TransformErrorBundle] -&gt; TransformErrorBundle
$cmconcat :: [TransformErrorBundle] -&gt; TransformErrorBundle
mappend :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
$cmappend :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
mempty :: TransformErrorBundle
$cmempty :: TransformErrorBundle
$cp1Monoid :: Semigroup TransformErrorBundle
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688104000"><span id="local-6989586621688104002"><span id="local-6989586621688104004"><span id="local-6989586621688104006"><span class="annot"><span class="annottext">[TransformErrorBundle] -&gt; Encoding
[TransformErrorBundle] -&gt; Value
TransformErrorBundle -&gt; Encoding
TransformErrorBundle -&gt; Value
(TransformErrorBundle -&gt; Value)
-&gt; (TransformErrorBundle -&gt; Encoding)
-&gt; ([TransformErrorBundle] -&gt; Value)
-&gt; ([TransformErrorBundle] -&gt; Encoding)
-&gt; ToJSON TransformErrorBundle
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [TransformErrorBundle] -&gt; Encoding
$ctoEncodingList :: [TransformErrorBundle] -&gt; Encoding
toJSONList :: [TransformErrorBundle] -&gt; Value
$ctoJSONList :: [TransformErrorBundle] -&gt; Value
toEncoding :: TransformErrorBundle -&gt; Encoding
$ctoEncoding :: TransformErrorBundle -&gt; Encoding
toJSON :: TransformErrorBundle -&gt; Value
$ctoJSON :: TransformErrorBundle -&gt; Value
</span><a href="#local-6989586621688104000"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSON</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688103998"><span class="annot"><span class="annottext">TransformErrorBundle -&gt; ()
(TransformErrorBundle -&gt; ()) -&gt; NFData TransformErrorBundle
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: TransformErrorBundle -&gt; ()
$crnf :: TransformErrorBundle -&gt; ()
</span><a href="#local-6989586621688103998"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688103995"><span class="annot"><span class="annottext">Eq TransformErrorBundle
Eq TransformErrorBundle
-&gt; (Accesses
    -&gt; TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool)
-&gt; Cacheable TransformErrorBundle
Accesses -&gt; TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
forall a. Eq a -&gt; (Accesses -&gt; a -&gt; a -&gt; Bool) -&gt; Cacheable a
unchanged :: Accesses -&gt; TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$cunchanged :: Accesses -&gt; TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$cp1Cacheable :: Eq TransformErrorBundle
</span><a href="#local-6989586621688103995"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Cacheable</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-------------------------------</span><span>
</span><span id="line-370"></span><span class="hs-comment">--- Constructing Transforms ---</span><span>
</span><span id="line-371"></span><span class="hs-comment">-------------------------------</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- | Construct a `RequestTransform` from its metadata representation.</span><span>
</span><span id="line-374"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier hs-type">mkRequestTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span>
</span><span id="line-375"></span><span id="mkRequestTransform"><span class="annot"><span class="annottext">mkRequestTransform :: MetadataRequestTransform -&gt; RequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier hs-var hs-var">mkRequestTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103988"><span id="local-6989586621688103989"><span id="local-6989586621688103990"><span id="local-6989586621688103991"><span id="local-6989586621688103992"><span id="local-6989586621688103993"><span id="local-6989586621688103994"><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
Maybe TransformHeaders
Maybe StringTemplateText
Maybe (RemoveOrTransform TemplateText)
Version
TemplatingEngine
mtTemplatingEngine :: TemplatingEngine
mtRequestHeaders :: Maybe TransformHeaders
mtQueryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtBodyTransform :: Maybe (RemoveOrTransform TemplateText)
mtRequestURL :: Maybe StringTemplateText
mtRequestMethod :: Maybe StringTemplateText
mtVersion :: Version
mtTemplatingEngine :: MetadataRequestTransform -&gt; TemplatingEngine
mtRequestHeaders :: MetadataRequestTransform -&gt; Maybe TransformHeaders
mtQueryParams :: MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtBodyTransform :: MetadataRequestTransform -&gt; Maybe (RemoveOrTransform TemplateText)
mtRequestURL :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtRequestMethod :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtVersion :: MetadataRequestTransform -&gt; Version
</span><a href="#local-6989586621688103988"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103987"><span class="annot"><span class="annottext">methodTransform :: Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><a href="#local-6989586621688103987"><span class="hs-identifier hs-var hs-var">methodTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkMethodTransform"><span class="hs-identifier hs-var">mkMethodTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103988"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
-&gt; Maybe StringTemplateText
-&gt; Maybe
     (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688103993"><span class="hs-identifier hs-var">mtRequestMethod</span></a></span><span>
</span><span id="line-377"></span><span>      </span><span id="local-6989586621688103985"><span class="annot"><span class="annottext">urlTransform :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621688103985"><span class="hs-identifier hs-var hs-var">urlTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-var">mkUrlTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103988"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Text)
-&gt; Maybe StringTemplateText
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621688103992"><span class="hs-identifier hs-var">mtRequestURL</span></a></span><span>
</span><span id="line-378"></span><span>      </span><span id="local-6989586621688103983"><span class="annot"><span class="annottext">queryTransform :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621688103983"><span class="hs-identifier hs-var hs-var">queryTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Query
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-var">mkQueryParamsTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103988"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">([(StringTemplateText, Maybe StringTemplateText)]
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Query)
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688103990"><span class="hs-identifier hs-var">mtQueryParams</span></a></span><span>
</span><span id="line-379"></span><span>      </span><span id="local-6989586621688103981"><span class="annot"><span class="annottext">headerTransform :: Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621688103981"><span class="hs-identifier hs-var hs-var">headerTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TransformHeaders
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-var">mkHeaderTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103988"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(TransformHeaders
 -&gt; ReqTransformCtx
 -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; Maybe TransformHeaders
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621688103989"><span class="hs-identifier hs-var">mtRequestHeaders</span></a></span><span>
</span><span id="line-380"></span><span>      </span><span id="local-6989586621688103979"><span class="annot"><span class="annottext">bodyTransform :: Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103979"><span class="hs-identifier hs-var hs-var">bodyTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TemplateText
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; RemoveOrTransform TemplateText
-&gt; RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103988"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RemoveOrTransform TemplateText
 -&gt; RemoveOrTransform
      (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; Maybe
     (RemoveOrTransform
        (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688103991"><span class="hs-identifier hs-var">mtBodyTransform</span></a></span><span>
</span><span id="line-381"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
-&gt; Maybe
     (RemoveOrTransform
        (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; RequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><a href="#local-6989586621688103987"><span class="hs-identifier hs-var">methodTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621688103985"><span class="hs-identifier hs-var">urlTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103979"><span class="hs-identifier hs-var">bodyTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621688103983"><span class="hs-identifier hs-var">queryTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621688103981"><span class="hs-identifier hs-var">headerTransform</span></a></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier hs-type">mkResponseTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span>
</span><span id="line-384"></span><span id="mkResponseTransform"><span class="annot"><span class="annottext">mkResponseTransform :: MetadataResponseTransform -&gt; ResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier hs-var hs-var">mkResponseTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103975"><span id="local-6989586621688103976"><span id="local-6989586621688103977"><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
Version
TemplatingEngine
mrtTemplatingEngine :: TemplatingEngine
mrtBodyTransform :: Maybe (RemoveOrTransform TemplateText)
mrtVersion :: Version
mrtTemplatingEngine :: MetadataResponseTransform -&gt; TemplatingEngine
mrtBodyTransform :: MetadataResponseTransform -&gt; Maybe (RemoveOrTransform TemplateText)
mrtVersion :: MetadataResponseTransform -&gt; Version
</span><a href="#local-6989586621688103975"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103974"><span class="annot"><span class="annottext">bodyTransform :: Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103974"><span class="hs-identifier hs-var hs-var">bodyTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TemplateText
 -&gt; RespTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; RemoveOrTransform TemplateText
-&gt; RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; RespTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-var">mkRespTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103975"><span class="hs-identifier hs-var">mrtTemplatingEngine</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RemoveOrTransform TemplateText
 -&gt; RemoveOrTransform
      (RespTransformCtx -&gt; Either TransformErrorBundle Value))
-&gt; Maybe (RemoveOrTransform TemplateText)
-&gt; Maybe
     (RemoveOrTransform
        (RespTransformCtx -&gt; Either TransformErrorBundle Value))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (RemoveOrTransform TemplateText)
</span><a href="#local-6989586621688103976"><span class="hs-identifier hs-var">mrtBodyTransform</span></a></span><span>
</span><span id="line-386"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
-&gt; ResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103974"><span class="hs-identifier hs-var">bodyTransform</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-comment">-- | Transform a String Template</span><span>
</span><span id="line-389"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#transformST"><span class="hs-identifier hs-type">transformST</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-390"></span><span id="transformST"><span class="annot"><span class="annottext">transformST :: TemplatingEngine
-&gt; ReqTransformCtx
-&gt; StringTemplateText
-&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#transformST"><span class="hs-identifier hs-var hs-var">transformST</span></a></span></span><span> </span><span id="local-6989586621688103971"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103971"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621688103970"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103970"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span id="local-6989586621688103969"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103969"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-391"></span><span>  </span><span class="annot"><span class="annottext">Value -&gt; Either TransformErrorBundle ByteString
forall (m :: * -&gt; *).
MonadError TransformErrorBundle m =&gt;
Value -&gt; m ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#valueToString"><span class="hs-identifier hs-var">valueToString</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Either TransformErrorBundle ByteString)
-&gt; Either TransformErrorBundle Value
-&gt; Either TransformErrorBundle ByteString
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103971"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; StringTemplateText)
-&gt; StringTemplateText -&gt; TemplateText
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var">wrapTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103969"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103970"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkMethodTransform"><span class="hs-identifier hs-type">mkMethodTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span><span>
</span><span id="line-394"></span><span id="mkMethodTransform"><span class="annot"><span class="annottext">mkMethodTransform :: TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkMethodTransform"><span class="hs-identifier hs-var hs-var">mkMethodTransform</span></a></span></span><span> </span><span id="local-6989586621688103965"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103965"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621688103964"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103964"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span id="local-6989586621688103963"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103963"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-395"></span><span>  </span><span class="annot"><span class="annottext">(ByteString -&gt; RequestMethod)
-&gt; Either TransformErrorBundle ByteString
-&gt; Either TransformErrorBundle RequestMethod
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CI Text -&gt; RequestMethod
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; RequestMethod)
-&gt; (ByteString -&gt; CI Text) -&gt; ByteString -&gt; RequestMethod
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; CI Text) -&gt; (ByteString -&gt; Text) -&gt; ByteString -&gt; CI Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either TransformErrorBundle ByteString
 -&gt; Either TransformErrorBundle RequestMethod)
-&gt; Either TransformErrorBundle ByteString
-&gt; Either TransformErrorBundle RequestMethod
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; ReqTransformCtx
-&gt; StringTemplateText
-&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#transformST"><span class="hs-identifier hs-var">transformST</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103965"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103963"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103964"><span class="hs-identifier hs-var">template</span></a></span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-type">mkQueryParamsTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span>
</span><span id="line-398"></span><span id="mkQueryParamsTransform"><span class="annot"><span class="annottext">mkQueryParamsTransform :: TemplatingEngine
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Query
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-var hs-var">mkQueryParamsTransform</span></a></span></span><span> </span><span id="local-6989586621688103961"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103961"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621688103960"><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688103960"><span class="hs-identifier hs-var">templates</span></a></span></span><span> </span><span id="local-6989586621688103959"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103959"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103958"><span class="annot"><span class="annottext">transform :: StringTemplateText -&gt; Validation TransformErrorBundle ByteString
</span><a href="#local-6989586621688103958"><span class="hs-identifier hs-var hs-var">transform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle ByteString
-&gt; Validation TransformErrorBundle ByteString
forall e a. Either e a -&gt; Validation e a
</span><span class="hs-identifier hs-var">eitherToValidation</span></span><span> </span><span class="annot"><span class="annottext">(Either TransformErrorBundle ByteString
 -&gt; Validation TransformErrorBundle ByteString)
-&gt; (StringTemplateText -&gt; Either TransformErrorBundle ByteString)
-&gt; StringTemplateText
-&gt; Validation TransformErrorBundle ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; ReqTransformCtx
-&gt; StringTemplateText
-&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#transformST"><span class="hs-identifier hs-var">transformST</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103961"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103959"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span>      </span><span class="annot"><a href="#local-6989586621688103956"><span class="hs-identifier hs-type">transformationResults</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Validation</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Validation</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-402"></span><span>      </span><span id="local-6989586621688103956"><span class="annot"><span class="annottext">transformationResults :: [(Validation TransformErrorBundle ByteString,
  Maybe (Validation TransformErrorBundle ByteString))]
</span><a href="#local-6989586621688103956"><span class="hs-identifier hs-var hs-var">transformationResults</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((StringTemplateText, Maybe StringTemplateText)
 -&gt; (Validation TransformErrorBundle ByteString,
     Maybe (Validation TransformErrorBundle ByteString)))
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; [(Validation TransformErrorBundle ByteString,
     Maybe (Validation TransformErrorBundle ByteString))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Validation TransformErrorBundle ByteString)
-&gt; (Maybe StringTemplateText
    -&gt; Maybe (Validation TransformErrorBundle ByteString))
-&gt; (StringTemplateText, Maybe StringTemplateText)
-&gt; (Validation TransformErrorBundle ByteString,
    Maybe (Validation TransformErrorBundle ByteString))
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Validation TransformErrorBundle ByteString
</span><a href="#local-6989586621688103958"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Validation TransformErrorBundle ByteString)
-&gt; Maybe StringTemplateText
-&gt; Maybe (Validation TransformErrorBundle ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Validation TransformErrorBundle ByteString
</span><a href="#local-6989586621688103958"><span class="hs-identifier hs-var">transform</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621688103960"><span class="hs-identifier hs-var">templates</span></a></span><span>
</span><span id="line-403"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle Query
-&gt; Either TransformErrorBundle Query
forall e a. Validation e a -&gt; Either e a
</span><span class="hs-identifier hs-var">validationToEither</span></span><span> </span><span class="annot"><span class="annottext">(Validation TransformErrorBundle Query
 -&gt; Either TransformErrorBundle Query)
-&gt; Validation TransformErrorBundle Query
-&gt; Either TransformErrorBundle Query
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Validation TransformErrorBundle ByteString,
  Maybe (Validation TransformErrorBundle ByteString))
 -&gt; Validation TransformErrorBundle (ByteString, Maybe ByteString))
-&gt; [(Validation TransformErrorBundle ByteString,
     Maybe (Validation TransformErrorBundle ByteString))]
-&gt; Validation TransformErrorBundle Query
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Validation TransformErrorBundle ByteString
 -&gt; Validation TransformErrorBundle ByteString)
-&gt; (Maybe (Validation TransformErrorBundle ByteString)
    -&gt; Validation TransformErrorBundle (Maybe ByteString))
-&gt; (Validation TransformErrorBundle ByteString,
    Maybe (Validation TransformErrorBundle ByteString))
-&gt; Validation TransformErrorBundle (ByteString, Maybe ByteString)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle ByteString
-&gt; Validation TransformErrorBundle ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Validation TransformErrorBundle ByteString)
-&gt; Validation TransformErrorBundle (Maybe ByteString)
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Validation TransformErrorBundle ByteString,
  Maybe (Validation TransformErrorBundle ByteString))]
</span><a href="#local-6989586621688103956"><span class="hs-identifier hs-var">transformationResults</span></a></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- | Given a `TransformHeaders` and the `ReqTransformCtx`, Construct a</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- function to transform the existing headers.</span><span>
</span><span id="line-407"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-type">mkHeaderTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span id="mkHeaderTransform"><span class="annot"><span class="annottext">mkHeaderTransform :: TemplatingEngine
-&gt; TransformHeaders
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-var hs-var">mkHeaderTransform</span></a></span></span><span> </span><span id="local-6989586621688103950"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103950"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103948"><span id="local-6989586621688103949"><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
[CI Text]
removeHeaders :: [CI Text]
addHeaders :: [(CI Text, StringTemplateText)]
removeHeaders :: TransformHeaders -&gt; [CI Text]
addHeaders :: TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688103948"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688103947"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103947"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-409"></span><span>  </span><span id="local-6989586621688103946"><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621688103946"><span class="hs-identifier hs-var">add</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle ([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall e a. Validation e a -&gt; Either e a
</span><span class="hs-identifier hs-var">V.toEither</span></span><span> </span><span class="annot"><span class="annottext">(Validation TransformErrorBundle ([Header] -&gt; [Header])
 -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; Validation TransformErrorBundle ([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header] -&gt; [Header])
-&gt; Validation TransformErrorBundle [Header]
-&gt; Validation TransformErrorBundle ([Header] -&gt; [Header])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header] -&gt; [Header]
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">(Validation TransformErrorBundle [Header]
 -&gt; Validation TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; Validation TransformErrorBundle [Header]
-&gt; Validation TransformErrorBundle ([Header] -&gt; [Header])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((CI Text, StringTemplateText)
 -&gt; Validation TransformErrorBundle Header)
-&gt; [(CI Text, StringTemplateText)]
-&gt; Validation TransformErrorBundle [Header]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; Validation TransformErrorBundle (CI ByteString))
-&gt; (StringTemplateText
    -&gt; Validation TransformErrorBundle ByteString)
-&gt; (CI Text, StringTemplateText)
-&gt; Validation TransformErrorBundle Header
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CI ByteString -&gt; Validation TransformErrorBundle (CI ByteString)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(CI ByteString -&gt; Validation TransformErrorBundle (CI ByteString))
-&gt; (CI Text -&gt; CI ByteString)
-&gt; CI Text
-&gt; Validation TransformErrorBundle (CI ByteString)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; CI Text -&gt; CI ByteString
forall s2 s1. FoldCase s2 =&gt; (s1 -&gt; s2) -&gt; CI s1 -&gt; CI s2
</span><span class="hs-identifier hs-var">CI.map</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either TransformErrorBundle ByteString
-&gt; Validation TransformErrorBundle ByteString
forall e a. Either e a -&gt; Validation e a
</span><span class="hs-identifier hs-var">V.fromEither</span></span><span> </span><span class="annot"><span class="annottext">(Either TransformErrorBundle ByteString
 -&gt; Validation TransformErrorBundle ByteString)
-&gt; (StringTemplateText -&gt; Either TransformErrorBundle ByteString)
-&gt; StringTemplateText
-&gt; Validation TransformErrorBundle ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; ReqTransformCtx
-&gt; StringTemplateText
-&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#transformST"><span class="hs-identifier hs-var">transformST</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103950"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103947"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621688103949"><span class="hs-identifier hs-var">addHeaders</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103942"><span class="annot"><span class="annottext">filter' :: [Header] -&gt; [Header]
</span><a href="#local-6989586621688103942"><span class="hs-identifier hs-var hs-var">filter'</span></a></span></span><span> </span><span id="local-6989586621688103941"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621688103941"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Bool) -&gt; [Header] -&gt; [Header]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI ByteString -&gt; [CI ByteString] -&gt; Bool)
-&gt; [CI ByteString] -&gt; CI ByteString -&gt; Bool
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">CI ByteString -&gt; [CI ByteString] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">notElem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; CI ByteString) -&gt; [CI Text] -&gt; [CI ByteString]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; CI Text -&gt; CI ByteString
forall s2 s1. FoldCase s2 =&gt; (s1 -&gt; s2) -&gt; CI s1 -&gt; CI s2
</span><span class="hs-identifier hs-var">CI.map</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621688103948"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(CI ByteString -&gt; Bool)
-&gt; (Header -&gt; CI ByteString) -&gt; Header -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Header -&gt; CI ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621688103941"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(([Header] -&gt; [Header])
 -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; ([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621688103946"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; ([Header] -&gt; [Header]) -&gt; [Header] -&gt; [Header]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621688103942"><span class="hs-identifier hs-var">filter'</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-type">mkUrlTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-414"></span><span id="mkUrlTransform"><span class="annot"><span class="annottext">mkUrlTransform :: TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-var hs-var">mkUrlTransform</span></a></span></span><span> </span><span id="local-6989586621688103938"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103938"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621688103937"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103937"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span id="local-6989586621688103936"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103936"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103938"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StringTemplateText -&gt; TemplateText
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText -&gt; TemplateText)
-&gt; StringTemplateText -&gt; TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var">wrapTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621688103937"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103936"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-416"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621688103935"><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621688103935"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621688103935"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-417"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621688103934"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103934"><span class="hs-identifier hs-var">url</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-418"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe URI
</span><span class="hs-identifier hs-var">URI.parseURI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103934"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-419"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">URI
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103934"><span class="hs-identifier hs-var">url</span></a></span><span>
</span><span id="line-420"></span><span>        </span><span class="annot"><span class="annottext">Maybe URI
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-421"></span><span>          </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; Either TransformErrorBundle Text)
-&gt; TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-422"></span><span>            </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-423"></span><span>              </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-424"></span><span>                </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-425"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-426"></span><span>                    </span><span class="hs-comment">-- TODO: This error message is not very</span><span>
</span><span id="line-427"></span><span>                    </span><span class="hs-comment">-- helpful. We should find a way to identity what</span><span>
</span><span id="line-428"></span><span>                    </span><span class="hs-comment">-- is wrong with the URL.</span><span>
</span><span id="line-429"></span><span>                    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Invalid URL: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103934"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621688103932"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103932"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; Either TransformErrorBundle Text)
-&gt; TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-433"></span><span>        </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-434"></span><span>          </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-435"></span><span>            </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-436"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-437"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Url Transforms must produce a String value: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103932"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-comment">-- | Construct a Template Transformation function for Requests</span><span>
</span><span id="line-441"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-type">mkReqTemplateTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-442"></span><span id="mkReqTemplateTransform"><span class="annot"><span class="annottext">mkReqTemplateTransform :: TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var hs-var">mkReqTemplateTransform</span></a></span></span><span> </span><span id="local-6989586621688103930"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103930"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span id="local-6989586621688103929"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103929"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103924"><span id="local-6989586621688103925"><span id="local-6989586621688103926"><span id="local-6989586621688103927"><span id="local-6989586621688103928"><span class="annot"><span class="annottext">Maybe Value
HashMap Text (Value -&gt; Either CustomFunctionError Value)
Value
tcFunctions :: HashMap Text (Value -&gt; Either CustomFunctionError Value)
tcQueryParams :: Maybe Value
tcSessionVars :: Value
tcBody :: Value
tcUrl :: Maybe Value
tcFunctions :: ReqTransformCtx
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
tcQueryParams :: ReqTransformCtx -&gt; Maybe Value
tcSessionVars :: ReqTransformCtx -&gt; Value
tcBody :: ReqTransformCtx -&gt; Value
tcUrl :: ReqTransformCtx -&gt; Maybe Value
</span><a href="#local-6989586621688103924"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103923"><span class="annot"><span class="annottext">context :: [Pair]
</span><a href="#local-6989586621688103923"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103927"><span class="hs-identifier hs-var">tcBody</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$session_variables&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103926"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$query_params&quot;</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688103925"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$base_url&quot;</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688103928"><span class="hs-identifier hs-var">tcUrl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-444"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103930"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-445"></span><span>        </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(KritiError -&gt; TransformErrorBundle)
-&gt; Either KritiError Value -&gt; Either TransformErrorBundle Value
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; (KritiError -&gt; [Value]) -&gt; KritiError -&gt; TransformErrorBundle
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value])
-&gt; (KritiError -&gt; Value) -&gt; KritiError -&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SerializedError -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">(SerializedError -&gt; Value)
-&gt; (KritiError -&gt; SerializedError) -&gt; KritiError -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">KritiError -&gt; SerializedError
forall e. SerializeError e =&gt; e -&gt; SerializedError
</span><span class="hs-identifier hs-var">serialize</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either KritiError Value -&gt; Either TransformErrorBundle Value)
-&gt; Either KritiError Value -&gt; Either TransformErrorBundle Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; [Pair]
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
-&gt; Either KritiError Value
</span><span class="hs-identifier hs-var">runKritiWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103929"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Pair]
</span><a href="#local-6989586621688103923"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value -&gt; Either CustomFunctionError Value)
</span><a href="#local-6989586621688103924"><span class="hs-identifier hs-var">tcFunctions</span></a></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-comment">-- | Construct a Template Transformation function for Responses</span><span>
</span><span id="line-448"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-type">mkRespTemplateTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-449"></span><span id="mkRespTemplateTransform"><span class="annot"><span class="annottext">mkRespTemplateTransform :: TemplatingEngine
-&gt; TemplateText
-&gt; RespTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-var hs-var">mkRespTemplateTransform</span></a></span></span><span> </span><span id="local-6989586621688103922"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103922"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span id="local-6989586621688103921"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103921"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103919"><span id="local-6989586621688103920"><span class="annot"><span class="annottext">Value
rtcReqCtx :: Value
rtcBody :: Value
rtcReqCtx :: RespTransformCtx -&gt; Value
rtcBody :: RespTransformCtx -&gt; Value
</span><a href="#local-6989586621688103919"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103918"><span class="annot"><span class="annottext">context :: [Pair]
</span><a href="#local-6989586621688103918"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103920"><span class="hs-identifier hs-var">rtcBody</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$request&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103919"><span class="hs-identifier hs-var">rtcReqCtx</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-451"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621688103922"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-452"></span><span>        </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(KritiError -&gt; TransformErrorBundle)
-&gt; Either KritiError Value -&gt; Either TransformErrorBundle Value
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; (KritiError -&gt; [Value]) -&gt; KritiError -&gt; TransformErrorBundle
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value])
-&gt; (KritiError -&gt; Value) -&gt; KritiError -&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SerializedError -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">(SerializedError -&gt; Value)
-&gt; (KritiError -&gt; SerializedError) -&gt; KritiError -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">KritiError -&gt; SerializedError
forall e. SerializeError e =&gt; e -&gt; SerializedError
</span><span class="hs-identifier hs-var">serialize</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either KritiError Value -&gt; Either TransformErrorBundle Value)
-&gt; Either KritiError Value -&gt; Either TransformErrorBundle Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Pair] -&gt; Either KritiError Value
</span><span class="hs-identifier hs-var">runKriti</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103921"><span class="hs-identifier hs-var">template</span></a></span><span> </span><span class="annot"><span class="annottext">[Pair]
</span><a href="#local-6989586621688103918"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier hs-type">buildReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier hs-type">SessionVariables</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span>
</span><span id="line-455"></span><span id="buildReqTransformCtx"><span class="annot"><span class="annottext">buildReqTransformCtx :: Text -&gt; Maybe SessionVariables -&gt; Request -&gt; ReqTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier hs-var hs-var">buildReqTransformCtx</span></a></span></span><span> </span><span id="local-6989586621688103917"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103917"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span id="local-6989586621688103916"><span class="annot"><span class="annottext">Maybe SessionVariables
</span><a href="#local-6989586621688103916"><span class="hs-identifier hs-var">sessionVars</span></a></span></span><span> </span><span id="local-6989586621688103915"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103915"><span class="hs-identifier hs-var">reqData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-456"></span><span>  </span><span class="annot"><span class="annottext">ReqTransformCtx :: Maybe Value
-&gt; Value
-&gt; Value
-&gt; Maybe Value
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
-&gt; ReqTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcUrl :: Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcUrl"><span class="hs-identifier hs-var">tcUrl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103917"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-458"></span><span>      </span><span class="annot"><span class="annottext">tcBody :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcBody"><span class="hs-identifier hs-var">tcBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FromJSON Value =&gt; ByteString -&gt; Maybe Value
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">J.decode</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe Value) -&gt; Maybe ByteString -&gt; Maybe Value
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe ByteString) Request (Maybe ByteString)
-&gt; Request -&gt; Maybe ByteString
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe ByteString) Request (Maybe ByteString)
Lens' Request (Maybe ByteString)
</span><a href="Network.HTTP.Client.Transformable.html#body"><span class="hs-identifier hs-var">HTTP.body</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103915"><span class="hs-identifier hs-var">reqData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-459"></span><span>      </span><span class="annot"><span class="annottext">tcSessionVars :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcSessionVars"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables
</span><a href="#local-6989586621688103916"><span class="hs-identifier hs-var">sessionVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-460"></span><span>      </span><span class="annot"><span class="annottext">tcQueryParams :: Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcQueryParams"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Text, Maybe Text)] -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">([(Text, Maybe Text)] -&gt; Value) -&gt; [(Text, Maybe Text)] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (Maybe ByteString -&gt; Maybe Text)
-&gt; (ByteString, Maybe ByteString)
-&gt; (Text, Maybe Text)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; Maybe ByteString -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ByteString, Maybe ByteString) -&gt; (Text, Maybe Text))
-&gt; Query -&gt; [(Text, Maybe Text)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Getting Query Request Query -&gt; Request -&gt; Query
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Query Request Query
Lens' Request Query
</span><a href="Network.HTTP.Client.Transformable.html#queryParams"><span class="hs-identifier hs-var">HTTP.queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103915"><span class="hs-identifier hs-var">reqData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-461"></span><span>      </span><span class="annot"><span class="annottext">tcFunctions :: HashMap Text (Value -&gt; Either CustomFunctionError Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcFunctions"><span class="hs-identifier hs-var">tcFunctions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; (Value -&gt; Either CustomFunctionError Value)
-&gt; HashMap Text (Value -&gt; Either CustomFunctionError Value)
forall k v. Hashable k =&gt; k -&gt; v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;getSessionVariable&quot;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Either CustomFunctionError Value
</span><a href="#local-6989586621688103909"><span class="hs-identifier hs-var">getSessionVar</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><a href="#local-6989586621688103909"><span class="hs-identifier hs-type">getSessionVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CustomFunctionError</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621688103909"><span class="annot"><span class="annottext">getSessionVar :: Value -&gt; Either CustomFunctionError Value
</span><a href="#local-6989586621688103909"><span class="hs-identifier hs-var hs-var">getSessionVar</span></a></span></span><span> </span><span id="local-6989586621688103908"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103908"><span class="hs-identifier hs-var">inp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103908"><span class="hs-identifier hs-var">inp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621688103907"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103907"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621688103906"><span class="hs-identifier hs-var">sessionVarValue</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103905"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103905"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Either CustomFunctionError Value
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Either CustomFunctionError Value)
-&gt; Value -&gt; Either CustomFunctionError Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103905"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-469"></span><span>          </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CustomFunctionError -&gt; Either CustomFunctionError Value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(CustomFunctionError -&gt; Either CustomFunctionError Value)
-&gt; (Text -&gt; CustomFunctionError)
-&gt; Text
-&gt; Either CustomFunctionError Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CustomFunctionError
</span><span class="hs-identifier hs-var">CustomFunctionError</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either CustomFunctionError Value)
-&gt; Text -&gt; Either CustomFunctionError Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Session variable \&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103907"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot; not found&quot;</span></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-471"></span><span>          </span><span id="local-6989586621688103906"><span class="annot"><span class="annottext">sessionVarValue :: Maybe Text
</span><a href="#local-6989586621688103906"><span class="hs-identifier hs-var hs-var">sessionVarValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables
</span><a href="#local-6989586621688103916"><span class="hs-identifier hs-var">sessionVars</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables
-&gt; (SessionVariables -&gt; Maybe Text) -&gt; Maybe Text
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">SessionVariable -&gt; SessionVariables -&gt; Maybe Text
</span><a href="Hasura.Session.html#getSessionVariableValue"><span class="hs-identifier hs-var">getSessionVariableValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; SessionVariable
</span><a href="Hasura.Session.html#mkSessionVariable"><span class="hs-identifier hs-var">mkSessionVariable</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103907"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>      </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CustomFunctionError -&gt; Either CustomFunctionError Value
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(CustomFunctionError -&gt; Either CustomFunctionError Value)
-&gt; CustomFunctionError -&gt; Either CustomFunctionError Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CustomFunctionError
</span><span class="hs-identifier hs-var">CustomFunctionError</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Session variable name should be a string&quot;</span></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier hs-type">buildRespTransformCtx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span>
</span><span id="line-475"></span><span id="buildRespTransformCtx"><span class="annot"><span class="annottext">buildRespTransformCtx :: ReqTransformCtx -&gt; ByteString -&gt; RespTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier hs-var hs-var">buildRespTransformCtx</span></a></span></span><span> </span><span id="local-6989586621688103903"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103903"><span class="hs-identifier hs-var">reqCtx</span></a></span></span><span> </span><span id="local-6989586621688103902"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103902"><span class="hs-identifier hs-var">respBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><span class="annottext">RespTransformCtx :: Value -&gt; Value -&gt; RespTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtcBody :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcBody"><span class="hs-identifier hs-var">rtcBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe Value
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">J.decode</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103902"><span class="hs-identifier hs-var">respBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><span class="annottext">rtcReqCtx :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcReqCtx"><span class="hs-identifier hs-var">rtcReqCtx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103903"><span class="hs-identifier hs-var">reqCtx</span></a></span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-comment">-- | Transform an `HTTP.Request` with a `RequestTransform`.</span><span>
</span><span id="line-482"></span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- Note: we pass in the request url explicitly for use in the</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- 'ReqTransformCtx'. We do this so that we can ensure that the url</span><span>
</span><span id="line-485"></span><span class="hs-comment">-- is syntactically identical to what the use submits. If we use the</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- parsed request from the 'HTTP.Request' term then it is possible</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- that the url is semantically equivalent but syntactically</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- different. An example of this is the presence or lack of a trailing</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- slash on the URL path. This important when performing string</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- interpolation on the request url.</span><span>
</span><span id="line-491"></span><span class="hs-comment">--</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- Because of this requirement, we must ensure the sequence of</span><span>
</span><span id="line-493"></span><span class="hs-comment">-- transformation applications. If a query param transformation</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- occured before the url transformation then the query param</span><span>
</span><span id="line-495"></span><span class="hs-comment">-- transformation would be wiped out.</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- applyRequestTransform :: T.Text -&gt; RequestTransform -&gt; HTTP.Request -&gt; Maybe SessionVariables -&gt; Either TransformErrorBundle HTTP.Request</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- applyRequestTransform reqUrl RequestTransform {..} reqData sessionVars =</span><span>
</span><span id="line-498"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier hs-type">applyRequestTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span>
</span><span id="line-499"></span><span id="applyRequestTransform"><span class="annot"><span class="annottext">applyRequestTransform :: (Request -&gt; ReqTransformCtx)
-&gt; RequestTransform
-&gt; Request
-&gt; Either TransformErrorBundle Request
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier hs-var hs-var">applyRequestTransform</span></a></span></span><span> </span><span id="local-6989586621688103901"><span class="annot"><span class="annottext">Request -&gt; ReqTransformCtx
</span><a href="#local-6989586621688103901"><span class="hs-identifier hs-var">transformCtx'</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103896"><span id="local-6989586621688103897"><span id="local-6989586621688103898"><span id="local-6989586621688103899"><span id="local-6989586621688103900"><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformRequestHeaders :: Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformQueryParams :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
reqTransformBody :: Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
reqTransformRequestURL :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
reqTransformRequestMethod :: Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
reqTransformRequestHeaders :: RequestTransform
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformQueryParams :: RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
reqTransformBody :: RequestTransform
-&gt; Maybe
     (RemoveOrTransform
        (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
reqTransformRequestURL :: RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
reqTransformRequestMethod :: RequestTransform
-&gt; Maybe
     (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><a href="#local-6989586621688103896"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688103895"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103895"><span class="hs-identifier hs-var">reqData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688103894"><span class="annot"><span class="annottext">transformCtx :: ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; ReqTransformCtx
</span><a href="#local-6989586621688103901"><span class="hs-identifier hs-var">transformCtx'</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103895"><span class="hs-identifier hs-var">reqData</span></a></span><span>
</span><span id="line-501"></span><span>      </span><span class="annot"><a href="#local-6989586621688103893"><span class="hs-identifier hs-type">methodFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span><span>
</span><span id="line-502"></span><span>      </span><span id="local-6989586621688103893"><span class="annot"><span class="annottext">methodFunc :: ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621688103893"><span class="hs-identifier hs-var hs-var">methodFunc</span></a></span></span><span> </span><span id="local-6989586621688103892"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103892"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-503"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><a href="#local-6989586621688103900"><span class="hs-identifier hs-var">reqTransformRequestMethod</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-504"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103892"><span class="hs-identifier hs-var">method</span></a></span><span>
</span><span id="line-505"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103891"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod
</span><a href="#local-6989586621688103891"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; (RequestMethod -&gt; Text) -&gt; RequestMethod -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; Text)
-&gt; (RequestMethod -&gt; CI Text) -&gt; RequestMethod -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; CI Text
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(RequestMethod -&gt; ByteString)
-&gt; Either TransformErrorBundle RequestMethod
-&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle RequestMethod
</span><a href="#local-6989586621688103891"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span>      </span><span class="annot"><a href="#local-6989586621688103890"><span class="hs-identifier hs-type">bodyFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>      </span><span id="local-6989586621688103890"><span class="annot"><span class="annottext">bodyFunc :: Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
</span><a href="#local-6989586621688103890"><span class="hs-identifier hs-var hs-var">bodyFunc</span></a></span></span><span> </span><span id="local-6989586621688103889"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688103889"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-509"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103898"><span class="hs-identifier hs-var">reqTransformBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-510"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (ReqTransformCtx -&gt; Either TransformErrorBundle Value))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688103889"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-511"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">RemoveOrTransform
  (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-512"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-type">Transform</span></a></span><span> </span><span id="local-6989586621688103888"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621688103888"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString)
-&gt; (Value -&gt; ByteString) -&gt; Value -&gt; Maybe ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe ByteString)
-&gt; Either TransformErrorBundle Value
-&gt; Either TransformErrorBundle (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621688103888"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>      </span><span class="annot"><a href="#local-6989586621688103886"><span class="hs-identifier hs-type">urlFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-515"></span><span>      </span><span id="local-6989586621688103886"><span class="annot"><span class="annottext">urlFunc :: Text -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621688103886"><span class="hs-identifier hs-var hs-var">urlFunc</span></a></span></span><span> </span><span id="local-6989586621688103885"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103885"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-516"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621688103899"><span class="hs-identifier hs-var">reqTransformRequestURL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-517"></span><span>          </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103885"><span class="hs-identifier hs-var">url</span></a></span><span>
</span><span id="line-518"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103884"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621688103884"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621688103884"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span>      </span><span class="annot"><a href="#local-6989586621688103883"><span class="hs-identifier hs-type">queryFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span>
</span><span id="line-521"></span><span>      </span><span id="local-6989586621688103883"><span class="annot"><span class="annottext">queryFunc :: Query -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621688103883"><span class="hs-identifier hs-var hs-var">queryFunc</span></a></span></span><span> </span><span id="local-6989586621688103882"><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621688103882"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-522"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621688103897"><span class="hs-identifier hs-var">reqTransformQueryParams</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-523"></span><span>          </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Query -&gt; Either TransformErrorBundle Query
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621688103882"><span class="hs-identifier hs-var">query</span></a></span><span>
</span><span id="line-524"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103881"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621688103881"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621688103881"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span>      </span><span class="annot"><a href="#local-6989586621688103880"><span class="hs-identifier hs-type">headerFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span>
</span><span id="line-527"></span><span>      </span><span id="local-6989586621688103880"><span class="annot"><span class="annottext">headerFunc :: [Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621688103880"><span class="hs-identifier hs-var hs-var">headerFunc</span></a></span></span><span> </span><span id="local-6989586621688103879"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621688103879"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-528"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621688103896"><span class="hs-identifier hs-var">reqTransformRequestHeaders</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-529"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621688103879"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-530"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103878"><span class="annot"><span class="annottext">ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="#local-6989586621688103878"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="#local-6989586621688103878"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621688103894"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle ([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle [Header]
-&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621688103879"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-531"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621688103895"><span class="hs-identifier hs-var">reqData</span></a></span><span> </span><span class="annot"><span class="annottext">Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Text Text
-&gt; LensLike (Either TransformErrorBundle) Request Request Text Text
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Text Text
Lens' Request Text
</span><a href="Network.HTTP.Client.Transformable.html#url"><span class="hs-identifier hs-var">HTTP.url</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621688103886"><span class="hs-identifier hs-var">urlFunc</span></a></span><span>
</span><span id="line-532"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle)
  Request
  Request
  (Maybe ByteString)
  (Maybe ByteString)
-&gt; LensLike
     (Either TransformErrorBundle)
     Request
     Request
     (Maybe ByteString)
     (Maybe ByteString)
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle)
  Request
  Request
  (Maybe ByteString)
  (Maybe ByteString)
Lens' Request (Maybe ByteString)
</span><a href="Network.HTTP.Client.Transformable.html#body"><span class="hs-identifier hs-var">HTTP.body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
</span><a href="#local-6989586621688103890"><span class="hs-identifier hs-var">bodyFunc</span></a></span><span>
</span><span id="line-533"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Query Query
-&gt; LensLike
     (Either TransformErrorBundle) Request Request Query Query
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Query Query
Lens' Request Query
</span><a href="Network.HTTP.Client.Transformable.html#queryParams"><span class="hs-identifier hs-var">HTTP.queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Query -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621688103883"><span class="hs-identifier hs-var">queryFunc</span></a></span><span>
</span><span id="line-534"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request ByteString ByteString
-&gt; LensLike
     (Either TransformErrorBundle) Request Request ByteString ByteString
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request ByteString ByteString
Lens' Request ByteString
</span><a href="Network.HTTP.Client.Transformable.html#method"><span class="hs-identifier hs-var">HTTP.method</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621688103893"><span class="hs-identifier hs-var">methodFunc</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
-&gt; LensLike
     (Either TransformErrorBundle) Request Request [Header] [Header]
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
Lens' Request [Header]
</span><a href="Network.HTTP.Client.Transformable.html#headers"><span class="hs-identifier hs-var">HTTP.headers</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621688103880"><span class="hs-identifier hs-var">headerFunc</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="hs-comment">-- | At the moment we only transform the body of</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- Responses. 'http-client' does not export the constructors for</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- 'Response'. If we want to transform then we will need additional</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- 'apply' functions.</span><span>
</span><span id="line-541"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier hs-type">applyResponseTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span>
</span><span id="line-542"></span><span id="applyResponseTransform"><span class="annot"><span class="annottext">applyResponseTransform :: ResponseTransform
-&gt; RespTransformCtx -&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier hs-var hs-var">applyResponseTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103873"><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
respTransformBody :: Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
respTransformBody :: ResponseTransform
-&gt; Maybe
     (RemoveOrTransform
        (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103873"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688103872"><span class="annot"><span class="annottext">ctx :: RespTransformCtx
</span><a href="#local-6989586621688103872"><span class="hs-identifier hs-var">ctx</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688103870"><span id="local-6989586621688103871"><span class="annot"><span class="annottext">Value
rtcReqCtx :: Value
rtcBody :: Value
rtcReqCtx :: RespTransformCtx -&gt; Value
rtcBody :: RespTransformCtx -&gt; Value
</span><a href="#local-6989586621688103870"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621688103869"><span class="hs-identifier hs-type">bodyFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span>
</span><span id="line-544"></span><span>      </span><span id="local-6989586621688103869"><span class="annot"><span class="annottext">bodyFunc :: ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621688103869"><span class="hs-identifier hs-var hs-var">bodyFunc</span></a></span></span><span> </span><span id="local-6989586621688103868"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103868"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><a href="#local-6989586621688103873"><span class="hs-identifier hs-var">respTransformBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-546"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (RemoveOrTransform
     (RespTransformCtx -&gt; Either TransformErrorBundle Value))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688103868"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-547"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">RemoveOrTransform
  (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Remove"><span class="hs-identifier hs-var">Remove</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-548"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Transform"><span class="hs-identifier hs-type">Transform</span></a></span><span> </span><span id="local-6989586621688103867"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621688103867"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ByteString)
-&gt; Either TransformErrorBundle Value
-&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RespTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621688103867"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RespTransformCtx
</span><a href="#local-6989586621688103872"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-549"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621688103869"><span class="hs-identifier hs-var">bodyFunc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103871"><span class="hs-identifier hs-var">rtcBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-552"></span><span class="hs-comment">--- Utilities ---</span><span>
</span><span id="line-553"></span><span class="hs-comment">-----------------</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span id="local-6989586621688104710"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#valueToString"><span class="hs-identifier hs-type">valueToString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688104710"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688104710"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">B.ByteString</span></span></span><span>
</span><span id="line-556"></span><span id="valueToString"><span class="annot"><span class="annottext">valueToString :: Value -&gt; m ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#valueToString"><span class="hs-identifier hs-var hs-var">valueToString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-557"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621688103866"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103866"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; m ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; m ByteString) -&gt; ByteString -&gt; m ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103866"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-558"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">J.Number</span></span><span> </span><span id="local-6989586621688103864"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621688103864"><span class="hs-identifier hs-var">num</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; m ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; m ByteString) -&gt; ByteString -&gt; m ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scientific -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621688103864"><span class="hs-identifier hs-var">num</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; m ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;true&quot;</span></span><span>
</span><span id="line-560"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; m ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-561"></span><span>  </span><span id="local-6989586621688103862"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103862"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Value -&gt; m ByteString
forall (m :: * -&gt; *) a.
MonadError TransformErrorBundle m =&gt;
Text -&gt; Maybe Value -&gt; m a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#throwErrorBundle"><span class="hs-identifier hs-var">throwErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Template must produce a String, Number, or Boolean value&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688103862"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span id="local-6989586621688104632"><span id="local-6989586621688104633"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#throwErrorBundle"><span class="hs-identifier hs-type">throwErrorBundle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688104633"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688104633"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688104632"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-564"></span><span id="throwErrorBundle"><span class="annot"><span class="annottext">throwErrorBundle :: Text -&gt; Maybe Value -&gt; m a
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#throwErrorBundle"><span class="hs-identifier hs-var hs-var">throwErrorBundle</span></a></span></span><span> </span><span id="local-6989586621688103860"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103860"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621688103859"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688103859"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-565"></span><span>  </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; m a) -&gt; TransformErrorBundle -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-567"></span><span>      </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-568"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-569"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-570"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103860"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-571"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-572"></span><span>            </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621688103859"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">8</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-type">.=?</span></a></span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span id="local-6989586621688104807"><span id="local-6989586621688104808"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-type">(.=?)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621688104808"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688104807"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688104808"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688104807"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-577"></span><span id=".%3D%3F"><span class="annot"><span class="annottext">.=? :: k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var hs-var">(.=?)</span></a></span></span><span> </span><span class="annot"><span class="annottext">k
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe v
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (k, Value)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-578"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">(.=?)</span></a></span><span> </span><span id="local-6989586621688103857"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621688103857"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688103856"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621688103856"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(k, Value) -&gt; Maybe (k, Value)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621688103857"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621688103856"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span class="hs-comment">-- | Wrap a template with escaped double quotes.</span><span>
</span><span id="line-581"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-type">wrapTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span>
</span><span id="line-582"></span><span id="wrapTemplate"><span class="annot"><span class="annottext">wrapTemplate :: StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var hs-var">wrapTemplate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span id="local-6989586621688103855"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103855"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; StringTemplateText) -&gt; Text -&gt; StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688103855"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-583"></span></pre></body></html>