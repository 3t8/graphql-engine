<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hasura.Backends.Postgres.SQL.IdentifierUniqueness</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">graphql-engine-1.0.0: GraphQL API over Postgres</span><ul class="links" id="page-menu"><li><a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hasura.Backends.Postgres.SQL.IdentifierUniqueness</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">API</a></li><li><a href="#g:2">Data types</a></li><li><a href="#g:3">Utilities</a></li><li><a href="#g:4">Algorithm</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Postgres SQL IdentifierUniqueness</p><p>Bypass the Postgres limitation of truncating identifiers to 63 characters long
 by prepending unique numbers.</p><p>See Postgres docs:
 <a href="https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS">https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS</a></p><p>Also see Note [Postgres identifier length limitations]</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:prefixNumToAliases">prefixNumToAliases</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a></li><li class="src short"><a href="#v:prefixNumToAliasesSelectWith">prefixNumToAliasesSelectWith</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a></li><li class="src short"><a href="#v:runUniq">runUniq</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a -&gt; a</li><li class="src short"><a href="#v:emptyUniqState">emptyUniqState</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:UniqState" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">UniqState</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UniqState">UniqState</a> = <a href="#v:UniqState">UniqState</a> {<ul class="subs"><li><a href="#v:_uqFreshId">_uqFreshId</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li><a href="#v:_uqIdentifierMap">_uqIdentifierMap</a> :: HashMap <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Uniq">Uniq</a> = <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-State-Strict.html#t:State" title="Control.Monad.State.Strict">State</a> <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:UniqState" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">UniqState</a></li><li class="src short"><a href="#v:mkPrefixedName">mkPrefixedName</a> :: <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a></li><li class="src short"><a href="#v:addAlias">addAlias</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:TableAlias" title="Hasura.Backends.Postgres.SQL.DML">TableAlias</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:TableAlias" title="Hasura.Backends.Postgres.SQL.DML">TableAlias</a></li><li class="src short"><a href="#v:getIdentifier">getIdentifier</a> :: <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a></li><li class="src short"><a href="#v:restoringIdentifierMap">restoringIdentifierMap</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a</li><li class="src short"><a href="#v:uSelectWith">uSelectWith</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> (<a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a>)</li><li class="src short"><a href="#v:uSelect">uSelect</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a></li><li class="src short"><a href="#v:uFromExp">uFromExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromExp" title="Hasura.Backends.Postgres.SQL.DML">FromExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromExp" title="Hasura.Backends.Postgres.SQL.DML">FromExp</a></li><li class="src short"><a href="#v:uFromItem">uFromItem</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromItem" title="Hasura.Backends.Postgres.SQL.DML">FromItem</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromItem" title="Hasura.Backends.Postgres.SQL.DML">FromItem</a></li><li class="src short"><a href="#v:uFunctionExp">uFunctionExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionExp" title="Hasura.Backends.Postgres.SQL.DML">FunctionExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionExp" title="Hasura.Backends.Postgres.SQL.DML">FunctionExp</a></li><li class="src short"><a href="#v:uFunctionArgs">uFunctionArgs</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionArgs" title="Hasura.Backends.Postgres.SQL.DML">FunctionArgs</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionArgs" title="Hasura.Backends.Postgres.SQL.DML">FunctionArgs</a></li><li class="src short"><a href="#v:uFunctionAlias">uFunctionAlias</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionAlias" title="Hasura.Backends.Postgres.SQL.DML">FunctionAlias</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionAlias" title="Hasura.Backends.Postgres.SQL.DML">FunctionAlias</a></li><li class="src short"><a href="#v:uJoinExp">uJoinExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinExpr" title="Hasura.Backends.Postgres.SQL.DML">JoinExpr</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinExpr" title="Hasura.Backends.Postgres.SQL.DML">JoinExpr</a></li><li class="src short"><a href="#v:uJoinCond">uJoinCond</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinCond" title="Hasura.Backends.Postgres.SQL.DML">JoinCond</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinCond" title="Hasura.Backends.Postgres.SQL.DML">JoinCond</a></li><li class="src short"><a href="#v:uBoolExp">uBoolExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:BoolExp" title="Hasura.Backends.Postgres.SQL.DML">BoolExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:BoolExp" title="Hasura.Backends.Postgres.SQL.DML">BoolExp</a></li><li class="src short"><a href="#v:uSqlExp">uSqlExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SQLExp" title="Hasura.Backends.Postgres.SQL.DML">SQLExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SQLExp" title="Hasura.Backends.Postgres.SQL.DML">SQLExp</a></li><li class="src short"><a href="#v:uOrderBy">uOrderBy</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:OrderByExp" title="Hasura.Backends.Postgres.SQL.DML">OrderByExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:OrderByExp" title="Hasura.Backends.Postgres.SQL.DML">OrderByExp</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>API</h1></a><div class="top"><p class="src"><a id="v:prefixNumToAliases" class="def">prefixNumToAliases</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#prefixNumToAliases" class="link">Source</a> <a href="#v:prefixNumToAliases" class="selflink">#</a></p><div class="doc"><p>Prefix an Int to all aliases to preserve the uniqueness of identifiers.
 See Note [Postgres identifier length limitations] above.</p></div></div><div class="top"><p class="src"><a id="v:prefixNumToAliasesSelectWith" class="def">prefixNumToAliasesSelectWith</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#prefixNumToAliasesSelectWith" class="link">Source</a> <a href="#v:prefixNumToAliasesSelectWith" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Data types</h1></a><div class="top"><p class="src"><a id="v:runUniq" class="def">runUniq</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a -&gt; a <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#runUniq" class="link">Source</a> <a href="#v:runUniq" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emptyUniqState" class="def">emptyUniqState</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:UniqState" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">UniqState</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#emptyUniqState" class="link">Source</a> <a href="#v:emptyUniqState" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UniqState" class="def">UniqState</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#UniqState" class="link">Source</a> <a href="#t:UniqState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UniqState" class="def">UniqState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_uqFreshId" class="def">_uqFreshId</a> :: <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Used to generate fresh prefix ids</p></div></li><li><dfn class="src"><a id="v:_uqIdentifierMap" class="def">_uqIdentifierMap</a> :: HashMap <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Mapping from an identifier to their prefix id</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Uniq" class="def">Uniq</a> = <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/mtl-2.2.2/Control-Monad-State-Strict.html#t:State" title="Control.Monad.State.Strict">State</a> <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:UniqState" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">UniqState</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#Uniq" class="link">Source</a> <a href="#t:Uniq" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Utilities</h1></a><div class="top"><p class="src"><a id="v:mkPrefixedName" class="def">mkPrefixedName</a> :: <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> -&gt; <a href="file:///root/.ghcup/ghc/8.10.7/share/doc/ghc-8.10.7/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#mkPrefixedName" class="link">Source</a> <a href="#v:mkPrefixedName" class="selflink">#</a></p><div class="doc"><p>attach a prefix id to an identifier</p></div></div><div class="top"><p class="src"><a id="v:addAlias" class="def">addAlias</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:TableAlias" title="Hasura.Backends.Postgres.SQL.DML">TableAlias</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:TableAlias" title="Hasura.Backends.Postgres.SQL.DML">TableAlias</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#addAlias" class="link">Source</a> <a href="#v:addAlias" class="selflink">#</a></p><div class="doc"><p>Return a prefixed alias by:
   1. Generating a fresh prefix id for the alias' identifier
   2. Adding the identifier + id to the identifier mapping</p></div></div><div class="top"><p class="src"><a id="v:getIdentifier" class="def">getIdentifier</a> :: <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-Types.html#t:Identifier" title="Hasura.Backends.Postgres.SQL.Types">Identifier</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#getIdentifier" class="link">Source</a> <a href="#v:getIdentifier" class="selflink">#</a></p><div class="doc"><p>Search for the identifier in the identifier mapping and return
   a prefixed identifier if found, or the original identifier
   if not found in the identifier map.</p></div></div><div class="top"><p class="src"><a id="v:restoringIdentifierMap" class="def">restoringIdentifierMap</a> :: <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> a <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#restoringIdentifierMap" class="link">Source</a> <a href="#v:restoringIdentifierMap" class="selflink">#</a></p><div class="doc"><p>Run an action that might change the identifier mapping
   and discard the changes made to the identifier map.</p></div></div><a href="#g:4" id="g:4"><h1>Algorithm</h1></a><div class="top"><p class="src"><a id="v:uSelectWith" class="def">uSelectWith</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> (<a href="Hasura-Backends-Postgres-SQL-DML.html#t:SelectWithG" title="Hasura.Backends.Postgres.SQL.DML">SelectWithG</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a>) <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uSelectWith" class="link">Source</a> <a href="#v:uSelectWith" class="selflink">#</a></p><div class="doc"><p>We run the algorithm on each CTE separately and discard the identifier mapping,
   then we run the algorithm on the main select and return that result
   (with the identifier mapping generated from that).</p></div></div><div class="top"><p class="src"><a id="v:uSelect" class="def">uSelect</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:Select" title="Hasura.Backends.Postgres.SQL.DML">Select</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uSelect" class="link">Source</a> <a href="#v:uSelect" class="selflink">#</a></p><div class="doc"><p>We go in order of each component in the select, starting with
   the from and CTE clauses (as those introduce new names).
   We return a transformed <code>Select</code> (with the identifier map in the <code><a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a></code> state).</p><p>We transform the table names but not column names.</p></div></div><div class="top"><p class="src"><a id="v:uFromExp" class="def">uFromExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromExp" title="Hasura.Backends.Postgres.SQL.DML">FromExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromExp" title="Hasura.Backends.Postgres.SQL.DML">FromExp</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uFromExp" class="link">Source</a> <a href="#v:uFromExp" class="selflink">#</a></p><div class="doc"><p>Transform every <code>from_item</code>.
   Potentially introduces a new alias.</p></div></div><div class="top"><p class="src"><a id="v:uFromItem" class="def">uFromItem</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromItem" title="Hasura.Backends.Postgres.SQL.DML">FromItem</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FromItem" title="Hasura.Backends.Postgres.SQL.DML">FromItem</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uFromItem" class="link">Source</a> <a href="#v:uFromItem" class="selflink">#</a></p><div class="doc"><p>Transform a single <code>from_item</code>.
   Potentially introduces a new alias.</p></div></div><div class="top"><p class="src"><a id="v:uFunctionExp" class="def">uFunctionExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionExp" title="Hasura.Backends.Postgres.SQL.DML">FunctionExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionExp" title="Hasura.Backends.Postgres.SQL.DML">FunctionExp</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uFunctionExp" class="link">Source</a> <a href="#v:uFunctionExp" class="selflink">#</a></p><div class="doc"><p>Transform a function call expression.</p></div></div><div class="top"><p class="src"><a id="v:uFunctionArgs" class="def">uFunctionArgs</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionArgs" title="Hasura.Backends.Postgres.SQL.DML">FunctionArgs</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionArgs" title="Hasura.Backends.Postgres.SQL.DML">FunctionArgs</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uFunctionArgs" class="link">Source</a> <a href="#v:uFunctionArgs" class="selflink">#</a></p><div class="doc"><p>Transform function call arguments.</p></div></div><div class="top"><p class="src"><a id="v:uFunctionAlias" class="def">uFunctionAlias</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionAlias" title="Hasura.Backends.Postgres.SQL.DML">FunctionAlias</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:FunctionAlias" title="Hasura.Backends.Postgres.SQL.DML">FunctionAlias</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uFunctionAlias" class="link">Source</a> <a href="#v:uFunctionAlias" class="selflink">#</a></p><div class="doc"><p>Transform a function call alias.</p></div></div><div class="top"><p class="src"><a id="v:uJoinExp" class="def">uJoinExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinExpr" title="Hasura.Backends.Postgres.SQL.DML">JoinExpr</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinExpr" title="Hasura.Backends.Postgres.SQL.DML">JoinExpr</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uJoinExp" class="link">Source</a> <a href="#v:uJoinExp" class="selflink">#</a></p><div class="doc"><p>Transform join expressions.
   Potentially introduces a new alias.</p></div></div><div class="top"><p class="src"><a id="v:uJoinCond" class="def">uJoinCond</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinCond" title="Hasura.Backends.Postgres.SQL.DML">JoinCond</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:JoinCond" title="Hasura.Backends.Postgres.SQL.DML">JoinCond</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uJoinCond" class="link">Source</a> <a href="#v:uJoinCond" class="selflink">#</a></p><div class="doc"><p>Transform Join condition. <code>ON</code> join condition might contain references
   to table names and aliases.</p></div></div><div class="top"><p class="src"><a id="v:uBoolExp" class="def">uBoolExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:BoolExp" title="Hasura.Backends.Postgres.SQL.DML">BoolExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:BoolExp" title="Hasura.Backends.Postgres.SQL.DML">BoolExp</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uBoolExp" class="link">Source</a> <a href="#v:uBoolExp" class="selflink">#</a></p><div class="doc"><p>Transform boolean expression.</p><p>The boolean expression structure does not contain a table name currently,
   So we look for <code>SQLExp</code>s and transform those, as those may contain table
   names and aliases.</p><p>We discard new aliases that might be generated here because we don't
   use them outside of the boolean expression.</p></div></div><div class="top"><p class="src"><a id="v:uSqlExp" class="def">uSqlExp</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SQLExp" title="Hasura.Backends.Postgres.SQL.DML">SQLExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:SQLExp" title="Hasura.Backends.Postgres.SQL.DML">SQLExp</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uSqlExp" class="link">Source</a> <a href="#v:uSqlExp" class="selflink">#</a></p><div class="doc"><p>Transform a SQL expression.
   We look for table names and aliases and rename them if needed.
   SQL expressions do not introduce new table aliases, so we discard
   the new aliases that might be generated here.</p></div></div><div class="top"><p class="src"><a id="v:uOrderBy" class="def">uOrderBy</a> :: <a href="Hasura-Backends-Postgres-SQL-DML.html#t:OrderByExp" title="Hasura.Backends.Postgres.SQL.DML">OrderByExp</a> -&gt; <a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#t:Uniq" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">Uniq</a> <a href="Hasura-Backends-Postgres-SQL-DML.html#t:OrderByExp" title="Hasura.Backends.Postgres.SQL.DML">OrderByExp</a> <a href="src/Hasura.Backends.Postgres.SQL.IdentifierUniqueness.html#uOrderBy" class="link">Source</a> <a href="#v:uOrderBy" class="selflink">#</a></p><div class="doc"><p>Transform order by clauses.
   Since order by does not introduce new aliases we can discard the new names
   that might be added, this is already done by <code><a href="Hasura-Backends-Postgres-SQL-IdentifierUniqueness.html#v:uSqlExp" title="Hasura.Backends.Postgres.SQL.IdentifierUniqueness">uSqlExp</a></code> though.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>