<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Analyse</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier">Analysis</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier">FieldAnalysis</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier">FieldDef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#analyzeGraphqlQuery"><span class="hs-identifier">analyzeGraphqlQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict.InsOrd</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OMap</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">get</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">put</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html"><span class="hs-identifier">Hasura.RQL.Types.RemoteSchema</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#_rsitdDefinition"><span class="hs-identifier">_rsitdDefinition</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier">RemoteSchemaIntrospection</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ExecutableDefinition</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Field</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TypeDefinition</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">-- | Analysis and FieldAnalysis are almost similar, except, Analysis will have a bool field (in future)</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   to indicate whether the GQL query is valid or not</span><span>
</span><span id="line-21"></span><span class="hs-keyword">data</span><span> </span><span id="Analysis"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-var">Analysis</span></a></span></span><span> </span><span id="local-6989586621688141102"><span class="annot"><a href="#local-6989586621688141102"><span class="hs-identifier hs-type">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Analysis"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-var">Analysis</span></a></span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | ordered hashmap from the fields to it's definition and analysis</span><span>
</span><span id="line-23"></span><span>    </span><span id="_aFields"><span class="annot"><span class="annottext">Analysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_aFields"><span class="hs-identifier hs-var hs-var">_aFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InsOrdHashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141102"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-comment">-- | map of all the variables, their type and default value (if there is any)</span><span>
</span><span id="line-25"></span><span>    </span><span id="_aVars"><span class="annot"><span class="annottext">Analysis var -&gt; HashMap FieldName (GType, Maybe (Value Void))
</span><a href="Hasura.GraphQL.Analyse.html#_aVars"><span class="hs-identifier hs-var hs-var">_aVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span id="_aErrs"><span class="annot"><span class="annottext">Analysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_aErrs"><span class="hs-identifier hs-var hs-var">_aErrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140950"><span id="local-6989586621688140952"><span id="local-6989586621688140954"><span class="annot"><span class="annottext">Int -&gt; Analysis var -&gt; ShowS
[Analysis var] -&gt; ShowS
Analysis var -&gt; String
(Int -&gt; Analysis var -&gt; ShowS)
-&gt; (Analysis var -&gt; String)
-&gt; ([Analysis var] -&gt; ShowS)
-&gt; Show (Analysis var)
forall var. Show var =&gt; Int -&gt; Analysis var -&gt; ShowS
forall var. Show var =&gt; [Analysis var] -&gt; ShowS
forall var. Show var =&gt; Analysis var -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Analysis var] -&gt; ShowS
$cshowList :: forall var. Show var =&gt; [Analysis var] -&gt; ShowS
show :: Analysis var -&gt; String
$cshow :: forall var. Show var =&gt; Analysis var -&gt; String
showsPrec :: Int -&gt; Analysis var -&gt; ShowS
$cshowsPrec :: forall var. Show var =&gt; Int -&gt; Analysis var -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">data</span><span> </span><span id="FieldAnalysis"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-var">FieldAnalysis</span></a></span></span><span> </span><span id="local-6989586621688141119"><span class="annot"><a href="#local-6989586621688141119"><span class="hs-identifier hs-type">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FieldAnalysis"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-var">FieldAnalysis</span></a></span></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_fFields"><span class="annot"><span class="annottext">FieldAnalysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_fFields"><span class="hs-identifier hs-var hs-var">_fFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InsOrdHashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141119"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span id="_fVars"><span class="annot"><span class="annottext">FieldAnalysis var -&gt; HashMap FieldName (GType, Maybe (Value var))
</span><a href="Hasura.GraphQL.Analyse.html#_fVars"><span class="hs-identifier hs-var hs-var">_fVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="#local-6989586621688141119"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span id="_fErrs"><span class="annot"><span class="annottext">FieldAnalysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_fErrs"><span class="hs-identifier hs-var hs-var">_fErrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140939"><span id="local-6989586621688140941"><span id="local-6989586621688140943"><span class="annot"><span class="annottext">Int -&gt; FieldAnalysis var -&gt; ShowS
[FieldAnalysis var] -&gt; ShowS
FieldAnalysis var -&gt; String
(Int -&gt; FieldAnalysis var -&gt; ShowS)
-&gt; (FieldAnalysis var -&gt; String)
-&gt; ([FieldAnalysis var] -&gt; ShowS)
-&gt; Show (FieldAnalysis var)
forall var. Show var =&gt; Int -&gt; FieldAnalysis var -&gt; ShowS
forall var. Show var =&gt; [FieldAnalysis var] -&gt; ShowS
forall var. Show var =&gt; FieldAnalysis var -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FieldAnalysis var] -&gt; ShowS
$cshowList :: forall var. Show var =&gt; [FieldAnalysis var] -&gt; ShowS
show :: FieldAnalysis var -&gt; String
$cshow :: forall var. Show var =&gt; FieldAnalysis var -&gt; String
showsPrec :: Int -&gt; FieldAnalysis var -&gt; ShowS
$cshowsPrec :: forall var. Show var =&gt; Int -&gt; FieldAnalysis var -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span id="local-6989586621688140938"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688140932"><span id="local-6989586621688140934"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140938"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>  </span><span id="local-6989586621688140930"><span class="annot"><span class="annottext">mempty :: FieldAnalysis v
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; HashMap FieldName (GType, Maybe (Value v))
-&gt; [Text]
-&gt; FieldAnalysis v
forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value var))
-&gt; [Text]
-&gt; FieldAnalysis var
</span><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-var">FieldAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value v))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span id="local-6989586621688140929"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688140924"><span id="local-6989586621688140926"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140929"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>  </span><span id="local-6989586621688140922"><span class="annot"><span class="annottext">&lt;&gt; :: FieldAnalysis v -&gt; FieldAnalysis v -&gt; FieldAnalysis v
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span id="local-6989586621688140921"><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140921"><span class="hs-identifier hs-var">fa1</span></a></span></span><span> </span><span id="local-6989586621688140920"><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140920"><span class="hs-identifier hs-var">fa2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; HashMap FieldName (GType, Maybe (Value v))
-&gt; [Text]
-&gt; FieldAnalysis v
forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value var))
-&gt; [Text]
-&gt; FieldAnalysis var
</span><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-var">FieldAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
</span><a href="#local-6989586621688140919"><span class="hs-identifier hs-var">unionFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldAnalysis v -&gt; HashMap FieldName (GType, Maybe (Value v))
forall var.
FieldAnalysis var -&gt; HashMap FieldName (GType, Maybe (Value var))
</span><a href="Hasura.GraphQL.Analyse.html#_fVars"><span class="hs-identifier hs-var hs-var">_fVars</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140921"><span class="hs-identifier hs-var">fa1</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value v))
-&gt; HashMap FieldName (GType, Maybe (Value v))
-&gt; HashMap FieldName (GType, Maybe (Value v))
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v -&gt; HashMap FieldName (GType, Maybe (Value v))
forall var.
FieldAnalysis var -&gt; HashMap FieldName (GType, Maybe (Value var))
</span><a href="Hasura.GraphQL.Analyse.html#_fVars"><span class="hs-identifier hs-var hs-var">_fVars</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140920"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldAnalysis v -&gt; [Text]
forall var. FieldAnalysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_fErrs"><span class="hs-identifier hs-var hs-var">_fErrs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140921"><span class="hs-identifier hs-var">fa1</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v -&gt; [Text]
forall var. FieldAnalysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_fErrs"><span class="hs-identifier hs-var hs-var">_fErrs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140920"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-43"></span><span>      </span><span id="local-6989586621688140919"><span class="annot"><span class="annottext">unionFields :: InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
</span><a href="#local-6989586621688140919"><span class="hs-identifier hs-var hs-var">unionFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
 -&gt; (FieldName, (FieldDef, Maybe (FieldAnalysis v)))
 -&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v)))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; [(FieldName, (FieldDef, Maybe (FieldAnalysis v)))]
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; (FieldName, (FieldDef, Maybe (FieldAnalysis v)))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall k a1 a2.
(Eq k, Hashable k, Semigroup a1) =&gt;
InsOrdHashMap k (a2, Maybe a1)
-&gt; (k, (a2, Maybe a1)) -&gt; InsOrdHashMap k (a2, Maybe a1)
</span><a href="Hasura.GraphQL.Analyse.html#safeInsertInFieldMap"><span class="hs-identifier hs-var">safeInsertInFieldMap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldAnalysis v
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall var.
FieldAnalysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_fFields"><span class="hs-identifier hs-var hs-var">_fFields</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140921"><span class="hs-identifier hs-var">fa1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; [(FieldName, (FieldDef, Maybe (FieldAnalysis v)))]
forall k v. InsOrdHashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">OMap.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldAnalysis v
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall var.
FieldAnalysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_fFields"><span class="hs-identifier hs-var hs-var">_fFields</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAnalysis v
</span><a href="#local-6989586621688140920"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span id="local-6989586621688140915"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688140909"><span id="local-6989586621688140911"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140915"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-46"></span><span>  </span><span id="local-6989586621688140908"><span class="annot"><span class="annottext">mempty :: Analysis v
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [Text]
-&gt; Analysis v
forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [Text]
-&gt; Analysis var
</span><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-var">Analysis</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span id="local-6989586621688140907"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688140902"><span id="local-6989586621688140904"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140907"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-49"></span><span>  </span><span id="local-6989586621688140901"><span class="annot"><span class="annottext">&lt;&gt; :: Analysis v -&gt; Analysis v -&gt; Analysis v
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></span></span><span> </span><span id="local-6989586621688140900"><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140900"><span class="hs-identifier hs-var">fa1</span></a></span></span><span> </span><span id="local-6989586621688140899"><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140899"><span class="hs-identifier hs-var">fa2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [Text]
-&gt; Analysis v
forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [Text]
-&gt; Analysis var
</span><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-var">Analysis</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
</span><a href="#local-6989586621688140898"><span class="hs-identifier hs-var">unionFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Analysis v -&gt; HashMap FieldName (GType, Maybe (Value Void))
forall var.
Analysis var -&gt; HashMap FieldName (GType, Maybe (Value Void))
</span><a href="Hasura.GraphQL.Analyse.html#_aVars"><span class="hs-identifier hs-var hs-var">_aVars</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140900"><span class="hs-identifier hs-var">fa1</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Analysis v -&gt; HashMap FieldName (GType, Maybe (Value Void))
forall var.
Analysis var -&gt; HashMap FieldName (GType, Maybe (Value Void))
</span><a href="Hasura.GraphQL.Analyse.html#_aVars"><span class="hs-identifier hs-var hs-var">_aVars</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140899"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Analysis v -&gt; [Text]
forall var. Analysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_aErrs"><span class="hs-identifier hs-var hs-var">_aErrs</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140900"><span class="hs-identifier hs-var">fa1</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Analysis v -&gt; [Text]
forall var. Analysis var -&gt; [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_aErrs"><span class="hs-identifier hs-var hs-var">_aErrs</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140899"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>      </span><span id="local-6989586621688140898"><span class="annot"><span class="annottext">unionFields :: InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
</span><a href="#local-6989586621688140898"><span class="hs-identifier hs-var hs-var">unionFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
 -&gt; (FieldName, (FieldDef, Maybe (FieldAnalysis v)))
 -&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v)))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; [(FieldName, (FieldDef, Maybe (FieldAnalysis v)))]
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; (FieldName, (FieldDef, Maybe (FieldAnalysis v)))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall k a1 a2.
(Eq k, Hashable k, Semigroup a1) =&gt;
InsOrdHashMap k (a2, Maybe a1)
-&gt; (k, (a2, Maybe a1)) -&gt; InsOrdHashMap k (a2, Maybe a1)
</span><a href="Hasura.GraphQL.Analyse.html#safeInsertInFieldMap"><span class="hs-identifier hs-var">safeInsertInFieldMap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Analysis v
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall var.
Analysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_aFields"><span class="hs-identifier hs-var hs-var">_aFields</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140900"><span class="hs-identifier hs-var">fa1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
-&gt; [(FieldName, (FieldDef, Maybe (FieldAnalysis v)))]
forall k v. InsOrdHashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">OMap.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Analysis v
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis v))
forall var.
Analysis var
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_aFields"><span class="hs-identifier hs-var hs-var">_aFields</span></a></span><span> </span><span class="annot"><span class="annottext">Analysis v
</span><a href="#local-6989586621688140899"><span class="hs-identifier hs-var">fa2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- | FieldDef is analogous to `GType` from the `Language.GraphQL.Draft.Syntax` module</span><span>
</span><span id="line-54"></span><span class="hs-keyword">data</span><span> </span><span id="FieldDef"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-var">FieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FieldInfo"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="FieldList"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldList"><span class="hs-identifier hs-var">FieldList</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Nullability</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140890"><span id="local-6989586621688140892"><span id="local-6989586621688140894"><span class="annot"><span class="annottext">Int -&gt; FieldDef -&gt; ShowS
[FieldDef] -&gt; ShowS
FieldDef -&gt; String
(Int -&gt; FieldDef -&gt; ShowS)
-&gt; (FieldDef -&gt; String) -&gt; ([FieldDef] -&gt; ShowS) -&gt; Show FieldDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FieldDef] -&gt; ShowS
$cshowList :: [FieldDef] -&gt; ShowS
show :: FieldDef -&gt; String
$cshow :: FieldDef -&gt; String
showsPrec :: Int -&gt; FieldDef -&gt; ShowS
$cshowsPrec :: Int -&gt; FieldDef -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">type</span><span> </span><span id="FieldName"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldName"><span class="hs-identifier hs-var">FieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">type</span><span> </span><span id="VarName"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#VarName"><span class="hs-identifier hs-var">VarName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- | inserts in field map, if there is already a key, then take a union of the fields inside</span><span>
</span><span id="line-61"></span><span class="hs-comment">--   i.e. for the following graphql query:</span><span>
</span><span id="line-62"></span><span class="hs-comment">--      query MyQuery {</span><span>
</span><span id="line-63"></span><span class="hs-comment">--        test {</span><span>
</span><span id="line-64"></span><span class="hs-comment">--          a</span><span>
</span><span id="line-65"></span><span class="hs-comment">--          b</span><span>
</span><span id="line-66"></span><span class="hs-comment">--        }</span><span>
</span><span id="line-67"></span><span class="hs-comment">--        test {</span><span>
</span><span id="line-68"></span><span class="hs-comment">--          b</span><span>
</span><span id="line-69"></span><span class="hs-comment">--          c</span><span>
</span><span id="line-70"></span><span class="hs-comment">--        }</span><span>
</span><span id="line-71"></span><span class="hs-comment">--      }</span><span>
</span><span id="line-72"></span><span class="hs-comment">--   The final field map of `test` will have a, b and c</span><span>
</span><span id="line-73"></span><span id="local-6989586621688141106"><span id="local-6989586621688141107"><span id="local-6989586621688141109"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#safeInsertInFieldMap"><span class="hs-identifier hs-type">safeInsertInFieldMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621688141109"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621688141109"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621688141107"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">InsOrdHashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621688141109"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688141106"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688141107"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688141109"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688141106"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688141107"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">InsOrdHashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621688141109"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688141106"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621688141107"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-78"></span><span id="safeInsertInFieldMap"><span class="annot"><span class="annottext">safeInsertInFieldMap :: InsOrdHashMap k (a2, Maybe a1)
-&gt; (k, (a2, Maybe a1)) -&gt; InsOrdHashMap k (a2, Maybe a1)
</span><a href="Hasura.GraphQL.Analyse.html#safeInsertInFieldMap"><span class="hs-identifier hs-var hs-var">safeInsertInFieldMap</span></a></span></span><span> </span><span id="local-6989586621688140889"><span class="annot"><span class="annottext">InsOrdHashMap k (a2, Maybe a1)
</span><a href="#local-6989586621688140889"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140888"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621688140888"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140887"><span class="annot"><span class="annottext">(a2, Maybe a1)
</span><a href="#local-6989586621688140887"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><span class="annottext">((a2, Maybe a1) -&gt; (a2, Maybe a1) -&gt; (a2, Maybe a1))
-&gt; k
-&gt; (a2, Maybe a1)
-&gt; InsOrdHashMap k (a2, Maybe a1)
-&gt; InsOrdHashMap k (a2, Maybe a1)
forall k v.
(Eq k, Hashable k) =&gt;
(v -&gt; v -&gt; v) -&gt; k -&gt; v -&gt; InsOrdHashMap k v -&gt; InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.insertWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688140885"><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621688140885"><span class="hs-identifier hs-var">fdef</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140884"><span class="annot"><span class="annottext">Maybe a1
</span><a href="#local-6989586621688140884"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a2
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140883"><span class="annot"><span class="annottext">Maybe a1
</span><a href="#local-6989586621688140883"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621688140885"><span class="hs-identifier hs-var">fdef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe a1
</span><a href="#local-6989586621688140884"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a1 -&gt; Maybe a1 -&gt; Maybe a1
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe a1
</span><a href="#local-6989586621688140883"><span class="hs-identifier hs-var">f2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621688140888"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(a2, Maybe a1)
</span><a href="#local-6989586621688140887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap k (a2, Maybe a1)
</span><a href="#local-6989586621688140889"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#analyzeGraphqlQuery"><span class="hs-identifier hs-type">analyzeGraphqlQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExecutableDefinition</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span id="analyzeGraphqlQuery"><span class="annot"><span class="annottext">analyzeGraphqlQuery :: ExecutableDefinition FieldName
-&gt; RemoteSchemaIntrospection -&gt; Maybe (Analysis FieldName)
</span><a href="Hasura.GraphQL.Analyse.html#analyzeGraphqlQuery"><span class="hs-identifier hs-var hs-var">analyzeGraphqlQuery</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ExecutableDefinitionOperation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.OperationDefinitionTyped</span></span><span> </span><span id="local-6989586621688140880"><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
</span><a href="#local-6989586621688140880"><span class="hs-identifier hs-var">td</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140879"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140879"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688140878"><span class="annot"><span class="annottext">t :: [(OperationType, Selection FragmentSpread FieldName)]
</span><a href="#local-6989586621688140878"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName -&gt; OperationType
forall (frag :: * -&gt; *) var.
TypedOperationDefinition frag var -&gt; OperationType
</span><span class="hs-identifier hs-var hs-var">G._todType</span></span><span> </span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
</span><a href="#local-6989586621688140880"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Selection FragmentSpread FieldName
 -&gt; (OperationType, Selection FragmentSpread FieldName))
-&gt; [Selection FragmentSpread FieldName]
-&gt; [(OperationType, Selection FragmentSpread FieldName)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
-&gt; [Selection FragmentSpread FieldName]
forall (frag :: * -&gt; *) var.
TypedOperationDefinition frag var -&gt; SelectionSet frag var
</span><span class="hs-identifier hs-var hs-var">G._todSelectionSet</span></span><span> </span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
</span><a href="#local-6989586621688140880"><span class="hs-identifier hs-var">td</span></a></span><span>
</span><span id="line-84"></span><span>      </span><span id="local-6989586621688140874"><span class="annot"><span class="annottext">varDefs :: [VariableDefinition]
</span><a href="#local-6989586621688140874"><span class="hs-identifier hs-var hs-var">varDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
-&gt; [VariableDefinition]
forall (frag :: * -&gt; *) var.
TypedOperationDefinition frag var -&gt; [VariableDefinition]
</span><span class="hs-identifier hs-var hs-var">G._todVariableDefinitions</span></span><span> </span><span class="annot"><span class="annottext">TypedOperationDefinition FragmentSpread FieldName
</span><a href="#local-6989586621688140880"><span class="hs-identifier hs-var">td</span></a></span><span>
</span><span id="line-85"></span><span>      </span><span id="local-6989586621688140872"><span class="annot"><span class="annottext">varMap :: HashMap FieldName (GType, Maybe (Value Void))
</span><a href="#local-6989586621688140872"><span class="hs-identifier hs-var hs-var">varMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VariableDefinition
 -&gt; HashMap FieldName (GType, Maybe (Value Void))
 -&gt; HashMap FieldName (GType, Maybe (Value Void)))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [VariableDefinition]
-&gt; HashMap FieldName (GType, Maybe (Value Void))
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="hs-identifier hs-type">G.VariableDefinition</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688140867"><span id="local-6989586621688140868"><span id="local-6989586621688140869"><span class="annot"><span class="annottext">Maybe (Value Void)
FieldName
GType
_vdType :: VariableDefinition -&gt; GType
_vdName :: VariableDefinition -&gt; FieldName
_vdDefaultValue :: VariableDefinition -&gt; Maybe (Value Void)
_vdDefaultValue :: Maybe (Value Void)
_vdType :: GType
_vdName :: FieldName
</span><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688140863"><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
</span><a href="#local-6989586621688140863"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; (GType, Maybe (Value Void))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140869"><span class="hs-identifier hs-var">_vdName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140868"><span class="hs-identifier hs-var">_vdType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Value Void)
</span><a href="#local-6989586621688140867"><span class="hs-identifier hs-var">_vdDefaultValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
</span><a href="#local-6989586621688140863"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">[VariableDefinition]
</span><a href="#local-6989586621688140874"><span class="hs-identifier hs-var">varDefs</span></a></span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621688140861"><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis FieldName))
</span><a href="#local-6989586621688140861"><span class="hs-identifier hs-var">fieldMap</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140860"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140860"><span class="hs-identifier hs-var">errs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; [(OperationType, Selection FragmentSpread FieldName)]
-&gt; (InsOrdHashMap
      FieldName (FieldDef, Maybe (FieldAnalysis FieldName)),
    [Text])
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; [(OperationType, Selection frag var)]
-&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
    [Text])
</span><a href="Hasura.GraphQL.Analyse.html#getFieldsMap"><span class="hs-identifier hs-var">getFieldsMap</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140879"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[(OperationType, Selection FragmentSpread FieldName)]
</span><a href="#local-6989586621688140878"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><span class="annottext">Analysis FieldName -&gt; Maybe (Analysis FieldName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Analysis :: forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value Void))
-&gt; [Text]
-&gt; Analysis var
</span><a href="Hasura.GraphQL.Analyse.html#Analysis"><span class="hs-identifier hs-type">Analysis</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_aFields :: InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis FieldName))
</span><a href="Hasura.GraphQL.Analyse.html#_aFields"><span class="hs-identifier hs-var">_aFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis FieldName))
</span><a href="#local-6989586621688140861"><span class="hs-identifier hs-var">fieldMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_aVars :: HashMap FieldName (GType, Maybe (Value Void))
</span><a href="Hasura.GraphQL.Analyse.html#_aVars"><span class="hs-identifier hs-var">_aVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value Void))
</span><a href="#local-6989586621688140872"><span class="hs-identifier hs-var">varMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_aErrs :: [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_aErrs"><span class="hs-identifier hs-var">_aErrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140860"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-88"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#analyzeGraphqlQuery"><span class="hs-identifier hs-var">analyzeGraphqlQuery</span></a></span><span> </span><span class="annot"><span class="annottext">ExecutableDefinition FieldName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Analysis FieldName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621688140857"><span id="local-6989586621688140858"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getFieldName"><span class="hs-identifier hs-type">getFieldName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Field</span></span><span> </span><span class="annot"><a href="#local-6989586621688140858"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140857"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span></span></span><span>
</span><span id="line-91"></span><span id="getFieldName"><span class="annot"><span class="annottext">getFieldName :: Field frag var -&gt; FieldName
</span><a href="Hasura.GraphQL.Analyse.html#getFieldName"><span class="hs-identifier hs-var hs-var">getFieldName</span></a></span></span><span> </span><span id="local-6989586621688140855"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140855"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Maybe FieldName -&gt; FieldName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140855"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; Maybe FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; Maybe FieldName
</span><span class="hs-identifier hs-var hs-var">G._fAlias</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140855"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span id="local-6989586621688141071"><span id="local-6989586621688141072"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getFieldsMap"><span class="hs-identifier hs-type">getFieldsMap</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.OperationType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Selection</span></span><span> </span><span class="annot"><a href="#local-6989586621688141072"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141071"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">InsOrdHashMap</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141071"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-97"></span><span id="getFieldsMap"><span class="annot"><span class="annottext">getFieldsMap :: RemoteSchemaIntrospection
-&gt; [(OperationType, Selection frag var)]
-&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
    [Text])
</span><a href="Hasura.GraphQL.Analyse.html#getFieldsMap"><span class="hs-identifier hs-var hs-var">getFieldsMap</span></a></span></span><span> </span><span id="local-6989586621688140851"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140851"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621688140850"><span class="annot"><span class="annottext">[(OperationType, Selection frag var)]
</span><a href="#local-6989586621688140850"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><span class="annottext">((InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
  [Text])
 -&gt; (OperationType, Field frag var)
 -&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
     [Text]))
-&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
    [Text])
-&gt; [(OperationType, Field frag var)]
-&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
    [Text])
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688140849"><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140849"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140848"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140848"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140847"><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140847"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140846"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140846"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; (OperationType, Field frag var)
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; (OperationType, Field frag var)
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#lookupRoot"><span class="hs-identifier hs-var">lookupRoot</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140851"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140847"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140846"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621688140844"><span class="annot"><span class="annottext">(FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140844"><span class="hs-identifier hs-var">x0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; (FieldName, (FieldDef, Maybe (FieldAnalysis var)))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
forall k a1 a2.
(Eq k, Hashable k, Semigroup a1) =&gt;
InsOrdHashMap k (a2, Maybe a1)
-&gt; (k, (a2, Maybe a1)) -&gt; InsOrdHashMap k (a2, Maybe a1)
</span><a href="Hasura.GraphQL.Analyse.html#safeInsertInFieldMap"><span class="hs-identifier hs-var">safeInsertInFieldMap</span></a></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140849"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><a href="Hasura.GraphQL.Analyse.html#getFieldName"><span class="hs-identifier hs-var">getFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140846"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140844"><span class="hs-identifier hs-var">x0</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140848"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621688140843"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140843"><span class="hs-identifier hs-var">txts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140849"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140848"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140843"><span class="hs-identifier hs-var">txts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
forall k v. InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.empty</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="annottext">[(OperationType, Field frag var)]
</span><a href="#local-6989586621688140841"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>    </span><span id="local-6989586621688140841"><span class="annot"><span class="annottext">fields :: [(OperationType, Field frag var)]
</span><a href="#local-6989586621688140841"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((OperationType, Selection frag var)
 -&gt; Maybe (OperationType, Field frag var))
-&gt; [(OperationType, Selection frag var)]
-&gt; [(OperationType, Field frag var)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688140839"><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140839"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140838"><span class="annot"><span class="annottext">Selection frag var
</span><a href="#local-6989586621688140838"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140839"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Field frag var -&gt; (OperationType, Field frag var))
-&gt; Maybe (Field frag var) -&gt; Maybe (OperationType, Field frag var)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Selection frag var -&gt; Maybe (Field frag var)
forall (frag :: * -&gt; *) var.
Selection frag var -&gt; Maybe (Field frag var)
</span><a href="Hasura.GraphQL.Analyse.html#field"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">Selection frag var
</span><a href="#local-6989586621688140838"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(OperationType, Selection frag var)]
</span><a href="#local-6989586621688140850"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="local-6989586621688141057"><span id="local-6989586621688141058"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#lookupRoot"><span class="hs-identifier hs-type">lookupRoot</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.OperationType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621688141058"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141057"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141057"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-112"></span><span id="lookupRoot"><span class="annot"><span class="annottext">lookupRoot :: RemoteSchemaIntrospection
-&gt; (OperationType, Field frag var)
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#lookupRoot"><span class="hs-identifier hs-var hs-var">lookupRoot</span></a></span></span><span> </span><span id="local-6989586621688140836"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140836"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140835"><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140835"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140834"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140834"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688140833"><span class="annot"><span class="annottext">rootFieldName :: FieldName
</span><a href="#local-6989586621688140833"><span class="hs-identifier hs-var hs-var">rootFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OperationType -&gt; FieldName
</span><a href="Hasura.GraphQL.Analyse.html#getRootFieldNameFromOpType"><span class="hs-identifier hs-var">getRootFieldNameFromOpType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><a href="#local-6989586621688140835"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span id="local-6989586621688140831"><span class="annot"><span class="annottext">fieldName :: FieldName
</span><a href="#local-6989586621688140831"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140834"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span id="local-6989586621688140830"><span class="annot"><span class="annottext">fieldTypeM :: Maybe GType
</span><a href="#local-6989586621688140830"><span class="hs-identifier hs-var hs-var">fieldTypeM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-116"></span><span>        </span><span id="local-6989586621688140829"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140829"><span class="hs-identifier hs-var">operationDefinitionSum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; FieldName
-&gt; Maybe
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupRS"><span class="hs-identifier hs-var">lookupRS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140836"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140833"><span class="hs-identifier hs-var">rootFieldName</span></a></span><span>
</span><span id="line-117"></span><span>        </span><span id="local-6989586621688140827"><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140827"><span class="hs-identifier hs-var">operationDefinitionObject</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
forall possibleTypes inputType.
TypeDefinition possibleTypes inputType
-&gt; Maybe (ObjectTypeDefinition inputType)
</span><a href="Hasura.GraphQL.Analyse.html#asObjectTypeDefinition"><span class="hs-identifier hs-var">asObjectTypeDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140829"><span class="hs-identifier hs-var">operationDefinitionSum</span></a></span><span>
</span><span id="line-118"></span><span>        </span><span id="local-6989586621688140825"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140825"><span class="hs-identifier hs-var">fieldDefinition</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Bool)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName -&gt; FieldName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140831"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldName -&gt; Bool)
-&gt; (FieldDefinition RemoteSchemaInputValueDefinition -&gt; FieldName)
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; FieldName
forall inputType. FieldDefinition inputType -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([FieldDefinition RemoteSchemaInputValueDefinition]
 -&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition))
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
forall inputType.
ObjectTypeDefinition inputType -&gt; [FieldDefinition inputType]
</span><span class="hs-identifier hs-var hs-var">G._otdFieldsDefinition</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140827"><span class="hs-identifier hs-var">operationDefinitionObject</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><span class="annottext">GType -&gt; Maybe GType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(GType -&gt; Maybe GType) -&gt; GType -&gt; Maybe GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140825"><span class="hs-identifier hs-var">fieldDefinition</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe GType
</span><a href="#local-6989586621688140830"><span class="hs-identifier hs-var">fieldTypeM</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">Maybe GType
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text])
-&gt; [Text] -&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Couldn't find field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140831"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in root field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140833"><span class="hs-identifier hs-var">rootFieldName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688140818"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140818"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; GType
-&gt; Field frag var
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; GType
-&gt; Field frag var
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#lookupDefinition"><span class="hs-identifier hs-var">lookupDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140836"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140818"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140834"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span id="local-6989586621688141027"><span id="local-6989586621688141028"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#lookupDefinition"><span class="hs-identifier hs-type">lookupDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621688141028"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141027"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141027"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-130"></span><span id="lookupDefinition"><span class="annot"><span class="annottext">lookupDefinition :: RemoteSchemaIntrospection
-&gt; GType
-&gt; Field frag var
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#lookupDefinition"><span class="hs-identifier hs-var hs-var">lookupDefinition</span></a></span></span><span> </span><span id="local-6989586621688140816"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140816"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621688140815"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140815"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621688140814"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140814"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">GType
-&gt; (FieldName
    -&gt; Either
         (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
          Maybe (FieldAnalysis var))
         [Text])
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall var.
GType
-&gt; (FieldName
    -&gt; Either
         (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
          Maybe (FieldAnalysis var))
         [Text])
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#typeToSchemaM"><span class="hs-identifier hs-var">typeToSchemaM</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140815"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688140812"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140812"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; FieldName
-&gt; Maybe
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupRS"><span class="hs-identifier hs-var">lookupRS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140816"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140812"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text]
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Cannot find type definition for &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140812"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140814"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688140811"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140811"><span class="hs-identifier hs-var">tDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
 Maybe (FieldAnalysis var))
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">((TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
  Maybe (FieldAnalysis var))
 -&gt; Either
      (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
       Maybe (FieldAnalysis var))
      [Text])
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; SelectionSet frag var
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; SelectionSet frag var
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#getDefinition"><span class="hs-identifier hs-var">getDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140816"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140811"><span class="hs-identifier hs-var">tDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; SelectionSet frag var
forall (frag :: * -&gt; *) var.
Field frag var -&gt; SelectionSet frag var
</span><span class="hs-identifier hs-var hs-var">G._fSelectionSet</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140814"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span id="local-6989586621688141051"><span id="local-6989586621688141052"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#field"><span class="hs-identifier hs-type">field</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Selection</span></span><span> </span><span class="annot"><a href="#local-6989586621688141052"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141051"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621688141052"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141051"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-137"></span><span id="field"><span class="annot"><span class="annottext">field :: Selection frag var -&gt; Maybe (Field frag var)
</span><a href="Hasura.GraphQL.Analyse.html#field"><span class="hs-identifier hs-var hs-var">field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionField</span></span><span> </span><span id="local-6989586621688140807"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140807"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Field frag var -&gt; Maybe (Field frag var)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140807"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-138"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#field"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">Selection frag var
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Field frag var)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">7</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#%26%26%26%26"><span class="hs-operator hs-type">&amp;&amp;&amp;&amp;</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span id="local-6989586621688140802"><span id="local-6989586621688140803"><span id="local-6989586621688140804"><span id="local-6989586621688140805"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#%26%26%26%26"><span class="hs-operator hs-type">(&amp;&amp;&amp;&amp;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621688140805"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688140804"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140805"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140803"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688140804"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140805"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140802"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140804"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140805"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688140803"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621688140802"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-143"></span><span id="local-6989586621688140801"><span class="annot"><span class="annottext">t -&gt; f a1
</span><a href="#local-6989586621688140801"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="%26%26%26%26"><span class="annot"><span class="annottext">&amp;&amp;&amp;&amp; :: (t -&gt; f a1) -&gt; (t -&gt; f a2) -&gt; t -&gt; f (a1, a2)
</span><a href="Hasura.GraphQL.Analyse.html#%26%26%26%26"><span class="hs-operator hs-var hs-var">&amp;&amp;&amp;&amp;</span></a></span></span><span> </span><span id="local-6989586621688140800"><span class="annot"><span class="annottext">t -&gt; f a2
</span><a href="#local-6989586621688140800"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688140799"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621688140799"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a1 -&gt; a2 -&gt; (a1, a2)) -&gt; f a1 -&gt; f (a2 -&gt; (a1, a2))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f a1
</span><a href="#local-6989586621688140801"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621688140799"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">f (a2 -&gt; (a1, a2)) -&gt; f a2 -&gt; f (a1, a2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f a2
</span><a href="#local-6989586621688140800"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621688140799"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getRootFieldNameFromOpType"><span class="hs-identifier hs-type">getRootFieldNameFromOpType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.OperationType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span>
</span><span id="line-146"></span><span id="getRootFieldNameFromOpType"><span class="annot"><span class="annottext">getRootFieldNameFromOpType :: OperationType -&gt; FieldName
</span><a href="Hasura.GraphQL.Analyse.html#getRootFieldNameFromOpType"><span class="hs-identifier hs-var hs-var">getRootFieldNameFromOpType</span></a></span></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><span class="hs-identifier hs-var">G.OperationTypeQuery</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;query_root&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getRootFieldNameFromOpType"><span class="hs-identifier hs-var">getRootFieldNameFromOpType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><span class="hs-identifier hs-var">G.OperationTypeMutation</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;mutation_root&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getRootFieldNameFromOpType"><span class="hs-identifier hs-var">getRootFieldNameFromOpType</span></a></span><span> </span><span class="annot"><span class="annottext">OperationType
</span><span class="hs-identifier hs-var">G.OperationTypeSubscription</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;subscription_root&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621688141044"><span id="local-6989586621688141045"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#asObjectTypeDefinition"><span class="hs-identifier hs-type">asObjectTypeDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinition</span></span><span> </span><span class="annot"><a href="#local-6989586621688141045"><span class="hs-identifier hs-type">possibleTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141044"><span class="hs-identifier hs-type">inputType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></span><span> </span><span class="annot"><a href="#local-6989586621688141044"><span class="hs-identifier hs-type">inputType</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-151"></span><span id="asObjectTypeDefinition"><span class="annot"><span class="annottext">asObjectTypeDefinition :: TypeDefinition possibleTypes inputType
-&gt; Maybe (ObjectTypeDefinition inputType)
</span><a href="Hasura.GraphQL.Analyse.html#asObjectTypeDefinition"><span class="hs-identifier hs-var hs-var">asObjectTypeDefinition</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688140791"><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
</span><a href="#local-6989586621688140791"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
-&gt; Maybe (ObjectTypeDefinition inputType)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition inputType
</span><a href="#local-6989586621688140791"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#asObjectTypeDefinition"><span class="hs-identifier hs-var">asObjectTypeDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition possibleTypes inputType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition inputType)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#lookupRS"><span class="hs-identifier hs-type">lookupRS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span id="lookupRS"><span class="annot"><span class="annottext">lookupRS :: RemoteSchemaIntrospection
-&gt; FieldName
-&gt; Maybe
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupRS"><span class="hs-identifier hs-var hs-var">lookupRS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span id="local-6989586621688140790"><span class="annot"><span class="annottext">HashMap
  FieldName
  (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688140790"><span class="hs-identifier hs-var">rsDefs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140789"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140789"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; HashMap
     FieldName
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
-&gt; Maybe
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140789"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  FieldName
  (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621688140790"><span class="hs-identifier hs-var">rsDefs</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621688141024"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#typeToSchemaM"><span class="hs-identifier hs-type">typeToSchemaM</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-158"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141024"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141024"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-161"></span><span id="typeToSchemaM"><span class="annot"><span class="annottext">typeToSchemaM :: GType
-&gt; (FieldName
    -&gt; Either
         (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
          Maybe (FieldAnalysis var))
         [Text])
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#typeToSchemaM"><span class="hs-identifier hs-var hs-var">typeToSchemaM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688140786"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140786"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621688140785"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140785"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140784"><span class="annot"><span class="annottext">FieldName
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
</span><a href="#local-6989586621688140784"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
</span><a href="#local-6989586621688140784"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140785"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621688140783"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140783"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140783"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140782"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140782"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140781"><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140781"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FieldDef, Maybe (FieldAnalysis var))
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; FieldDef
</span><a href="Hasura.GraphQL.Analyse.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140786"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140782"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140781"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#typeToSchemaM"><span class="hs-identifier hs-var">typeToSchemaM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span id="local-6989586621688140779"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140779"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621688140778"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140778"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140777"><span class="annot"><span class="annottext">FieldName
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
</span><a href="#local-6989586621688140777"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GType
-&gt; (FieldName
    -&gt; Either
         (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
          Maybe (FieldAnalysis var))
         [Text])
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall var.
GType
-&gt; (FieldName
    -&gt; Either
         (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
          Maybe (FieldAnalysis var))
         [Text])
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
</span><a href="Hasura.GraphQL.Analyse.html#typeToSchemaM"><span class="hs-identifier hs-var">typeToSchemaM</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140778"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
-&gt; Either
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
      Maybe (FieldAnalysis var))
     [Text]
</span><a href="#local-6989586621688140777"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621688140776"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140776"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140776"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140775"><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621688140775"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140774"><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140774"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FieldDef, Maybe (FieldAnalysis var))
-&gt; Either (FieldDef, Maybe (FieldAnalysis var)) [Text]
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; FieldDef -&gt; FieldDef
</span><a href="Hasura.GraphQL.Analyse.html#FieldList"><span class="hs-identifier hs-var">FieldList</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140779"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621688140775"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140774"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621688141022"><span id="local-6989586621688141023"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getDefinition"><span class="hs-identifier hs-type">getDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.SelectionSet</span></span><span> </span><span class="annot"><a href="#local-6989586621688141023"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141022"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688141022"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-173"></span><span id="getDefinition"><span class="annot"><span class="annottext">getDefinition :: RemoteSchemaIntrospection
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; SelectionSet frag var
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#getDefinition"><span class="hs-identifier hs-var hs-var">getDefinition</span></a></span></span><span> </span><span id="local-6989586621688140773"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140773"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621688140772"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140772"><span class="hs-identifier hs-var">td</span></a></span></span><span> </span><span id="local-6989586621688140771"><span class="annot"><span class="annottext">SelectionSet frag var
</span><a href="#local-6989586621688140771"><span class="hs-identifier hs-var">sels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140772"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldAnalysis var)
 -&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
     Maybe (FieldAnalysis var)))
-&gt; Maybe (FieldAnalysis var)
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140772"><span class="hs-identifier hs-var">td</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeDefinitionObject</span></span><span> </span><span id="local-6989586621688140770"><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140770"><span class="hs-identifier hs-var">otd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-176"></span><span>      </span><span id="local-6989586621688140769"><span class="annot"><span class="annottext">[Maybe (FieldAnalysis var)]
</span><a href="#local-6989586621688140769"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Selection frag var -&gt; Maybe (Maybe (FieldAnalysis var)))
-&gt; SelectionSet frag var -&gt; Maybe [Maybe (FieldAnalysis var)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621688140767"><span class="annot"><span class="annottext">Selection frag var
</span><a href="#local-6989586621688140767"><span class="hs-identifier hs-var">sel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition
 -&gt; Maybe (FieldAnalysis var))
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
-&gt; Maybe (Maybe (FieldAnalysis var))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Selection frag var
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Maybe (FieldAnalysis var)
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; Selection frag var
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Maybe (FieldAnalysis var)
</span><a href="Hasura.GraphQL.Analyse.html#mkFieldAnalysis"><span class="hs-identifier hs-var">mkFieldAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140773"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">Selection frag var
</span><a href="#local-6989586621688140767"><span class="hs-identifier hs-var">sel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Selection frag var
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall (frag0 :: * -&gt; *) var0.
Selection frag0 var0
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupFieldBySelection"><span class="hs-identifier hs-var">lookupFieldBySelection</span></a></span><span> </span><span class="annot"><span class="annottext">Selection frag var
</span><a href="#local-6989586621688140767"><span class="hs-identifier hs-var">sel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
forall inputType.
ObjectTypeDefinition inputType -&gt; [FieldDefinition inputType]
</span><span class="hs-identifier hs-var hs-var">G._otdFieldsDefinition</span></span><span> </span><span class="annot"><span class="annottext">ObjectTypeDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140770"><span class="hs-identifier hs-var">otd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SelectionSet frag var
</span><a href="#local-6989586621688140771"><span class="hs-identifier hs-var">sels</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">FieldAnalysis var -&gt; Maybe (FieldAnalysis var)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldAnalysis var -&gt; Maybe (FieldAnalysis var))
-&gt; FieldAnalysis var -&gt; Maybe (FieldAnalysis var)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[FieldAnalysis var] -&gt; FieldAnalysis var
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">([FieldAnalysis var] -&gt; FieldAnalysis var)
-&gt; [FieldAnalysis var] -&gt; FieldAnalysis var
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (FieldAnalysis var)] -&gt; [FieldAnalysis var]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (FieldAnalysis var)]
</span><a href="#local-6989586621688140769"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span id="local-6989586621688140988"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#itrListWith"><span class="hs-identifier hs-type">itrListWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140988"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688140988"><span class="hs-identifier hs-type">p</span></a></span></span><span>
</span><span id="line-181"></span><span id="itrListWith"><span class="annot"><span class="annottext">itrListWith :: GType -&gt; (FieldName -&gt; p) -&gt; p
</span><a href="Hasura.GraphQL.Analyse.html#itrListWith"><span class="hs-identifier hs-var hs-var">itrListWith</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688140761"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140761"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140760"><span class="annot"><span class="annottext">FieldName -&gt; p
</span><a href="#local-6989586621688140760"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; p
</span><a href="#local-6989586621688140760"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140761"><span class="hs-identifier hs-var">tName</span></a></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#itrListWith"><span class="hs-identifier hs-var">itrListWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688140759"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140759"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140758"><span class="annot"><span class="annottext">FieldName -&gt; p
</span><a href="#local-6989586621688140758"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; (FieldName -&gt; p) -&gt; p
forall p. GType -&gt; (FieldName -&gt; p) -&gt; p
</span><a href="Hasura.GraphQL.Analyse.html#itrListWith"><span class="hs-identifier hs-var">itrListWith</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140759"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; p
</span><a href="#local-6989586621688140758"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span id="local-6989586621688140972"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#getFieldVars"><span class="hs-identifier hs-type">getFieldVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="#local-6989586621688140972"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#VarName"><span class="hs-identifier hs-type">VarName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.Value</span></span><span> </span><span class="annot"><a href="#local-6989586621688140972"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-185"></span><span id="getFieldVars"><span class="annot"><span class="annottext">getFieldVars :: FieldDefinition RemoteSchemaInputValueDefinition
-&gt; HashMap FieldName (Value var)
-&gt; [(FieldName, (GType, Maybe (Value var)))]
</span><a href="Hasura.GraphQL.Analyse.html#getFieldVars"><span class="hs-identifier hs-var hs-var">getFieldVars</span></a></span></span><span> </span><span id="local-6989586621688140756"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140756"><span class="hs-identifier hs-var">fDef'</span></a></span></span><span> </span><span id="local-6989586621688140755"><span class="annot"><span class="annottext">HashMap FieldName (Value var)
</span><a href="#local-6989586621688140755"><span class="hs-identifier hs-var">agMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><span class="annottext">(RemoteSchemaInputValueDefinition
 -&gt; (FieldName, (GType, Maybe (Value var))))
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; [(FieldName, (GType, Maybe (Value var)))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688140754"><span class="annot"><span class="annottext">InputValueDefinition
_rsitdDefinition :: InputValueDefinition
_rsitdDefinition :: RemoteSchemaInputValueDefinition -&gt; InputValueDefinition
</span><a href="#local-6989586621688140754"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688140754"><span class="hs-identifier hs-var">_rsitdDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._ivdType</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688140754"><span class="hs-identifier hs-var">_rsitdDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; HashMap FieldName (Value var) -&gt; Maybe (Value var)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InputValueDefinition -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._ivdName</span></span><span> </span><span class="annot"><span class="annottext">InputValueDefinition
</span><a href="#local-6989586621688140754"><span class="hs-identifier hs-var">_rsitdDefinition</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (Value var)
</span><a href="#local-6989586621688140755"><span class="hs-identifier hs-var">agMap</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; [RemoteSchemaInputValueDefinition]
forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
</span><span class="hs-identifier hs-var hs-var">G._fldArgumentsDefinition</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140756"><span class="hs-identifier hs-var">fDef'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span id="local-6989586621688140994"><span id="local-6989586621688140995"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#mkFieldAnalysis"><span class="hs-identifier hs-type">mkFieldAnalysis</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Selection</span></span><span> </span><span class="annot"><a href="#local-6989586621688140995"><span class="hs-identifier hs-type">frag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140994"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140994"><span class="hs-identifier hs-type">var</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-197"></span><span class="hs-comment">-- TODO: Handle `SelectionFragmentSpread` and `SelectionInlineFragment` as well</span><span>
</span><span id="line-198"></span><span id="mkFieldAnalysis"><span class="annot"><span class="annottext">mkFieldAnalysis :: RemoteSchemaIntrospection
-&gt; Selection frag var
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Maybe (FieldAnalysis var)
</span><a href="Hasura.GraphQL.Analyse.html#mkFieldAnalysis"><span class="hs-identifier hs-var hs-var">mkFieldAnalysis</span></a></span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionFragmentSpread</span></span><span> </span><span class="annot"><span class="annottext">frag var
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-199"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#mkFieldAnalysis"><span class="hs-identifier hs-var">mkFieldAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionInlineFragment</span></span><span> </span><span class="annot"><span class="annottext">InlineFragment frag var
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-200"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#mkFieldAnalysis"><span class="hs-identifier hs-var">mkFieldAnalysis</span></a></span><span> </span><span id="local-6989586621688140748"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140748"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionField</span></span><span> </span><span id="local-6989586621688140747"><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140747"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621688140746"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140746"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688140745"><span class="annot"><span class="annottext">ag :: HashMap FieldName (Value var)
</span><a href="#local-6989586621688140745"><span class="hs-identifier hs-var hs-var">ag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Field frag var -&gt; HashMap FieldName (Value var)
forall (frag :: * -&gt; *) var.
Field frag var -&gt; HashMap FieldName (Value var)
</span><span class="hs-identifier hs-var hs-var">G._fArguments</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140747"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-202"></span><span>      </span><span id="local-6989586621688140743"><span class="annot"><span class="annottext">ft :: GType
</span><a href="#local-6989586621688140743"><span class="hs-identifier hs-var hs-var">ft</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; GType
forall inputType. FieldDefinition inputType -&gt; GType
</span><span class="hs-identifier hs-var hs-var">G._fldType</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140746"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-203"></span><span>      </span><span id="local-6989586621688140742"><span class="annot"><span class="annottext">fn :: FieldName
</span><a href="#local-6989586621688140742"><span class="hs-identifier hs-var hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><a href="Hasura.GraphQL.Analyse.html#getFieldName"><span class="hs-identifier hs-var">getFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140747"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-204"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621688140741"><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140741"><span class="hs-identifier hs-var">fFds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140740"><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value var))
</span><a href="#local-6989586621688140740"><span class="hs-identifier hs-var">fVrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140739"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140739"><span class="hs-identifier hs-var">fErrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType
-&gt; (FieldName
    -&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
        HashMap FieldName (GType, Maybe (Value var)), [Text]))
-&gt; (InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var)),
    HashMap FieldName (GType, Maybe (Value var)), [Text])
forall p. GType -&gt; (FieldName -&gt; p) -&gt; p
</span><a href="Hasura.GraphQL.Analyse.html#itrListWith"><span class="hs-identifier hs-var">itrListWith</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140743"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688140738"><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140738"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; FieldName
-&gt; Maybe
     (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupRS"><span class="hs-identifier hs-var">lookupRS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140748"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140738"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>          </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value var))
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Couldn't find definition for type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140738"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in field &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140742"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; selected by &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140747"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688140737"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140737"><span class="hs-identifier hs-var">tDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688140736"><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140736"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688140735"><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140735"><span class="hs-identifier hs-var">fAn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; SelectionSet frag var
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
forall (frag :: * -&gt; *) var.
RemoteSchemaIntrospection
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; SelectionSet frag var
-&gt; (TypeDefinition [FieldName] RemoteSchemaInputValueDefinition,
    Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#getDefinition"><span class="hs-identifier hs-var">getDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621688140748"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140737"><span class="hs-identifier hs-var">tDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Field frag var -&gt; SelectionSet frag var
forall (frag :: * -&gt; *) var.
Field frag var -&gt; SelectionSet frag var
</span><span class="hs-identifier hs-var hs-var">G._fSelectionSet</span></span><span> </span><span class="annot"><span class="annottext">Field frag var
</span><a href="#local-6989586621688140747"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621688140743"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-210"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">G.TypeNamed</span></span><span> </span><span id="local-6989586621688140734"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140734"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-211"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
-&gt; (FieldDef, Maybe (FieldAnalysis var))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
forall k v. Hashable k =&gt; k -&gt; v -&gt; InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.singleton</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140742"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; FieldDef
</span><a href="Hasura.GraphQL.Analyse.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140734"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140736"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140735"><span class="hs-identifier hs-var">fAn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(FieldName, (GType, Maybe (Value var)))]
-&gt; HashMap FieldName (GType, Maybe (Value var))
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; HashMap FieldName (Value var)
-&gt; [(FieldName, (GType, Maybe (Value var)))]
forall var.
FieldDefinition RemoteSchemaInputValueDefinition
-&gt; HashMap FieldName (Value var)
-&gt; [(FieldName, (GType, Maybe (Value var)))]
</span><a href="Hasura.GraphQL.Analyse.html#getFieldVars"><span class="hs-identifier hs-var">getFieldVars</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140746"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (Value var)
</span><a href="#local-6989586621688140745"><span class="hs-identifier hs-var">ag</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">G.TypeList</span></span><span> </span><span id="local-6989586621688140731"><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140731"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span class="annot"><span class="annottext">GType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-213"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldName
-&gt; (FieldDef, Maybe (FieldAnalysis var))
-&gt; InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
forall k v. Hashable k =&gt; k -&gt; v -&gt; InsOrdHashMap k v
</span><span class="hs-identifier hs-var">OMap.singleton</span></span><span> </span><span class="annot"><span class="annottext">FieldName
</span><a href="#local-6989586621688140742"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nullability -&gt; FieldDef -&gt; FieldDef
</span><a href="Hasura.GraphQL.Analyse.html#FieldList"><span class="hs-identifier hs-var">FieldList</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140731"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldDef -&gt; FieldDef) -&gt; FieldDef -&gt; FieldDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nullability
-&gt; TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
-&gt; FieldDef
</span><a href="Hasura.GraphQL.Analyse.html#FieldInfo"><span class="hs-identifier hs-var">FieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Nullability
</span><a href="#local-6989586621688140731"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [FieldName] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140736"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldAnalysis var)
</span><a href="#local-6989586621688140735"><span class="hs-identifier hs-var">fAn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(FieldName, (GType, Maybe (Value var)))]
-&gt; HashMap FieldName (GType, Maybe (Value var))
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
-&gt; HashMap FieldName (Value var)
-&gt; [(FieldName, (GType, Maybe (Value var)))]
forall var.
FieldDefinition RemoteSchemaInputValueDefinition
-&gt; HashMap FieldName (Value var)
-&gt; [(FieldName, (GType, Maybe (Value var)))]
</span><a href="Hasura.GraphQL.Analyse.html#getFieldVars"><span class="hs-identifier hs-var">getFieldVars</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140746"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (Value var)
</span><a href="#local-6989586621688140745"><span class="hs-identifier hs-var">ag</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="annottext">FieldAnalysis var -&gt; Maybe (FieldAnalysis var)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">FieldAnalysis :: forall var.
InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
-&gt; HashMap FieldName (GType, Maybe (Value var))
-&gt; [Text]
-&gt; FieldAnalysis var
</span><a href="Hasura.GraphQL.Analyse.html#FieldAnalysis"><span class="hs-identifier hs-type">FieldAnalysis</span></a></span><span>
</span><span id="line-217"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_fFields :: InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="Hasura.GraphQL.Analyse.html#_fFields"><span class="hs-identifier hs-var">_fFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap FieldName (FieldDef, Maybe (FieldAnalysis var))
</span><a href="#local-6989586621688140741"><span class="hs-identifier hs-var">fFds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><span class="annottext">_fVars :: HashMap FieldName (GType, Maybe (Value var))
</span><a href="Hasura.GraphQL.Analyse.html#_fVars"><span class="hs-identifier hs-var">_fVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (GType, Maybe (Value var))
</span><a href="#local-6989586621688140740"><span class="hs-identifier hs-var">fVrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-219"></span><span>        </span><span class="annot"><span class="annottext">_fErrs :: [Text]
</span><a href="Hasura.GraphQL.Analyse.html#_fErrs"><span class="hs-identifier hs-var">_fErrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688140739"><span class="hs-identifier hs-var">fErrs</span></a></span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span id="local-6989586621688140992"><span id="local-6989586621688140993"><span class="annot"><a href="Hasura.GraphQL.Analyse.html#lookupFieldBySelection"><span class="hs-identifier hs-type">lookupFieldBySelection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Selection</span></span><span> </span><span class="annot"><a href="#local-6989586621688140993"><span class="hs-identifier hs-type">frag0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688140992"><span class="hs-identifier hs-type">var0</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.FieldDefinition</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.RemoteSchema.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-223"></span><span id="lookupFieldBySelection"><span class="annot"><span class="annottext">lookupFieldBySelection :: Selection frag0 var0
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.GraphQL.Analyse.html#lookupFieldBySelection"><span class="hs-identifier hs-var hs-var">lookupFieldBySelection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">G.SelectionField</span></span><span> </span><span id="local-6989586621688140730"><span class="annot"><span class="annottext">Field frag0 var0
</span><a href="#local-6989586621688140730"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Bool)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688140729"><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140729"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Field frag0 var0 -&gt; FieldName
forall (frag :: * -&gt; *) var. Field frag var -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fName</span></span><span> </span><span class="annot"><span class="annottext">Field frag0 var0
</span><a href="#local-6989586621688140730"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; FieldName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; FieldName
forall inputType. FieldDefinition inputType -&gt; FieldName
</span><span class="hs-identifier hs-var hs-var">G._fldName</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621688140729"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-224"></span><span class="annot"><a href="Hasura.GraphQL.Analyse.html#lookupFieldBySelection"><span class="hs-identifier hs-var">lookupFieldBySelection</span></a></span><span> </span><span class="annot"><span class="annottext">Selection frag0 var0
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-225"></span></pre></body></html>