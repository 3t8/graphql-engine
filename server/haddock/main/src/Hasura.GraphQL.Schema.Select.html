<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- | Generate table selection schema both for ordinary Hasura-type and</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- relay-type queries.  All schema with &quot;relay&quot; or &quot;connection&quot; in the name is</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- used exclusively by relay.</span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Schema.Select</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTable"><span class="hs-identifier">selectTable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier">selectTableByPk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableAggregate"><span class="hs-identifier">selectTableAggregate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier">selectTableConnection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunction"><span class="hs-identifier">selectFunction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionAggregate"><span class="hs-identifier">selectFunctionAggregate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionConnection"><span class="hs-identifier">selectFunctionConnection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#computedFieldPG"><span class="hs-identifier">computedFieldPG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier">remoteRelationshipField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier">defaultTableArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier">tableWhereArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier">tableOrderByArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier">tableDistinctArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier">tableLimitArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier">tableOffsetArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier">tablePermissionsInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier">tableSelectionSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier">tableSelectionList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nodePG"><span class="hs-identifier">nodePG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nodeField"><span class="hs-identifier">nodeField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">where</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">index</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Extended.html"><span class="hs-identifier">Data.Aeson.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Internal</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">align</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Has</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.HashMap.Strict.Extended.html"><span class="hs-identifier">Data.HashMap.Strict.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Parser.JSONPath.html"><span class="hs-identifier">Data.Parser.JSONPath</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Sequence.NonEmpty.html"><span class="hs-identifier">Data.Sequence.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NESeq</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.These</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">partitionThese</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mapAccumL</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html"><span class="hs-identifier">Hasura.Backends.Postgres.SQL.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PG</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Execute.Types.html"><span class="hs-identifier">Hasura.GraphQL.Execute.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ET</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier">FieldParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier">InputFieldsParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Kind"><span class="hs-identifier">Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier">UnpreparedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#mkParameter"><span class="hs-identifier">mkParameter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Class</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier">MonadParse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseErrorWith"><span class="hs-identifier">parseErrorWith</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#withPath"><span class="hs-identifier">withPath</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadSchema"><span class="hs-identifier">MonadSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadTableInfo"><span class="hs-identifier">MonadTableInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier">parseError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Internal.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Backend</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.BoolExp.html"><span class="hs-identifier">Hasura.GraphQL.Schema.BoolExp</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Common</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.OrderBy.html"><span class="hs-identifier">Hasura.GraphQL.Schema.OrderBy</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html"><span class="hs-identifier">Hasura.GraphQL.Schema.RemoteRelationship</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Table.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Table</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.html"><span class="hs-identifier">Hasura.RQL.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.html"><span class="hs-identifier">Hasura.RQL.Types</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html"><span class="hs-identifier">Hasura.SQL.AnyBackend</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AB</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html"><span class="hs-identifier">Hasura.Server.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier">executeJSONPath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- Top-level functions.</span><span>
</span><span id="line-83"></span><span class="hs-comment">--</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- Those functions implement parsers for top-level components of the schema,</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- such as querying a table or a function. They are typically used to implement</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- root fields.</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">-- | Simple table selection.</span><span>
</span><span id="line-89"></span><span class="hs-comment">--</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- The field for the table accepts table selection arguments, and</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- expects a selection of fields</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- &gt; table_name(limit: 10) {</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- &gt;   col1: col1_type</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- &gt;   col2: col2_type</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- &gt; }: [table!]!</span><span>
</span><span id="line-97"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTable"><span class="hs-identifier hs-type">selectTable</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151720"><span class="annot"><a href="#local-6989586621688151720"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151719"><span class="annot"><a href="#local-6989586621688151719"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151718"><span class="annot"><a href="#local-6989586621688151718"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151717"><span class="annot"><a href="#local-6989586621688151717"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151720"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151719"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151718"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151717"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151720"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="#local-6989586621688151718"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151717"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151720"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span id="selectTable"><span class="annot"><span class="annottext">selectTable :: SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTable"><span class="hs-identifier hs-var hs-var">selectTable</span></a></span></span><span> </span><span id="local-6989586621688151485"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151485"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151484"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151484"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621688151483"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151483"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688151482"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151482"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (SelectExp b))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621688151480"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151480"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151484"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621688151477"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151477"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151485"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151484"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (SelectExp b))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (SelectExp b))
-&gt; m (FieldParser n (SelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTable</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151485"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151474"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151483"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>    </span><span id="local-6989586621688151473"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151473"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-113"></span><span>    </span><span id="local-6989586621688151468"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151468"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151485"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151484"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser
     n (SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151483"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151482"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151468"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151477"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n (SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
-&gt; ((SelectArgsG b (UnpreparedValue b), AnnotatedFields b)
    -&gt; SelectExp b)
-&gt; FieldParser n (SelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688151464"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151464"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151463"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151463"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>          </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-118"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: AnnotatedFields b
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151463"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>              </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151474"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>              </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151480"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>              </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151464"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>              </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151473"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-123"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621688151474"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151474"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151484"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- | Simple table connection selection.</span><span>
</span><span id="line-128"></span><span class="hs-comment">--</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- The field for the table accepts table connection selection argument, and</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- expects a selection of connection fields</span><span>
</span><span id="line-131"></span><span class="hs-comment">--</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- &gt; table_name_connection(first: 1) {</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- &gt;   pageInfo: {</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- &gt;     hasNextPage: Boolean!</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- &gt;     endCursor: String!</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- &gt;   }</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- &gt;   edges: {</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- &gt;     cursor: String!</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- &gt;     node: {</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- &gt;       id: ID!</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- &gt;       col1: col1_type</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- &gt;       col2: col2_type</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- &gt;     }</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- &gt;   }</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- &gt; }: table_nameConnection!</span><span>
</span><span id="line-146"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-type">selectTableConnection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151703"><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151702"><span class="annot"><a href="#local-6989586621688151702"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151701"><span class="annot"><a href="#local-6989586621688151701"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151700"><span class="annot"><a href="#local-6989586621688151700"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151702"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151701"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151700"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-comment">-- | primary key columns</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-158"></span><span>  </span><span class="annot"><a href="#local-6989586621688151701"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151700"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionSelectExp"><span class="hs-identifier hs-type">ConnectionSelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span id="selectTableConnection"><span class="annot"><span class="annottext">selectTableConnection :: SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; PrimaryKeyColumns b
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-var hs-var">selectTableConnection</span></a></span></span><span> </span><span id="local-6989586621688151454"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151454"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151453"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151453"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621688151452"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151452"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688151451"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151451"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688151450"><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151450"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (ConnectionSelectExp b))
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621688151449"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688151449"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XRelay b) -&gt; MaybeT m (XRelay b))
-&gt; Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151703"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621688151446"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151446"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151453"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621688151445"><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151445"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Parser
   'Output
   n
   (Fields
      (ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Parser
      'Output
      n
      (Fields
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; MaybeT
     m
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; MaybeT
     m
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     'Output
     n
     (Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(MaybeT
   m
   (Parser
      'Output
      n
      (Fields
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
 -&gt; MaybeT
      m
      (Parser
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; (m (Maybe
         (Parser
            'Output
            n
            (Fields
               (ConnectionField
                  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
    -&gt; MaybeT
         m
         (Parser
            'Output
            n
            (Fields
               (ConnectionField
                  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; m (Maybe
        (Parser
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe
      (Parser
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
 -&gt; MaybeT
      m
      (Parser
         'Output
         n
         (Fields
            (ConnectionField
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; m (Maybe
        (Parser
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; MaybeT
     m
     (Parser
        'Output
        n
        (Fields
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (Maybe
        (Parser
           'Output
           n
           (Fields
              (ConnectionField
                 b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-var">tableConnectionSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151454"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151453"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (FieldParser n (ConnectionSelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (ConnectionSelectExp b))
 -&gt; MaybeT m (FieldParser n (ConnectionSelectExp b)))
-&gt; m (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (FieldParser n (ConnectionSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (ConnectionSelectExp b))
-&gt; m (FieldParser n (ConnectionSelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTableConnection</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151454"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151441"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151452"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621688151440"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151440"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621688151439"><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs b,
   Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621688151439"><span class="hs-identifier hs-var">selectArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
-&gt; SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
PrimaryKeyColumns b
-&gt; SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-var">tableConnectionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151450"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151454"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151453"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (SelectArgs b,
      Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
      Maybe ConnectionSlice)
-&gt; Parser
     'Output
     n
     (Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; FieldParser
     n
     ((SelectArgs b,
       Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
       Maybe ConnectionSlice),
      Fields
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151452"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151451"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs b,
   Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621688151439"><span class="hs-identifier hs-var">selectArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151445"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-168"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  ((SelectArgs b,
    Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
    Maybe ConnectionSlice),
   Fields
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; (((SelectArgs b,
      Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
      Maybe ConnectionSlice),
     Fields
       (ConnectionField
          b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; ConnectionSelectExp b)
-&gt; FieldParser n (ConnectionSelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688151437"><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151437"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151436"><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151436"><span class="hs-identifier hs-var">split</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151435"><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151435"><span class="hs-identifier hs-var">slice</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151434"><span class="annot"><span class="annottext">Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151434"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-169"></span><span>          </span><span class="annot"><span class="annottext">ConnectionSelect :: forall (b :: BackendType) r v.
XRelay b
-&gt; PrimaryKeyColumns b
-&gt; Maybe (NonEmpty (ConnectionSplit b v))
-&gt; Maybe ConnectionSlice
-&gt; AnnSelectG b r (ConnectionField b r) v
-&gt; ConnectionSelect b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSelect"><span class="hs-identifier hs-type">IR.ConnectionSelect</span></a></span><span>
</span><span id="line-170"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_csXRelay :: XRelay b
</span><a href="Hasura.RQL.IR.Select.html#_csXRelay"><span class="hs-identifier hs-var">IR._csXRelay</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688151449"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>              </span><span class="annot"><span class="annottext">_csPrimaryKeyColumns :: PrimaryKeyColumns b
</span><a href="Hasura.RQL.IR.Select.html#_csPrimaryKeyColumns"><span class="hs-identifier hs-var">IR._csPrimaryKeyColumns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151450"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>              </span><span class="annot"><span class="annottext">_csSplit :: Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#_csSplit"><span class="hs-identifier hs-var">IR._csSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151436"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>              </span><span class="annot"><span class="annottext">_csSlice :: Maybe ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#_csSlice"><span class="hs-identifier hs-var">IR._csSlice</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151435"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>              </span><span class="annot"><span class="annottext">_csSelect :: AnnSelectG
  b
  (RemoteRelationshipField UnpreparedValue)
  (ConnectionField b (RemoteRelationshipField UnpreparedValue))
  (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_csSelect"><span class="hs-identifier hs-var">IR._csSelect</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-175"></span><span>                </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-176"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fields
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151434"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-177"></span><span>                    </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151441"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>                    </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151446"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>                    </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgs b
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151437"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>                    </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151440"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-181"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-182"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621688151441"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151441"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151453"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | Table selection by primary key.</span><span>
</span><span id="line-187"></span><span class="hs-comment">--</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- &gt; table_name(id: 42) {</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- &gt;   col1: col1_type</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- &gt;   col2: col2_type</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- &gt; }: table</span><span>
</span><span id="line-192"></span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- Returns Nothing if there's nothing that can be selected with</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- current permissions or if there are primary keys the user</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- doesn't have select permissions for.</span><span>
</span><span id="line-196"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier hs-type">selectTableByPk</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151427"><span class="annot"><a href="#local-6989586621688151427"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151426"><span class="annot"><a href="#local-6989586621688151426"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151425"><span class="annot"><a href="#local-6989586621688151425"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151424"><span class="annot"><a href="#local-6989586621688151424"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151427"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151426"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151425"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151424"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151427"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><a href="#local-6989586621688151425"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151424"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151427"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span id="selectTableByPk"><span class="annot"><span class="annottext">selectTableByPk :: SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableByPk"><span class="hs-identifier hs-var hs-var">selectTableByPk</span></a></span></span><span> </span><span id="local-6989586621688151423"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151423"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151422"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151422"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621688151421"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151421"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688151420"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151420"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (SelectExp b))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621688151419"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151419"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151422"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621688151418"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688151418"><span class="hs-identifier hs-var">primaryKeys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b))
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b)))
-&gt; Maybe (NESeq (ColumnInfo b)) -&gt; MaybeT m (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b)
forall (b :: BackendType) a1. PrimaryKey b a1 -&gt; NESeq a1
</span><a href="Hasura.RQL.Types.Table.html#_pkColumns"><span class="hs-identifier hs-var hs-var">_pkColumns</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; (TableInfo b -&gt; Maybe (PrimaryKey b (ColumnInfo b)))
-&gt; TableInfo b
-&gt; Maybe (NESeq (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1
-&gt; Maybe (PrimaryKey b primaryKeyColumn1)
</span><a href="Hasura.RQL.Types.Table.html#_tciPrimaryKey"><span class="hs-identifier hs-var hs-var">_tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Maybe (PrimaryKey b (ColumnInfo b)))
-&gt; (TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
-&gt; TableInfo b
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TableInfo b -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; TableInfo b -&gt; Maybe (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151422"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621688151414"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151414"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151423"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151422"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Bool) -&gt; NESeq (ColumnInfo b) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621688151412"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151412"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151412"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Bool
forall k a. (Eq k, Hashable k) =&gt; k -&gt; HashMap k a -&gt; Bool
</span><span class="hs-operator hs-var">`Map.member`</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151419"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688151418"><span class="hs-identifier hs-var">primaryKeys</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (SelectExp b))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (SelectExp b))
-&gt; m (FieldParser n (SelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTableByPk</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151423"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151408"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151421"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621688151407"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151407"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621688151406"><span class="annot"><span class="annottext">InputFieldsParser
  n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
</span><a href="#local-6989586621688151406"><span class="hs-identifier hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">NESeq
  (InputFieldsParser
     n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">(NESeq
   (InputFieldsParser
      n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
 -&gt; InputFieldsParser
      n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (NESeq
        (InputFieldsParser
           n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
-&gt; (ColumnInfo b
    -&gt; m (InputFieldsParser
            n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
-&gt; m (NESeq
        (InputFieldsParser
           n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688151418"><span class="hs-identifier hs-var">primaryKeys</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688151403"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>        </span><span id="local-6989586621688151402"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688151402"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Nullability) -&gt; Bool -&gt; Nullability
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-218"></span><span>          </span><span class="annot"><span class="annottext">AnnBoolExpFld b (UnpreparedValue b)
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall (b :: BackendType) a. a -&gt; GBoolExp b a
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolFld"><span class="hs-identifier hs-var">BoolFld</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld b (UnpreparedValue b)
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
-&gt; [OpExpG b (UnpreparedValue b)]
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall (b :: BackendType) a.
ColumnInfo b -&gt; [OpExpG b a] -&gt; AnnBoolExpFld b a
</span><a href="Hasura.RQL.IR.BoolExp.html#AVColumn"><span class="hs-identifier hs-var">AVColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">([OpExpG b (UnpreparedValue b)]
 -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; [OpExpG b (UnpreparedValue b)])
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OpExpG b (UnpreparedValue b) -&gt; [OpExpG b (UnpreparedValue b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(OpExpG b (UnpreparedValue b) -&gt; [OpExpG b (UnpreparedValue b)])
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; OpExpG b (UnpreparedValue b))
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; [OpExpG b (UnpreparedValue b)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; UnpreparedValue b -&gt; OpExpG b (UnpreparedValue b)
forall (b :: BackendType) a. Bool -&gt; a -&gt; OpExpG b a
</span><a href="Hasura.RQL.IR.BoolExp.html#AEQ"><span class="hs-identifier hs-var">AEQ</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">(UnpreparedValue b -&gt; OpExpG b (UnpreparedValue b))
-&gt; (ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b)
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; OpExpG b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
forall (b :: BackendType).
ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#mkParameter"><span class="hs-identifier hs-var">mkParameter</span></a></span><span>
</span><span id="line-219"></span><span>            </span><span class="annot"><span class="annottext">(ValueWithOrigin (ColumnValue b)
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; InputFieldsParser n (ValueWithOrigin (ColumnValue b))
-&gt; InputFieldsParser
     n (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; InputFieldsParser n (ValueWithOrigin (ColumnValue b))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name -&gt; Maybe Description -&gt; Parser k m a -&gt; InputFieldsParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#field"><span class="hs-identifier hs-var">P.field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151403"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688151402"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser
     n
     (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
      AnnotatedFields b)
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151421"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151420"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
</span><a href="#local-6989586621688151406"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151414"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-222"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  (NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
   AnnotatedFields b)
-&gt; ((NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))),
     AnnotatedFields b)
    -&gt; SelectExp b)
-&gt; FieldParser n (SelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688151391"><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621688151391"><span class="hs-identifier hs-var">boolExpr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151390"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151390"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151389"><span class="annot"><span class="annottext">defaultPerms :: TablePerms b
</span><a href="#local-6989586621688151389"><span class="hs-identifier hs-var hs-var">defaultPerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePerms b
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151419"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-224"></span><span>              </span><span class="hs-comment">-- Do not account permission limit since the result is just a nullable object</span><span>
</span><span id="line-225"></span><span>              </span><span id="local-6989586621688151388"><span class="annot"><span class="annottext">permissions :: TablePerms b
</span><a href="#local-6989586621688151388"><span class="hs-identifier hs-var hs-var">permissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TablePerms b
</span><a href="#local-6989586621688151389"><span class="hs-identifier hs-var">defaultPerms</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_tpLimit :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#_tpLimit"><span class="hs-identifier hs-var">IR._tpLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">}</span><span>
</span><span id="line-226"></span><span>              </span><span id="local-6989586621688151386"><span class="annot"><span class="annottext">whereExpr :: Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621688151386"><span class="hs-identifier hs-var hs-var">whereExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
-&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
 -&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))))
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
-&gt; Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall (b :: BackendType) a. [GBoolExp b a] -&gt; GBoolExp b a
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-var">BoolAnd</span></a></span><span> </span><span class="annot"><span class="annottext">([GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
 -&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; [GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
-&gt; GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
-&gt; [GBoolExp b (AnnBoolExpFld b (UnpreparedValue b))]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NESeq (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621688151391"><span class="hs-identifier hs-var">boolExpr</span></a></span><span>
</span><span id="line-227"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-228"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: AnnotatedFields b
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151390"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-229"></span><span>                  </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151408"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-230"></span><span>                  </span><span class="annot"><span class="annottext">_asnPerm :: TablePerms b
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TablePerms b
</span><a href="#local-6989586621688151388"><span class="hs-identifier hs-var">permissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-231"></span><span>                  </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
forall (backend :: BackendType) v. SelectArgsG backend v
</span><a href="Hasura.RQL.IR.Select.html#noSelectArgs"><span class="hs-identifier hs-var">IR.noSelectArgs</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_saWhere :: Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#_saWhere"><span class="hs-identifier hs-var">IR._saWhere</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GBoolExp b (AnnBoolExpFld b (UnpreparedValue b)))
</span><a href="#local-6989586621688151386"><span class="hs-identifier hs-var">whereExpr</span></a></span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-232"></span><span>                  </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151407"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-233"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621688151408"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151408"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151422"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="hs-comment">-- | Table aggregation selection</span><span>
</span><span id="line-238"></span><span class="hs-comment">--</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- Parser for an aggregation selection of a table.</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- &gt; table_aggregate(limit: 10) {</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- &gt;   aggregate: table_aggregate_fields</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- &gt;   nodes: [table!]!</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- &gt; } :: table_aggregate!</span><span>
</span><span id="line-244"></span><span class="hs-comment">--</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- Returns Nothing if there's nothing that can be selected with</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- current permissions.</span><span>
</span><span id="line-247"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectTableAggregate"><span class="hs-identifier hs-type">selectTableAggregate</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151711"><span class="annot"><a href="#local-6989586621688151711"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151710"><span class="annot"><a href="#local-6989586621688151710"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151709"><span class="annot"><a href="#local-6989586621688151709"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151708"><span class="annot"><a href="#local-6989586621688151708"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151711"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151710"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151709"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151708"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-comment">-- | table info</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151711"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-comment">-- | field display name</span><span>
</span><span id="line-254"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-256"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><a href="#local-6989586621688151709"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151708"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AggSelectExp"><span class="hs-identifier hs-type">AggSelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151711"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span id="selectTableAggregate"><span class="annot"><span class="annottext">selectTableAggregate :: SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableAggregate"><span class="hs-identifier hs-var hs-var">selectTableAggregate</span></a></span></span><span> </span><span id="local-6989586621688151381"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151381"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151380"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621688151379"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151379"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span id="local-6989586621688151378"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151378"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AggSelectExp b))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (FieldParser n (AggSelectExp b))
 -&gt; m (Maybe (FieldParser n (AggSelectExp b))))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621688151377"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151377"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Bool
forall (b :: BackendType). SelPermInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Table.html#spiAllowAgg"><span class="hs-identifier hs-var hs-var">spiAllowAgg</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151377"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621688151375"><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621688151375"><span class="hs-identifier hs-var">xNodesAgg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b))
-&gt; Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XNodesAgg b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XNodesAgg b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#nodesAggExtension"><span class="hs-identifier hs-var">nodesAggExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151711"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621688151373"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151373"><span class="hs-identifier hs-var">nodesParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151381"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (AggSelectExp b))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (FieldParser n (AggSelectExp b))
 -&gt; MaybeT m (FieldParser n (AggSelectExp b)))
-&gt; m (FieldParser n (AggSelectExp b))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b, Name)
-&gt; m (FieldParser n (AggSelectExp b))
-&gt; m (FieldParser n (AggSelectExp b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">selectTableAggregate</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151381"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151372"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151379"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-264"></span><span>    </span><span id="local-6989586621688151371"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151371"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621688151370"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151370"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span id="local-6989586621688151368"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151368"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151381"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621688151367"><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621688151367"><span class="hs-identifier hs-var">aggregateParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-var">tableAggregationFields</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151381"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621688151365"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151365"><span class="hs-identifier hs-var">selectionName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151370"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_aggregate&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151360"><span class="annot"><span class="annottext">aggregationParser :: Parser
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151360"><span class="hs-identifier hs-var hs-var">aggregationParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>          </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   'Output
   n
   (Fields
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Parser
      'Output
      n
      (Fields
         (TableAggregateFieldG
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">(Text
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFExp"><span class="hs-identifier hs-var">IR.TAFExp</span></a></span><span>
</span><span id="line-272"></span><span>              </span><span class="annot"><span class="annottext">(InsOrdHashMap
   Name
   (ParsedSelection
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Fields
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      n
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span>
</span><span id="line-273"></span><span>                </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151365"><span class="hs-identifier hs-var">selectionName</span></a></span><span>
</span><span id="line-274"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregated selection of &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151372"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
-&gt; AnnotatedFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
XNodesAgg b -&gt; AnnFieldsG b r v -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFNodes"><span class="hs-identifier hs-var">IR.TAFNodes</span></a></span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621688151375"><span class="hs-identifier hs-var">xNodesAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser n (AnnotatedFields b)
-&gt; FieldParser
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser n (AnnotatedFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;nodes&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151373"><span class="hs-identifier hs-var">nodesParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-276"></span><span>                  </span><span class="annot"><span class="annottext">AggregateFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
AggregateFields b -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFAgg"><span class="hs-identifier hs-var">IR.TAFAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AggregateFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser n (AggregateFields b)
-&gt; FieldParser
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AggregateFields b)
-&gt; FieldParser n (AggregateFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;aggregate&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621688151367"><span class="hs-identifier hs-var">aggregateParser</span></a></span><span>
</span><span id="line-277"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="annottext">FieldParser n (AggSelectExp b)
-&gt; m (FieldParser n (AggSelectExp b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggSelectExp b)
 -&gt; m (FieldParser n (AggSelectExp b)))
-&gt; FieldParser n (AggSelectExp b)
-&gt; m (FieldParser n (AggSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-279"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; FieldParser
     n
     (SelectArgsG b (UnpreparedValue b),
      Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151379"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151378"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151368"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151360"><span class="hs-identifier hs-var">aggregationParser</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  (SelectArgsG b (UnpreparedValue b),
   Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; ((SelectArgsG b (UnpreparedValue b),
     Fields
       (TableAggregateFieldG
          b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; AggSelectExp b)
-&gt; FieldParser n (AggSelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688151351"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151351"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151350"><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151350"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>          </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151350"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-283"></span><span>              </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151372"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-284"></span><span>              </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151377"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-285"></span><span>              </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151351"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-286"></span><span>              </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151371"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-287"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621688151372"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151372"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151380"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">{- Note [Selectability of tables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The GraphQL specification requires that if the type of a selected field is an
interface, union, or object, then its subselection set must not be empty
(Section 5.3.3).  Since we model database tables by GraphQL objects, this means
that a table can be selected as a GraphQL field only if it has fields that we
can select, such as a column.  It is perfectly fine not to allow any selections
of any columns of the table in the database.  In that case, the table would not
be selectable as a field in GraphQL.

However, this is not the end of the story.  In addition to scalar fields, we
support relationships between tables, so that we may have another table B as a
selected field of this table A.  Then the selectability of A depends on the
selectability of B: if we permit selection a column of B, then, as a
consequence, we permit selection of the relationship from A to B, and hence we
permit selection of A, as there would now be valid GraphQL syntax that selects
A.  In turn, the selectability of B can depend on the selectability of a further
table C, through a relationship from B to C.

Now consider the case of a table A, whose columns themselves are not selectable,
but which has a relationship with itself.  Is A selectable?  In fact, if A has
no further relationships with other tables, or any computed fields, A is not
selectable.  But as soon as any leaf field in the transitive closure of tables
related to A becomes selectable, A itself becomes selectable.

In summary, figuring out the selectability of a table is a mess.  In order to
avoid doing graph theory, for now, we simply pretend that GraphQL did not have
the restriction of only allowing selections of fields of type objects when its
subselection is non-empty.  In practice, this white lie is somewhat unlikely to
cause errors on the client side, for the following reasons:

- Introspection of the GraphQL schema is normally provided to aid development of
  valid GraphQL schemas, and so any errors in the exposed schema can be caught
  at development time: when a developer is building a GraphQL query using schema
  introspection, they will eventually find out that the selection they aim to do
  is not valid GraphQL.  Put differently: exposing a given field through
  introspection is not the same as claiming that there is a valid GraphQL query
  that selects that field.

- We only support tables that have at least one column (since we require primary
  keys), so that the admin role can select every table anyway.
-}</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-comment">-- | Fields of a table</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- &gt; type table{</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- &gt;   # table columns</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- &gt;   column_1: column1_type</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- &gt;   .</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- &gt;   column_n: columnn_type</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- &gt;   # table relationships</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- &gt;   object_relationship: remote_table</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- &gt;   array_relationship: [remote_table!]!</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- &gt;   # computed fields</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- &gt;   computed_field: field_type</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- &gt;   # remote relationships</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- &gt;   remote_field: field_type</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-353"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-type">tableSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151349"><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151348"><span class="annot"><a href="#local-6989586621688151348"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151347"><span class="annot"><a href="#local-6989586621688151347"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151346"><span class="annot"><a href="#local-6989586621688151346"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151348"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151347"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151346"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="annot"><a href="#local-6989586621688151347"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151346"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-type">AnnotatedFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span id="tableSelectionSet"><span class="annot"><span class="annottext">tableSelectionSet :: SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var hs-var">tableSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688151345"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151345"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151344"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (AnnotatedFields b))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621688151343"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151343"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="annot"><span class="annottext">m (Parser 'Output n (AnnotatedFields b))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Output n (AnnotatedFields b))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Parser 'Output n (AnnotatedFields b))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">tableSelectionSet</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151345"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151342"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-362"></span><span>    </span><span id="local-6989586621688151341"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151341"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621688151340"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151340"><span class="hs-identifier hs-var">objectTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151341"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151339"><span class="annot"><span class="annottext">xRelay :: Maybe (XRelay b)
</span><a href="#local-6989586621688151339"><span class="hs-identifier hs-var hs-var">xRelay</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span id="local-6989586621688151338"><span class="annot"><span class="annottext">tableFields :: [FieldInfo b]
</span><a href="#local-6989586621688151338"><span class="hs-identifier hs-var hs-var">tableFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b]
forall k v. HashMap k v -&gt; [v]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">(HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b])
-&gt; HashMap FieldName (FieldInfo b) -&gt; [FieldInfo b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; HashMap FieldName (FieldInfo b)
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; FieldInfoMap field
</span><a href="Hasura.RQL.Types.Table.html#_tciFieldInfoMap"><span class="hs-identifier hs-var hs-var">_tciFieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621688151335"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span id="local-6989586621688151334"><span class="annot"><span class="annottext">tablePkeyColumns :: Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621688151334"><span class="hs-identifier hs-var hs-var">tablePkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b)
forall (b :: BackendType) a1. PrimaryKey b a1 -&gt; NESeq a1
</span><a href="Hasura.RQL.Types.Table.html#_pkColumns"><span class="hs-identifier hs-var hs-var">_pkColumns</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b) -&gt; NESeq (ColumnInfo b))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1
-&gt; Maybe (PrimaryKey b primaryKeyColumn1)
</span><a href="Hasura.RQL.Types.Table.html#_tciPrimaryKey"><span class="hs-identifier hs-var hs-var">_tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621688151335"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span id="local-6989586621688151333"><span class="annot"><span class="annottext">description :: Maybe Description
</span><a href="#local-6989586621688151333"><span class="hs-identifier hs-var hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description)
-&gt; (PGDescription -&gt; Text) -&gt; PGDescription -&gt; Description
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PGDescription -&gt; Text
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#getPGDescription"><span class="hs-identifier hs-var hs-var">PG.getPGDescription</span></a></span><span> </span><span class="annot"><span class="annottext">(PGDescription -&gt; Description)
-&gt; Maybe PGDescription -&gt; Maybe Description
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Maybe PGDescription
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; Maybe PGDescription
</span><a href="Hasura.RQL.Types.Table.html#_tciDescription"><span class="hs-identifier hs-var hs-var">_tciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621688151335"><span class="hs-identifier hs-var">tableCoreInfo</span></a></span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621688151330"><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621688151330"><span class="hs-identifier hs-var">fieldParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-369"></span><span>      </span><span class="annot"><span class="annottext">[[FieldParser n (AnnotatedField b)]]
-&gt; [FieldParser n (AnnotatedField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-370"></span><span>        </span><span class="annot"><span class="annottext">([[FieldParser n (AnnotatedField b)]]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m [[FieldParser n (AnnotatedField b)]]
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[FieldInfo b]
-&gt; (FieldInfo b -&gt; m [FieldParser n (AnnotatedField b)])
-&gt; m [[FieldParser n (AnnotatedField b)]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span>
</span><span id="line-371"></span><span>          </span><span class="annot"><span class="annottext">[FieldInfo b]
</span><a href="#local-6989586621688151338"><span class="hs-identifier hs-var">tableFields</span></a></span><span>
</span><span id="line-372"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
-&gt; TableName b
-&gt; TableInfo b
-&gt; Maybe (NESeq (ColumnInfo b))
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableName b
-&gt; TableInfo b
-&gt; Maybe (PrimaryKeyColumns b)
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
</span><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-var">fieldSelection</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151345"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151342"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621688151334"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-comment">-- We don't check *here* that the subselection set is non-empty,</span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-comment">-- even though the GraphQL specification requires that it is (see</span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-comment">-- Note [Selectability of tables]). However, the GraphQL parser</span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-comment">-- enforces that a selection set, if present, is non-empty; and our</span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-comment">-- parser later verifies that a selection set is present if</span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-comment">-- required, meaning that not having this check here does not allow</span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-comment">-- for the construction of invalid queries.</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621688151327"><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688151327"><span class="hs-identifier hs-var">queryType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; GraphQLQueryType) -&gt; m GraphQLQueryType
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; GraphQLQueryType) -&gt; m GraphQLQueryType)
-&gt; (r -&gt; GraphQLQueryType) -&gt; m GraphQLQueryType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; GraphQLQueryType
</span><a href="Hasura.GraphQL.Schema.Common.html#qcQueryType"><span class="hs-identifier hs-var hs-var">qcQueryType</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; GraphQLQueryType)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; GraphQLQueryType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688151327"><span class="hs-identifier hs-var">queryType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (NESeq (ColumnInfo b))
</span><a href="#local-6989586621688151334"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b)
</span><a href="#local-6989586621688151339"><span class="hs-identifier hs-var">xRelay</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-384"></span><span>      </span><span class="hs-comment">-- A relay table</span><span>
</span><span id="line-385"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="Hasura.GraphQL.Execute.Types.html#QueryRelay"><span class="hs-identifier hs-var">ET.QueryRelay</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151324"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688151324"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151323"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688151323"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151322"><span class="annot"><span class="annottext">nodeIdFieldParser :: FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621688151322"><span class="hs-identifier hs-var hs-var">nodeIdFieldParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-387"></span><span>              </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#identifier"><span class="hs-identifier hs-var">P.identifier</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser n ()
-&gt; AnnotatedField b -&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">XRelay b -&gt; TableName b -&gt; NESeq (ColumnInfo b) -&gt; AnnotatedField b
forall (b :: BackendType) r v.
XRelay b -&gt; TableName b -&gt; PrimaryKeyColumns b -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFNodeId"><span class="hs-identifier hs-var">IR.AFNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688151323"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151342"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688151324"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-388"></span><span>            </span><span id="local-6989586621688151317"><span class="annot"><span class="annottext">allFieldParsers :: [FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621688151317"><span class="hs-identifier hs-var hs-var">allFieldParsers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621688151330"><span class="hs-identifier hs-var">fieldParsers</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621688151322"><span class="hs-identifier hs-var">nodeIdFieldParser</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-389"></span><span>        </span><span id="local-6989586621688151316"><span class="annot"><span class="annottext">Parser
  'Output
  n
  (HashMap
     (TableName b)
     (SourceName, SourceConfig b, SelPermInfo b, NESeq (ColumnInfo b),
      AnnotatedFields b))
</span><a href="#local-6989586621688151316"><span class="hs-identifier hs-var">nodeInterface</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
m (Parser
     'Output
     n
     (HashMap
        (TableName b)
        (SourceName, SourceConfig b, SelPermInfo b, NESeq (ColumnInfo b),
         AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
m (Parser
     'Output
     n
     (HashMap
        (TableName b)
        (SourceName, SourceConfig b, SelPermInfo b, PrimaryKeyColumns b,
         AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#node"><span class="hs-identifier hs-var">node</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151349"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-391"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [Parser
      'Output
      n
      (HashMap
         (TableName b)
         (SourceName, SourceConfig b, SelPermInfo b, NESeq (ColumnInfo b),
          AnnotatedFields b))]
-&gt; Parser
     'Output n (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; [Parser 'Output m b]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetObject"><span class="hs-identifier hs-var">P.selectionSetObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151340"><span class="hs-identifier hs-var">objectTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151333"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621688151317"><span class="hs-identifier hs-var">allFieldParsers</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (HashMap
     (TableName b)
     (SourceName, SourceConfig b, SelPermInfo b, NESeq (ColumnInfo b),
      AnnotatedFields b))
</span><a href="#local-6989586621688151316"><span class="hs-identifier hs-var">nodeInterface</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-392"></span><span>            </span><span class="annot"><span class="annottext">Parser
  'Output n (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
    -&gt; AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AnnotatedField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
-&gt; AnnotatedFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AnnotatedField b
forall (b :: BackendType) r v. Text -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFExpression"><span class="hs-identifier hs-var">IR.AFExpression</span></a></span><span>
</span><span id="line-393"></span><span>      </span><span class="annot"><span class="annottext">(GraphQLQueryType, Maybe (NESeq (ColumnInfo b)), Maybe (XRelay b))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields b)
 -&gt; m (Parser 'Output n (AnnotatedFields b)))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-395"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; [Parser 'Output n Any]
-&gt; Parser
     'Output n (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; [Parser 'Output m b]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetObject"><span class="hs-identifier hs-var">P.selectionSetObject</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151340"><span class="hs-identifier hs-var">objectTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151333"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
</span><a href="#local-6989586621688151330"><span class="hs-identifier hs-var">fieldParsers</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>            </span><span class="annot"><span class="annottext">Parser
  'Output n (InsOrdHashMap Name (ParsedSelection (AnnotatedField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
    -&gt; AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AnnotatedField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AnnotatedField b))
-&gt; AnnotatedFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AnnotatedField b
forall (b :: BackendType) r v. Text -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFExpression"><span class="hs-identifier hs-var">IR.AFExpression</span></a></span><span>
</span><span id="line-397"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-398"></span><span>    </span><span id="local-6989586621688151342"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151342"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-399"></span><span>    </span><span id="local-6989586621688151335"><span class="annot"><span class="annottext">tableCoreInfo :: TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
</span><a href="#local-6989586621688151335"><span class="hs-identifier hs-var hs-var">tableCoreInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151344"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="hs-comment">-- | List of table fields object.</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- Just a @'nonNullableObjectList' wrapper over @'tableSelectionSet'.</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- &gt; table_name: [table!]!</span><span>
</span><span id="line-404"></span><span id="local-6989586621688152284"><span id="local-6989586621688152285"><span id="local-6989586621688152286"><span id="local-6989586621688152287"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-type">tableSelectionList</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-405"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152287"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152286"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152285"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152284"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-406"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152287"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><a href="#local-6989586621688152285"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152284"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-type">AnnotatedFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152287"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-409"></span><span id="tableSelectionList"><span class="annot"><span class="annottext">tableSelectionList :: SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var hs-var">tableSelectionList</span></a></span></span><span> </span><span id="local-6989586621688151312"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151312"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151311"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151311"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields b)
 -&gt; Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var">nonNullableObjectList</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Parser 'Output n (AnnotatedFields b))
 -&gt; Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151312"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151311"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-comment">-- | Converts an output type parser from object_type to [object_type!]!</span><span>
</span><span id="line-413"></span><span id="local-6989586621688151308"><span id="local-6989586621688151309"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-type">nonNullableObjectList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151309"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151308"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151309"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151308"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-414"></span><span id="nonNullableObjectList"><span class="annot"><span class="annottext">nonNullableObjectList :: Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var hs-var">nonNullableObjectList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; (Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; Parser 'Output m a
-&gt; Parser 'Output m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#multiple"><span class="hs-identifier hs-var">P.multiple</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; (Parser 'Output m a -&gt; Parser 'Output m a)
-&gt; Parser 'Output m a
-&gt; Parser 'Output m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output m a -&gt; Parser 'Output m a
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | Connection fields of a table</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- &gt; type tableConnection{</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- &gt;   pageInfo: PageInfo!</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- &gt;   edges: [tableEdge!]!</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-423"></span><span class="hs-comment">--</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- &gt; type PageInfo{</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- &gt;   startCursor: String!</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- &gt;   endCursor: String!</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- &gt;   hasNextPage: Boolean!</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- &gt;   hasPreviousPage: Boolean!</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-430"></span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- &gt; type tableEdge{</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- &gt;   cursor: String!</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- &gt;   node: table!</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-435"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-type">tableConnectionSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688152211"><span class="annot"><a href="#local-6989586621688152211"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688152210"><span class="annot"><a href="#local-6989586621688152210"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688152209"><span class="annot"><a href="#local-6989586621688152209"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688152208"><span class="annot"><a href="#local-6989586621688152208"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-437"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152211"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152210"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152209"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152208"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-438"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152211"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><a href="#local-6989586621688152209"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152208"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionFields"><span class="hs-identifier hs-type">ConnectionFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152211"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span id="tableConnectionSelectionSet"><span class="annot"><span class="annottext">tableConnectionSelectionSet :: SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-var hs-var">tableConnectionSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688151306"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151306"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151305"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151305"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (ConnectionFields b))
-&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-442"></span><span>  </span><span id="local-6989586621688151304"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151304"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151305"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-443"></span><span>  </span><span id="local-6989586621688151303"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151303"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151305"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-444"></span><span>  </span><span id="local-6989586621688151302"><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
</span><a href="#local-6989586621688151302"><span class="hs-identifier hs-var">edgesParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (EdgeFields b)))
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (EdgeFields b)))
 -&gt; MaybeT m (Parser 'Output n (EdgeFields b)))
-&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
</span><a href="#local-6989586621688151301"><span class="hs-identifier hs-var">tableEdgesSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151304"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span>
</span><span id="line-445"></span><span>  </span><span class="annot"><span class="annottext">m (Parser 'Output n (ConnectionFields b))
-&gt; MaybeT m (Parser 'Output n (ConnectionFields b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Output n (ConnectionFields b))
 -&gt; MaybeT m (Parser 'Output n (ConnectionFields b)))
-&gt; m (Parser 'Output n (ConnectionFields b))
-&gt; MaybeT m (Parser 'Output n (ConnectionFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (ConnectionFields b))
-&gt; m (Parser 'Output n (ConnectionFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">tableConnectionSelectionSet</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151306"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151300"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>    </span><span id="local-6989586621688151299"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151299"><span class="hs-identifier hs-var">connectionTypeName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151304"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Connection&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151298"><span class="annot"><span class="annottext">pageInfo :: FieldParser
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151298"><span class="hs-identifier hs-var hs-var">pageInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-448"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n PageInfoFields
-&gt; FieldParser n PageInfoFields
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-449"></span><span>            </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;pageInfo&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>            </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-451"></span><span>            </span><span class="annot"><span class="annottext">Parser 'Output n PageInfoFields
</span><a href="#local-6989586621688151297"><span class="hs-identifier hs-var">pageInfoSelectionSet</span></a></span><span>
</span><span id="line-452"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n PageInfoFields
-&gt; (PageInfoFields
    -&gt; ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     n
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoFields
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
PageInfoFields -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionPageInfo"><span class="hs-identifier hs-var">IR.ConnectionPageInfo</span></a></span><span>
</span><span id="line-453"></span><span>        </span><span id="local-6989586621688151295"><span class="annot"><span class="annottext">edges :: FieldParser
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151295"><span class="hs-identifier hs-var hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-454"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (EdgeFields b)
-&gt; FieldParser n (EdgeFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-455"></span><span>            </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;edges&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>            </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-457"></span><span>            </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
</span><a href="#local-6989586621688151302"><span class="hs-identifier hs-var">edgesParser</span></a></span><span>
</span><span id="line-458"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (EdgeFields b)
-&gt; (EdgeFields b
    -&gt; ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     n
     (ConnectionField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EdgeFields b
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
EdgeFields b r v -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionEdges"><span class="hs-identifier hs-var">IR.ConnectionEdges</span></a></span><span>
</span><span id="line-459"></span><span>        </span><span id="local-6989586621688151293"><span class="annot"><span class="annottext">connectionDescription :: Description
</span><a href="#local-6989586621688151293"><span class="hs-identifier hs-var hs-var">connectionDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;A Relay connection object on &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151300"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-460"></span><span>    </span><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields b)
-&gt; m (Parser 'Output n (ConnectionFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (ConnectionFields b)
 -&gt; m (Parser 'Output n (ConnectionFields b)))
-&gt; Parser 'Output n (ConnectionFields b)
-&gt; m (Parser 'Output n (ConnectionFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-461"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (ConnectionFields b)
 -&gt; Parser 'Output n (ConnectionFields b))
-&gt; Parser 'Output n (ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-462"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      n
      (ConnectionField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (ConnectionField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151299"><span class="hs-identifier hs-var">connectionTypeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688151293"><span class="hs-identifier hs-var">connectionDescription</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151298"><span class="hs-identifier hs-var">pageInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldParser
  n
  (ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151295"><span class="hs-identifier hs-var">edges</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (InsOrdHashMap
     Name
     (ParsedSelection
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; (InsOrdHashMap
      Name
      (ParsedSelection
         (ConnectionField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; ConnectionFields b)
-&gt; Parser 'Output n (ConnectionFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; ConnectionField
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (ConnectionField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; ConnectionFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; ConnectionField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; ConnectionField b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionTypename"><span class="hs-identifier hs-var">IR.ConnectionTypename</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621688151300"><span class="annot"><span class="annottext">tableName :: TableName b
</span><a href="#local-6989586621688151300"><span class="hs-identifier hs-var hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151305"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span>    </span><span class="annot"><a href="#local-6989586621688151297"><span class="hs-identifier hs-type">pageInfoSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152208"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#PageInfoFields"><span class="hs-identifier hs-type">IR.PageInfoFields</span></a></span><span>
</span><span id="line-468"></span><span>    </span><span id="local-6989586621688151297"><span class="annot"><span class="annottext">pageInfoSelectionSet :: Parser 'Output n PageInfoFields
</span><a href="#local-6989586621688151297"><span class="hs-identifier hs-var hs-var">pageInfoSelectionSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-469"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151291"><span class="annot"><span class="annottext">startCursorField :: FieldParser n PageInfoField
</span><a href="#local-6989586621688151291"><span class="hs-identifier hs-var hs-var">startCursorField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-470"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-471"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;startCursor&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-473"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-474"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n () -&gt; PageInfoField -&gt; FieldParser n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoStartCursor"><span class="hs-identifier hs-var">IR.PageInfoStartCursor</span></a></span><span>
</span><span id="line-475"></span><span>          </span><span id="local-6989586621688151288"><span class="annot"><span class="annottext">endCursorField :: FieldParser n PageInfoField
</span><a href="#local-6989586621688151288"><span class="hs-identifier hs-var hs-var">endCursorField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-476"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-477"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;endCursor&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-479"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-480"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n () -&gt; PageInfoField -&gt; FieldParser n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoEndCursor"><span class="hs-identifier hs-var">IR.PageInfoEndCursor</span></a></span><span>
</span><span id="line-481"></span><span>          </span><span id="local-6989586621688151286"><span class="annot"><span class="annottext">hasNextPageField :: FieldParser n PageInfoField
</span><a href="#local-6989586621688151286"><span class="hs-identifier hs-var hs-var">hasNextPageField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-482"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Bool -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-483"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hasNextPage&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-485"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Both n Bool
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-486"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n () -&gt; PageInfoField -&gt; FieldParser n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoHasNextPage"><span class="hs-identifier hs-var">IR.PageInfoHasNextPage</span></a></span><span>
</span><span id="line-487"></span><span>          </span><span id="local-6989586621688151283"><span class="annot"><span class="annottext">hasPreviousPageField :: FieldParser n PageInfoField
</span><a href="#local-6989586621688151283"><span class="hs-identifier hs-var hs-var">hasPreviousPageField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-488"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Bool -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-489"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hasPreviousPage&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-491"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Both n Bool
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-492"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n () -&gt; PageInfoField -&gt; FieldParser n PageInfoField
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoHasPreviousPage"><span class="hs-identifier hs-var">IR.PageInfoHasPreviousPage</span></a></span><span>
</span><span id="line-493"></span><span>          </span><span id="local-6989586621688151281"><span class="annot"><span class="annottext">allFields :: [FieldParser n PageInfoField]
</span><a href="#local-6989586621688151281"><span class="hs-identifier hs-var hs-var">allFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-494"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldParser n PageInfoField
</span><a href="#local-6989586621688151291"><span class="hs-identifier hs-var">startCursorField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-495"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n PageInfoField
</span><a href="#local-6989586621688151288"><span class="hs-identifier hs-var">endCursorField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-496"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n PageInfoField
</span><a href="#local-6989586621688151286"><span class="hs-identifier hs-var">hasNextPageField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-497"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n PageInfoField
</span><a href="#local-6989586621688151283"><span class="hs-identifier hs-var">hasPreviousPageField</span></a></span><span>
</span><span id="line-498"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-499"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Parser 'Output n PageInfoFields -&gt; Parser 'Output n PageInfoFields
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n PageInfoFields
 -&gt; Parser 'Output n PageInfoFields)
-&gt; Parser 'Output n PageInfoFields
-&gt; Parser 'Output n PageInfoFields
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-500"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n PageInfoField]
-&gt; Parser
     'Output n (InsOrdHashMap Name (ParsedSelection PageInfoField))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;PageInfo&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser n PageInfoField]
</span><a href="#local-6989586621688151281"><span class="hs-identifier hs-var">allFields</span></a></span><span>
</span><span id="line-501"></span><span>              </span><span class="annot"><span class="annottext">Parser
  'Output n (InsOrdHashMap Name (ParsedSelection PageInfoField))
-&gt; (InsOrdHashMap Name (ParsedSelection PageInfoField)
    -&gt; PageInfoFields)
-&gt; Parser 'Output n PageInfoFields
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; PageInfoField)
-&gt; InsOrdHashMap Name (ParsedSelection PageInfoField)
-&gt; PageInfoFields
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; PageInfoField
</span><a href="Hasura.RQL.IR.Select.html#PageInfoTypename"><span class="hs-identifier hs-var">IR.PageInfoTypename</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><a href="#local-6989586621688151301"><span class="hs-identifier hs-type">tableEdgesSelectionSet</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-504"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688152209"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152208"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#EdgeFields"><span class="hs-identifier hs-type">EdgeFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152211"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>    </span><span id="local-6989586621688151301"><span class="annot"><span class="annottext">tableEdgesSelectionSet :: Name -&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
</span><a href="#local-6989586621688151301"><span class="hs-identifier hs-var hs-var">tableEdgesSelectionSet</span></a></span></span><span> </span><span id="local-6989586621688151279"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151279"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (Parser 'Output n (EdgeFields b))
-&gt; m (Maybe (Parser 'Output n (EdgeFields b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>      </span><span id="local-6989586621688151278"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151278"><span class="hs-identifier hs-var">edgeNodeParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields b)
 -&gt; Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
-&gt; Maybe (Parser 'Output n (AnnotatedFields b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
-&gt; Parser 'Output n (AnnotatedFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Parser 'Output n (AnnotatedFields b))
 -&gt; Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151306"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151305"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-507"></span><span>      </span><span id="local-6989586621688151277"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151277"><span class="hs-identifier hs-var">edgesType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151279"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Edge&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151276"><span class="annot"><span class="annottext">cursor :: FieldParser
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151276"><span class="hs-identifier hs-var hs-var">cursor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-509"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-510"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;cursor&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-512"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-513"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n ()
-&gt; EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; FieldParser
     n
     (EdgeField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EdgeField
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeCursor"><span class="hs-identifier hs-var">IR.EdgeCursor</span></a></span><span>
</span><span id="line-514"></span><span>          </span><span id="local-6989586621688151274"><span class="annot"><span class="annottext">edgeNode :: FieldParser
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151274"><span class="hs-identifier hs-var hs-var">edgeNode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-515"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser n (AnnotatedFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span>
</span><span id="line-516"></span><span>              </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;node&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>              </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-518"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151278"><span class="hs-identifier hs-var">edgeNodeParser</span></a></span><span>
</span><span id="line-519"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedFields b)
-&gt; (AnnotatedFields b
    -&gt; EdgeField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser
     n
     (EdgeField
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
-&gt; EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. AnnFieldsG b r v -&gt; EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeNode"><span class="hs-identifier hs-var">IR.EdgeNode</span></a></span><span>
</span><span id="line-520"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b)
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (EdgeFields b)
 -&gt; MaybeT m (Parser 'Output n (EdgeFields b)))
-&gt; Parser 'Output n (EdgeFields b)
-&gt; MaybeT m (Parser 'Output n (EdgeFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-521"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Output n (EdgeFields b) -&gt; Parser 'Output n (EdgeFields b)
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Schema.Select.html#nonNullableObjectList"><span class="hs-identifier hs-var">nonNullableObjectList</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (EdgeFields b)
 -&gt; Parser 'Output n (EdgeFields b))
-&gt; Parser 'Output n (EdgeFields b)
-&gt; Parser 'Output n (EdgeFields b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-522"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      n
      (EdgeField
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (EdgeField
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151277"><span class="hs-identifier hs-var">edgesType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151276"><span class="hs-identifier hs-var">cursor</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldParser
  n
  (EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151274"><span class="hs-identifier hs-var">edgeNode</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-523"></span><span>            </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (InsOrdHashMap
     Name
     (ParsedSelection
        (EdgeField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; (InsOrdHashMap
      Name
      (ParsedSelection
         (EdgeField
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; EdgeFields b)
-&gt; Parser 'Output n (EdgeFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; EdgeField
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (EdgeField
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; EdgeFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; EdgeField
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; EdgeField b r v
</span><a href="Hasura.RQL.IR.Select.html#EdgeTypename"><span class="hs-identifier hs-var">IR.EdgeTypename</span></a></span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-comment">-- | User-defined function (AKA custom function)</span><span>
</span><span id="line-526"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunction"><span class="hs-identifier hs-type">selectFunction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-527"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151271"><span class="annot"><a href="#local-6989586621688151271"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151270"><span class="annot"><a href="#local-6989586621688151270"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151269"><span class="annot"><a href="#local-6989586621688151269"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151268"><span class="annot"><a href="#local-6989586621688151268"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151271"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151270"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151268"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-comment">-- | source name</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-comment">-- | SQL function info</span><span>
</span><span id="line-532"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151271"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-534"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-535"></span><span>  </span><span class="annot"><a href="#local-6989586621688151269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151268"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151271"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span id="selectFunction"><span class="annot"><span class="annottext">selectFunction :: SourceName
-&gt; FunctionInfo b
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectFunction"><span class="hs-identifier hs-var hs-var">selectFunction</span></a></span></span><span> </span><span id="local-6989586621688151267"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151267"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151266"><span class="annot"><span class="annottext">fi :: FunctionInfo b
</span><a href="#local-6989586621688151266"><span class="hs-identifier hs-var">fi</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688151252"><span id="local-6989586621688151253"><span id="local-6989586621688151254"><span id="local-6989586621688151255"><span id="local-6989586621688151256"><span id="local-6989586621688151257"><span id="local-6989586621688151258"><span id="local-6989586621688151259"><span id="local-6989586621688151260"><span id="local-6989586621688151261"><span id="local-6989586621688151262"><span id="local-6989586621688151263"><span id="local-6989586621688151264"><span class="annot"><span class="annottext">Maybe Text
Seq (FunctionInputArgument b)
FunctionPermissionsMap
Name
TableName b
FunctionName b
SystemDefined
JsonAggSelect
FunctionVolatility
FunctionExposedAs
_fiComment :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiJsonAggSelect :: forall (b :: BackendType). FunctionInfo b -&gt; JsonAggSelect
_fiPermissions :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionPermissionsMap
_fiDescription :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiReturnType :: forall (b :: BackendType). FunctionInfo b -&gt; TableName b
_fiInputArgs :: forall (b :: BackendType).
FunctionInfo b -&gt; Seq (FunctionInputArgument b)
_fiExposedAs :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionExposedAs
_fiVolatility :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionVolatility
_fiSystemDefined :: forall (b :: BackendType). FunctionInfo b -&gt; SystemDefined
_fiGQLAggregateName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLArgsName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiSQLName :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionName b
_fiComment :: Maybe Text
_fiJsonAggSelect :: JsonAggSelect
_fiPermissions :: FunctionPermissionsMap
_fiDescription :: Maybe Text
_fiReturnType :: TableName b
_fiInputArgs :: Seq (FunctionInputArgument b)
_fiExposedAs :: FunctionExposedAs
_fiVolatility :: FunctionVolatility
_fiSystemDefined :: SystemDefined
_fiGQLAggregateName :: Name
_fiGQLArgsName :: Name
_fiGQLName :: Name
_fiSQLName :: FunctionName b
</span><a href="Hasura.RQL.Types.Function.html#_fiComment"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688151238"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151238"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (SelectExp b))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-537"></span><span>  </span><span id="local-6989586621688151237"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151237"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo b) -&gt; MaybeT m (TableInfo b))
-&gt; m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151267"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151256"><span class="hs-identifier hs-var">_fiReturnType</span></a></span><span>
</span><span id="line-538"></span><span>  </span><span id="local-6989586621688151236"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151236"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151237"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-539"></span><span>  </span><span id="local-6989586621688151235"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151235"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="#local-6989586621688151234"><span class="hs-identifier hs-var">returnFunctionParser</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151267"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151237"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (SelectExp b))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-541"></span><span>    </span><span id="local-6989586621688151233"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151233"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-542"></span><span>    </span><span id="local-6989586621688151232"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151232"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151267"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151237"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span id="local-6989586621688151231"><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688151231"><span class="hs-identifier hs-var">functionArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 Has MkTypename r) =&gt;
FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#customSQLFunctionArgs"><span class="hs-identifier hs-var">customSQLFunctionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionInfo b
</span><a href="#local-6989586621688151266"><span class="hs-identifier hs-var">fi</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151263"><span class="hs-identifier hs-var">_fiGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151262"><span class="hs-identifier hs-var">_fiGQLArgsName</span></a></span><span>
</span><span id="line-544"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151229"><span class="annot"><span class="annottext">argsParser :: InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue b),
   SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151229"><span class="hs-identifier hs-var hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunctionArgsExpTableRow (UnpreparedValue b)
 -&gt; SelectArgsG b (UnpreparedValue b)
 -&gt; (FunctionArgsExpTableRow (UnpreparedValue b),
     SelectArgsG b (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b))
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688151231"><span class="hs-identifier hs-var">functionArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151232"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span>
</span><span id="line-545"></span><span>    </span><span id="local-6989586621688151227"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151227"><span class="hs-identifier hs-var">functionFieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkRootFieldName r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#mkRootFieldName"><span class="hs-identifier hs-var">mkRootFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151263"><span class="hs-identifier hs-var">_fiGQLName</span></a></span><span>
</span><span id="line-546"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-547"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b))
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser
     n
     ((FunctionArgsExpTableRow (UnpreparedValue b),
       SelectArgsG b (UnpreparedValue b)),
      AnnotatedFields b)
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151227"><span class="hs-identifier hs-var">functionFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151238"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue b),
   SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151229"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151235"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-548"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  ((FunctionArgsExpTableRow (UnpreparedValue b),
    SelectArgsG b (UnpreparedValue b)),
   AnnotatedFields b)
-&gt; (((FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b)),
     AnnotatedFields b)
    -&gt; SelectExp b)
-&gt; FieldParser n (SelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688151225"><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688151225"><span class="hs-identifier hs-var">funcArgs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151224"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151224"><span class="hs-identifier hs-var">tableArgs'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151223"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151223"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-549"></span><span>          </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-550"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: AnnotatedFields b
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688151223"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-551"></span><span>              </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionName b
-&gt; FunctionArgsExpTableRow (UnpreparedValue b)
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v.
FunctionName b
-&gt; FunctionArgsExpTableRow v
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromFunction"><span class="hs-identifier hs-var">IR.FromFunction</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionName b
</span><a href="#local-6989586621688151264"><span class="hs-identifier hs-var">_fiSQLName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688151225"><span class="hs-identifier hs-var">funcArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(Column b, ScalarType b)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-552"></span><span>              </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151236"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-553"></span><span>              </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151224"><span class="hs-identifier hs-var">tableArgs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-554"></span><span>              </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151233"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-555"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-557"></span><span>    </span><span id="local-6989586621688151234"><span class="annot"><span class="annottext">returnFunctionParser :: SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="#local-6989586621688151234"><span class="hs-identifier hs-var hs-var">returnFunctionParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-558"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">JsonAggSelect
</span><a href="#local-6989586621688151253"><span class="hs-identifier hs-var">_fiJsonAggSelect</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-559"></span><span>        </span><span class="annot"><span class="annottext">JsonAggSelect
</span><a href="Hasura.RQL.Types.Common.html#JASSingleObject"><span class="hs-identifier hs-var">JASSingleObject</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span>
</span><span id="line-560"></span><span>        </span><span class="annot"><span class="annottext">JsonAggSelect
</span><a href="Hasura.RQL.Types.Common.html#JASMultipleRows"><span class="hs-identifier hs-var">JASMultipleRows</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionAggregate"><span class="hs-identifier hs-type">selectFunctionAggregate</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151219"><span class="annot"><a href="#local-6989586621688151219"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151218"><span class="annot"><a href="#local-6989586621688151218"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151217"><span class="annot"><a href="#local-6989586621688151217"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151216"><span class="annot"><a href="#local-6989586621688151216"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151219"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151218"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151217"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151216"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-565"></span><span>  </span><span class="hs-comment">-- | source name</span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-comment">-- | SQL function info</span><span>
</span><span id="line-568"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151219"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-570"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-571"></span><span>  </span><span class="annot"><a href="#local-6989586621688151217"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151216"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AggSelectExp"><span class="hs-identifier hs-type">AggSelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151219"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span id="selectFunctionAggregate"><span class="annot"><span class="annottext">selectFunctionAggregate :: SourceName
-&gt; FunctionInfo b
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionAggregate"><span class="hs-identifier hs-var hs-var">selectFunctionAggregate</span></a></span></span><span> </span><span id="local-6989586621688151215"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151214"><span class="annot"><span class="annottext">fi :: FunctionInfo b
</span><a href="#local-6989586621688151214"><span class="hs-identifier hs-var">fi</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688151201"><span id="local-6989586621688151202"><span id="local-6989586621688151203"><span id="local-6989586621688151204"><span id="local-6989586621688151205"><span id="local-6989586621688151206"><span id="local-6989586621688151207"><span id="local-6989586621688151208"><span id="local-6989586621688151209"><span id="local-6989586621688151210"><span id="local-6989586621688151211"><span id="local-6989586621688151212"><span id="local-6989586621688151213"><span class="annot"><span class="annottext">Maybe Text
Seq (FunctionInputArgument b)
FunctionPermissionsMap
Name
TableName b
FunctionName b
SystemDefined
JsonAggSelect
FunctionVolatility
FunctionExposedAs
_fiComment :: Maybe Text
_fiJsonAggSelect :: JsonAggSelect
_fiPermissions :: FunctionPermissionsMap
_fiDescription :: Maybe Text
_fiReturnType :: TableName b
_fiInputArgs :: Seq (FunctionInputArgument b)
_fiExposedAs :: FunctionExposedAs
_fiVolatility :: FunctionVolatility
_fiSystemDefined :: SystemDefined
_fiGQLAggregateName :: Name
_fiGQLArgsName :: Name
_fiGQLName :: Name
_fiSQLName :: FunctionName b
_fiComment :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiJsonAggSelect :: forall (b :: BackendType). FunctionInfo b -&gt; JsonAggSelect
_fiPermissions :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionPermissionsMap
_fiDescription :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiReturnType :: forall (b :: BackendType). FunctionInfo b -&gt; TableName b
_fiInputArgs :: forall (b :: BackendType).
FunctionInfo b -&gt; Seq (FunctionInputArgument b)
_fiExposedAs :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionExposedAs
_fiVolatility :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionVolatility
_fiSystemDefined :: forall (b :: BackendType). FunctionInfo b -&gt; SystemDefined
_fiGQLAggregateName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLArgsName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiSQLName :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionName b
</span><a href="#local-6989586621688151201"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688151200"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151200"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AggSelectExp b))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621688151199"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151199"><span class="hs-identifier hs-var">targetTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; MaybeT m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151205"><span class="hs-identifier hs-var">_fiReturnType</span></a></span><span>
</span><span id="line-574"></span><span>  </span><span id="local-6989586621688151198"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151198"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151199"><span class="hs-identifier hs-var">targetTableInfo</span></a></span><span>
</span><span id="line-575"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Bool
forall (b :: BackendType). SelPermInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Table.html#spiAllowAgg"><span class="hs-identifier hs-var hs-var">spiAllowAgg</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151198"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-576"></span><span>  </span><span id="local-6989586621688151197"><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621688151197"><span class="hs-identifier hs-var">xNodesAgg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b))
-&gt; Maybe (XNodesAgg b) -&gt; MaybeT m (XNodesAgg b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XNodesAgg b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XNodesAgg b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#nodesAggExtension"><span class="hs-identifier hs-var">nodesAggExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151219"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-577"></span><span>  </span><span id="local-6989586621688151196"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151196"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; MaybeT m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688151205"><span class="hs-identifier hs-var">_fiReturnType</span></a></span><span>
</span><span id="line-578"></span><span>  </span><span id="local-6989586621688151195"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151195"><span class="hs-identifier hs-var">nodesParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionList"><span class="hs-identifier hs-var">tableSelectionList</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151196"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-579"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (AggSelectExp b))
-&gt; MaybeT m (FieldParser n (AggSelectExp b))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>    </span><span id="local-6989586621688151194"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151194"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-581"></span><span>    </span><span id="local-6989586621688151193"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151193"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151196"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-582"></span><span>    </span><span id="local-6989586621688151192"><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151192"><span class="hs-identifier hs-var">tableArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151196"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-583"></span><span>    </span><span id="local-6989586621688151191"><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688151191"><span class="hs-identifier hs-var">functionArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 Has MkTypename r) =&gt;
FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#customSQLFunctionArgs"><span class="hs-identifier hs-var">customSQLFunctionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionInfo b
</span><a href="#local-6989586621688151214"><span class="hs-identifier hs-var">fi</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151210"><span class="hs-identifier hs-var">_fiGQLAggregateName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151211"><span class="hs-identifier hs-var">_fiGQLArgsName</span></a></span><span>
</span><span id="line-584"></span><span>    </span><span id="local-6989586621688151190"><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621688151190"><span class="hs-identifier hs-var">aggregateParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-var">tableAggregationFields</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151215"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151196"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-585"></span><span>    </span><span id="local-6989586621688151189"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151189"><span class="hs-identifier hs-var">selectionName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; m Name -&gt; m Name
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151193"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_aggregate&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>    </span><span id="local-6989586621688151187"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151187"><span class="hs-identifier hs-var">aggregateFieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkRootFieldName r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#mkRootFieldName"><span class="hs-identifier hs-var">mkRootFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151210"><span class="hs-identifier hs-var">_fiGQLAggregateName</span></a></span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151186"><span class="annot"><span class="annottext">argsParser :: InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue b),
   SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151186"><span class="hs-identifier hs-var hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunctionArgsExpTableRow (UnpreparedValue b)
 -&gt; SelectArgsG b (UnpreparedValue b)
 -&gt; (FunctionArgsExpTableRow (UnpreparedValue b),
     SelectArgsG b (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b))
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688151191"><span class="hs-identifier hs-var">functionArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151192"><span class="hs-identifier hs-var">tableArgsParser</span></a></span><span>
</span><span id="line-588"></span><span>        </span><span id="local-6989586621688151185"><span class="annot"><span class="annottext">aggregationParser :: Parser
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151185"><span class="hs-identifier hs-var hs-var">aggregationParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-589"></span><span>          </span><span class="annot"><span class="annottext">(InsOrdHashMap
   Name
   (ParsedSelection
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
 -&gt; Fields
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; InsOrdHashMap
     Name
     (ParsedSelection
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v. Text -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFExp"><span class="hs-identifier hs-var">IR.TAFExp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Parser
   'Output
   n
   (InsOrdHashMap
      Name
      (ParsedSelection
         (TableAggregateFieldG
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
 -&gt; Parser
      'Output
      n
      (Fields
         (TableAggregateFieldG
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-590"></span><span>            </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (InsOrdHashMap
     Name
     (ParsedSelection
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   'Output
   n
   (InsOrdHashMap
      Name
      (ParsedSelection
         (TableAggregateFieldG
            b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
 -&gt; Parser
      'Output
      n
      (InsOrdHashMap
         Name
         (ParsedSelection
            (TableAggregateFieldG
               b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-591"></span><span>              </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser
      n
      (TableAggregateFieldG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))]
-&gt; Parser
     'Output
     n
     (InsOrdHashMap
        Name
        (ParsedSelection
           (TableAggregateFieldG
              b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span>
</span><span id="line-592"></span><span>                </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151189"><span class="hs-identifier hs-var">selectionName</span></a></span><span>
</span><span id="line-593"></span><span>                </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-594"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
-&gt; AnnotatedFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
XNodesAgg b -&gt; AnnFieldsG b r v -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFNodes"><span class="hs-identifier hs-var">IR.TAFNodes</span></a></span><span> </span><span class="annot"><span class="annottext">XNodesAgg b
</span><a href="#local-6989586621688151197"><span class="hs-identifier hs-var">xNodesAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser n (AnnotatedFields b)
-&gt; FieldParser
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser n (AnnotatedFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;nodes&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688151195"><span class="hs-identifier hs-var">nodesParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-595"></span><span>                  </span><span class="annot"><span class="annottext">AggregateFields b
-&gt; TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
AggregateFields b -&gt; TableAggregateFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#TAFAgg"><span class="hs-identifier hs-var">IR.TAFAgg</span></a></span><span> </span><span class="annot"><span class="annottext">(AggregateFields b
 -&gt; TableAggregateFieldG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; FieldParser n (AggregateFields b)
-&gt; FieldParser
     n
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AggregateFields b)
-&gt; FieldParser n (AggregateFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;aggregate&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AggregateFields b)
</span><a href="#local-6989586621688151190"><span class="hs-identifier hs-var">aggregateParser</span></a></span><span>
</span><span id="line-596"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><span class="annottext">FieldParser n (AggSelectExp b)
-&gt; m (FieldParser n (AggSelectExp b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggSelectExp b)
 -&gt; m (FieldParser n (AggSelectExp b)))
-&gt; FieldParser n (AggSelectExp b)
-&gt; m (FieldParser n (AggSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-598"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b))
-&gt; Parser
     'Output
     n
     (Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; FieldParser
     n
     ((FunctionArgsExpTableRow (UnpreparedValue b),
       SelectArgsG b (UnpreparedValue b)),
      Fields
        (TableAggregateFieldG
           b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151187"><span class="hs-identifier hs-var">aggregateFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151200"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue b),
   SelectArgsG b (UnpreparedValue b))
</span><a href="#local-6989586621688151186"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
</span><a href="#local-6989586621688151185"><span class="hs-identifier hs-var">aggregationParser</span></a></span><span>
</span><span id="line-599"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  ((FunctionArgsExpTableRow (UnpreparedValue b),
    SelectArgsG b (UnpreparedValue b)),
   Fields
     (TableAggregateFieldG
        b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
-&gt; (((FunctionArgsExpTableRow (UnpreparedValue b),
      SelectArgsG b (UnpreparedValue b)),
     Fields
       (TableAggregateFieldG
          b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)))
    -&gt; AggSelectExp b)
-&gt; FieldParser n (AggSelectExp b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688151184"><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688151184"><span class="hs-identifier hs-var">funcArgs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151183"><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151183"><span class="hs-identifier hs-var">tableArgs'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151182"><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151182"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-600"></span><span>          </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-601"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fields
  (TableAggregateFieldG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
</span><a href="#local-6989586621688151182"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-602"></span><span>              </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionName b
-&gt; FunctionArgsExpTableRow (UnpreparedValue b)
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b (UnpreparedValue b)
forall (b :: BackendType) v.
FunctionName b
-&gt; FunctionArgsExpTableRow v
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromFunction"><span class="hs-identifier hs-var">IR.FromFunction</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionName b
</span><a href="#local-6989586621688151213"><span class="hs-identifier hs-var">_fiSQLName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688151184"><span class="hs-identifier hs-var">funcArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(Column b, ScalarType b)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-603"></span><span>              </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688151198"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-604"></span><span>              </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG b (UnpreparedValue b)
</span><a href="#local-6989586621688151183"><span class="hs-identifier hs-var">tableArgs'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-605"></span><span>              </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151194"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-606"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionConnection"><span class="hs-identifier hs-type">selectFunctionConnection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-609"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151181"><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span></span><span> </span><span id="local-6989586621688151180"><span class="annot"><a href="#local-6989586621688151180"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151179"><span class="annot"><a href="#local-6989586621688151179"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151178"><span class="annot"><a href="#local-6989586621688151178"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-610"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688151180"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151179"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151178"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-611"></span><span>  </span><span class="hs-comment">-- | source name</span><span>
</span><span id="line-612"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-613"></span><span>  </span><span class="hs-comment">-- | SQL function info</span><span>
</span><span id="line-614"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-comment">-- | field description, if any</span><span>
</span><span id="line-616"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-comment">-- | primary key columns of the target table</span><span>
</span><span id="line-618"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-619"></span><span>  </span><span class="annot"><a href="#local-6989586621688151179"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151178"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionSelectExp"><span class="hs-identifier hs-type">ConnectionSelectExp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span id="selectFunctionConnection"><span class="annot"><span class="annottext">selectFunctionConnection :: SourceName
-&gt; FunctionInfo ('Postgres pgKind)
-&gt; Maybe Description
-&gt; PrimaryKeyColumns ('Postgres pgKind)
-&gt; m (Maybe
        (FieldParser n (ConnectionSelectExp ('Postgres pgKind))))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectFunctionConnection"><span class="hs-identifier hs-var hs-var">selectFunctionConnection</span></a></span></span><span> </span><span id="local-6989586621688151177"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151177"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151176"><span class="annot"><span class="annottext">fi :: FunctionInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151176"><span class="hs-identifier hs-var">fi</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688151163"><span id="local-6989586621688151164"><span id="local-6989586621688151165"><span id="local-6989586621688151166"><span id="local-6989586621688151167"><span id="local-6989586621688151168"><span id="local-6989586621688151169"><span id="local-6989586621688151170"><span id="local-6989586621688151171"><span id="local-6989586621688151172"><span id="local-6989586621688151173"><span id="local-6989586621688151174"><span id="local-6989586621688151175"><span class="annot"><span class="annottext">Maybe Text
Seq (FunctionInputArgument ('Postgres pgKind))
FunctionPermissionsMap
Name
TableName ('Postgres pgKind)
FunctionName ('Postgres pgKind)
SystemDefined
JsonAggSelect
FunctionVolatility
FunctionExposedAs
_fiComment :: Maybe Text
_fiJsonAggSelect :: JsonAggSelect
_fiPermissions :: FunctionPermissionsMap
_fiDescription :: Maybe Text
_fiReturnType :: TableName ('Postgres pgKind)
_fiInputArgs :: Seq (FunctionInputArgument ('Postgres pgKind))
_fiExposedAs :: FunctionExposedAs
_fiVolatility :: FunctionVolatility
_fiSystemDefined :: SystemDefined
_fiGQLAggregateName :: Name
_fiGQLArgsName :: Name
_fiGQLName :: Name
_fiSQLName :: FunctionName ('Postgres pgKind)
_fiComment :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiJsonAggSelect :: forall (b :: BackendType). FunctionInfo b -&gt; JsonAggSelect
_fiPermissions :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionPermissionsMap
_fiDescription :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiReturnType :: forall (b :: BackendType). FunctionInfo b -&gt; TableName b
_fiInputArgs :: forall (b :: BackendType).
FunctionInfo b -&gt; Seq (FunctionInputArgument b)
_fiExposedAs :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionExposedAs
_fiVolatility :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionVolatility
_fiSystemDefined :: forall (b :: BackendType). FunctionInfo b -&gt; SystemDefined
_fiGQLAggregateName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLArgsName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiSQLName :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionName b
</span><a href="#local-6989586621688151163"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688151162"><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151162"><span class="hs-identifier hs-var">description</span></a></span></span><span> </span><span id="local-6989586621688151161"><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres pgKind)
</span><a href="#local-6989586621688151161"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (ConnectionSelectExp ('Postgres pgKind)))
-&gt; m (Maybe
        (FieldParser n (ConnectionSelectExp ('Postgres pgKind))))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-621"></span><span>  </span><span id="local-6989586621688151160"><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151160"><span class="hs-identifier hs-var">returnTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo ('Postgres pgKind))
 -&gt; MaybeT m (TableInfo ('Postgres pgKind)))
-&gt; m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres pgKind) -&gt; m (TableInfo ('Postgres pgKind))
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151177"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688151167"><span class="hs-identifier hs-var">_fiReturnType</span></a></span><span>
</span><span id="line-622"></span><span>  </span><span id="local-6989586621688151159"><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151159"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo ('Postgres pgKind)))
 -&gt; MaybeT m (SelPermInfo ('Postgres pgKind)))
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151160"><span class="hs-identifier hs-var">returnTableInfo</span></a></span><span>
</span><span id="line-623"></span><span>  </span><span id="local-6989586621688151158"><span class="annot"><span class="annottext">()
</span><a href="#local-6989586621688151158"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; MaybeT m ()
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe () -&gt; MaybeT m ()) -&gt; Maybe () -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema ('Postgres pgKind) =&gt;
Maybe (XRelay ('Postgres pgKind))
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151181"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>  </span><span id="local-6989586621688151157"><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151157"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo ('Postgres pgKind))
 -&gt; MaybeT m (TableInfo ('Postgres pgKind)))
-&gt; m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres pgKind) -&gt; m (TableInfo ('Postgres pgKind))
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151177"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688151167"><span class="hs-identifier hs-var">_fiReturnType</span></a></span><span>
</span><span id="line-625"></span><span>  </span><span id="local-6989586621688151156"><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields ('Postgres pgKind))
</span><a href="#local-6989586621688151156"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (ConnectionFields ('Postgres pgKind))))
-&gt; MaybeT
     m (Parser 'Output n (ConnectionFields ('Postgres pgKind)))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (ConnectionFields ('Postgres pgKind))))
 -&gt; MaybeT
      m (Parser 'Output n (ConnectionFields ('Postgres pgKind))))
-&gt; m (Maybe
        (Parser 'Output n (ConnectionFields ('Postgres pgKind))))
-&gt; MaybeT
     m (Parser 'Output n (ConnectionFields ('Postgres pgKind)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo ('Postgres pgKind)
-&gt; m (Maybe
        (Parser 'Output n (ConnectionFields ('Postgres pgKind))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (ConnectionFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionSelectionSet"><span class="hs-identifier hs-var">tableConnectionSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151177"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151157"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-626"></span><span>  </span><span class="annot"><span class="annottext">m (FieldParser n (ConnectionSelectExp ('Postgres pgKind)))
-&gt; MaybeT
     m (FieldParser n (ConnectionSelectExp ('Postgres pgKind)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-627"></span><span>    </span><span id="local-6989586621688151155"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151155"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkRootFieldName r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#mkRootFieldName"><span class="hs-identifier hs-var">mkRootFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151174"><span class="hs-identifier hs-var">_fiGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_connection&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>    </span><span id="local-6989586621688151154"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151154"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-629"></span><span>    </span><span id="local-6989586621688151153"><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs ('Postgres pgKind),
   Maybe
     (NonEmpty
        (ConnectionSplit
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621688151153"><span class="hs-identifier hs-var">tableConnectionArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres pgKind)
-&gt; SourceName
-&gt; TableInfo ('Postgres pgKind)
-&gt; m (InputFieldsParser
        n
        (SelectArgs ('Postgres pgKind),
         Maybe
           (NonEmpty
              (ConnectionSplit
                 ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
         Maybe ConnectionSlice))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
PrimaryKeyColumns b
-&gt; SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-var">tableConnectionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres pgKind)
</span><a href="#local-6989586621688151161"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151177"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151157"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-630"></span><span>    </span><span id="local-6989586621688151152"><span class="annot"><span class="annottext">InputFieldsParser
  n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688151152"><span class="hs-identifier hs-var">functionArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FunctionInfo ('Postgres pgKind)
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 Has MkTypename r) =&gt;
FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#customSQLFunctionArgs"><span class="hs-identifier hs-var">customSQLFunctionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151176"><span class="hs-identifier hs-var">fi</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151174"><span class="hs-identifier hs-var">_fiGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151173"><span class="hs-identifier hs-var">_fiGQLArgsName</span></a></span><span>
</span><span id="line-631"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151151"><span class="annot"><span class="annottext">argsParser :: InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
   (SelectArgs ('Postgres pgKind),
    Maybe
      (NonEmpty
         (ConnectionSplit
            ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
    Maybe ConnectionSlice))
</span><a href="#local-6989586621688151151"><span class="hs-identifier hs-var hs-var">argsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
 -&gt; (SelectArgs ('Postgres pgKind),
     Maybe
       (NonEmpty
          (ConnectionSplit
             ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
     Maybe ConnectionSlice)
 -&gt; (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
     (SelectArgs ('Postgres pgKind),
      Maybe
        (NonEmpty
           (ConnectionSplit
              ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
      Maybe ConnectionSlice)))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
-&gt; InputFieldsParser
     n
     (SelectArgs ('Postgres pgKind),
      Maybe
        (NonEmpty
           (ConnectionSplit
              ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
      Maybe ConnectionSlice)
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      (SelectArgs ('Postgres pgKind),
       Maybe
         (NonEmpty
            (ConnectionSplit
               ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
       Maybe ConnectionSlice))
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688151152"><span class="hs-identifier hs-var">functionArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs ('Postgres pgKind),
   Maybe
     (NonEmpty
        (ConnectionSplit
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
   Maybe ConnectionSlice)
</span><a href="#local-6989586621688151153"><span class="hs-identifier hs-var">tableConnectionArgsParser</span></a></span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-633"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      (SelectArgs ('Postgres pgKind),
       Maybe
         (NonEmpty
            (ConnectionSplit
               ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
       Maybe ConnectionSlice))
-&gt; Parser 'Output n (ConnectionFields ('Postgres pgKind))
-&gt; FieldParser
     n
     ((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
       (SelectArgs ('Postgres pgKind),
        Maybe
          (NonEmpty
             (ConnectionSplit
                ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
        Maybe ConnectionSlice)),
      ConnectionFields ('Postgres pgKind))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151155"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151162"><span class="hs-identifier hs-var">description</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
   (SelectArgs ('Postgres pgKind),
    Maybe
      (NonEmpty
         (ConnectionSplit
            ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
    Maybe ConnectionSlice))
</span><a href="#local-6989586621688151151"><span class="hs-identifier hs-var">argsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (ConnectionFields ('Postgres pgKind))
</span><a href="#local-6989586621688151156"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-634"></span><span>        </span><span class="annot"><span class="annottext">FieldParser
  n
  ((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
    (SelectArgs ('Postgres pgKind),
     Maybe
       (NonEmpty
          (ConnectionSplit
             ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
     Maybe ConnectionSlice)),
   ConnectionFields ('Postgres pgKind))
-&gt; (((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      (SelectArgs ('Postgres pgKind),
       Maybe
         (NonEmpty
            (ConnectionSplit
               ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))),
       Maybe ConnectionSlice)),
     ConnectionFields ('Postgres pgKind))
    -&gt; ConnectionSelectExp ('Postgres pgKind))
-&gt; FieldParser n (ConnectionSelectExp ('Postgres pgKind))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688151150"><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688151150"><span class="hs-identifier hs-var">funcArgs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688151149"><span class="annot"><span class="annottext">SelectArgs ('Postgres pgKind)
</span><a href="#local-6989586621688151149"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151148"><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (ConnectionSplit
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688151148"><span class="hs-identifier hs-var">split</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151147"><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151147"><span class="hs-identifier hs-var">slice</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151146"><span class="annot"><span class="annottext">ConnectionFields ('Postgres pgKind)
</span><a href="#local-6989586621688151146"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-635"></span><span>          </span><span class="annot"><span class="annottext">ConnectionSelect :: forall (b :: BackendType) r v.
XRelay b
-&gt; PrimaryKeyColumns b
-&gt; Maybe (NonEmpty (ConnectionSplit b v))
-&gt; Maybe ConnectionSlice
-&gt; AnnSelectG b r (ConnectionField b r) v
-&gt; ConnectionSelect b r v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSelect"><span class="hs-identifier hs-type">IR.ConnectionSelect</span></a></span><span>
</span><span id="line-636"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_csXRelay :: XRelay ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_csXRelay"><span class="hs-identifier hs-var">IR._csXRelay</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
XRelay ('Postgres pgKind)
</span><a href="#local-6989586621688151158"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-637"></span><span>              </span><span class="annot"><span class="annottext">_csPrimaryKeyColumns :: PrimaryKeyColumns ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_csPrimaryKeyColumns"><span class="hs-identifier hs-var">IR._csPrimaryKeyColumns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres pgKind)
</span><a href="#local-6989586621688151161"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-638"></span><span>              </span><span class="annot"><span class="annottext">_csSplit :: Maybe
  (NonEmpty
     (ConnectionSplit
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
</span><a href="Hasura.RQL.IR.Select.html#_csSplit"><span class="hs-identifier hs-var">IR._csSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (ConnectionSplit
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688151148"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-639"></span><span>              </span><span class="annot"><span class="annottext">_csSlice :: Maybe ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#_csSlice"><span class="hs-identifier hs-var">IR._csSlice</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151147"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-640"></span><span>              </span><span class="annot"><span class="annottext">_csSelect :: AnnSelectG
  ('Postgres pgKind)
  (RemoteRelationshipField UnpreparedValue)
  (ConnectionField
     ('Postgres pgKind) (RemoteRelationshipField UnpreparedValue))
  (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_csSelect"><span class="hs-identifier hs-var">IR._csSelect</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-641"></span><span>                </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-642"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: ConnectionFields ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConnectionFields ('Postgres pgKind)
</span><a href="#local-6989586621688151146"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-643"></span><span>                    </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionName ('Postgres pgKind)
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; Maybe
     [(Column ('Postgres pgKind), ScalarType ('Postgres pgKind))]
-&gt; SelectFromG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType) v.
FunctionName b
-&gt; FunctionArgsExpTableRow v
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromFunction"><span class="hs-identifier hs-var">IR.FromFunction</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionName ('Postgres pgKind)
</span><a href="#local-6989586621688151175"><span class="hs-identifier hs-var">_fiSQLName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688151150"><span class="hs-identifier hs-var">funcArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(Column ('Postgres pgKind), ScalarType ('Postgres pgKind))]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-644"></span><span>                    </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
-&gt; TablePermG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688151159"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-645"></span><span>                    </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgs ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgs ('Postgres pgKind)
</span><a href="#local-6989586621688151149"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-646"></span><span>                    </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688151154"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-647"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-648"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-649"></span><span>
</span><span id="line-650"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- Components</span><span>
</span><span id="line-652"></span><span class="hs-comment">--</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- Those parsers are sub-components of those top-level parsers.</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-comment">-- | Arguments for a table selection. Default implementation for BackendSchema.</span><span>
</span><span id="line-656"></span><span class="hs-comment">--</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-658"></span><span class="hs-comment">-- &gt; limit: Int</span><span>
</span><span id="line-659"></span><span class="hs-comment">-- &gt; offset: Int</span><span>
</span><span id="line-660"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-661"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-662"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier hs-type">defaultTableArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-663"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151145"><span class="annot"><a href="#local-6989586621688151145"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151144"><span class="annot"><a href="#local-6989586621688151144"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151143"><span class="annot"><a href="#local-6989586621688151143"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151142"><span class="annot"><a href="#local-6989586621688151142"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151145"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151144"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151143"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151142"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-665"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151145"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-667"></span><span>  </span><span class="annot"><a href="#local-6989586621688151143"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151142"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier hs-type">SelectArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151145"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span id="defaultTableArgs"><span class="annot"><span class="annottext">defaultTableArgs :: SourceName -&gt; TableInfo b -&gt; m (InputFieldsParser n (SelectArgs b))
</span><a href="Hasura.GraphQL.Schema.Select.html#defaultTableArgs"><span class="hs-identifier hs-var hs-var">defaultTableArgs</span></a></span></span><span> </span><span id="local-6989586621688151141"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151141"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151140"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151140"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-669"></span><span>  </span><span id="local-6989586621688151139"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621688151139"><span class="hs-identifier hs-var">whereParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var">tableWhereArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151141"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-670"></span><span>  </span><span id="local-6989586621688151138"><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151138"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var">tableOrderByArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151141"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-671"></span><span>  </span><span id="local-6989586621688151137"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621688151137"><span class="hs-identifier hs-var">distinctParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var">tableDistinctArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151141"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151140"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-672"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151136"><span class="annot"><span class="annottext">result :: InputFieldsParser n (SelectArgs b)
</span><a href="#local-6989586621688151136"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-673"></span><span>        </span><span id="local-6989586621688151135"><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151135"><span class="hs-identifier hs-var">whereArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621688151139"><span class="hs-identifier hs-var">whereParser</span></a></span><span>
</span><span id="line-674"></span><span>        </span><span id="local-6989586621688151134"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151134"><span class="hs-identifier hs-var">orderByArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151138"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-675"></span><span>        </span><span id="local-6989586621688151133"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621688151133"><span class="hs-identifier hs-var">limitArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int)
forall (n :: * -&gt; *).
MonadParse n =&gt;
InputFieldsParser n (Maybe Int)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-var">tableLimitArg</span></a></span><span>
</span><span id="line-676"></span><span>        </span><span id="local-6989586621688151132"><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621688151132"><span class="hs-identifier hs-var">offsetArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int64)
forall (n :: * -&gt; *).
MonadParse n =&gt;
InputFieldsParser n (Maybe Int64)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-var">tableOffsetArg</span></a></span><span>
</span><span id="line-677"></span><span>        </span><span id="local-6989586621688151131"><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621688151131"><span class="hs-identifier hs-var">distinctArg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621688151137"><span class="hs-identifier hs-var">distinctParser</span></a></span><span>
</span><span id="line-678"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-679"></span><span>          </span><span class="annot"><span class="annottext">SelectArgs :: forall (b :: BackendType) v.
Maybe (AnnBoolExp b v)
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgsG b v
</span><a href="Hasura.RQL.IR.Select.html#SelectArgs"><span class="hs-identifier hs-type">IR.SelectArgs</span></a></span><span>
</span><span id="line-680"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_saWhere :: Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="Hasura.RQL.IR.Select.html#_saWhere"><span class="hs-identifier hs-var">IR._saWhere</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151135"><span class="hs-identifier hs-var">whereArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-681"></span><span>              </span><span class="annot"><span class="annottext">_saOrderBy :: Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="Hasura.RQL.IR.Select.html#_saOrderBy"><span class="hs-identifier hs-var">IR._saOrderBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151134"><span class="hs-identifier hs-var">orderByArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-682"></span><span>              </span><span class="annot"><span class="annottext">_saLimit :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#_saLimit"><span class="hs-identifier hs-var">IR._saLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621688151133"><span class="hs-identifier hs-var">limitArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-683"></span><span>              </span><span class="annot"><span class="annottext">_saOffset :: Maybe Int64
</span><a href="Hasura.RQL.IR.Select.html#_saOffset"><span class="hs-identifier hs-var">IR._saOffset</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621688151132"><span class="hs-identifier hs-var">offsetArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-684"></span><span>              </span><span class="annot"><span class="annottext">_saDistinct :: Maybe (NonEmpty (Column b))
</span><a href="Hasura.RQL.IR.Select.html#_saDistinct"><span class="hs-identifier hs-var">IR._saDistinct</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621688151131"><span class="hs-identifier hs-var">distinctArg</span></a></span><span>
</span><span id="line-685"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-686"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
-&gt; m (InputFieldsParser n (SelectArgs b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (SelectArgs b)
 -&gt; m (InputFieldsParser n (SelectArgs b)))
-&gt; InputFieldsParser n (SelectArgs b)
-&gt; m (InputFieldsParser n (SelectArgs b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
</span><a href="#local-6989586621688151136"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (SelectArgs b)
-&gt; (SelectArgs b -&gt; n (SelectArgs b))
-&gt; InputFieldsParser n (SelectArgs b)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
InputFieldsParser m a -&gt; (a -&gt; m b) -&gt; InputFieldsParser m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688151124"><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151124"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-688"></span><span>      </span><span class="annot"><span class="annottext">Maybe (n ()) -&gt; n ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><span class="hs-identifier hs-var">sequence_</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-689"></span><span>        </span><span id="local-6989586621688151122"><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621688151122"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (b :: BackendType) v.
SelectArgsG b v -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
</span><a href="Hasura.RQL.IR.Select.html#_saOrderBy"><span class="hs-identifier hs-var hs-var">IR._saOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151124"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-690"></span><span>        </span><span id="local-6989586621688151121"><span class="annot"><span class="annottext">NonEmpty (Column b)
</span><a href="#local-6989586621688151121"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SelectArgs b -&gt; Maybe (NonEmpty (Column b))
forall (b :: BackendType) v.
SelectArgsG b v -&gt; Maybe (NonEmpty (Column b))
</span><a href="Hasura.RQL.IR.Select.html#_saDistinct"><span class="hs-identifier hs-var hs-var">IR._saDistinct</span></a></span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151124"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-691"></span><span>        </span><span class="annot"><span class="annottext">n () -&gt; Maybe (n ())
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(n () -&gt; Maybe (n ())) -&gt; n () -&gt; Maybe (n ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; NonEmpty (Column b) -&gt; n ()
forall (t :: * -&gt; *) (b :: BackendType) (f :: * -&gt; *)
       (b :: BackendType) v.
(Foldable t, Eq (Column b), MonadParse f) =&gt;
NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; t (Column b) -&gt; f ()
</span><a href="#local-6989586621688151120"><span class="hs-identifier hs-var">validateArgs</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621688151122"><span class="hs-identifier hs-var">orderBy</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Column b)
</span><a href="#local-6989586621688151121"><span class="hs-identifier hs-var">distinct</span></a></span><span>
</span><span id="line-692"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">SelectArgs b
</span><a href="#local-6989586621688151124"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-694"></span><span>    </span><span id="local-6989586621688151120"><span class="annot"><span class="annottext">validateArgs :: NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; t (Column b) -&gt; f ()
</span><a href="#local-6989586621688151120"><span class="hs-identifier hs-var hs-var">validateArgs</span></a></span></span><span> </span><span id="local-6989586621688151119"><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
</span><a href="#local-6989586621688151119"><span class="hs-identifier hs-var">orderByCols</span></a></span></span><span> </span><span id="local-6989586621688151118"><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621688151118"><span class="hs-identifier hs-var">distinctCols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151117"><span class="annot"><span class="annottext">colsLen :: Int
</span><a href="#local-6989586621688151117"><span class="hs-identifier hs-var hs-var">colsLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t (Column b) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621688151118"><span class="hs-identifier hs-var">distinctCols</span></a></span><span>
</span><span id="line-696"></span><span>          </span><span id="local-6989586621688151115"><span class="annot"><span class="annottext">initOrderBys :: [OrderByItemG b (AnnotatedOrderByElement b v)]
</span><a href="#local-6989586621688151115"><span class="hs-identifier hs-var hs-var">initOrderBys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688151117"><span class="hs-identifier hs-var">colsLen</span></a></span><span> </span><span class="annot"><span class="annottext">([OrderByItemG b (AnnotatedOrderByElement b v)]
 -&gt; [OrderByItemG b (AnnotatedOrderByElement b v)])
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (OrderByItemG b (AnnotatedOrderByElement b v))
</span><a href="#local-6989586621688151119"><span class="hs-identifier hs-var">orderByCols</span></a></span><span>
</span><span id="line-697"></span><span>          </span><span id="local-6989586621688151112"><span class="annot"><span class="annottext">initOrdByCols :: [Column b]
</span><a href="#local-6989586621688151112"><span class="hs-identifier hs-var hs-var">initOrdByCols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
 -&gt; [OrderByItemG b (AnnotatedOrderByElement b v)] -&gt; [Column b])
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)]
-&gt; (OrderByItemG b (AnnotatedOrderByElement b v)
    -&gt; Maybe (Column b))
-&gt; [Column b]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
-&gt; [OrderByItemG b (AnnotatedOrderByElement b v)] -&gt; [Column b]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">[OrderByItemG b (AnnotatedOrderByElement b v)]
</span><a href="#local-6989586621688151115"><span class="hs-identifier hs-var">initOrderBys</span></a></span><span> </span><span class="annot"><span class="annottext">((OrderByItemG b (AnnotatedOrderByElement b v) -&gt; Maybe (Column b))
 -&gt; [Column b])
-&gt; (OrderByItemG b (AnnotatedOrderByElement b v)
    -&gt; Maybe (Column b))
-&gt; [Column b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688151109"><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
</span><a href="#local-6989586621688151109"><span class="hs-identifier hs-var">ob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-698"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) a. OrderByItemG b a -&gt; a
</span><a href="Hasura.RQL.IR.OrderBy.html#obiColumn"><span class="hs-identifier hs-var hs-var">IR.obiColumn</span></a></span><span> </span><span class="annot"><span class="annottext">OrderByItemG b (AnnotatedOrderByElement b v)
</span><a href="#local-6989586621688151109"><span class="hs-identifier hs-var">ob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-699"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621688151106"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151106"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Maybe (Column b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Maybe (Column b)) -&gt; Column b -&gt; Maybe (Column b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151106"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-700"></span><span>              </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b v
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Column b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-701"></span><span>          </span><span id="local-6989586621688151105"><span class="annot"><span class="annottext">isValid :: Bool
</span><a href="#local-6989586621688151105"><span class="hs-identifier hs-var hs-var">isValid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-702"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688151117"><span class="hs-identifier hs-var">colsLen</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Column b] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621688151112"><span class="hs-identifier hs-var">initOrdByCols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Bool) -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column b -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621688151112"><span class="hs-identifier hs-var">initOrdByCols</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t (Column b) -&gt; [Column b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">t (Column b)
</span><a href="#local-6989586621688151118"><span class="hs-identifier hs-var">distinctCols</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; f () -&gt; f ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621688151105"><span class="hs-identifier hs-var">isValid</span></a></span><span> </span><span class="annot"><span class="annottext">(f () -&gt; f ()) -&gt; f () -&gt; f ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-705"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; f ()
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span>
</span><span id="line-706"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;distinct_on\&quot; columns must match initial \&quot;order_by\&quot; columns&quot;</span></span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span class="hs-comment">-- | Argument to filter rows returned from table selection</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-710"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-type">tableWhereArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151991"><span class="annot"><a href="#local-6989586621688151991"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151990"><span class="annot"><a href="#local-6989586621688151990"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151989"><span class="annot"><a href="#local-6989586621688151989"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151988"><span class="annot"><a href="#local-6989586621688151988"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-712"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151991"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151990"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151988"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-713"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-714"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151991"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-715"></span><span>  </span><span class="annot"><a href="#local-6989586621688151989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151988"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">IR.AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151991"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151991"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span id="tableWhereArg"><span class="annot"><span class="annottext">tableWhereArg :: SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var hs-var">tableWhereArg</span></a></span></span><span> </span><span id="local-6989586621688151101"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151101"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151100"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151100"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-717"></span><span>  </span><span id="local-6989586621688151099"><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151099"><span class="hs-identifier hs-var">boolExpParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (Parser 'Input n (AnnBoolExp b (UnpreparedValue b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (Parser 'Input n (AnnBoolExp b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.BoolExp.html#boolExp"><span class="hs-identifier hs-var">boolExp</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151101"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151100"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-718"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-719"></span><span>    </span><span class="annot"><span class="annottext">(Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))
 -&gt; Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; Maybe (AnnBoolExp b (UnpreparedValue b))
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
 -&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
-&gt; InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-720"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151096"><span class="hs-identifier hs-var">whereName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151095"><span class="hs-identifier hs-var">whereDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
 -&gt; InputFieldsParser
      n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b)))))
-&gt; Parser 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (Maybe (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-721"></span><span>        </span><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
-&gt; Parser 'Input n (Maybe (AnnBoolExp b (UnpreparedValue b)))
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151099"><span class="hs-identifier hs-var">boolExpParser</span></a></span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-723"></span><span>    </span><span id="local-6989586621688151096"><span class="annot"><span class="annottext">whereName :: Name
</span><a href="#local-6989586621688151096"><span class="hs-identifier hs-var hs-var">whereName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>    </span><span id="local-6989586621688151095"><span class="annot"><span class="annottext">whereDesc :: Maybe Description
</span><a href="#local-6989586621688151095"><span class="hs-identifier hs-var hs-var">whereDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;filter the rows returned&quot;</span></span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span class="hs-comment">-- | Argument to sort rows returned from table selection</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-728"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-type">tableOrderByArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-729"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151986"><span class="annot"><a href="#local-6989586621688151986"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151985"><span class="annot"><a href="#local-6989586621688151985"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151984"><span class="annot"><a href="#local-6989586621688151984"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151983"><span class="annot"><a href="#local-6989586621688151983"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-730"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151986"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151985"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151984"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151983"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-731"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151986"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-733"></span><span>  </span><span class="annot"><a href="#local-6989586621688151984"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151983"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151986"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151986"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span id="tableOrderByArg"><span class="annot"><span class="annottext">tableOrderByArg :: SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var hs-var">tableOrderByArg</span></a></span></span><span> </span><span id="local-6989586621688151093"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151093"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151092"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151092"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-735"></span><span>  </span><span id="local-6989586621688151091"><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
</span><a href="#local-6989586621688151091"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (Parser
        'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)])
forall (m :: * -&gt; *) (n :: * -&gt; *) r (b :: BackendType).
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 MonadRole r m, Has MkTypename r) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (Parser
        'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)])
</span><a href="Hasura.GraphQL.Schema.OrderBy.html#orderByExp"><span class="hs-identifier hs-var">orderByExp</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151093"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151092"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-736"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-737"></span><span>    </span><span id="local-6989586621688151089"><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
</span><a href="#local-6989586621688151089"><span class="hs-identifier hs-var">maybeOrderByExps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-738"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
 -&gt; Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
 -&gt; InputFieldsParser
      n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; InputFieldsParser
     n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-739"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser
     'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151088"><span class="hs-identifier hs-var">orderByName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151087"><span class="hs-identifier hs-var">orderByDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser
   'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
 -&gt; InputFieldsParser
      n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])))
-&gt; Parser
     'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
-&gt; InputFieldsParser
     n (Maybe (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Parser
     'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Input n [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
 -&gt; Parser
      'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]))
-&gt; Parser 'Input n [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Parser
     'Input n (Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
-&gt; Parser 'Input n [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m [a]
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#list"><span class="hs-identifier hs-var">P.list</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [AnnotatedOrderByItemG b (UnpreparedValue b)]
</span><a href="#local-6989586621688151091"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-740"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
</span><a href="#local-6989586621688151089"><span class="hs-identifier hs-var">maybeOrderByExps</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; ([[AnnotatedOrderByItemG b (UnpreparedValue b)]]
    -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b (UnpreparedValue b)]
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">([AnnotatedOrderByItemG b (UnpreparedValue b)]
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; ([[AnnotatedOrderByItemG b (UnpreparedValue b)]]
    -&gt; [AnnotatedOrderByItemG b (UnpreparedValue b)])
-&gt; [[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[[AnnotatedOrderByItemG b (UnpreparedValue b)]]
-&gt; [AnnotatedOrderByItemG b (UnpreparedValue b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-741"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-742"></span><span>    </span><span id="local-6989586621688151088"><span class="annot"><span class="annottext">orderByName :: Name
</span><a href="#local-6989586621688151088"><span class="hs-identifier hs-var hs-var">orderByName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;order_by&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621688151087"><span class="annot"><span class="annottext">orderByDesc :: Maybe Description
</span><a href="#local-6989586621688151087"><span class="hs-identifier hs-var hs-var">orderByDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;sort the rows by one or more columns&quot;</span></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-comment">-- | Argument to distinct select on columns returned from table selection</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-747"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-type">tableDistinctArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-748"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151982"><span class="annot"><a href="#local-6989586621688151982"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151981"><span class="annot"><a href="#local-6989586621688151981"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151980"><span class="annot"><a href="#local-6989586621688151980"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151979"><span class="annot"><a href="#local-6989586621688151979"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-749"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151982"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151981"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151980"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151979"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-750"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-751"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151982"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-752"></span><span>  </span><span class="annot"><a href="#local-6989586621688151980"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151979"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151982"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span id="tableDistinctArg"><span class="annot"><span class="annottext">tableDistinctArg :: SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var hs-var">tableDistinctArg</span></a></span></span><span> </span><span id="local-6989586621688151084"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151084"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151083"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151083"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-754"></span><span>  </span><span id="local-6989586621688151082"><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621688151082"><span class="hs-identifier hs-var">columnsEnum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
forall (m :: * -&gt; *) (n :: * -&gt; *) r (b :: BackendType).
(BackendSchema b, MonadSchema n m, MonadRole r m,
 MonadTableInfo r m, Has MkTypename r) =&gt;
SourceName -&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumnsEnum"><span class="hs-identifier hs-var">tableSelectColumnsEnum</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151084"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151083"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-756"></span><span>    </span><span id="local-6989586621688151080"><span class="annot"><span class="annottext">Maybe [Column b]
</span><a href="#local-6989586621688151080"><span class="hs-identifier hs-var">maybeDistinctOnColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-757"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Maybe [Column b]) -&gt; Maybe [Column b]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe [Column b]) -&gt; Maybe [Column b])
-&gt; (Maybe (Maybe (Maybe [Column b])) -&gt; Maybe (Maybe [Column b]))
-&gt; Maybe (Maybe (Maybe [Column b]))
-&gt; Maybe [Column b]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (Maybe [Column b])) -&gt; Maybe (Maybe [Column b])
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span>
</span><span id="line-758"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (Maybe (Maybe [Column b])) -&gt; Maybe [Column b])
-&gt; InputFieldsParser n (Maybe (Maybe (Maybe [Column b])))
-&gt; InputFieldsParser n (Maybe [Column b])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
-&gt; (Parser 'Both n (Column b)
    -&gt; InputFieldsParser n (Maybe (Maybe [Column b])))
-&gt; InputFieldsParser n (Maybe (Maybe (Maybe [Column b])))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span>
</span><span id="line-759"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621688151082"><span class="hs-identifier hs-var">columnsEnum</span></a></span><span>
</span><span id="line-760"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe [Column b])
-&gt; InputFieldsParser n (Maybe (Maybe [Column b]))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151079"><span class="hs-identifier hs-var">distinctOnName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151078"><span class="hs-identifier hs-var">distinctOnDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe [Column b])
 -&gt; InputFieldsParser n (Maybe (Maybe [Column b])))
-&gt; (Parser 'Both n (Column b) -&gt; Parser 'Both n (Maybe [Column b]))
-&gt; Parser 'Both n (Column b)
-&gt; InputFieldsParser n (Maybe (Maybe [Column b]))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n [Column b] -&gt; Parser 'Both n (Maybe [Column b])
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n [Column b] -&gt; Parser 'Both n (Maybe [Column b]))
-&gt; (Parser 'Both n (Column b) -&gt; Parser 'Both n [Column b])
-&gt; Parser 'Both n (Column b)
-&gt; Parser 'Both n (Maybe [Column b])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (Column b) -&gt; Parser 'Both n [Column b]
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m [a]
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#list"><span class="hs-identifier hs-var">P.list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Maybe [Column b]
</span><a href="#local-6989586621688151080"><span class="hs-identifier hs-var">maybeDistinctOnColumns</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Column b]
-&gt; ([Column b] -&gt; Maybe (NonEmpty (Column b)))
-&gt; Maybe (NonEmpty (Column b))
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Column b] -&gt; Maybe (NonEmpty (Column b))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span>
</span><span id="line-762"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-763"></span><span>    </span><span id="local-6989586621688151079"><span class="annot"><span class="annottext">distinctOnName :: Name
</span><a href="#local-6989586621688151079"><span class="hs-identifier hs-var hs-var">distinctOnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;distinct_on&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>    </span><span id="local-6989586621688151078"><span class="annot"><span class="annottext">distinctOnDesc :: Maybe Description
</span><a href="#local-6989586621688151078"><span class="hs-identifier hs-var hs-var">distinctOnDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;distinct select on columns&quot;</span></span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span class="hs-comment">-- | Argument to limit rows returned from table selection</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- &gt; limit: NonNegativeInt</span><span>
</span><span id="line-768"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-type">tableLimitArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151978"><span class="annot"><a href="#local-6989586621688151978"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151978"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-771"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151978"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-772"></span><span id="tableLimitArg"><span class="annot"><span class="annottext">tableLimitArg :: InputFieldsParser n (Maybe Int)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableLimitArg"><span class="hs-identifier hs-var hs-var">tableLimitArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-773"></span><span>  </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int32 -&gt; Int) -&gt; Maybe Int32 -&gt; Maybe Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int32 -&gt; Maybe Int)
-&gt; (Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; Maybe (Maybe Int32)
-&gt; Maybe Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser n (Maybe Int))
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-774"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151077"><span class="hs-identifier hs-var">limitName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151076"><span class="hs-identifier hs-var">limitDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe Int32)
 -&gt; InputFieldsParser n (Maybe (Maybe Int32)))
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-775"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Both n Int32 -&gt; Parser 'Both n (Maybe Int32)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-777"></span><span>    </span><span id="local-6989586621688151077"><span class="annot"><span class="annottext">limitName :: Name
</span><a href="#local-6989586621688151077"><span class="hs-identifier hs-var hs-var">limitName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;limit&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>    </span><span id="local-6989586621688151076"><span class="annot"><span class="annottext">limitDesc :: Maybe Description
</span><a href="#local-6989586621688151076"><span class="hs-identifier hs-var hs-var">limitDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;limit the number of rows returned&quot;</span></span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span class="hs-comment">-- | Argument to skip some rows, in conjunction with order_by</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- &gt; offset: BigInt</span><span>
</span><span id="line-782"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-type">tableOffsetArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-783"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151977"><span class="annot"><a href="#local-6989586621688151977"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-784"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151977"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-785"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151977"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span id="tableOffsetArg"><span class="annot"><span class="annottext">tableOffsetArg :: InputFieldsParser n (Maybe Int64)
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOffsetArg"><span class="hs-identifier hs-var hs-var">tableOffsetArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-787"></span><span>  </span><span class="annot"><span class="annottext">(Maybe (Maybe Int64) -&gt; Maybe Int64)
-&gt; InputFieldsParser n (Maybe (Maybe Int64))
-&gt; InputFieldsParser n (Maybe Int64)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int64) -&gt; Maybe Int64
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe Int64))
 -&gt; InputFieldsParser n (Maybe Int64))
-&gt; InputFieldsParser n (Maybe (Maybe Int64))
-&gt; InputFieldsParser n (Maybe Int64)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-788"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe Int64)
-&gt; InputFieldsParser n (Maybe (Maybe Int64))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688151074"><span class="hs-identifier hs-var">offsetName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688151073"><span class="hs-identifier hs-var">offsetDesc</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe Int64)
 -&gt; InputFieldsParser n (Maybe (Maybe Int64)))
-&gt; Parser 'Both n (Maybe Int64)
-&gt; InputFieldsParser n (Maybe (Maybe Int64))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-789"></span><span>      </span><span class="annot"><span class="annottext">Parser 'Both n Int64 -&gt; Parser 'Both n (Maybe Int64)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int64
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Int64
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#bigInt"><span class="hs-identifier hs-var">P.bigInt</span></a></span><span>
</span><span id="line-790"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-791"></span><span>    </span><span id="local-6989586621688151074"><span class="annot"><span class="annottext">offsetName :: Name
</span><a href="#local-6989586621688151074"><span class="hs-identifier hs-var hs-var">offsetName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;offset&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>    </span><span id="local-6989586621688151073"><span class="annot"><span class="annottext">offsetDesc :: Maybe Description
</span><a href="#local-6989586621688151073"><span class="hs-identifier hs-var hs-var">offsetDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;skip the first n rows. Use only with order_by&quot;</span></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="hs-comment">-- | Arguments for a table connection selection</span><span>
</span><span id="line-795"></span><span class="hs-comment">--</span><span>
</span><span id="line-796"></span><span class="hs-comment">-- &gt; distinct_on: [table_select_column!]</span><span>
</span><span id="line-797"></span><span class="hs-comment">-- &gt; order_by: [table_order_by!]</span><span>
</span><span id="line-798"></span><span class="hs-comment">-- &gt; where: table_bool_exp</span><span>
</span><span id="line-799"></span><span class="hs-comment">-- &gt; first: Int</span><span>
</span><span id="line-800"></span><span class="hs-comment">-- &gt; last: Int</span><span>
</span><span id="line-801"></span><span class="hs-comment">-- &gt; before: String</span><span>
</span><span id="line-802"></span><span class="hs-comment">-- &gt; after: String</span><span>
</span><span id="line-803"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-type">tableConnectionArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688152201"><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688152200"><span class="annot"><a href="#local-6989586621688152200"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688152199"><span class="annot"><a href="#local-6989586621688152199"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688152198"><span class="annot"><a href="#local-6989586621688152198"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-805"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152200"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152199"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152198"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-806"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-807"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-808"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-809"></span><span>  </span><span class="annot"><a href="#local-6989586621688152199"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-810"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span>
</span><span id="line-811"></span><span>        </span><span class="annot"><a href="#local-6989586621688152198"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-812"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier hs-type">SelectArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-813"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-type">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-814"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSlice"><span class="hs-identifier hs-type">IR.ConnectionSlice</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-816"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-817"></span><span id="tableConnectionArgs"><span class="annot"><span class="annottext">tableConnectionArgs :: PrimaryKeyColumns b
-&gt; SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableConnectionArgs"><span class="hs-identifier hs-var hs-var">tableConnectionArgs</span></a></span></span><span> </span><span id="local-6989586621688151071"><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151071"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span id="local-6989586621688151070"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151070"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688151069"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151069"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-818"></span><span>  </span><span id="local-6989586621688151068"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621688151068"><span class="hs-identifier hs-var">whereParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (AnnBoolExp b (UnpreparedValue b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableWhereArg"><span class="hs-identifier hs-var">tableWhereArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151070"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151069"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-819"></span><span>  </span><span id="local-6989586621688151067"><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151067"><span class="hs-identifier hs-var">orderByParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
 -&gt; NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
forall v.
NonEmpty (AnnotatedOrderByItemG b v)
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621688151066"><span class="hs-identifier hs-var">appendPrimaryKeyOrderBy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
 -&gt; InputFieldsParser
      n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser
        n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableOrderByArg"><span class="hs-identifier hs-var">tableOrderByArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151070"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151069"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-820"></span><span>  </span><span id="local-6989586621688151065"><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621688151065"><span class="hs-identifier hs-var">distinctParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (Maybe (NonEmpty (Column b))))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableDistinctArg"><span class="hs-identifier hs-var">tableDistinctArg</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688151070"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688151069"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-821"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151064"><span class="annot"><span class="annottext">maybeFirst :: InputFieldsParser n (Maybe Int32)
</span><a href="#local-6989586621688151064"><span class="hs-identifier hs-var hs-var">maybeFirst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser n (Maybe Int32))
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;first&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe Int32)
 -&gt; InputFieldsParser n (Maybe (Maybe Int32)))
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32 -&gt; Parser 'Both n (Maybe Int32)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-822"></span><span>      </span><span id="local-6989586621688151063"><span class="annot"><span class="annottext">maybeLast :: InputFieldsParser n (Maybe Int32)
</span><a href="#local-6989586621688151063"><span class="hs-identifier hs-var hs-var">maybeLast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe Int32) -&gt; Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int32) -&gt; Maybe Int32
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe Int32))
 -&gt; InputFieldsParser n (Maybe Int32))
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;last&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe Int32)
 -&gt; InputFieldsParser n (Maybe (Maybe Int32)))
-&gt; Parser 'Both n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe (Maybe Int32))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32 -&gt; Parser 'Both n (Maybe Int32)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#nonNegativeInt"><span class="hs-identifier hs-var">P.nonNegativeInt</span></a></span><span>
</span><span id="line-823"></span><span>      </span><span id="local-6989586621688151062"><span class="annot"><span class="annottext">maybeAfter :: InputFieldsParser n (Maybe ByteString)
</span><a href="#local-6989586621688151062"><span class="hs-identifier hs-var hs-var">maybeAfter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe ByteString) -&gt; Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe ByteString) -&gt; Maybe ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe ByteString))
 -&gt; InputFieldsParser n (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;after&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe ByteString)
 -&gt; InputFieldsParser n (Maybe (Maybe ByteString)))
-&gt; Parser 'Both n (Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n ByteString -&gt; Parser 'Both n (Maybe ByteString)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n ByteString
</span><a href="#local-6989586621688151061"><span class="hs-identifier hs-var">base64Text</span></a></span><span>
</span><span id="line-824"></span><span>      </span><span id="local-6989586621688151060"><span class="annot"><span class="annottext">maybeBefore :: InputFieldsParser n (Maybe ByteString)
</span><a href="#local-6989586621688151060"><span class="hs-identifier hs-var hs-var">maybeBefore</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe ByteString) -&gt; Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe ByteString) -&gt; Maybe ByteString
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (Maybe (Maybe ByteString))
 -&gt; InputFieldsParser n (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
-&gt; InputFieldsParser n (Maybe ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;before&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Parser 'Both n (Maybe ByteString)
 -&gt; InputFieldsParser n (Maybe (Maybe ByteString)))
-&gt; Parser 'Both n (Maybe ByteString)
-&gt; InputFieldsParser n (Maybe (Maybe ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n ByteString -&gt; Parser 'Both n (Maybe ByteString)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n ByteString
</span><a href="#local-6989586621688151061"><span class="hs-identifier hs-var">base64Text</span></a></span><span>
</span><span id="line-825"></span><span>      </span><span id="local-6989586621688151059"><span class="annot"><span class="annottext">firstAndLast :: InputFieldsParser n (Maybe Int32, Maybe Int32)
</span><a href="#local-6989586621688151059"><span class="hs-identifier hs-var hs-var">firstAndLast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Int32 -&gt; Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int32)
</span><a href="#local-6989586621688151064"><span class="hs-identifier hs-var">maybeFirst</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int32 -&gt; (Maybe Int32, Maybe Int32))
-&gt; InputFieldsParser n (Maybe Int32)
-&gt; InputFieldsParser n (Maybe Int32, Maybe Int32)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int32)
</span><a href="#local-6989586621688151063"><span class="hs-identifier hs-var">maybeLast</span></a></span><span>
</span><span id="line-826"></span><span>      </span><span id="local-6989586621688151058"><span class="annot"><span class="annottext">afterBeforeAndOrderBy :: InputFieldsParser
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151058"><span class="hs-identifier hs-var hs-var">afterBeforeAndOrderBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe ByteString
 -&gt; Maybe ByteString
 -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
 -&gt; (Maybe ByteString, Maybe ByteString,
     Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser n (Maybe ByteString)
-&gt; InputFieldsParser
     n
     (Maybe ByteString
      -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
      -&gt; (Maybe ByteString, Maybe ByteString,
          Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe ByteString)
</span><a href="#local-6989586621688151062"><span class="hs-identifier hs-var">maybeAfter</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (Maybe ByteString
   -&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
   -&gt; (Maybe ByteString, Maybe ByteString,
       Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser n (Maybe ByteString)
-&gt; InputFieldsParser
     n
     (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
      -&gt; (Maybe ByteString, Maybe ByteString,
          Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe ByteString)
</span><a href="#local-6989586621688151060"><span class="hs-identifier hs-var">maybeBefore</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
   -&gt; (Maybe ByteString, Maybe ByteString,
       Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))))
-&gt; InputFieldsParser
     n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; InputFieldsParser
     n
     (Maybe ByteString, Maybe ByteString,
      Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151067"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span>  </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgs b,
   Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
   Maybe ConnectionSlice)
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n
   (SelectArgs b,
    Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
    Maybe ConnectionSlice)
 -&gt; m (InputFieldsParser
         n
         (SelectArgs b,
          Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
          Maybe ConnectionSlice)))
-&gt; InputFieldsParser
     n
     (SelectArgs b,
      Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
      Maybe ConnectionSlice)
-&gt; m (InputFieldsParser
        n
        (SelectArgs b,
         Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))),
         Maybe ConnectionSlice))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-829"></span><span>    </span><span id="local-6989586621688151057"><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151057"><span class="hs-identifier hs-var">whereF</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (AnnBoolExp b (UnpreparedValue b)))
</span><a href="#local-6989586621688151068"><span class="hs-identifier hs-var">whereParser</span></a></span><span>
</span><span id="line-830"></span><span>    </span><span id="local-6989586621688151056"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151056"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151067"><span class="hs-identifier hs-var">orderByParser</span></a></span><span>
</span><span id="line-831"></span><span>    </span><span id="local-6989586621688151055"><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621688151055"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (NonEmpty (Column b)))
</span><a href="#local-6989586621688151065"><span class="hs-identifier hs-var">distinctParser</span></a></span><span>
</span><span id="line-832"></span><span>    </span><span id="local-6989586621688151054"><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151054"><span class="hs-identifier hs-var">split</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-833"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
</span><a href="#local-6989586621688151058"><span class="hs-identifier hs-var">afterBeforeAndOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (Maybe ByteString, Maybe ByteString,
   Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
-&gt; ((Maybe ByteString, Maybe ByteString,
     Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))))
    -&gt; n (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))))
-&gt; InputFieldsParser
     n (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
forall (m :: * -&gt; *) a b.
Monad m =&gt;
InputFieldsParser m a -&gt; (a -&gt; m b) -&gt; InputFieldsParser m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688151053"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688151053"><span class="hs-identifier hs-var">after</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151052"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688151052"><span class="hs-identifier hs-var">before</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688151051"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151051"><span class="hs-identifier hs-var">orderBy'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-834"></span><span>        </span><span id="local-6989586621688151050"><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
</span><a href="#local-6989586621688151050"><span class="hs-identifier hs-var">rawSplit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688151053"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621688151052"><span class="hs-identifier hs-var">before</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-835"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-836"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;after\&quot; and \&quot;before\&quot; are not allowed at once&quot;</span></span><span>
</span><span id="line-837"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151049"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151049"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ConnectionSplitKind, ByteString)
 -&gt; n (Maybe (ConnectionSplitKind, ByteString)))
-&gt; Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplitKind, ByteString)
-&gt; Maybe (ConnectionSplitKind, ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="Hasura.RQL.IR.Select.html#CSKAfter"><span class="hs-identifier hs-var">IR.CSKAfter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151049"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151047"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151047"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ConnectionSplitKind, ByteString)
 -&gt; n (Maybe (ConnectionSplitKind, ByteString)))
-&gt; Maybe (ConnectionSplitKind, ByteString)
-&gt; n (Maybe (ConnectionSplitKind, ByteString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplitKind, ByteString)
-&gt; Maybe (ConnectionSplitKind, ByteString)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="Hasura.RQL.IR.Select.html#CSKBefore"><span class="hs-identifier hs-var">IR.CSKBefore</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151047"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>        </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
-&gt; ((ConnectionSplitKind, ByteString)
    -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; n (Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ConnectionSplitKind, ByteString)
</span><a href="#local-6989586621688151050"><span class="hs-identifier hs-var">rawSplit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ConnectionSplitKind
 -&gt; ByteString
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (ConnectionSplitKind, ByteString)
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; ConnectionSplitKind
-&gt; ByteString
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151044"><span class="hs-identifier hs-var">parseConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151051"><span class="hs-identifier hs-var">orderBy'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span>    </span><span id="local-6989586621688151043"><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151043"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-842"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int32, Maybe Int32)
</span><a href="#local-6989586621688151059"><span class="hs-identifier hs-var">firstAndLast</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe Int32, Maybe Int32)
-&gt; ((Maybe Int32, Maybe Int32) -&gt; n (Maybe ConnectionSlice))
-&gt; InputFieldsParser n (Maybe ConnectionSlice)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
InputFieldsParser m a -&gt; (a -&gt; m b) -&gt; InputFieldsParser m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindFields"><span class="hs-operator hs-var">`P.bindFields`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-843"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-844"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; n (Maybe ConnectionSlice)
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;first\&quot; and \&quot;last\&quot; are not allowed at once&quot;</span></span><span>
</span><span id="line-845"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151042"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621688151042"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice))
-&gt; Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConnectionSlice -&gt; Maybe ConnectionSlice
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSlice -&gt; Maybe ConnectionSlice)
-&gt; ConnectionSlice -&gt; Maybe ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#SliceFirst"><span class="hs-identifier hs-var">IR.SliceFirst</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ConnectionSlice) -&gt; Int -&gt; ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621688151042"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-846"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int32
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151040"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621688151040"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice))
-&gt; Maybe ConnectionSlice -&gt; n (Maybe ConnectionSlice)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConnectionSlice -&gt; Maybe ConnectionSlice
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSlice -&gt; Maybe ConnectionSlice)
-&gt; ConnectionSlice -&gt; Maybe ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConnectionSlice
</span><a href="Hasura.RQL.IR.Select.html#SliceLast"><span class="hs-identifier hs-var">IR.SliceLast</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ConnectionSlice) -&gt; Int -&gt; ConnectionSlice
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621688151040"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-identifier">pure</span><span>
</span><span id="line-849"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgs b
forall (b :: BackendType) v.
Maybe (AnnBoolExp b v)
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgsG b v
</span><a href="Hasura.RQL.IR.Select.html#SelectArgs"><span class="hs-identifier hs-var">IR.SelectArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnBoolExp b (UnpreparedValue b))
</span><a href="#local-6989586621688151057"><span class="hs-identifier hs-var">whereF</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151056"><span class="hs-identifier hs-var">orderBy</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int64
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (Column b))
</span><a href="#local-6989586621688151055"><span class="hs-identifier hs-var">distinct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-850"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151054"><span class="hs-identifier hs-var">split</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-851"></span><span>        </span><span class="annot"><span class="annottext">Maybe ConnectionSlice
</span><a href="#local-6989586621688151043"><span class="hs-identifier hs-var">slice</span></a></span><span>
</span><span id="line-852"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-854"></span><span>    </span><span id="local-6989586621688151061"><span class="annot"><span class="annottext">base64Text :: Parser 'Both n ByteString
</span><a href="#local-6989586621688151061"><span class="hs-identifier hs-var hs-var">base64Text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><a href="Hasura.Prelude.html#base64Decode"><span class="hs-identifier hs-var">base64Decode</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; Parser 'Both n Text -&gt; Parser 'Both n ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#string"><span class="hs-identifier hs-var">P.string</span></a></span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span>    </span><span id="local-6989586621688151901"><span class="annot"><a href="#local-6989586621688151066"><span class="hs-identifier hs-type">appendPrimaryKeyOrderBy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151901"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151901"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-857"></span><span>    </span><span id="local-6989586621688151066"><span class="annot"><span class="annottext">appendPrimaryKeyOrderBy :: NonEmpty (AnnotatedOrderByItemG b v)
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621688151066"><span class="hs-identifier hs-var hs-var">appendPrimaryKeyOrderBy</span></a></span></span><span> </span><span id="local-6989586621688151037"><span class="annot"><span class="annottext">orderBys :: NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621688151037"><span class="hs-identifier hs-var">orderBys</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621688151036"><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
</span><a href="#local-6989586621688151036"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span id="local-6989586621688151034"><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621688151034"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-858"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151033"><span class="annot"><span class="annottext">orderByColumnNames :: [Column b]
</span><a href="#local-6989586621688151033"><span class="hs-identifier hs-var hs-var">orderByColumnNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-859"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b v)
</span><a href="#local-6989586621688151037"><span class="hs-identifier hs-var">orderBys</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b v)
-&gt; Getting
     (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)) (Column b)
-&gt; [Column b]
forall s a. s -&gt; Getting (Endo [a]) s a -&gt; [a]
</span><span class="hs-operator hs-var">^..</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v
 -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
-&gt; Const (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((AnnotatedOrderByItemG b v
  -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
 -&gt; NonEmpty (AnnotatedOrderByItemG b v)
 -&gt; Const (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)))
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; AnnotatedOrderByItemG b v
    -&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v))
-&gt; Getting
     (Endo [Column b]) (NonEmpty (AnnotatedOrderByItemG b v)) (Column b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v -&gt; AnnotatedOrderByElement b v)
-&gt; Optic'
     (-&gt;)
     (Const (Endo [Column b]))
     (AnnotatedOrderByItemG b v)
     (AnnotatedOrderByElement b v)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v -&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) a. OrderByItemG b a -&gt; a
</span><a href="Hasura.RQL.IR.OrderBy.html#obiColumn"><span class="hs-identifier hs-var hs-var">IR.obiColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Optic'
  (-&gt;)
  (Const (Endo [Column b]))
  (AnnotatedOrderByItemG b v)
  (AnnotatedOrderByElement b v)
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; AnnotatedOrderByElement b v
    -&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v))
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; AnnotatedOrderByItemG b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByItemG b v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
-&gt; AnnotatedOrderByElement b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v)
forall (b :: BackendType) v.
Prism' (AnnotatedOrderByElement b v) (ColumnInfo b)
</span><a href="Hasura.RQL.IR.Select.html#_AOCColumn"><span class="hs-identifier hs-var">IR._AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
 -&gt; AnnotatedOrderByElement b v
 -&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v))
-&gt; ((Column b -&gt; Const (Endo [Column b]) (Column b))
    -&gt; ColumnInfo b -&gt; Const (Endo [Column b]) (ColumnInfo b))
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; AnnotatedOrderByElement b v
-&gt; Const (Endo [Column b]) (AnnotatedOrderByElement b v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Column b)
-&gt; (Column b -&gt; Const (Endo [Column b]) (Column b))
-&gt; ColumnInfo b
-&gt; Const (Endo [Column b]) (ColumnInfo b)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span>
</span><span id="line-860"></span><span>          </span><span id="local-6989586621688151028"><span class="annot"><span class="annottext">pkeyOrderBys :: [AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621688151028"><span class="hs-identifier hs-var hs-var">pkeyOrderBys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
 -&gt; [ColumnInfo b] -&gt; [AnnotatedOrderByItemG b v])
-&gt; [ColumnInfo b]
-&gt; (ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [AnnotatedOrderByItemG b v]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [ColumnInfo b] -&gt; [AnnotatedOrderByItemG b v]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimaryKeyColumns b -&gt; [ColumnInfo b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151071"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
 -&gt; [AnnotatedOrderByItemG b v])
-&gt; (ColumnInfo b -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; [AnnotatedOrderByItemG b v]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688151027"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151027"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-861"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151027"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; [Column b] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621688151033"><span class="hs-identifier hs-var">orderByColumnNames</span></a></span><span>
</span><span id="line-862"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (AnnotatedOrderByItemG b v)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-863"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v))
-&gt; AnnotatedOrderByItemG b v -&gt; Maybe (AnnotatedOrderByItemG b v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b v
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b v
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; AnnotatedOrderByElement b v
forall (b :: BackendType) v.
ColumnInfo b -&gt; AnnotatedOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-var">IR.AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151027"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-864"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
</span><a href="#local-6989586621688151036"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b v
-&gt; [AnnotatedOrderByItemG b v]
-&gt; NonEmpty (AnnotatedOrderByItemG b v)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621688151034"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
-&gt; [AnnotatedOrderByItemG b v] -&gt; [AnnotatedOrderByItemG b v]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[AnnotatedOrderByItemG b v]
</span><a href="#local-6989586621688151028"><span class="hs-identifier hs-var">pkeyOrderBys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span>    </span><span class="annot"><a href="#local-6989586621688151044"><span class="hs-identifier hs-type">parseConnectionSplit</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-867"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnotatedOrderByItemG"><span class="hs-identifier hs-type">IR.AnnotatedOrderByItemG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-868"></span><span>      </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplitKind"><span class="hs-identifier hs-type">IR.ConnectionSplitKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-869"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-870"></span><span>      </span><span class="annot"><a href="#local-6989586621688152198"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-type">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>    </span><span id="local-6989586621688151044"><span class="annot"><span class="annottext">parseConnectionSplit :: Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
-&gt; ConnectionSplitKind
-&gt; ByteString
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
</span><a href="#local-6989586621688151044"><span class="hs-identifier hs-var hs-var">parseConnectionSplit</span></a></span></span><span> </span><span id="local-6989586621688151025"><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151025"><span class="hs-identifier hs-var">maybeOrderBys</span></a></span></span><span> </span><span id="local-6989586621688151024"><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621688151024"><span class="hs-identifier hs-var">splitKind</span></a></span></span><span> </span><span id="local-6989586621688151023"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151023"><span class="hs-identifier hs-var">cursorSplit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-872"></span><span>      </span><span id="local-6989586621688151022"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688151022"><span class="hs-identifier hs-var">cursorValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String Value
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">J.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621688151023"><span class="hs-identifier hs-var">cursorSplit</span></a></span><span> </span><span class="annot"><span class="annottext">Either String Value -&gt; (String -&gt; n Value) -&gt; n Value
forall (m :: * -&gt; *) e a.
Applicative m =&gt;
Either e a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="Hasura.Prelude.html#onLeft"><span class="hs-operator hs-var">`onLeft`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value -&gt; String -&gt; n Value
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621688151018"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-873"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><a href="#local-6989586621688151025"><span class="hs-identifier hs-var">maybeOrderBys</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b)))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnInfo b)
-&gt; (ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimaryKeyColumns b -&gt; NonEmpty (ColumnInfo b)
forall a. NESeq a -&gt; NonEmpty a
</span><a href="Data.Sequence.NonEmpty.html#toNonEmpty"><span class="hs-identifier hs-var">NESeq.toNonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688151071"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (ColumnInfo b -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-875"></span><span>          </span><span class="hs-glyph">\</span><span id="local-6989586621688151015"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151015"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-876"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151014"><span class="annot"><span class="annottext">columnJsonPath :: [JSONPathElement]
</span><a href="#local-6989586621688151014"><span class="hs-identifier hs-var hs-var">columnJsonPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; Text -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151015"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-877"></span><span>                </span><span id="local-6989586621688151011"><span class="annot"><span class="annottext">columnType :: ColumnType b
</span><a href="#local-6989586621688151011"><span class="hs-identifier hs-var hs-var">columnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151015"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-878"></span><span>            </span><span id="local-6989586621688151010"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688151010"><span class="hs-identifier hs-var">columnValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-879"></span><span>              </span><span class="annot"><span class="annottext">IResult Value -&gt; Maybe Value
forall a. IResult a -&gt; Maybe a
</span><a href="Hasura.Base.Error.html#iResultToMaybe"><span class="hs-identifier hs-var">iResultToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JSONPathElement] -&gt; Value -&gt; IResult Value
</span><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-var">executeJSONPath</span></a></span><span> </span><span class="annot"><span class="annottext">[JSONPathElement]
</span><a href="#local-6989586621688151014"><span class="hs-identifier hs-var">columnJsonPath</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688151022"><span class="hs-identifier hs-var">cursorValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-880"></span><span>                </span><span class="annot"><span class="annottext">Maybe Value -&gt; n Value -&gt; n Value
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621688151018"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-881"></span><span>            </span><span id="local-6989586621688151007"><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621688151007"><span class="hs-identifier hs-var">pgValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a. Except QErr a -&gt; n a
</span><a href="#local-6989586621688151006"><span class="hs-identifier hs-var">liftQErr</span></a></span><span> </span><span class="annot"><span class="annottext">(Except QErr (ScalarValue b) -&gt; n (ScalarValue b))
-&gt; Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; Value -&gt; Except QErr (ScalarValue b)
forall (m :: * -&gt; *) (b :: BackendType).
(MonadError QErr m, Backend b) =&gt;
ColumnType b -&gt; Value -&gt; m (ScalarValue b)
</span><a href="Hasura.RQL.Types.Column.html#parseScalarValueColumnType"><span class="hs-identifier hs-var">parseScalarValueColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621688151011"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688151010"><span class="hs-identifier hs-var">columnValue</span></a></span><span>
</span><span id="line-882"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688151004"><span class="annot"><span class="annottext">unresolvedValue :: UnpreparedValue b
</span><a href="#local-6989586621688151004"><span class="hs-identifier hs-var hs-var">unresolvedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
forall (b :: BackendType).
Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#UVParameter"><span class="hs-identifier hs-var">UVParameter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(ColumnValue b -&gt; UnpreparedValue b)
-&gt; ColumnValue b -&gt; UnpreparedValue b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
forall (b :: BackendType).
ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
</span><a href="Hasura.RQL.Types.Column.html#ColumnValue"><span class="hs-identifier hs-var">ColumnValue</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621688151011"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621688151007"><span class="hs-identifier hs-var">pgValue</span></a></span><span>
</span><span id="line-883"></span><span>            </span><span class="annot"><span class="annottext">ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplit b (UnpreparedValue b)
 -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-884"></span><span>              </span><span class="annot"><span class="annottext">ConnectionSplitKind
-&gt; UnpreparedValue b
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall (b :: BackendType) v.
ConnectionSplitKind
-&gt; v
-&gt; OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; ConnectionSplit b v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-var">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621688151024"><span class="hs-identifier hs-var">splitKind</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
</span><a href="#local-6989586621688151004"><span class="hs-identifier hs-var">unresolvedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b (UnpreparedValue b)
 -&gt; ConnectionSplit b (UnpreparedValue b))
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-885"></span><span>                </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b (UnpreparedValue b)
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; AnnotatedOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ColumnInfo b -&gt; AnnotatedOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-var">IR.AOCColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688151015"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-886"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688151000"><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621688151000"><span class="hs-identifier hs-var">orderBys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-887"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
-&gt; (AnnotatedOrderByItemG b (UnpreparedValue b)
    -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (AnnotatedOrderByItemG b (UnpreparedValue b))
</span><a href="#local-6989586621688151000"><span class="hs-identifier hs-var">orderBys</span></a></span><span> </span><span class="annot"><span class="annottext">((AnnotatedOrderByItemG b (UnpreparedValue b)
  -&gt; n (ConnectionSplit b (UnpreparedValue b)))
 -&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b))))
-&gt; (AnnotatedOrderByItemG b (UnpreparedValue b)
    -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; n (NonEmpty (ConnectionSplit b (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150999"><span class="annot"><span class="annottext">AnnotatedOrderByItemG b (UnpreparedValue b)
</span><a href="#local-6989586621688150999"><span class="hs-identifier hs-var">orderBy</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-888"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-type">IR.OrderByItemG</span></a></span><span> </span><span id="local-6989586621688150998"><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
</span><a href="#local-6989586621688150998"><span class="hs-identifier hs-var">orderType</span></a></span></span><span> </span><span id="local-6989586621688150997"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150997"><span class="hs-identifier hs-var">annObCol</span></a></span></span><span> </span><span id="local-6989586621688150996"><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
</span><a href="#local-6989586621688150996"><span class="hs-identifier hs-var">nullsOrder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByItemG b (UnpreparedValue b)
</span><a href="#local-6989586621688150999"><span class="hs-identifier hs-var">orderBy</span></a></span><span>
</span><span id="line-889"></span><span>                </span><span id="local-6989586621688150995"><span class="annot"><span class="annottext">columnType :: ColumnType b
</span><a href="#local-6989586621688150995"><span class="hs-identifier hs-var hs-var">columnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621688150994"><span class="hs-identifier hs-var">getOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150997"><span class="hs-identifier hs-var">annObCol</span></a></span><span>
</span><span id="line-890"></span><span>            </span><span id="local-6989586621688150993"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150993"><span class="hs-identifier hs-var">orderByItemValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-891"></span><span>              </span><span class="annot"><span class="annottext">IResult Value -&gt; Maybe Value
forall a. IResult a -&gt; Maybe a
</span><a href="Hasura.Base.Error.html#iResultToMaybe"><span class="hs-identifier hs-var">iResultToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JSONPathElement] -&gt; Value -&gt; IResult Value
</span><a href="Hasura.Server.Utils.html#executeJSONPath"><span class="hs-identifier hs-var">executeJSONPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150992"><span class="hs-identifier hs-var">getPathFromOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150997"><span class="hs-identifier hs-var">annObCol</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688151022"><span class="hs-identifier hs-var">cursorValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>                </span><span class="annot"><span class="annottext">Maybe Value -&gt; n Value -&gt; n Value
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">n Value
forall a. n a
</span><a href="#local-6989586621688151018"><span class="hs-identifier hs-var">throwInvalidCursor</span></a></span><span>
</span><span id="line-893"></span><span>            </span><span id="local-6989586621688150991"><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621688150991"><span class="hs-identifier hs-var">pgValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a. Except QErr a -&gt; n a
</span><a href="#local-6989586621688151006"><span class="hs-identifier hs-var">liftQErr</span></a></span><span> </span><span class="annot"><span class="annottext">(Except QErr (ScalarValue b) -&gt; n (ScalarValue b))
-&gt; Except QErr (ScalarValue b) -&gt; n (ScalarValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; Value -&gt; Except QErr (ScalarValue b)
forall (m :: * -&gt; *) (b :: BackendType).
(MonadError QErr m, Backend b) =&gt;
ColumnType b -&gt; Value -&gt; m (ScalarValue b)
</span><a href="Hasura.RQL.Types.Column.html#parseScalarValueColumnType"><span class="hs-identifier hs-var">parseScalarValueColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621688150995"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150993"><span class="hs-identifier hs-var">orderByItemValue</span></a></span><span>
</span><span id="line-894"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150990"><span class="annot"><span class="annottext">unresolvedValue :: UnpreparedValue b
</span><a href="#local-6989586621688150990"><span class="hs-identifier hs-var hs-var">unresolvedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
forall (b :: BackendType).
Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#UVParameter"><span class="hs-identifier hs-var">UVParameter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(ColumnValue b -&gt; UnpreparedValue b)
-&gt; ColumnValue b -&gt; UnpreparedValue b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
forall (b :: BackendType).
ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
</span><a href="Hasura.RQL.Types.Column.html#ColumnValue"><span class="hs-identifier hs-var">ColumnValue</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType b
</span><a href="#local-6989586621688150995"><span class="hs-identifier hs-var">columnType</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarValue b
</span><a href="#local-6989586621688150991"><span class="hs-identifier hs-var">pgValue</span></a></span><span>
</span><span id="line-895"></span><span>            </span><span class="annot"><span class="annottext">ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ConnectionSplit b (UnpreparedValue b)
 -&gt; n (ConnectionSplit b (UnpreparedValue b)))
-&gt; ConnectionSplit b (UnpreparedValue b)
-&gt; n (ConnectionSplit b (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-896"></span><span>              </span><span class="annot"><span class="annottext">ConnectionSplitKind
-&gt; UnpreparedValue b
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall (b :: BackendType) v.
ConnectionSplitKind
-&gt; v
-&gt; OrderByItemG b (AnnotatedOrderByElement b v)
-&gt; ConnectionSplit b v
</span><a href="Hasura.RQL.IR.Select.html#ConnectionSplit"><span class="hs-identifier hs-var">IR.ConnectionSplit</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionSplitKind
</span><a href="#local-6989586621688151024"><span class="hs-identifier hs-var">splitKind</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
</span><a href="#local-6989586621688150990"><span class="hs-identifier hs-var">unresolvedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnotatedOrderByItemG b (UnpreparedValue b)
 -&gt; ConnectionSplit b (UnpreparedValue b))
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
-&gt; ConnectionSplit b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-897"></span><span>                </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
-&gt; AnnotatedOrderByElement b (UnpreparedValue b)
-&gt; Maybe (NullsOrderType b)
-&gt; AnnotatedOrderByItemG b (UnpreparedValue b)
forall (b :: BackendType) a.
Maybe (BasicOrderType b)
-&gt; a -&gt; Maybe (NullsOrderType b) -&gt; OrderByItemG b a
</span><a href="Hasura.RQL.IR.OrderBy.html#OrderByItemG"><span class="hs-identifier hs-var">IR.OrderByItemG</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (BasicOrderType b)
</span><a href="#local-6989586621688150998"><span class="hs-identifier hs-var">orderType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150997"><span class="hs-identifier hs-var">annObCol</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NullsOrderType b)
</span><a href="#local-6989586621688150996"><span class="hs-identifier hs-var">nullsOrder</span></a></span><span>
</span><span id="line-898"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-899"></span><span>        </span><span id="local-6989586621688151018"><span class="annot"><span class="annottext">throwInvalidCursor :: n a
</span><a href="#local-6989586621688151018"><span class="hs-identifier hs-var hs-var">throwInvalidCursor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; n a
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the \&quot;after\&quot; or \&quot;before\&quot; cursor is invalid&quot;</span></span><span>
</span><span id="line-900"></span><span>        </span><span id="local-6989586621688151006"><span class="annot"><span class="annottext">liftQErr :: Except QErr a -&gt; n a
</span><a href="#local-6989586621688151006"><span class="hs-identifier hs-var hs-var">liftQErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QErr -&gt; n a) -&gt; (a -&gt; n a) -&gt; Either QErr a -&gt; n a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; n a
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; n a) -&gt; (QErr -&gt; Text) -&gt; QErr -&gt; n a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QErr -&gt; Text
</span><a href="Hasura.Base.Error.html#qeError"><span class="hs-identifier hs-var hs-var">qeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; n a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either QErr a -&gt; n a)
-&gt; (Except QErr a -&gt; Either QErr a) -&gt; Except QErr a -&gt; n a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Except QErr a -&gt; Either QErr a
forall e a. Except e a -&gt; Either e a
</span><span class="hs-identifier hs-var">runExcept</span></span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span>        </span><span id="local-6989586621688150986"><span class="annot"><span class="annottext">mkAggregateOrderByPath :: AnnotatedAggregateOrderBy b -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150986"><span class="hs-identifier hs-var hs-var">mkAggregateOrderByPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-903"></span><span>          </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="Hasura.RQL.IR.Select.html#AAOCount"><span class="hs-identifier hs-var">IR.AAOCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;count&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-904"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AAOOp"><span class="hs-identifier hs-type">IR.AAOOp</span></a></span><span> </span><span id="local-6989586621688150983"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150983"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621688150982"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150982"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150983"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; Text -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150982"><span class="hs-identifier hs-var">col</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span>        </span><span id="local-6989586621688150992"><span class="annot"><span class="annottext">getPathFromOrderBy :: AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150992"><span class="hs-identifier hs-var hs-var">getPathFromOrderBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-907"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621688150981"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150981"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-908"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150980"><span class="annot"><span class="annottext">pathElement :: JSONPathElement
</span><a href="#local-6989586621688150980"><span class="hs-identifier hs-var hs-var">pathElement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; Text -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Text
forall a. ToTxt a =&gt; a -&gt; Text
</span><a href="Data.Text.Extended.html#toTxt"><span class="hs-identifier hs-var">toTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(Column b -&gt; Text) -&gt; Column b -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150981"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-909"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621688150980"><span class="hs-identifier hs-var">pathElement</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-910"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCObjectRelation"><span class="hs-identifier hs-type">IR.AOCObjectRelation</span></a></span><span> </span><span id="local-6989586621688150978"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150978"><span class="hs-identifier hs-var">relInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150977"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150977"><span class="hs-identifier hs-var">obCol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-911"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150976"><span class="annot"><span class="annottext">pathElement :: JSONPathElement
</span><a href="#local-6989586621688150976"><span class="hs-identifier hs-var hs-var">pathElement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; Text -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(RelName -&gt; Text) -&gt; RelName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150978"><span class="hs-identifier hs-var">relInfo</span></a></span><span>
</span><span id="line-912"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621688150976"><span class="hs-identifier hs-var">pathElement</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPathElement -&gt; [JSONPathElement] -&gt; [JSONPathElement]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150992"><span class="hs-identifier hs-var">getPathFromOrderBy</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150977"><span class="hs-identifier hs-var">obCol</span></a></span><span>
</span><span id="line-913"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCArrayAggregation"><span class="hs-identifier hs-type">IR.AOCArrayAggregation</span></a></span><span> </span><span id="local-6989586621688150972"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150972"><span class="hs-identifier hs-var">relInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150971"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150971"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-914"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150970"><span class="annot"><span class="annottext">fieldName :: JSONPathElement
</span><a href="#local-6989586621688150970"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; JSONPathElement) -&gt; Text -&gt; JSONPathElement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150972"><span class="hs-identifier hs-var">relInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;_aggregate&quot;</span></span><span>
</span><span id="line-915"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">JSONPathElement
</span><a href="#local-6989586621688150970"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONPathElement -&gt; [JSONPathElement] -&gt; [JSONPathElement]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150986"><span class="hs-identifier hs-var">mkAggregateOrderByPath</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150971"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-916"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCComputedField"><span class="hs-identifier hs-type">IR.AOCComputedField</span></a></span><span> </span><span id="local-6989586621688150968"><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621688150968"><span class="hs-identifier hs-var">cfob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-917"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150967"><span class="annot"><span class="annottext">fieldNameText :: Text
</span><a href="#local-6989586621688150967"><span class="hs-identifier hs-var hs-var">fieldNameText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComputedFieldName -&gt; Text
</span><a href="Hasura.RQL.Types.ComputedField.html#computedFieldNameToText"><span class="hs-identifier hs-var">computedFieldNameToText</span></a></span><span> </span><span class="annot"><span class="annottext">(ComputedFieldName -&gt; Text) -&gt; ComputedFieldName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b) -&gt; ComputedFieldName
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldName
</span><a href="Hasura.RQL.IR.Select.html#_cfobName"><span class="hs-identifier hs-var hs-var">IR._cfobName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621688150968"><span class="hs-identifier hs-var">cfob</span></a></span><span>
</span><span id="line-918"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
-&gt; ComputedFieldOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#_cfobOrderByElement"><span class="hs-identifier hs-var hs-var">IR._cfobOrderByElement</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621688150968"><span class="hs-identifier hs-var">cfob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-919"></span><span>                  </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBEScalar"><span class="hs-identifier hs-type">IR.CFOBEScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150967"><span class="hs-identifier hs-var">fieldNameText</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-920"></span><span>                  </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBETableAggregation"><span class="hs-identifier hs-type">IR.CFOBETableAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150961"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150961"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-921"></span><span>                    </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">J.Key</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150967"><span class="hs-identifier hs-var">fieldNameText</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;_aggregate&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JSONPathElement -&gt; [JSONPathElement] -&gt; [JSONPathElement]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; [JSONPathElement]
</span><a href="#local-6989586621688150986"><span class="hs-identifier hs-var">mkAggregateOrderByPath</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150961"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span>        </span><span id="local-6989586621688150994"><span class="annot"><span class="annottext">getOrderByColumnType :: AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621688150994"><span class="hs-identifier hs-var hs-var">getOrderByColumnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-924"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCColumn"><span class="hs-identifier hs-type">IR.AOCColumn</span></a></span><span> </span><span id="local-6989586621688150960"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150960"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150960"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-925"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCObjectRelation"><span class="hs-identifier hs-type">IR.AOCObjectRelation</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150959"><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150959"><span class="hs-identifier hs-var">obCol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b) -&gt; ColumnType b
</span><a href="#local-6989586621688150994"><span class="hs-identifier hs-var">getOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedOrderByElement b (UnpreparedValue b)
</span><a href="#local-6989586621688150959"><span class="hs-identifier hs-var">obCol</span></a></span><span>
</span><span id="line-926"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCArrayAggregation"><span class="hs-identifier hs-type">IR.AOCArrayAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150958"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150958"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621688150957"><span class="hs-identifier hs-var">aggregateOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150958"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-927"></span><span>          </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AOCComputedField"><span class="hs-identifier hs-type">IR.AOCComputedField</span></a></span><span> </span><span id="local-6989586621688150956"><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621688150956"><span class="hs-identifier hs-var">cfob</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-928"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
-&gt; ComputedFieldOrderByElement b (UnpreparedValue b)
forall (b :: BackendType) v.
ComputedFieldOrderBy b v -&gt; ComputedFieldOrderByElement b v
</span><a href="Hasura.RQL.IR.Select.html#_cfobOrderByElement"><span class="hs-identifier hs-var hs-var">IR._cfobOrderByElement</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldOrderBy b (UnpreparedValue b)
</span><a href="#local-6989586621688150956"><span class="hs-identifier hs-var">cfob</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-929"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBEScalar"><span class="hs-identifier hs-type">IR.CFOBEScalar</span></a></span><span> </span><span id="local-6989586621688150955"><span class="annot"><span class="annottext">ScalarType b
</span><a href="#local-6989586621688150955"><span class="hs-identifier hs-var">scalarType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScalarType b -&gt; ColumnType b
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType b
</span><a href="#local-6989586621688150955"><span class="hs-identifier hs-var">scalarType</span></a></span><span>
</span><span id="line-930"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#CFOBETableAggregation"><span class="hs-identifier hs-type">IR.CFOBETableAggregation</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150953"><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150953"><span class="hs-identifier hs-var">aggOb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621688150957"><span class="hs-identifier hs-var">aggregateOrderByColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="#local-6989586621688150953"><span class="hs-identifier hs-var">aggOb</span></a></span><span>
</span><span id="line-931"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-932"></span><span>            </span><span id="local-6989586621688150957"><span class="annot"><span class="annottext">aggregateOrderByColumnType :: AnnotatedAggregateOrderBy b -&gt; ColumnType b
</span><a href="#local-6989586621688150957"><span class="hs-identifier hs-var hs-var">aggregateOrderByColumnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-933"></span><span>              </span><span class="annot"><span class="annottext">AnnotatedAggregateOrderBy b
</span><a href="Hasura.RQL.IR.Select.html#AAOCount"><span class="hs-identifier hs-var">IR.AAOCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScalarType b -&gt; ColumnType b
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BackendSchema b =&gt; ScalarType b
forall (b :: BackendType). BackendSchema b =&gt; ScalarType b
</span><a href="Hasura.GraphQL.Schema.Backend.html#aggregateOrderByCountType"><span class="hs-identifier hs-var">aggregateOrderByCountType</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688152201"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span>              </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AAOOp"><span class="hs-identifier hs-type">IR.AAOOp</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621688150951"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150951"><span class="hs-identifier hs-var">colInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150951"><span class="hs-identifier hs-var">colInfo</span></a></span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-comment">-- | Aggregation fields</span><span>
</span><span id="line-937"></span><span class="hs-comment">--</span><span>
</span><span id="line-938"></span><span class="hs-comment">-- &gt; type table_aggregate_fields{</span><span>
</span><span id="line-939"></span><span class="hs-comment">-- &gt;   count(distinct: Boolean, columns: [table_select_column!]): Int!</span><span>
</span><span id="line-940"></span><span class="hs-comment">-- &gt;   sum: table_sum_fields</span><span>
</span><span id="line-941"></span><span class="hs-comment">-- &gt;   avg: table_avg_fields</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- &gt;   stddev: table_stddev_fields</span><span>
</span><span id="line-943"></span><span class="hs-comment">-- &gt;   stddev_pop: table_stddev_pop_fields</span><span>
</span><span id="line-944"></span><span class="hs-comment">-- &gt;   variance: table_variance_fields</span><span>
</span><span id="line-945"></span><span class="hs-comment">-- &gt;   var_pop: table_var_pop_fields</span><span>
</span><span id="line-946"></span><span class="hs-comment">-- &gt;   max: table_max_fields</span><span>
</span><span id="line-947"></span><span class="hs-comment">-- &gt;   min: table_min_fields</span><span>
</span><span id="line-948"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-949"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-type">tableAggregationFields</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688152115"><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688152114"><span class="annot"><a href="#local-6989586621688152114"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688152113"><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688152112"><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-951"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152114"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-952"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-953"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-954"></span><span>  </span><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateFields"><span class="hs-identifier hs-type">IR.AggregateFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span id="tableAggregationFields"><span class="annot"><span class="annottext">tableAggregationFields :: SourceName
-&gt; TableInfo b -&gt; m (Parser 'Output n (AggregateFields b))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableAggregationFields"><span class="hs-identifier hs-var hs-var">tableAggregationFields</span></a></span></span><span> </span><span id="local-6989586621688150950"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150950"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688150949"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; (SourceName, TableName b)
-&gt; m (Parser 'Output n (AggregateFields b))
-&gt; m (Parser 'Output n (AggregateFields b))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">tableAggregationFields</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150950"><span class="hs-identifier hs-var">sourceName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-956"></span><span>  </span><span id="local-6989586621688150948"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150948"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-957"></span><span>  </span><span id="local-6989586621688150947"><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150947"><span class="hs-identifier hs-var">allColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableInfo b -&gt; m [ColumnInfo b]
forall (m :: * -&gt; *) (n :: * -&gt; *) r (b :: BackendType).
(Backend b, MonadSchema n m, MonadTableInfo r m, MonadRole r m) =&gt;
SourceName -&gt; TableInfo b -&gt; m [ColumnInfo b]
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumns"><span class="hs-identifier hs-var">tableSelectColumns</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150950"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-958"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150945"><span class="annot"><span class="annottext">numericColumns :: [ColumnInfo b]
</span><a href="#local-6989586621688150945"><span class="hs-identifier hs-var hs-var">numericColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; [ColumnInfo b]
forall (b :: BackendType).
Backend b =&gt;
[ColumnInfo b] -&gt; [ColumnInfo b]
</span><a href="Hasura.RQL.Types.Column.html#onlyNumCols"><span class="hs-identifier hs-var">onlyNumCols</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150947"><span class="hs-identifier hs-var">allColumns</span></a></span><span>
</span><span id="line-959"></span><span>      </span><span id="local-6989586621688150943"><span class="annot"><span class="annottext">comparableColumns :: [ColumnInfo b]
</span><a href="#local-6989586621688150943"><span class="hs-identifier hs-var hs-var">comparableColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; [ColumnInfo b]
forall (b :: BackendType).
Backend b =&gt;
[ColumnInfo b] -&gt; [ColumnInfo b]
</span><a href="Hasura.RQL.Types.Column.html#onlyComparableCols"><span class="hs-identifier hs-var">onlyComparableCols</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150947"><span class="hs-identifier hs-var">allColumns</span></a></span><span>
</span><span id="line-960"></span><span>      </span><span id="local-6989586621688150941"><span class="annot"><span class="annottext">description :: Description
</span><a href="#local-6989586621688150941"><span class="hs-identifier hs-var hs-var">description</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregate fields of &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableName b
forall (b :: BackendType). TableInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Table.html#tableInfoName"><span class="hs-identifier hs-var">tableInfoName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-961"></span><span>  </span><span id="local-6989586621688150940"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150940"><span class="hs-identifier hs-var">selectName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; Name -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150948"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_aggregate_fields&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>  </span><span id="local-6989586621688150939"><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
</span><a href="#local-6989586621688150939"><span class="hs-identifier hs-var">count</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (FieldParser n (AggregateField b))
</span><a href="#local-6989586621688150938"><span class="hs-identifier hs-var">countField</span></a></span><span>
</span><span id="line-963"></span><span>  </span><span id="local-6989586621688150937"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688150937"><span class="hs-identifier hs-var">mkTypename</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; MkTypename) -&gt; m MkTypename
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; MkTypename
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-964"></span><span>  </span><span id="local-6989586621688150936"><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621688150936"><span class="hs-identifier hs-var">numericAndComparable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-965"></span><span>    </span><span class="annot"><span class="annottext">([[FieldParser n (AggregateField b)]]
 -&gt; [FieldParser n (AggregateField b)])
-&gt; m [[FieldParser n (AggregateField b)]]
-&gt; m [FieldParser n (AggregateField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[[FieldParser n (AggregateField b)]]
-&gt; [FieldParser n (AggregateField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">(m [[FieldParser n (AggregateField b)]]
 -&gt; m [FieldParser n (AggregateField b)])
-&gt; m [[FieldParser n (AggregateField b)]]
-&gt; m [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-966"></span><span>      </span><span class="annot"><span class="annottext">[m [FieldParser n (AggregateField b)]]
-&gt; m [[FieldParser n (AggregateField b)]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">([m [FieldParser n (AggregateField b)]]
 -&gt; m [[FieldParser n (AggregateField b)]])
-&gt; [m [FieldParser n (AggregateField b)]]
-&gt; m [[FieldParser n (AggregateField b)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-967"></span><span>        </span><span class="annot"><span class="annottext">[Maybe (m [FieldParser n (AggregateField b)])]
-&gt; [m [FieldParser n (AggregateField b)]]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-968"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- operators on numeric columns</span><span>
</span><span id="line-969"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150945"><span class="hs-identifier hs-var">numericColumns</span></a></span><span>
</span><span id="line-970"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (m [FieldParser n (AggregateField b)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-971"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m [FieldParser n (AggregateField b)]
 -&gt; Maybe (m [FieldParser n (AggregateField b)]))
-&gt; m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-972"></span><span>                </span><span class="annot"><span class="annottext">[Name]
-&gt; (Name -&gt; m (FieldParser n (AggregateField b)))
-&gt; m [FieldParser n (AggregateField b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Hasura.GraphQL.Schema.Common.html#numericAggOperators"><span class="hs-identifier hs-var">numericAggOperators</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; m (FieldParser n (AggregateField b)))
 -&gt; m [FieldParser n (AggregateField b)])
-&gt; (Name -&gt; m (FieldParser n (AggregateField b)))
-&gt; m [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150932"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150932"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-973"></span><span>                  </span><span id="local-6989586621688150931"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150931"><span class="hs-identifier hs-var">numFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150930"><span class="hs-identifier hs-var">mkNumericAggFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150932"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150945"><span class="hs-identifier hs-var">numericColumns</span></a></span><span>
</span><span id="line-974"></span><span>                  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">MkTypename
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621688150929"><span class="hs-identifier hs-var">parseAggOperator</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688150937"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150932"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150948"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150931"><span class="hs-identifier hs-var">numFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-975"></span><span>            </span><span class="hs-comment">-- operators on comparable columns</span><span>
</span><span id="line-976"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150943"><span class="hs-identifier hs-var">comparableColumns</span></a></span><span>
</span><span id="line-977"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe (m [FieldParser n (AggregateField b)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-978"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m [FieldParser n (AggregateField b)]
 -&gt; Maybe (m [FieldParser n (AggregateField b)]))
-&gt; m [FieldParser n (AggregateField b)]
-&gt; Maybe (m [FieldParser n (AggregateField b)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-979"></span><span>                </span><span id="local-6989586621688150928"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150928"><span class="hs-identifier hs-var">comparableFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621688150927"><span class="hs-identifier hs-var">mkColumnAggField</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150943"><span class="hs-identifier hs-var">comparableColumns</span></a></span><span>
</span><span id="line-980"></span><span>                </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-981"></span><span>                  </span><span class="annot"><span class="annottext">[Name]
</span><a href="Hasura.GraphQL.Schema.Common.html#comparisonAggOperators"><span class="hs-identifier hs-var">comparisonAggOperators</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; ([Name] -&gt; [FieldParser n (AggregateField b)])
-&gt; [FieldParser n (AggregateField b)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; FieldParser n (AggregateField b))
-&gt; [Name] -&gt; [FieldParser n (AggregateField b)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150924"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150924"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-982"></span><span>                    </span><span class="annot"><span class="annottext">MkTypename
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621688150929"><span class="hs-identifier hs-var">parseAggOperator</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688150937"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150924"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150948"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150928"><span class="hs-identifier hs-var">comparableFields</span></a></span><span>
</span><span id="line-983"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150923"><span class="annot"><span class="annottext">aggregateFields :: [FieldParser n (AggregateField b)]
</span><a href="#local-6989586621688150923"><span class="hs-identifier hs-var hs-var">aggregateFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
</span><a href="#local-6989586621688150939"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
-&gt; [FieldParser n (AggregateField b)]
-&gt; [FieldParser n (AggregateField b)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621688150936"><span class="hs-identifier hs-var">numericAndComparable</span></a></span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-986"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (AggregateField b)]
-&gt; Parser
     'Output n (InsOrdHashMap Name (ParsedSelection (AggregateField b)))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150940"><span class="hs-identifier hs-var">selectName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688150941"><span class="hs-identifier hs-var">description</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (AggregateField b)]
</span><a href="#local-6989586621688150923"><span class="hs-identifier hs-var">aggregateFields</span></a></span><span>
</span><span id="line-987"></span><span>      </span><span class="annot"><span class="annottext">Parser
  'Output n (InsOrdHashMap Name (ParsedSelection (AggregateField b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (AggregateField b))
    -&gt; AggregateFields b)
-&gt; Parser 'Output n (AggregateFields b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; AggregateField b)
-&gt; InsOrdHashMap Name (ParsedSelection (AggregateField b))
-&gt; AggregateFields b
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; AggregateField b
forall (b :: BackendType). Text -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFExp"><span class="hs-identifier hs-var">IR.AFExp</span></a></span><span>
</span><span id="line-988"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-989"></span><span>    </span><span class="annot"><a href="#local-6989586621688150930"><span class="hs-identifier hs-type">mkNumericAggFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.Types.Column.html#ColumnInfo"><span class="hs-identifier hs-type">ColumnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-990"></span><span>    </span><span id="local-6989586621688150930"><span class="annot"><span class="annottext">mkNumericAggFields :: Name -&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150930"><span class="hs-identifier hs-var hs-var">mkNumericAggFields</span></a></span></span><span> </span><span id="local-6989586621688150921"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150921"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-991"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150921"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;sum&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621688150927"><span class="hs-identifier hs-var">mkColumnAggField</span></a></span><span>
</span><span id="line-992"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; m (FieldParser n (ColFld b)))
-&gt; [ColumnInfo b] -&gt; m [FieldParser n (ColFld b)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150920"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150920"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-993"></span><span>        </span><span class="annot"><span class="annottext">FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b)))
-&gt; FieldParser n (ColFld b) -&gt; m (FieldParser n (ColFld b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-994"></span><span>          </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (Maybe Double)
-&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-995"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150920"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150920"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser 'Both n Double -&gt; Parser 'Both n (Maybe Double)
forall (k :: Kind) (m :: * -&gt; *) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Parser k m a -&gt; Parser k m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nullable"><span class="hs-identifier hs-var">P.nullable</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Double
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Double
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#float"><span class="hs-identifier hs-var">P.float</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n () -&gt; ColFld b -&gt; FieldParser n (ColFld b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; ColumnType b -&gt; ColFld b
forall (b :: BackendType). Column b -&gt; ColumnType b -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFCol"><span class="hs-identifier hs-var">IR.CFCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150920"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150920"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span>    </span><span class="annot"><a href="#local-6989586621688150927"><span class="hs-identifier hs-type">mkColumnAggField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#ColumnInfo"><span class="hs-identifier hs-type">ColumnInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>    </span><span id="local-6989586621688150927"><span class="annot"><span class="annottext">mkColumnAggField :: ColumnInfo b -&gt; m (FieldParser n (ColFld b))
</span><a href="#local-6989586621688150927"><span class="hs-identifier hs-var hs-var">mkColumnAggField</span></a></span></span><span> </span><span id="local-6989586621688150917"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1002"></span><span>      </span><span id="local-6989586621688150916"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150916"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1004"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span>
</span><span id="line-1005"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1006"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1007"></span><span>          </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150916"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-1008"></span><span>          </span><span class="annot"><span class="annottext">FieldParser n () -&gt; ColFld b -&gt; FieldParser n (ColFld b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; ColumnType b -&gt; ColFld b
forall (b :: BackendType). Column b -&gt; ColumnType b -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFCol"><span class="hs-identifier hs-var">IR.CFCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150917"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>
</span><span id="line-1010"></span><span>    </span><span class="annot"><a href="#local-6989586621688150938"><span class="hs-identifier hs-type">countField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621688152113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateField"><span class="hs-identifier hs-type">IR.AggregateField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>    </span><span id="local-6989586621688150938"><span class="annot"><span class="annottext">countField :: m (FieldParser n (AggregateField b))
</span><a href="#local-6989586621688150938"><span class="hs-identifier hs-var hs-var">countField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1012"></span><span>      </span><span id="local-6989586621688150915"><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621688150915"><span class="hs-identifier hs-var">columnsEnum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
forall (m :: * -&gt; *) (n :: * -&gt; *) r (b :: BackendType).
(BackendSchema b, MonadSchema n m, MonadRole r m,
 MonadTableInfo r m, Has MkTypename r) =&gt;
SourceName -&gt; TableInfo b -&gt; m (Maybe (Parser 'Both n (Column b)))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectColumnsEnum"><span class="hs-identifier hs-var">tableSelectColumnsEnum</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150950"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150949"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1013"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150914"><span class="annot"><span class="annottext">distinctName :: Name
</span><a href="#local-6989586621688150914"><span class="hs-identifier hs-var hs-var">distinctName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;distinct&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>          </span><span id="local-6989586621688150913"><span class="annot"><span class="annottext">args :: InputFieldsParser n (CountType b)
</span><a href="#local-6989586621688150913"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1015"></span><span>            </span><span id="local-6989586621688150912"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621688150912"><span class="hs-identifier hs-var">distinct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n Bool
-&gt; InputFieldsParser n (Maybe Bool)
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150914"><span class="hs-identifier hs-var">distinctName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Bool
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Bool
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#boolean"><span class="hs-identifier hs-var">P.boolean</span></a></span><span>
</span><span id="line-1016"></span><span>            </span><span id="local-6989586621688150911"><span class="annot"><span class="annottext">CountDistinct -&gt; CountType b
</span><a href="#local-6989586621688150911"><span class="hs-identifier hs-var">mkCountType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
-&gt; InputFieldsParser n (CountDistinct -&gt; CountType b)
forall (b :: BackendType) (n :: * -&gt; *).
(BackendSchema b, MonadParse n) =&gt;
Maybe (Parser 'Both n (Column b))
-&gt; InputFieldsParser n (CountDistinct -&gt; CountType b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#countTypeInput"><span class="hs-identifier hs-var">countTypeInput</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Both n (Column b))
</span><a href="#local-6989586621688150915"><span class="hs-identifier hs-var">columnsEnum</span></a></span><span>
</span><span id="line-1017"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1018"></span><span>              </span><span class="annot"><span class="annottext">CountDistinct -&gt; CountType b
</span><a href="#local-6989586621688150911"><span class="hs-identifier hs-var">mkCountType</span></a></span><span> </span><span class="annot"><span class="annottext">(CountDistinct -&gt; CountType b) -&gt; CountDistinct -&gt; CountType b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1019"></span><span>                </span><span class="annot"><span class="annottext">CountDistinct
-&gt; (Bool -&gt; CountDistinct) -&gt; Maybe Bool -&gt; CountDistinct
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-1020"></span><span>                  </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountNonDistinct"><span class="hs-identifier hs-var">IR.SelectCountNonDistinct</span></a></span><span> </span><span class="hs-comment">-- If &quot;distinct&quot; is &quot;null&quot; or absent, we default to @'SelectCountNonDistinct'</span><span>
</span><span id="line-1021"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CountDistinct -&gt; CountDistinct -&gt; Bool -&gt; CountDistinct
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountNonDistinct"><span class="hs-identifier hs-var">IR.SelectCountNonDistinct</span></a></span><span> </span><span class="annot"><span class="annottext">CountDistinct
</span><a href="Hasura.RQL.IR.Select.html#SelectCountDistinct"><span class="hs-identifier hs-var">IR.SelectCountDistinct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1022"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621688150912"><span class="hs-identifier hs-var">distinct</span></a></span><span>
</span><span id="line-1023"></span><span>
</span><span id="line-1024"></span><span>      </span><span class="annot"><span class="annottext">FieldParser n (AggregateField b)
-&gt; m (FieldParser n (AggregateField b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggregateField b)
 -&gt; m (FieldParser n (AggregateField b)))
-&gt; FieldParser n (AggregateField b)
-&gt; m (FieldParser n (AggregateField b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CountType b -&gt; AggregateField b
forall (b :: BackendType). CountType b -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFCount"><span class="hs-identifier hs-var">IR.AFCount</span></a></span><span> </span><span class="annot"><span class="annottext">(CountType b -&gt; AggregateField b)
-&gt; FieldParser n (CountType b) -&gt; FieldParser n (AggregateField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (CountType b)
-&gt; Parser 'Both n Int32
-&gt; FieldParser n (CountType b)
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Both m b
-&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection"><span class="hs-identifier hs-var">P.selection</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;count&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (CountType b)
</span><a href="#local-6989586621688150913"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Int32
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Int32
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#int"><span class="hs-identifier hs-var">P.int</span></a></span><span>
</span><span id="line-1025"></span><span>
</span><span id="line-1026"></span><span>    </span><span class="annot"><a href="#local-6989586621688150929"><span class="hs-identifier hs-type">parseAggOperator</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1027"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">P.MkTypename</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1028"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1029"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1030"></span><span>      </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ColFld"><span class="hs-identifier hs-type">IR.ColFld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1031"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152112"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AggregateField"><span class="hs-identifier hs-type">IR.AggregateField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1032"></span><span>    </span><span id="local-6989586621688150929"><span class="annot"><span class="annottext">parseAggOperator :: MkTypename
-&gt; Name
-&gt; Name
-&gt; [FieldParser n (ColFld b)]
-&gt; FieldParser n (AggregateField b)
</span><a href="#local-6989586621688150929"><span class="hs-identifier hs-var hs-var">parseAggOperator</span></a></span></span><span> </span><span id="local-6989586621688150902"><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688150902"><span class="hs-identifier hs-var">mkTypename</span></a></span></span><span> </span><span id="local-6989586621688150901"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150901"><span class="hs-identifier hs-var">operator</span></a></span></span><span> </span><span id="local-6989586621688150900"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150900"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span id="local-6989586621688150899"><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150899"><span class="hs-identifier hs-var">columns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1033"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150898"><span class="annot"><span class="annottext">opText :: Text
</span><a href="#local-6989586621688150898"><span class="hs-identifier hs-var hs-var">opText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var hs-var">G.unName</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150901"><span class="hs-identifier hs-var">operator</span></a></span><span>
</span><span id="line-1034"></span><span>          </span><span id="local-6989586621688150896"><span class="annot"><span class="annottext">setName :: Name
</span><a href="#local-6989586621688150896"><span class="hs-identifier hs-var hs-var">setName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#runMkTypename"><span class="hs-identifier hs-var hs-var">P.runMkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">MkTypename
</span><a href="#local-6989586621688150902"><span class="hs-identifier hs-var">mkTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; Name -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150900"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150901"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_fields&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>          </span><span id="local-6989586621688150894"><span class="annot"><span class="annottext">setDesc :: Maybe Description
</span><a href="#local-6989586621688150894"><span class="hs-identifier hs-var hs-var">setDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aggregate &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150898"><span class="hs-identifier hs-var">opText</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; on columns&quot;</span></span><span>
</span><span id="line-1036"></span><span>          </span><span id="local-6989586621688150893"><span class="annot"><span class="annottext">subselectionParser :: Parser 'Output n (Fields (ColFld b))
</span><a href="#local-6989586621688150893"><span class="hs-identifier hs-var hs-var">subselectionParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1037"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n (ColFld b)]
-&gt; Parser
     'Output n (InsOrdHashMap Name (ParsedSelection (ColFld b)))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser m a]
-&gt; Parser 'Output m (InsOrdHashMap Name (ParsedSelection a))
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSet"><span class="hs-identifier hs-var">P.selectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150896"><span class="hs-identifier hs-var">setName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150894"><span class="hs-identifier hs-var">setDesc</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (ColFld b)]
</span><a href="#local-6989586621688150899"><span class="hs-identifier hs-var">columns</span></a></span><span>
</span><span id="line-1038"></span><span>              </span><span class="annot"><span class="annottext">Parser 'Output n (InsOrdHashMap Name (ParsedSelection (ColFld b)))
-&gt; (InsOrdHashMap Name (ParsedSelection (ColFld b))
    -&gt; Fields (ColFld b))
-&gt; Parser 'Output n (Fields (ColFld b))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ColFld b)
-&gt; InsOrdHashMap Name (ParsedSelection (ColFld b))
-&gt; Fields (ColFld b)
forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var">parsedSelectionsToFields</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ColFld b
forall (b :: BackendType). Text -&gt; ColFld b
</span><a href="Hasura.RQL.IR.Select.html#CFExp"><span class="hs-identifier hs-var">IR.CFExp</span></a></span><span>
</span><span id="line-1039"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (Fields (ColFld b))
-&gt; FieldParser n (Fields (ColFld b))
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150901"><span class="hs-identifier hs-var">operator</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (Fields (ColFld b))
</span><a href="#local-6989586621688150893"><span class="hs-identifier hs-var">subselectionParser</span></a></span><span>
</span><span id="line-1040"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (Fields (ColFld b))
-&gt; (Fields (ColFld b) -&gt; AggregateField b)
-&gt; FieldParser n (AggregateField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AggregateOp b -&gt; AggregateField b
forall (b :: BackendType). AggregateOp b -&gt; AggregateField b
</span><a href="Hasura.RQL.IR.Select.html#AFOp"><span class="hs-identifier hs-var">IR.AFOp</span></a></span><span> </span><span class="annot"><span class="annottext">(AggregateOp b -&gt; AggregateField b)
-&gt; (Fields (ColFld b) -&gt; AggregateOp b)
-&gt; Fields (ColFld b)
-&gt; AggregateField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Fields (ColFld b) -&gt; AggregateOp b
forall (b :: BackendType). Text -&gt; ColumnFields b -&gt; AggregateOp b
</span><a href="Hasura.RQL.IR.Select.html#AggregateOp"><span class="hs-identifier hs-var">IR.AggregateOp</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150898"><span class="hs-identifier hs-var">opText</span></a></span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span class="hs-comment">-- | An individual field of a table</span><span>
</span><span id="line-1043"></span><span class="hs-comment">--</span><span>
</span><span id="line-1044"></span><span class="hs-comment">-- &gt; field_name(arg_name: arg_type, ...): field_type</span><span>
</span><span id="line-1045"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-type">fieldSelection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1046"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688152081"><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688152080"><span class="annot"><a href="#local-6989586621688152080"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688152079"><span class="annot"><a href="#local-6989586621688152079"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688152078"><span class="annot"><a href="#local-6989586621688152078"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1047"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152080"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152079"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152078"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1048"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1049"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1050"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1051"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1052"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FieldInfo"><span class="hs-identifier hs-type">FieldInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1053"></span><span>  </span><span class="annot"><a href="#local-6989586621688152079"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152078"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-type">AnnotatedField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1054"></span><span id="fieldSelection"><span class="annot"><span class="annottext">fieldSelection :: SourceName
-&gt; TableName b
-&gt; TableInfo b
-&gt; Maybe (PrimaryKeyColumns b)
-&gt; FieldInfo b
-&gt; m [FieldParser n (AnnotatedField b)]
</span><a href="Hasura.GraphQL.Schema.Select.html#fieldSelection"><span class="hs-identifier hs-var hs-var">fieldSelection</span></a></span></span><span> </span><span id="local-6989586621688150889"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150889"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688150888"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150888"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621688150887"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150887"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span id="local-6989586621688150886"><span class="annot"><span class="annottext">Maybe (PrimaryKeyColumns b)
</span><a href="#local-6989586621688150886"><span class="hs-identifier hs-var">maybePkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1055"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIColumn"><span class="hs-identifier hs-type">FIColumn</span></a></span><span> </span><span id="local-6989586621688150884"><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1056"></span><span>    </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldParser n (AnnotatedField b))
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AnnotatedField b))
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1057"></span><span>      </span><span id="local-6989586621688150882"><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688150882"><span class="hs-identifier hs-var">queryType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; GraphQLQueryType) -&gt; MaybeT m GraphQLQueryType
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; GraphQLQueryType) -&gt; MaybeT m GraphQLQueryType)
-&gt; (r -&gt; GraphQLQueryType) -&gt; MaybeT m GraphQLQueryType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; GraphQLQueryType
</span><a href="Hasura.GraphQL.Schema.Common.html#qcQueryType"><span class="hs-identifier hs-var hs-var">qcQueryType</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; GraphQLQueryType)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; GraphQLQueryType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1058"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150881"><span class="annot"><span class="annottext">fieldName :: Name
</span><a href="#local-6989586621688150881"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Name
forall (b :: BackendType). ColumnInfo b -&gt; Name
</span><a href="Hasura.RQL.Types.Column.html#ciName"><span class="hs-identifier hs-var hs-var">ciName</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-1059"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150881"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688150882"><span class="hs-identifier hs-var">queryType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType -&gt; GraphQLQueryType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="Hasura.GraphQL.Execute.Types.html#QueryRelay"><span class="hs-identifier hs-var">ET.QueryRelay</span></a></span><span>
</span><span id="line-1060"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1061"></span><span>          </span><span id="local-6989586621688150880"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688150880"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XRelay b) -&gt; MaybeT m (XRelay b))
-&gt; Maybe (XRelay b) -&gt; MaybeT m (XRelay b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688152081"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1062"></span><span>          </span><span id="local-6989586621688150879"><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688150879"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (PrimaryKeyColumns b) -&gt; MaybeT m (PrimaryKeyColumns b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (PrimaryKeyColumns b)
</span><a href="#local-6989586621688150886"><span class="hs-identifier hs-var">maybePkeyColumns</span></a></span><span>
</span><span id="line-1063"></span><span>          </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1064"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150881"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#identifier"><span class="hs-identifier hs-var">P.identifier</span></a></span><span>
</span><span id="line-1065"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n ()
-&gt; AnnotatedField b -&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">XRelay b -&gt; TableName b -&gt; PrimaryKeyColumns b -&gt; AnnotatedField b
forall (b :: BackendType) r v.
XRelay b -&gt; TableName b -&gt; PrimaryKeyColumns b -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFNodeId"><span class="hs-identifier hs-var">IR.AFNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688150880"><span class="hs-identifier hs-var">xRelayInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150888"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns b
</span><a href="#local-6989586621688150879"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-1066"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1067"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150878"><span class="annot"><span class="annottext">columnName :: Column b
</span><a href="#local-6989586621688150878"><span class="hs-identifier hs-var hs-var">columnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-1068"></span><span>          </span><span id="local-6989586621688150877"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150877"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150887"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1069"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT m ()) -&gt; Bool -&gt; MaybeT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621688150878"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Bool
forall k a. (Eq k, Hashable k) =&gt; k -&gt; HashMap k a -&gt; Bool
</span><span class="hs-operator hs-var">`Map.member`</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150877"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-1070"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150876"><span class="annot"><span class="annottext">caseBoolExp :: Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621688150876"><span class="hs-identifier hs-var hs-var">caseBoolExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
 -&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
-&gt; Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621688150878"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap (Column b) (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiCols"><span class="hs-identifier hs-var hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150877"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1071"></span><span>              </span><span id="local-6989586621688150874"><span class="annot"><span class="annottext">caseBoolExpUnpreparedValue :: Maybe
  (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
</span><a href="#local-6989586621688150874"><span class="hs-identifier hs-var hs-var">caseBoolExpUnpreparedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1072"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpField b (PartialSQLExp b)
 -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
-&gt; AnnColumnCaseBoolExpPartialSQL b
-&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((AnnColumnCaseBoolExpField b (PartialSQLExp b)
  -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
 -&gt; AnnColumnCaseBoolExpPartialSQL b
 -&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; ((PartialSQLExp b -&gt; UnpreparedValue b)
    -&gt; AnnColumnCaseBoolExpField b (PartialSQLExp b)
    -&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b))
-&gt; (PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnColumnCaseBoolExpPartialSQL b
-&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnColumnCaseBoolExpField b (PartialSQLExp b)
-&gt; AnnColumnCaseBoolExpField b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpPartialSQL b
 -&gt; GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL b)
-&gt; Maybe
     (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621688150876"><span class="hs-identifier hs-var">caseBoolExp</span></a></span><span>
</span><span id="line-1073"></span><span>              </span><span id="local-6989586621688150872"><span class="annot"><span class="annottext">pathArg :: InputFieldsParser n (Maybe (ColumnOp b))
</span><a href="#local-6989586621688150872"><span class="hs-identifier hs-var hs-var">pathArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnType b -&gt; InputFieldsParser n (Maybe (ColumnOp b))
forall (b :: BackendType) (n :: * -&gt; *).
(BackendSchema b, MonadParse n) =&gt;
ColumnType b -&gt; InputFieldsParser n (Maybe (ColumnOp b))
</span><a href="Hasura.GraphQL.Schema.Backend.html#jsonPathArg"><span class="hs-identifier hs-var">jsonPathArg</span></a></span><span> </span><span class="annot"><span class="annottext">(ColumnType b -&gt; InputFieldsParser n (Maybe (ColumnOp b)))
-&gt; ColumnType b -&gt; InputFieldsParser n (Maybe (ColumnOp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-1074"></span><span>              </span><span class="hs-comment">-- In an inherited role, when a column is part of all the select</span><span>
</span><span id="line-1075"></span><span>              </span><span class="hs-comment">-- permissions which make up the inherited role then the nullability</span><span>
</span><span id="line-1076"></span><span>              </span><span class="hs-comment">-- of the field is determined by the nullability of the DB column</span><span>
</span><span id="line-1077"></span><span>              </span><span class="hs-comment">-- otherwise it is marked as nullable explicitly, ignoring the column's</span><span>
</span><span id="line-1078"></span><span>              </span><span class="hs-comment">-- nullability. We do this because</span><span>
</span><span id="line-1079"></span><span>              </span><span class="hs-comment">-- in multiple roles we execute an SQL query like:</span><span>
</span><span id="line-1080"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-1081"></span><span>              </span><span class="hs-comment">--  select</span><span>
</span><span id="line-1082"></span><span>              </span><span class="hs-comment">--    (case when (P1 or P2) then addr else null end) as addr,</span><span>
</span><span id="line-1083"></span><span>              </span><span class="hs-comment">--    (case when P2 then phone else null end) as phone</span><span>
</span><span id="line-1084"></span><span>              </span><span class="hs-comment">-- from employee</span><span>
</span><span id="line-1085"></span><span>              </span><span class="hs-comment">-- where (P1 or P2)</span><span>
</span><span id="line-1086"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-1087"></span><span>              </span><span class="hs-comment">-- In the above example, P(n) is a predicate configured for a role</span><span>
</span><span id="line-1088"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-1089"></span><span>              </span><span class="hs-comment">-- NOTE: https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/FGALanguageICDE07.pdf</span><span>
</span><span id="line-1090"></span><span>              </span><span class="hs-comment">-- The above is the paper which talks about the idea of cell-level</span><span>
</span><span id="line-1091"></span><span>              </span><span class="hs-comment">-- authorization and multiple roles. The paper says that we should only</span><span>
</span><span id="line-1092"></span><span>              </span><span class="hs-comment">-- allow the case analysis only on nullable columns.</span><span>
</span><span id="line-1093"></span><span>              </span><span id="local-6989586621688150870"><span class="annot"><span class="annottext">nullability :: Bool
</span><a href="#local-6989586621688150870"><span class="hs-identifier hs-var hs-var">nullability</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL b)
</span><a href="#local-6989586621688150876"><span class="hs-identifier hs-var">caseBoolExp</span></a></span><span>
</span><span id="line-1094"></span><span>          </span><span id="local-6989586621688150867"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150867"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
-&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
 -&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b))))
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
-&gt; MaybeT m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621688150870"><span class="hs-identifier hs-var">nullability</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>          </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1096"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (Maybe (ColumnOp b))
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; FieldParser n (Maybe (ColumnOp b))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Both m b
-&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection"><span class="hs-identifier hs-var">P.selection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150881"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Maybe Description
forall (b :: BackendType). ColumnInfo b -&gt; Maybe Description
</span><a href="Hasura.RQL.Types.Column.html#ciDescription"><span class="hs-identifier hs-var hs-var">ciDescription</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (ColumnOp b))
</span><a href="#local-6989586621688150872"><span class="hs-identifier hs-var">pathArg</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150867"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-1097"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n (Maybe (ColumnOp b))
-&gt; (Maybe (ColumnOp b) -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; ColumnType b
-&gt; Maybe
     (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
-&gt; Maybe (ColumnOp b)
-&gt; AnnotatedField b
forall (backend :: BackendType) v r.
Column backend
-&gt; ColumnType backend
-&gt; Maybe (AnnColumnCaseBoolExp backend v)
-&gt; Maybe (ColumnOp backend)
-&gt; AnnFieldG backend r v
</span><a href="Hasura.RQL.IR.Select.html#mkAnnColumnField"><span class="hs-identifier hs-var">IR.mkAnnColumnField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Column b
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo b -&gt; ColumnType b
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b
</span><a href="#local-6989586621688150884"><span class="hs-identifier hs-var">columnInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe
  (GBoolExp b (AnnColumnCaseBoolExpField b (UnpreparedValue b)))
</span><a href="#local-6989586621688150874"><span class="hs-identifier hs-var">caseBoolExpUnpreparedValue</span></a></span><span>
</span><span id="line-1098"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIRelationship"><span class="hs-identifier hs-type">FIRelationship</span></a></span><span> </span><span id="local-6989586621688150864"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150864"><span class="hs-identifier hs-var">relationshipInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1099"></span><span>    </span><span class="annot"><span class="annottext">[[FieldParser n (AnnotatedField b)]]
-&gt; [FieldParser n (AnnotatedField b)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[FieldParser n (AnnotatedField b)]]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; (Maybe [FieldParser n (AnnotatedField b)]
    -&gt; [[FieldParser n (AnnotatedField b)]])
-&gt; Maybe [FieldParser n (AnnotatedField b)]
-&gt; [FieldParser n (AnnotatedField b)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (AnnotatedField b)]
-&gt; [[FieldParser n (AnnotatedField b)]]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (AnnotatedField b)]
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
</span><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-var">relationshipField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150889"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150888"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150864"><span class="hs-identifier hs-var">relationshipInfo</span></a></span><span>
</span><span id="line-1100"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIComputedField"><span class="hs-identifier hs-type">FIComputedField</span></a></span><span> </span><span id="local-6989586621688150861"><span class="annot"><span class="annottext">ComputedFieldInfo b
</span><a href="#local-6989586621688150861"><span class="hs-identifier hs-var">computedFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1101"></span><span>    </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (AnnotatedField b)]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldParser n (AnnotatedField b))
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; ComputedFieldInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; ComputedFieldInfo b
-&gt; TableName b
-&gt; TableInfo b
-&gt; m (Maybe (FieldParser n (AnnotatedField b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#computedField"><span class="hs-identifier hs-var">computedField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150889"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldInfo b
</span><a href="#local-6989586621688150861"><span class="hs-identifier hs-var">computedFieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150888"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150887"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1102"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#FIRemoteRelationship"><span class="hs-identifier hs-type">FIRemoteRelationship</span></a></span><span> </span><span id="local-6989586621688150858"><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621688150858"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1103"></span><span>    </span><span id="local-6989586621688150857"><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
</span><a href="#local-6989586621688150857"><span class="hs-identifier hs-var">relationshipFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
 -&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall r (m :: * -&gt; *) (n :: * -&gt; *) lhsJoinField.
MonadBuildSchemaBase r m n =&gt;
RemoteFieldInfo lhsJoinField
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier hs-var">remoteRelationshipField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621688150858"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span><span>
</span><span id="line-1104"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150855"><span class="annot"><span class="annottext">lhsFields :: HashMap FieldName (DBJoinField b)
</span><a href="#local-6989586621688150855"><span class="hs-identifier hs-var hs-var">lhsFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
-&gt; HashMap FieldName (DBJoinField b)
forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; HashMap FieldName lhsJoinField
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#_rfiLHS"><span class="hs-identifier hs-var hs-var">_rfiLHS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfo (DBJoinField b)
</span><a href="#local-6989586621688150858"><span class="hs-identifier hs-var">remoteFieldInfo</span></a></span><span>
</span><span id="line-1105"></span><span>    </span><span class="annot"><span class="annottext">[FieldParser n (AnnotatedField b)]
-&gt; m [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([FieldParser n (AnnotatedField b)]
 -&gt; m [FieldParser n (AnnotatedField b)])
-&gt; [FieldParser n (AnnotatedField b)]
-&gt; m [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (RemoteRelationshipField UnpreparedValue)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RemoteRelationshipField UnpreparedValue -&gt; AnnotatedField b)
-&gt; FieldParser n (RemoteRelationshipField UnpreparedValue)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteRelationshipSelect
  b (RemoteRelationshipField UnpreparedValue)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
RemoteRelationshipSelect b r -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFRemote"><span class="hs-identifier hs-var">IR.AFRemote</span></a></span><span> </span><span class="annot"><span class="annottext">(RemoteRelationshipSelect
   b (RemoteRelationshipField UnpreparedValue)
 -&gt; AnnotatedField b)
-&gt; (RemoteRelationshipField UnpreparedValue
    -&gt; RemoteRelationshipSelect
         b (RemoteRelationshipField UnpreparedValue))
-&gt; RemoteRelationshipField UnpreparedValue
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (DBJoinField b)
-&gt; RemoteRelationshipField UnpreparedValue
-&gt; RemoteRelationshipSelect
     b (RemoteRelationshipField UnpreparedValue)
forall (b :: BackendType) r.
HashMap FieldName (DBJoinField b)
-&gt; r -&gt; RemoteRelationshipSelect b r
</span><a href="Hasura.RQL.IR.Select.html#RemoteRelationshipSelect"><span class="hs-identifier hs-var">IR.RemoteRelationshipSelect</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (DBJoinField b)
</span><a href="#local-6989586621688150855"><span class="hs-identifier hs-var">lhsFields</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
</span><a href="#local-6989586621688150857"><span class="hs-identifier hs-var">relationshipFields</span></a></span><span>
</span><span id="line-1106"></span><span>
</span><span id="line-1107"></span><span class="hs-comment">{- Note [Permission filter deduplication]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1. `T` and `U` are tables.

1. `r` is a relationship on `T` to table `U` with the join condition, `T.c =
   U.d` where `c` and `d` are columns on tables `T` and `U` respectively.

1. `s` is a relationship on `U` to table `T` with the join condition, `U.d =
   T.c`.

1. `p(T)` and `p(U)` denote the permission filters on table `T` and `U`
   respectively for some role `R`.

Consider the SQL that we generate for this query:

```
query {
  T {
    c
    r {
      d
    }
  }
}
```

It would be along these lines:

```sql
SELECT
  *
FROM
  (
    SELECT * FROM T WHERE p(T)
  ) AS T
  LEFT OUTER JOIN LATERAL
  (
    SELECT * FROM U WHERE T.c = U.d AND p(U)
  ) AS U
  ON TRUE
```

The expression `T.c = U.d` is the join condition for relationship `r`. Note
that we use lateral joins, so the join condition is not expressed using `ON`
but on the where clause of `U`.

Now, let's say `p(U)` is of the form `{ s : p(T) }`.

```sql
SELECT
  *
FROM
  (
    SELECT * FROM T WHERE p(T)
  ) AS T
  LEFT OUTER JOIN LATERAL
  (
    SELECT * FROM U WHERE T.c = U.d
    AND EXISTS (
      SELECT 1 FROM T WHERE U.d = T.c AND p(T)
    )
  ) AS U
  ON TRUE
```

`p(U)`, i.e, `{ s : p(T) }` got expanded to

```sql
EXISTS (
  SELECT 1 FROM T WHERE U.d = T.c AND p(T)
)
```

Now, assuming, in the `WHERE` clause for `U`, that `T.c = U.d` holds, then the
`EXISTS` clause must evaluate to true. The `EXISTS` clause must evaluate to true
because the row from `T` we are joining against is exactly such a row satisfying
`p(T)`. In other words, the row obtained from `T` (as the left-hand side of the
join) satisfies `p(T)`.
-}</span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span class="hs-comment">-- | Field parsers for a table relationship</span><span>
</span><span id="line-1188"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-type">relationshipField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1189"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151776"><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151775"><span class="annot"><a href="#local-6989586621688151775"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688151774"><span class="annot"><a href="#local-6989586621688151774"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151773"><span class="annot"><a href="#local-6989586621688151773"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1190"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151775"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151773"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1191"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1192"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1193"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#RelInfo"><span class="hs-identifier hs-type">RelInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1194"></span><span>  </span><span class="annot"><a href="#local-6989586621688151774"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151773"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-type">AnnotatedField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1195"></span><span id="relationshipField"><span class="annot"><span class="annottext">relationshipField :: SourceName
-&gt; TableName b
-&gt; RelInfo b
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
</span><a href="Hasura.GraphQL.Schema.Select.html#relationshipField"><span class="hs-identifier hs-var hs-var">relationshipField</span></a></span></span><span> </span><span id="local-6989586621688150851"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688150850"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150850"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621688150849"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m [FieldParser n (AnnotatedField b)]
-&gt; m (Maybe [FieldParser n (AnnotatedField b)])
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1196"></span><span>  </span><span id="local-6989586621688150848"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621688150848"><span class="hs-identifier hs-var">optimizePermissionFilters</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; Bool) -&gt; MaybeT m Bool
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; Bool) -&gt; MaybeT m Bool) -&gt; (r -&gt; Bool) -&gt; MaybeT m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Common.html#qcOptimizePermissionFilters"><span class="hs-identifier hs-var hs-var">qcOptimizePermissionFilters</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; Bool) -&gt; (r -&gt; QueryContext) -&gt; r -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1197"></span><span>  </span><span id="local-6989586621688150846"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo b) -&gt; MaybeT m (TableInfo b))
-&gt; m (TableInfo b) -&gt; MaybeT m (TableInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">(TableName b -&gt; m (TableInfo b)) -&gt; TableName b -&gt; m (TableInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1198"></span><span>  </span><span id="local-6989586621688150844"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150844"><span class="hs-identifier hs-var">remotePerms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b))
-&gt; m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1199"></span><span>  </span><span id="local-6989586621688150843"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150843"><span class="hs-identifier hs-var">relFieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m Name) -&gt; Text -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(RelName -&gt; Text) -&gt; RelName -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1200"></span><span>  </span><span class="hs-comment">-- START black magic to deduplicate permission checks</span><span>
</span><span id="line-1201"></span><span>  </span><span id="local-6989586621688150841"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150841"><span class="hs-identifier hs-var">thisTablePerm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1202"></span><span>    </span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#_tpFilter"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="annot"><span class="annottext">(TablePermG b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; (SelPermInfo b -&gt; TablePermG b (UnpreparedValue b))
-&gt; SelPermInfo b
-&gt; AnnBoolExp b (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span>
</span><span id="line-1203"></span><span>      </span><span class="annot"><span class="annottext">(SelPermInfo b -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; MaybeT m (SelPermInfo b)
-&gt; MaybeT m (AnnBoolExp b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo b)) -&gt; MaybeT m (SelPermInfo b)
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableInfo b -&gt; m (Maybe (SelPermInfo b))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(TableInfo b -&gt; m (Maybe (SelPermInfo b)))
-&gt; m (TableInfo b) -&gt; m (Maybe (SelPermInfo b))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150850"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621688150839"><span class="hs-identifier hs-type">deduplicatePermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">AnnBoolExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1205"></span><span>      </span><span id="local-6989586621688150839"><span class="annot"><span class="annottext">deduplicatePermissions :: AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150839"><span class="hs-identifier hs-var hs-var">deduplicatePermissions</span></a></span></span><span> </span><span id="local-6989586621688150838"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150838"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1206"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621688150848"><span class="hs-identifier hs-var">optimizePermissionFilters</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150838"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1207"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-type">BoolAnd</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#BoolFld"><span class="hs-identifier hs-type">BoolFld</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AVRelationship"><span class="hs-identifier hs-type">AVRelationship</span></a></span><span> </span><span id="local-6989586621688150836"><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150836"><span class="hs-identifier hs-var">remoteRI</span></a></span></span><span> </span><span id="local-6989586621688150835"><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150835"><span class="hs-identifier hs-var">remoteTablePerm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1208"></span><span>            </span><span class="hs-comment">-- Here we try to figure out if the &quot;forwards&quot; joining condition</span><span>
</span><span id="line-1209"></span><span>            </span><span class="hs-comment">-- from `table` to the related table `riRTable ri` is equal to the</span><span>
</span><span id="line-1210"></span><span>            </span><span class="hs-comment">-- &quot;backwards&quot; joining condition from the related table back to</span><span>
</span><span id="line-1211"></span><span>            </span><span class="hs-comment">-- `table`.  If it is, then we can optimize the row-level permission</span><span>
</span><span id="line-1212"></span><span>            </span><span class="hs-comment">-- filters by dropping them here.</span><span>
</span><span id="line-1213"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150836"><span class="hs-identifier hs-var">remoteRI</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; TableName b -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150850"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-1214"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150836"><span class="hs-identifier hs-var">remoteRI</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Column b) (Column b)
-&gt; HashMap (Column b) (Column b) -&gt; Bool
forall k v.
(Eq k, Hashable k, Eq v, Hashable v) =&gt;
HashMap k v -&gt; HashMap v k -&gt; Bool
</span><a href="Data.HashMap.Strict.Extended.html#isInverseOf"><span class="hs-operator hs-var">`Map.isInverseOf`</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1215"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150841"><span class="hs-identifier hs-var">thisTablePerm</span></a></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150835"><span class="hs-identifier hs-var">remoteTablePerm</span></a></span><span>
</span><span id="line-1216"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[AnnBoolExp b (UnpreparedValue b)]
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) a. [GBoolExp b a] -&gt; GBoolExp b a
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-var">BoolAnd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1217"></span><span>              </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150838"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1218"></span><span>          </span><span class="annot"><span class="annottext">(Bool, AnnBoolExp b (UnpreparedValue b))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150838"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1219"></span><span>      </span><span class="annot"><a href="#local-6989586621688150832"><span class="hs-identifier hs-type">deduplicatePermissions'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-type">SelectExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1220"></span><span>      </span><span id="local-6989586621688150832"><span class="annot"><span class="annottext">deduplicatePermissions' :: SelectExp b -&gt; SelectExp b
</span><a href="#local-6989586621688150832"><span class="hs-identifier hs-var hs-var">deduplicatePermissions'</span></a></span></span><span> </span><span id="local-6989586621688150831"><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150831"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1221"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150830"><span class="annot"><span class="annottext">newFilter :: AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150830"><span class="hs-identifier hs-var hs-var">newFilter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150839"><span class="hs-identifier hs-var">deduplicatePermissions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#_tpFilter"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelectExp b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType) r (f :: * -&gt; *) v.
AnnSelectG b r f v -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var hs-var">IR._asnPerm</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150831"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150831"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_asnPerm :: TablePermG b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelectExp b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType) r (f :: * -&gt; *) v.
AnnSelectG b r f v -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var hs-var">IR._asnPerm</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150831"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_tpFilter :: AnnBoolExp b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_tpFilter"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150830"><span class="hs-identifier hs-var">newFilter</span></a></span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-1223"></span><span>  </span><span class="hs-comment">-- END black magic to deduplicate permission checks</span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; RelType
forall (b :: BackendType). RelInfo b -&gt; RelType
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riType"><span class="hs-identifier hs-var hs-var">riType</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1226"></span><span>    </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1227"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150827"><span class="annot"><span class="annottext">desc :: Maybe Description
</span><a href="#local-6989586621688150827"><span class="hs-identifier hs-var hs-var">desc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An object relationship&quot;</span></span><span>
</span><span id="line-1228"></span><span>      </span><span id="local-6989586621688150826"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688150826"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (Parser 'Output n (AnnotatedFields b)))
 -&gt; MaybeT m (Parser 'Output n (AnnotatedFields b)))
-&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1229"></span><span>      </span><span class="hs-comment">-- We need to set the correct nullability of our GraphQL field.  Manual</span><span>
</span><span id="line-1230"></span><span>      </span><span class="hs-comment">-- relationships are always nullable, and so are &quot;reverse&quot; object</span><span>
</span><span id="line-1231"></span><span>      </span><span class="hs-comment">-- relationships, i.e. Hasura relationships that are generated from a</span><span>
</span><span id="line-1232"></span><span>      </span><span class="hs-comment">-- referenced table to a referencing table.  For automatic forward object</span><span>
</span><span id="line-1233"></span><span>      </span><span class="hs-comment">-- relationships, i.e. the generated relationship from table1 to table2,</span><span>
</span><span id="line-1234"></span><span>      </span><span class="hs-comment">-- where table1 has a foreign key constraint, we have to do some work.</span><span>
</span><span id="line-1235"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1236"></span><span>      </span><span class="hs-comment">-- Specifically, we would like to mark the relationship generated from a</span><span>
</span><span id="line-1237"></span><span>      </span><span class="hs-comment">-- foreign key constraint from table1 to table2 to be non-nullable if</span><span>
</span><span id="line-1238"></span><span>      </span><span class="hs-comment">-- Postgres enforces that for each row in table1, a corresponding row in</span><span>
</span><span id="line-1239"></span><span>      </span><span class="hs-comment">-- table2 exists.  From the Postgres manual:</span><span>
</span><span id="line-1240"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1241"></span><span>      </span><span class="hs-comment">-- &quot;Normally, a referencing row need not satisfy the foreign key</span><span>
</span><span id="line-1242"></span><span>      </span><span class="hs-comment">-- constraint if any of its referencing columns are null.  If MATCH FULL</span><span>
</span><span id="line-1243"></span><span>      </span><span class="hs-comment">-- is added to the foreign key declaration, a referencing row escapes</span><span>
</span><span id="line-1244"></span><span>      </span><span class="hs-comment">-- satisfying the constraint only if all its referencing columns are null</span><span>
</span><span id="line-1245"></span><span>      </span><span class="hs-comment">-- (so a mix of null and non-null values is guaranteed to fail a MATCH</span><span>
</span><span id="line-1246"></span><span>      </span><span class="hs-comment">-- FULL constraint).&quot;</span><span>
</span><span id="line-1247"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1248"></span><span>      </span><span class="hs-comment">-- https://www.postgresql.org/docs/9.5/ddl-constraints.html#DDL-CONSTRAINTS-FK</span><span>
</span><span id="line-1249"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1250"></span><span>      </span><span class="hs-comment">-- Since we don't store MATCH FULL in the RQL representation of the</span><span>
</span><span id="line-1251"></span><span>      </span><span class="hs-comment">-- database, the closest we can get is to only set the field to be</span><span>
</span><span id="line-1252"></span><span>      </span><span class="hs-comment">-- non-nullable if _all_ of the columns that reference the foreign table</span><span>
</span><span id="line-1253"></span><span>      </span><span class="hs-comment">-- are non-nullable.  Strictly speaking, we could do slightly better by</span><span>
</span><span id="line-1254"></span><span>      </span><span class="hs-comment">-- setting the field to be non-nullable also if the foreign key has MATCH</span><span>
</span><span id="line-1255"></span><span>      </span><span class="hs-comment">-- FULL set, and _any_ of the columns is non-nullable.  But we skip doing</span><span>
</span><span id="line-1256"></span><span>      </span><span class="hs-comment">-- this since, as of writing this, the old code used to make the wrong</span><span>
</span><span id="line-1257"></span><span>      </span><span class="hs-comment">-- decision about nullability of joint foreign keys entirely, so this is</span><span>
</span><span id="line-1258"></span><span>      </span><span class="hs-comment">-- probably not a very widely used mode of use.  The impact of this</span><span>
</span><span id="line-1259"></span><span>      </span><span class="hs-comment">-- suboptimality is merely that in introspection some fields might get</span><span>
</span><span id="line-1260"></span><span>      </span><span class="hs-comment">-- marked nullable which are in fact known to always be non-null.</span><span>
</span><span id="line-1261"></span><span>      </span><span id="local-6989586621688150825"><span class="annot"><span class="annottext">Nullable
</span><a href="#local-6989586621688150825"><span class="hs-identifier hs-var">nullable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; Bool
forall (b :: BackendType). RelInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riIsManual"><span class="hs-identifier hs-var hs-var">riIsManual</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; InsertOrder
forall (b :: BackendType). RelInfo b -&gt; InsertOrder
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riInsertOrder"><span class="hs-identifier hs-var hs-var">riInsertOrder</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1262"></span><span>        </span><span class="hs-comment">-- Automatically generated forward relationship</span><span>
</span><span id="line-1263"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InsertOrder
</span><a href="Hasura.RQL.Types.Common.html#BeforeParent"><span class="hs-identifier hs-var">BeforeParent</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1264"></span><span>          </span><span id="local-6989586621688150821"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150821"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; MaybeT m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150850"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-1265"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150820"><span class="annot"><span class="annottext">columns :: [Column b]
</span><a href="#local-6989586621688150820"><span class="hs-identifier hs-var hs-var">columns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap (Column b) (Column b) -&gt; [Column b]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">(HashMap (Column b) (Column b) -&gt; [Column b])
-&gt; HashMap (Column b) (Column b) -&gt; [Column b]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span>
</span><span id="line-1266"></span><span>              </span><span id="local-6989586621688150818"><span class="annot"><span class="annottext">fieldInfoMap :: FieldInfoMap (FieldInfo b)
</span><a href="#local-6989586621688150818"><span class="hs-identifier hs-var hs-var">fieldInfoMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; FieldInfoMap (FieldInfo b)
forall (b :: BackendType) field primaryKeyColumn1.
TableCoreInfoG b field primaryKeyColumn1 -&gt; FieldInfoMap field
</span><a href="Hasura.RQL.Types.Table.html#_tciFieldInfoMap"><span class="hs-identifier hs-var hs-var">_tciFieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; FieldInfoMap (FieldInfo b))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; FieldInfoMap (FieldInfo b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.RQL.Types.Table.html#_tiCoreInfo"><span class="hs-identifier hs-var hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150821"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1267"></span><span>              </span><span id="local-6989586621688150817"><span class="annot"><span class="annottext">findColumn :: Column b -&gt; Maybe (ColumnInfo b)
</span><a href="#local-6989586621688150817"><span class="hs-identifier hs-var hs-var">findColumn</span></a></span></span><span> </span><span id="local-6989586621688150816"><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621688150816"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldName -&gt; FieldInfoMap (FieldInfo b) -&gt; Maybe (FieldInfo b)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Column b -&gt; FieldName
forall (b :: BackendType). Backend b =&gt; Column b -&gt; FieldName
</span><a href="Hasura.RQL.Types.Column.html#fromCol"><span class="hs-identifier hs-var">fromCol</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621688150816"><span class="hs-identifier hs-var">col</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldInfoMap (FieldInfo b)
</span><a href="#local-6989586621688150818"><span class="hs-identifier hs-var">fieldInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldInfo b)
-&gt; Getting
     (First (ColumnInfo b)) (Maybe (FieldInfo b)) (ColumnInfo b)
-&gt; Maybe (ColumnInfo b)
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">(FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
-&gt; Maybe (FieldInfo b)
-&gt; Const (First (ColumnInfo b)) (Maybe (FieldInfo b))
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span> </span><span class="annot"><span class="annottext">((FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
 -&gt; Maybe (FieldInfo b)
 -&gt; Const (First (ColumnInfo b)) (Maybe (FieldInfo b)))
-&gt; ((ColumnInfo b -&gt; Const (First (ColumnInfo b)) (ColumnInfo b))
    -&gt; FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b))
-&gt; Getting
     (First (ColumnInfo b)) (Maybe (FieldInfo b)) (ColumnInfo b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Const (First (ColumnInfo b)) (ColumnInfo b))
-&gt; FieldInfo b -&gt; Const (First (ColumnInfo b)) (FieldInfo b)
forall (b :: BackendType). Prism' (FieldInfo b) (ColumnInfo b)
</span><a href="Hasura.RQL.Types.Table.html#_FIColumn"><span class="hs-identifier hs-var">_FIColumn</span></a></span><span>
</span><span id="line-1268"></span><span>          </span><span class="hs-comment">-- Fetch information about the referencing columns of the foreign key</span><span>
</span><span id="line-1269"></span><span>          </span><span class="hs-comment">-- constraint</span><span>
</span><span id="line-1270"></span><span>          </span><span id="local-6989586621688150811"><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150811"><span class="hs-identifier hs-var">colInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1271"></span><span>            </span><span class="annot"><span class="annottext">(Column b -&gt; Maybe (ColumnInfo b))
-&gt; [Column b] -&gt; Maybe [ColumnInfo b]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Column b -&gt; Maybe (ColumnInfo b)
</span><a href="#local-6989586621688150817"><span class="hs-identifier hs-var">findColumn</span></a></span><span> </span><span class="annot"><span class="annottext">[Column b]
</span><a href="#local-6989586621688150820"><span class="hs-identifier hs-var">columns</span></a></span><span>
</span><span id="line-1272"></span><span>              </span><span class="annot"><span class="annottext">Maybe [ColumnInfo b]
-&gt; MaybeT m [ColumnInfo b] -&gt; MaybeT m [ColumnInfo b]
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MaybeT m [ColumnInfo b]
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;could not find column info in schema cache&quot;</span></span><span>
</span><span id="line-1273"></span><span>          </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#boolToNullable"><span class="hs-identifier hs-var">boolToNullable</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Nullable) -&gt; Bool -&gt; Nullable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ColumnInfo b -&gt; Bool) -&gt; [ColumnInfo b] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo b -&gt; Bool
forall (b :: BackendType). ColumnInfo b -&gt; Bool
</span><a href="Hasura.RQL.Types.Column.html#ciIsNullable"><span class="hs-identifier hs-var hs-var">ciIsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo b]
</span><a href="#local-6989586621688150811"><span class="hs-identifier hs-var">colInfo</span></a></span><span>
</span><span id="line-1274"></span><span>        </span><span class="hs-comment">-- Manual or reverse relationships are always nullable</span><span>
</span><span id="line-1275"></span><span>        </span><span class="annot"><span class="annottext">(Bool, InsertOrder)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nullable -&gt; MaybeT m Nullable
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a></span><span>
</span><span id="line-1276"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1277"></span><span>        </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; [FieldParser n (AnnotatedField b)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AnnotatedField b)
 -&gt; [FieldParser n (AnnotatedField b)])
-&gt; FieldParser n (AnnotatedField b)
-&gt; [FieldParser n (AnnotatedField b)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1278"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="#local-6989586621688150825"><span class="hs-identifier hs-var">nullable</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Nullable
</span><a href="Hasura.RQL.Types.Relationships.Local.html#NotNullable"><span class="hs-identifier hs-var">NotNullable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (m :: * -&gt; *) a. FieldParser m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableField"><span class="hs-identifier hs-var">P.nonNullableField</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AnnotatedField b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; FieldParser n (AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1279"></span><span>            </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields b)
-&gt; FieldParser n (AnnotatedFields b)
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Output m a -&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150843"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150827"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields b)
</span><a href="#local-6989586621688150826"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-1280"></span><span>              </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedFields b)
-&gt; (AnnotatedFields b -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150803"><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688150803"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1281"></span><span>                </span><span class="annot"><span class="annottext">ObjectRelationSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ObjectRelationSelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFObjectRelation"><span class="hs-identifier hs-var">IR.AFObjectRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjectRelationSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1282"></span><span>                  </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AnnObjectSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ObjectRelationSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ObjectRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1283"></span><span>                    </span><span class="annot"><span class="annottext">AnnotatedFields b
-&gt; TableName b
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
AnnFieldsG b r v
-&gt; TableName b -&gt; AnnBoolExp b v -&gt; AnnObjectSelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#AnnObjectSelectG"><span class="hs-identifier hs-var">IR.AnnObjectSelectG</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields b
</span><a href="#local-6989586621688150803"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; TableName b
forall (b :: BackendType). RelInfo b -&gt; TableName b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riRTable"><span class="hs-identifier hs-var hs-var">riRTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AnnBoolExp b (UnpreparedValue b)
 -&gt; AnnObjectSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnObjectSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1284"></span><span>                      </span><span class="annot"><span class="annottext">AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
</span><a href="#local-6989586621688150839"><span class="hs-identifier hs-var">deduplicatePermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExp b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; AnnBoolExp b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1285"></span><span>                        </span><span class="annot"><span class="annottext">TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.html#_tpFilter"><span class="hs-identifier hs-var hs-var">IR._tpFilter</span></a></span><span> </span><span class="annot"><span class="annottext">(TablePermG b (UnpreparedValue b)
 -&gt; AnnBoolExp b (UnpreparedValue b))
-&gt; TablePermG b (UnpreparedValue b)
-&gt; AnnBoolExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; TablePermG b (UnpreparedValue b)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150844"><span class="hs-identifier hs-var">remotePerms</span></a></span><span>
</span><span id="line-1286"></span><span>    </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1287"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150798"><span class="annot"><span class="annottext">arrayRelDesc :: Maybe Description
</span><a href="#local-6989586621688150798"><span class="hs-identifier hs-var hs-var">arrayRelDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An array relationship&quot;</span></span><span>
</span><span id="line-1288"></span><span>      </span><span id="local-6989586621688150797"><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
</span><a href="#local-6989586621688150797"><span class="hs-identifier hs-var">otherTableParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (SelectExp b)))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (SelectExp b)))
 -&gt; MaybeT m (FieldParser n (SelectExp b)))
-&gt; m (Maybe (FieldParser n (SelectExp b)))
-&gt; MaybeT m (FieldParser n (SelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTable"><span class="hs-identifier hs-var">selectTable</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150843"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150798"><span class="hs-identifier hs-var">arrayRelDesc</span></a></span><span>
</span><span id="line-1289"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150796"><span class="annot"><span class="annottext">arrayRelField :: FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621688150796"><span class="hs-identifier hs-var hs-var">arrayRelField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1290"></span><span>            </span><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
</span><a href="#local-6989586621688150797"><span class="hs-identifier hs-var">otherTableParser</span></a></span><span> </span><span class="annot"><span class="annottext">FieldParser n (SelectExp b)
-&gt; (SelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150795"><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150795"><span class="hs-identifier hs-var">selectExp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1291"></span><span>              </span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1292"></span><span>                </span><span class="annot"><span class="annottext">ArrayRelationSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayRelationSelectG b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASSimple"><span class="hs-identifier hs-var">IR.ASSimple</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayRelationSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1293"></span><span>                  </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; SelectExp b
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SelectExp b
 -&gt; ArrayRelationSelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; SelectExp b
-&gt; ArrayRelationSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1294"></span><span>                    </span><span class="annot"><span class="annottext">SelectExp b -&gt; SelectExp b
</span><a href="#local-6989586621688150832"><span class="hs-identifier hs-var">deduplicatePermissions'</span></a></span><span> </span><span class="annot"><span class="annottext">SelectExp b
</span><a href="#local-6989586621688150795"><span class="hs-identifier hs-var">selectExp</span></a></span><span>
</span><span id="line-1295"></span><span>          </span><span id="local-6989586621688150792"><span class="annot"><span class="annottext">relAggFieldName :: Name
</span><a href="#local-6989586621688150792"><span class="hs-identifier hs-var hs-var">relAggFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150843"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_aggregate&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>          </span><span id="local-6989586621688150791"><span class="annot"><span class="annottext">relAggDesc :: Maybe Description
</span><a href="#local-6989586621688150791"><span class="hs-identifier hs-var hs-var">relAggDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An aggregate relationship&quot;</span></span><span>
</span><span id="line-1297"></span><span>      </span><span id="local-6989586621688150790"><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp b))
</span><a href="#local-6989586621688150790"><span class="hs-identifier hs-var">remoteAggField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (AggSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (AggSelectExp b)))
 -&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b))))
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (AggSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableAggregate"><span class="hs-identifier hs-var">selectTableAggregate</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150792"><span class="hs-identifier hs-var">relAggFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150791"><span class="hs-identifier hs-var">relAggDesc</span></a></span><span>
</span><span id="line-1298"></span><span>      </span><span id="local-6989586621688150789"><span class="annot"><span class="annottext">Maybe (FieldParser n (ConnectionSelectExp b))
</span><a href="#local-6989586621688150789"><span class="hs-identifier hs-var">remoteConnectionField</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
 -&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b))))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-comment">-- Parse array connection field only for relay schema</span><span>
</span><span id="line-1300"></span><span>        </span><span id="local-6989586621688150788"><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688150788"><span class="hs-identifier hs-var">queryType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; GraphQLQueryType) -&gt; MaybeT (MaybeT m) GraphQLQueryType
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; GraphQLQueryType) -&gt; MaybeT (MaybeT m) GraphQLQueryType)
-&gt; (r -&gt; GraphQLQueryType) -&gt; MaybeT (MaybeT m) GraphQLQueryType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; GraphQLQueryType
</span><a href="Hasura.GraphQL.Schema.Common.html#qcQueryType"><span class="hs-identifier hs-var hs-var">qcQueryType</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; GraphQLQueryType)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; GraphQLQueryType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1301"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; MaybeT (MaybeT m) ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; MaybeT (MaybeT m) ()) -&gt; Bool -&gt; MaybeT (MaybeT m) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="#local-6989586621688150788"><span class="hs-identifier hs-var">queryType</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType -&gt; GraphQLQueryType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GraphQLQueryType
</span><a href="Hasura.GraphQL.Execute.Types.html#QueryRelay"><span class="hs-identifier hs-var">ET.QueryRelay</span></a></span><span>
</span><span id="line-1302"></span><span>        </span><span id="local-6989586621688150787"><span class="annot"><span class="annottext">XRelay b
</span><a href="#local-6989586621688150787"><span class="hs-identifier hs-var">xRelayInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b)
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b))
-&gt; Maybe (XRelay b) -&gt; MaybeT (MaybeT m) (XRelay b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSchema b =&gt; Maybe (XRelay b)
forall (b :: BackendType). BackendSchema b =&gt; Maybe (XRelay b)
</span><a href="Hasura.GraphQL.Schema.Backend.html#relayExtension"><span class="hs-identifier hs-var">relayExtension</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151776"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1303"></span><span>        </span><span id="local-6989586621688150786"><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688150786"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1304"></span><span>          </span><span class="annot"><span class="annottext">MaybeT m (Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (Maybe (NESeq (ColumnInfo b)))
 -&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b)))
-&gt; MaybeT m (Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT (MaybeT m) (NESeq (ColumnInfo b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1305"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableInfo b
-&gt; Getting
     (First (NESeq (ColumnInfo b))) (TableInfo b) (NESeq (ColumnInfo b))
-&gt; Maybe (NESeq (ColumnInfo b))
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; TableInfo b
-&gt; Const (First (NESeq (ColumnInfo b))) (TableInfo b)
forall (b :: BackendType). Lens' (TableInfo b) (TableCoreInfo b)
</span><a href="Hasura.RQL.Types.Table.html#tiCoreInfo"><span class="hs-identifier hs-var">tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
  -&gt; Const
       (First (NESeq (ColumnInfo b)))
       (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
 -&gt; TableInfo b
 -&gt; Const (First (NESeq (ColumnInfo b))) (TableInfo b))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
    -&gt; Const
         (First (NESeq (ColumnInfo b)))
         (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; Getting
     (First (NESeq (ColumnInfo b))) (TableInfo b) (NESeq (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
forall (b :: BackendType) field primaryKeyColumn1
       primaryKeyColumn2.
Lens
  (TableCoreInfoG b field primaryKeyColumn1)
  (TableCoreInfoG b field primaryKeyColumn2)
  (Maybe (PrimaryKey b primaryKeyColumn1))
  (Maybe (PrimaryKey b primaryKeyColumn2))
</span><a href="Hasura.RQL.Types.Table.html#tciPrimaryKey"><span class="hs-identifier hs-var">tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe (PrimaryKey b (ColumnInfo b))
  -&gt; Const
       (First (NESeq (ColumnInfo b)))
       (Maybe (PrimaryKey b (ColumnInfo b))))
 -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (TableCoreInfoG b (FieldInfo b) (ColumnInfo b)))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; Maybe (PrimaryKey b (ColumnInfo b))
    -&gt; Const
         (First (NESeq (ColumnInfo b)))
         (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; (NESeq (ColumnInfo b)
    -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (TableCoreInfoG b (FieldInfo b) (ColumnInfo b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey b (ColumnInfo b)
 -&gt; Const
      (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (Maybe (PrimaryKey b (ColumnInfo b)))
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span> </span><span class="annot"><span class="annottext">((PrimaryKey b (ColumnInfo b)
  -&gt; Const
       (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
 -&gt; Maybe (PrimaryKey b (ColumnInfo b))
 -&gt; Const
      (First (NESeq (ColumnInfo b)))
      (Maybe (PrimaryKey b (ColumnInfo b))))
-&gt; ((NESeq (ColumnInfo b)
     -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
    -&gt; PrimaryKey b (ColumnInfo b)
    -&gt; Const
         (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b)))
-&gt; (NESeq (ColumnInfo b)
    -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; Maybe (PrimaryKey b (ColumnInfo b))
-&gt; Const
     (First (NESeq (ColumnInfo b)))
     (Maybe (PrimaryKey b (ColumnInfo b)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NESeq (ColumnInfo b)
 -&gt; Const (First (NESeq (ColumnInfo b))) (NESeq (ColumnInfo b)))
-&gt; PrimaryKey b (ColumnInfo b)
-&gt; Const
     (First (NESeq (ColumnInfo b))) (PrimaryKey b (ColumnInfo b))
forall (b :: BackendType) a1 a2.
Lens (PrimaryKey b a1) (PrimaryKey b a2) (NESeq a1) (NESeq a2)
</span><a href="Hasura.RQL.Types.Table.html#pkColumns"><span class="hs-identifier hs-var">pkColumns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1306"></span><span>              </span><span class="annot"><span class="annottext">(TableInfo b -&gt; Maybe (NESeq (ColumnInfo b)))
-&gt; MaybeT m (TableInfo b)
-&gt; MaybeT m (Maybe (NESeq (ColumnInfo b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; MaybeT m (TableInfo b)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1307"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150782"><span class="annot"><span class="annottext">relConnectionName :: Name
</span><a href="#local-6989586621688150782"><span class="hs-identifier hs-var hs-var">relConnectionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150843"><span class="hs-identifier hs-var">relFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_connection&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>            </span><span id="local-6989586621688150781"><span class="annot"><span class="annottext">relConnectionDesc :: Maybe Description
</span><a href="#local-6989586621688150781"><span class="hs-identifier hs-var hs-var">relConnectionDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Description -&gt; Maybe Description)
-&gt; Description -&gt; Maybe Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An array relationship connection&quot;</span></span><span>
</span><span id="line-1309"></span><span>        </span><span class="annot"><span class="annottext">MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
 -&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT (MaybeT m) (FieldParser n (ConnectionSelectExp b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (FieldParser n (ConnectionSelectExp b)))
 -&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b))))
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
-&gt; MaybeT m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; NESeq (ColumnInfo b)
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; PrimaryKeyColumns b
-&gt; m (Maybe (FieldParser n (ConnectionSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#selectTableConnection"><span class="hs-identifier hs-var">selectTableConnection</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150851"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150846"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150782"><span class="hs-identifier hs-var">relConnectionName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150781"><span class="hs-identifier hs-var">relConnectionDesc</span></a></span><span> </span><span class="annot"><span class="annottext">NESeq (ColumnInfo b)
</span><a href="#local-6989586621688150786"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-1310"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1311"></span><span>        </span><span class="annot"><span class="annottext">[Maybe (FieldParser n (AnnotatedField b))]
-&gt; [FieldParser n (AnnotatedField b)]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-1312"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FieldParser n (AnnotatedField b)
</span><a href="#local-6989586621688150796"><span class="hs-identifier hs-var">arrayRelField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1313"></span><span>            </span><span class="annot"><span class="annottext">(AggSelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (AggSelectExp b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; (AggSelectExp b
    -&gt; ArraySelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AggSelectExp b
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArrayAggregateSelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayAggregateSelectG b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASAggregate"><span class="hs-identifier hs-var">IR.ASAggregate</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayAggregateSelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; (AggSelectExp b
    -&gt; ArrayAggregateSelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; AggSelectExp b
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; AggSelectExp b
-&gt; ArrayAggregateSelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (AggSelectExp b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; Maybe (FieldParser n (AggSelectExp b))
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp b))
</span><a href="#local-6989586621688150790"><span class="hs-identifier hs-var">remoteAggField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1314"></span><span>            </span><span class="annot"><span class="annottext">(ConnectionSelectExp b -&gt; AnnotatedField b)
-&gt; FieldParser n (ConnectionSelectExp b)
-&gt; FieldParser n (AnnotatedField b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArraySelectG
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; AnnotatedField b
forall (b :: BackendType) r v.
ArraySelectG b r v -&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFArrayRelation"><span class="hs-identifier hs-var">IR.AFArrayRelation</span></a></span><span> </span><span class="annot"><span class="annottext">(ArraySelectG
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; AnnotatedField b)
-&gt; (ConnectionSelectExp b
    -&gt; ArraySelectG
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ConnectionSelectExp b
-&gt; AnnotatedField b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArrayConnectionSelect
  b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) r v.
ArrayConnectionSelect b r v -&gt; ArraySelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#ASConnection"><span class="hs-identifier hs-var">IR.ASConnection</span></a></span><span> </span><span class="annot"><span class="annottext">(ArrayConnectionSelect
   b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
 -&gt; ArraySelectG
      b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; (ConnectionSelectExp b
    -&gt; ArrayConnectionSelect
         b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b))
-&gt; ConnectionSelectExp b
-&gt; ArraySelectG
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RelName
-&gt; HashMap (Column b) (Column b)
-&gt; ConnectionSelectExp b
-&gt; ArrayConnectionSelect
     b (RemoteRelationshipField UnpreparedValue) (UnpreparedValue b)
forall (b :: BackendType) a.
RelName
-&gt; HashMap (Column b) (Column b) -&gt; a -&gt; AnnRelationSelectG b a
</span><a href="Hasura.RQL.IR.Select.html#AnnRelationSelectG"><span class="hs-identifier hs-var">IR.AnnRelationSelectG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; RelName
forall (b :: BackendType). RelInfo b -&gt; RelName
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riName"><span class="hs-identifier hs-var hs-var">riName</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelInfo b -&gt; HashMap (Column b) (Column b)
forall (b :: BackendType).
RelInfo b -&gt; HashMap (Column b) (Column b)
</span><a href="Hasura.RQL.Types.Relationships.Local.html#riMapping"><span class="hs-identifier hs-var hs-var">riMapping</span></a></span><span> </span><span class="annot"><span class="annottext">RelInfo b
</span><a href="#local-6989586621688150849"><span class="hs-identifier hs-var">ri</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser n (ConnectionSelectExp b)
 -&gt; FieldParser n (AnnotatedField b))
-&gt; Maybe (FieldParser n (ConnectionSelectExp b))
-&gt; Maybe (FieldParser n (AnnotatedField b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (ConnectionSelectExp b))
</span><a href="#local-6989586621688150789"><span class="hs-identifier hs-var">remoteConnectionField</span></a></span><span>
</span><span id="line-1315"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span class="hs-comment">-- | Computed field parser</span><span>
</span><span id="line-1318"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#computedFieldPG"><span class="hs-identifier hs-type">computedFieldPG</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1319"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688150778"><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span></span><span> </span><span id="local-6989586621688150777"><span class="annot"><a href="#local-6989586621688150777"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621688150776"><span class="annot"><a href="#local-6989586621688150776"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688150775"><span class="annot"><a href="#local-6989586621688150775"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1320"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688150777"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150776"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150775"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1321"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1322"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#ComputedFieldInfo"><span class="hs-identifier hs-type">ComputedFieldInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1323"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1324"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1325"></span><span>  </span><span class="annot"><a href="#local-6989586621688150776"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150775"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-type">AnnotatedField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1326"></span><span id="computedFieldPG"><span class="annot"><span class="annottext">computedFieldPG :: SourceName
-&gt; ComputedFieldInfo ('Postgres pgKind)
-&gt; TableName ('Postgres pgKind)
-&gt; TableInfo ('Postgres pgKind)
-&gt; m (Maybe (FieldParser n (AnnotatedField ('Postgres pgKind))))
</span><a href="Hasura.GraphQL.Schema.Select.html#computedFieldPG"><span class="hs-identifier hs-var hs-var">computedFieldPG</span></a></span></span><span> </span><span id="local-6989586621688150774"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150774"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#ComputedFieldInfo"><span class="hs-identifier hs-type">ComputedFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688150768"><span id="local-6989586621688150769"><span id="local-6989586621688150770"><span id="local-6989586621688150771"><span id="local-6989586621688150772"><span class="annot"><span class="annottext">Maybe Text
XComputedField ('Postgres pgKind)
ComputedFieldReturn ('Postgres pgKind)
ComputedFieldName
ComputedFieldFunction ('Postgres pgKind)
_cfiDescription :: forall (b :: BackendType). ComputedFieldInfo b -&gt; Maybe Text
_cfiReturnType :: forall (b :: BackendType).
ComputedFieldInfo b -&gt; ComputedFieldReturn b
_cfiFunction :: forall (b :: BackendType).
ComputedFieldInfo b -&gt; ComputedFieldFunction b
_cfiName :: forall (b :: BackendType). ComputedFieldInfo b -&gt; ComputedFieldName
_cfiXComputedFieldInfo :: forall (b :: BackendType). ComputedFieldInfo b -&gt; XComputedField b
_cfiDescription :: Maybe Text
_cfiReturnType :: ComputedFieldReturn ('Postgres pgKind)
_cfiFunction :: ComputedFieldFunction ('Postgres pgKind)
_cfiName :: ComputedFieldName
_cfiXComputedFieldInfo :: XComputedField ('Postgres pgKind)
</span><a href="Hasura.RQL.Types.ComputedField.html#_cfiDescription"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688150762"><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688150762"><span class="hs-identifier hs-var">parentTable</span></a></span></span><span> </span><span id="local-6989586621688150761"><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150761"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT m (FieldParser n (AnnotatedField ('Postgres pgKind)))
-&gt; m (Maybe (FieldParser n (AnnotatedField ('Postgres pgKind))))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1327"></span><span>  </span><span id="local-6989586621688150760"><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150760"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo ('Postgres pgKind)))
 -&gt; MaybeT m (SelPermInfo ('Postgres pgKind)))
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150761"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1328"></span><span>  </span><span id="local-6989586621688150759"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688150759"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; MaybeT m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; MaybeT m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; MaybeT m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1329"></span><span>  </span><span id="local-6989586621688150758"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150758"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Name -&gt; MaybeT m Name
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Name -&gt; MaybeT m Name) -&gt; m Name -&gt; MaybeT m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m Name) -&gt; Text -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName -&gt; Text
</span><a href="Hasura.RQL.Types.ComputedField.html#computedFieldNameToText"><span class="hs-identifier hs-var">computedFieldNameToText</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150771"><span class="hs-identifier hs-var">_cfiName</span></a></span><span>
</span><span id="line-1330"></span><span>  </span><span id="local-6989586621688150757"><span class="annot"><span class="annottext">InputFieldsParser
  n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150757"><span class="hs-identifier hs-var">functionArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (InputFieldsParser
      n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
 -&gt; MaybeT
      m
      (InputFieldsParser
         n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688150756"><span class="hs-identifier hs-var">computedFieldFunctionArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
</span><a href="#local-6989586621688150770"><span class="hs-identifier hs-var">_cfiFunction</span></a></span><span>
</span><span id="line-1331"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ComputedFieldReturn ('Postgres pgKind)
</span><a href="#local-6989586621688150769"><span class="hs-identifier hs-var">_cfiReturnType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1332"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#CFRScalar"><span class="hs-identifier hs-type">CFRScalar</span></a></span><span> </span><span id="local-6989586621688150754"><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind)
</span><a href="#local-6989586621688150754"><span class="hs-identifier hs-var">scalarReturnType</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1333"></span><span>      </span><span id="local-6989586621688150753"><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind))
</span><a href="#local-6989586621688150753"><span class="hs-identifier hs-var">caseBoolExpMaybe</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1334"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)))
-&gt; MaybeT
     m (Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)))
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComputedFieldName
-&gt; HashMap
     ComputedFieldName
     (Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)))
-&gt; Maybe
     (Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150771"><span class="hs-identifier hs-var">_cfiName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
-&gt; HashMap
     ComputedFieldName
     (Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)))
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap
     ComputedFieldName (Maybe (AnnColumnCaseBoolExpPartialSQL b))
</span><a href="Hasura.RQL.Types.Table.html#spiScalarComputedFields"><span class="hs-identifier hs-var hs-var">spiScalarComputedFields</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150760"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150751"><span class="annot"><span class="annottext">caseBoolExpUnpreparedValue :: Maybe
  (GBoolExp
     ('Postgres pgKind)
     (AnnColumnCaseBoolExpField
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688150751"><span class="hs-identifier hs-var hs-var">caseBoolExpUnpreparedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1336"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpField
   ('Postgres pgKind) (PartialSQLExp ('Postgres pgKind))
 -&gt; AnnColumnCaseBoolExpField
      ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
-&gt; AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)
-&gt; GBoolExp
     ('Postgres pgKind)
     (AnnColumnCaseBoolExpField
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((AnnColumnCaseBoolExpField
    ('Postgres pgKind) (PartialSQLExp ('Postgres pgKind))
  -&gt; AnnColumnCaseBoolExpField
       ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
 -&gt; AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)
 -&gt; GBoolExp
      ('Postgres pgKind)
      (AnnColumnCaseBoolExpField
         ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; ((PartialSQLExp ('Postgres pgKind)
     -&gt; UnpreparedValue ('Postgres pgKind))
    -&gt; AnnColumnCaseBoolExpField
         ('Postgres pgKind) (PartialSQLExp ('Postgres pgKind))
    -&gt; AnnColumnCaseBoolExpField
         ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
-&gt; (PartialSQLExp ('Postgres pgKind)
    -&gt; UnpreparedValue ('Postgres pgKind))
-&gt; AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)
-&gt; GBoolExp
     ('Postgres pgKind)
     (AnnColumnCaseBoolExpField
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp ('Postgres pgKind)
 -&gt; UnpreparedValue ('Postgres pgKind))
-&gt; AnnColumnCaseBoolExpField
     ('Postgres pgKind) (PartialSQLExp ('Postgres pgKind))
-&gt; AnnColumnCaseBoolExpField
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PartialSQLExp ('Postgres pgKind)
-&gt; UnpreparedValue ('Postgres pgKind)
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind)
 -&gt; GBoolExp
      ('Postgres pgKind)
      (AnnColumnCaseBoolExpField
         ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind))
-&gt; Maybe
     (GBoolExp
        ('Postgres pgKind)
        (AnnColumnCaseBoolExpField
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnColumnCaseBoolExpPartialSQL ('Postgres pgKind))
</span><a href="#local-6989586621688150753"><span class="hs-identifier hs-var">caseBoolExpMaybe</span></a></span><span>
</span><span id="line-1337"></span><span>          </span><span id="local-6989586621688150750"><span class="annot"><span class="annottext">fieldArgsParser :: InputFieldsParser n (AnnotatedField ('Postgres pgKind))
</span><a href="#local-6989586621688150750"><span class="hs-identifier hs-var hs-var">fieldArgsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1338"></span><span>            </span><span id="local-6989586621688150749"><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150749"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150757"><span class="hs-identifier hs-var">functionArgsParser</span></a></span><span>
</span><span id="line-1339"></span><span>            </span><span id="local-6989586621688150748"><span class="annot"><span class="annottext">Maybe (ColumnOp ('Postgres pgKind))
</span><a href="#local-6989586621688150748"><span class="hs-identifier hs-var">colOp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres pgKind)
-&gt; InputFieldsParser n (Maybe (ColumnOp ('Postgres pgKind)))
forall (b :: BackendType) (n :: * -&gt; *).
(BackendSchema b, MonadParse n) =&gt;
ColumnType b -&gt; InputFieldsParser n (Maybe (ColumnOp b))
</span><a href="Hasura.GraphQL.Schema.Backend.html#jsonPathArg"><span class="hs-identifier hs-var">jsonPathArg</span></a></span><span> </span><span class="annot"><span class="annottext">(ColumnType ('Postgres pgKind)
 -&gt; InputFieldsParser n (Maybe (ColumnOp ('Postgres pgKind))))
-&gt; ColumnType ('Postgres pgKind)
-&gt; InputFieldsParser n (Maybe (ColumnOp ('Postgres pgKind)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind) -&gt; ColumnType ('Postgres pgKind)
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind)
</span><a href="#local-6989586621688150754"><span class="hs-identifier hs-var">scalarReturnType</span></a></span><span>
</span><span id="line-1340"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1341"></span><span>              </span><span class="annot"><span class="annottext">XComputedField ('Postgres pgKind)
-&gt; ComputedFieldName
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
-&gt; AnnotatedField ('Postgres pgKind)
forall (b :: BackendType) r v.
XComputedField b
-&gt; ComputedFieldName
-&gt; ComputedFieldSelect b r v
-&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFComputedField"><span class="hs-identifier hs-var">IR.AFComputedField</span></a></span><span>
</span><span id="line-1342"></span><span>                </span><span class="annot"><span class="annottext">XComputedField ('Postgres pgKind)
</span><a href="#local-6989586621688150772"><span class="hs-identifier hs-var">_cfiXComputedFieldInfo</span></a></span><span>
</span><span id="line-1343"></span><span>                </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150771"><span class="hs-identifier hs-var">_cfiName</span></a></span><span>
</span><span id="line-1344"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ComputedFieldScalarSelect
  ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
-&gt; Maybe
     (GBoolExp
        ('Postgres pgKind)
        (AnnColumnCaseBoolExpField
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType) r v.
ComputedFieldScalarSelect b v
-&gt; Maybe (AnnColumnCaseBoolExp b v) -&gt; ComputedFieldSelect b r v
</span><a href="Hasura.RQL.IR.Select.html#CFSScalar"><span class="hs-identifier hs-var">IR.CFSScalar</span></a></span><span>
</span><span id="line-1345"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ComputedFieldScalarSelect :: forall (b :: BackendType) v.
FunctionName b
-&gt; FunctionArgsExpTableRow v
-&gt; ScalarType b
-&gt; Maybe (ColumnOp b)
-&gt; ComputedFieldScalarSelect b v
</span><a href="Hasura.RQL.IR.Select.html#ComputedFieldScalarSelect"><span class="hs-identifier hs-type">IR.ComputedFieldScalarSelect</span></a></span><span>
</span><span id="line-1346"></span><span>                        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_cfssFunction :: FunctionName ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_cfssFunction"><span class="hs-identifier hs-var">IR._cfssFunction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
-&gt; FunctionName ('Postgres pgKind)
forall (b :: BackendType).
ComputedFieldFunction b -&gt; FunctionName b
</span><a href="Hasura.RQL.Types.ComputedField.html#_cffName"><span class="hs-identifier hs-var hs-var">_cffName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
</span><a href="#local-6989586621688150770"><span class="hs-identifier hs-var">_cfiFunction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1347"></span><span>                          </span><span class="annot"><span class="annottext">_cfssType :: ScalarType ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_cfssType"><span class="hs-identifier hs-var">IR._cfssType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind)
</span><a href="#local-6989586621688150754"><span class="hs-identifier hs-var">scalarReturnType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1348"></span><span>                          </span><span class="annot"><span class="annottext">_cfssColumnOp :: Maybe (ColumnOp ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_cfssColumnOp"><span class="hs-identifier hs-var">IR._cfssColumnOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ColumnOp ('Postgres pgKind))
</span><a href="#local-6989586621688150748"><span class="hs-identifier hs-var">colOp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1349"></span><span>                          </span><span class="annot"><span class="annottext">_cfssArguments :: FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_cfssArguments"><span class="hs-identifier hs-var">IR._cfssArguments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150749"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1350"></span><span>                        </span><span class="hs-special">}</span><span>
</span><span id="line-1351"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-1352"></span><span>                    </span><span class="annot"><span class="annottext">Maybe
  (GBoolExp
     ('Postgres pgKind)
     (AnnColumnCaseBoolExpField
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688150751"><span class="hs-identifier hs-var">caseBoolExpUnpreparedValue</span></a></span><span>
</span><span id="line-1353"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>      </span><span id="local-6989586621688150739"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150739"><span class="hs-identifier hs-var">dummyParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Parser
     'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (Parser 'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Parser
      'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
 -&gt; MaybeT
      m
      (Parser
         'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind)))))
-&gt; m (Parser
        'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (Parser 'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres pgKind)
-&gt; Nullability
-&gt; m (Parser
        'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind))))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind) -&gt; ColumnType ('Postgres pgKind)
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarType ('Postgres pgKind)
</span><a href="#local-6989586621688150754"><span class="hs-identifier hs-var">scalarReturnType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-1355"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n (AnnotatedField ('Postgres pgKind))
-&gt; Parser
     'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind)))
-&gt; FieldParser n (AnnotatedField ('Postgres pgKind))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Both m b
-&gt; FieldParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection"><span class="hs-identifier hs-var">P.selection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150758"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150738"><span class="hs-identifier hs-var">fieldDescription</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (AnnotatedField ('Postgres pgKind))
</span><a href="#local-6989586621688150750"><span class="hs-identifier hs-var">fieldArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150739"><span class="hs-identifier hs-var">dummyParser</span></a></span><span>
</span><span id="line-1356"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#CFRSetofTable"><span class="hs-identifier hs-type">CFRSetofTable</span></a></span><span> </span><span id="local-6989586621688150736"><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688150736"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1357"></span><span>      </span><span id="local-6989586621688150735"><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150735"><span class="hs-identifier hs-var">otherTableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo ('Postgres pgKind))
 -&gt; MaybeT m (TableInfo ('Postgres pgKind)))
-&gt; m (TableInfo ('Postgres pgKind))
-&gt; MaybeT m (TableInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres pgKind) -&gt; m (TableInfo ('Postgres pgKind))
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150774"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688150736"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-1358"></span><span>      </span><span id="local-6989586621688150734"><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150734"><span class="hs-identifier hs-var">remotePerms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo ('Postgres pgKind)))
 -&gt; MaybeT m (SelPermInfo ('Postgres pgKind)))
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
-&gt; MaybeT m (SelPermInfo ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
-&gt; m (Maybe (SelPermInfo ('Postgres pgKind)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150735"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1359"></span><span>      </span><span id="local-6989586621688150733"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres pgKind))
</span><a href="#local-6989586621688150733"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields ('Postgres pgKind))))
-&gt; MaybeT m (Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields ('Postgres pgKind))
 -&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
-&gt; Maybe (Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
-&gt; Maybe (Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres pgKind))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind))
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#multiple"><span class="hs-identifier hs-var">P.multiple</span></a></span><span> </span><span class="annot"><span class="annottext">(Parser 'Output n (AnnotatedFields ('Postgres pgKind))
 -&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
-&gt; (Parser 'Output n (AnnotatedFields ('Postgres pgKind))
    -&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres pgKind))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind))
forall (m :: * -&gt; *) a. Parser 'Output m a -&gt; Parser 'Output m a
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#nonNullableParser"><span class="hs-identifier hs-var">P.nonNullableParser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Parser 'Output n (AnnotatedFields ('Postgres pgKind)))
 -&gt; Maybe (Parser 'Output n (AnnotatedFields ('Postgres pgKind))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres pgKind))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres pgKind))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo ('Postgres pgKind)
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres pgKind))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150774"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150735"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>      </span><span id="local-6989586621688150732"><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgsG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150732"><span class="hs-identifier hs-var">selectArgsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (InputFieldsParser
     n
     (SelectArgsG
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (InputFieldsParser
        n
        (SelectArgsG
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (InputFieldsParser
      n
      (SelectArgsG
         ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
 -&gt; MaybeT
      m
      (InputFieldsParser
         n
         (SelectArgsG
            ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))))
-&gt; m (InputFieldsParser
        n
        (SelectArgsG
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; MaybeT
     m
     (InputFieldsParser
        n
        (SelectArgsG
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo ('Postgres pgKind)
-&gt; m (InputFieldsParser
        n
        (SelectArgsG
           ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
SourceName
-&gt; TableInfo b
-&gt; m (InputFieldsParser n (SelectArgsG b (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableArguments"><span class="hs-identifier hs-var">tableArguments</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150774"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150735"><span class="hs-identifier hs-var">otherTableInfo</span></a></span><span>
</span><span id="line-1361"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150731"><span class="annot"><span class="annottext">fieldArgsParser :: InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
   SelectArgsG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150731"><span class="hs-identifier hs-var hs-var">fieldArgsParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
 -&gt; SelectArgsG
      ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
 -&gt; (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
     SelectArgsG
       ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
-&gt; InputFieldsParser
     n
     (SelectArgsG
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      SelectArgsG
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
forall (f :: * -&gt; *) a b c.
Applicative f =&gt;
(a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c
</span><span class="hs-identifier hs-var">liftA2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150757"><span class="hs-identifier hs-var">functionArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (SelectArgsG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150732"><span class="hs-identifier hs-var">selectArgsParser</span></a></span><span>
</span><span id="line-1362"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1363"></span><span>        </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n
     (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      SelectArgsG
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres pgKind))
-&gt; FieldParser
     n
     ((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
       SelectArgsG
         ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))),
      AnnotatedFields ('Postgres pgKind))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150758"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
</span><a href="#local-6989586621688150738"><span class="hs-identifier hs-var">fieldDescription</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser
  n
  (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
   SelectArgsG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150731"><span class="hs-identifier hs-var">fieldArgsParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres pgKind))
</span><a href="#local-6989586621688150733"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-1364"></span><span>          </span><span class="annot"><span class="annottext">FieldParser
  n
  ((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
    SelectArgsG
      ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))),
   AnnotatedFields ('Postgres pgKind))
-&gt; (((FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)),
      SelectArgsG
        ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))),
     AnnotatedFields ('Postgres pgKind))
    -&gt; AnnotatedField ('Postgres pgKind))
-&gt; FieldParser n (AnnotatedField ('Postgres pgKind))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688150730"><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150730"><span class="hs-identifier hs-var">functionArgs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150729"><span class="annot"><span class="annottext">SelectArgsG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150729"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150728"><span class="annot"><span class="annottext">AnnotatedFields ('Postgres pgKind)
</span><a href="#local-6989586621688150728"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1365"></span><span>            </span><span class="annot"><span class="annottext">XComputedField ('Postgres pgKind)
-&gt; ComputedFieldName
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
-&gt; AnnotatedField ('Postgres pgKind)
forall (b :: BackendType) r v.
XComputedField b
-&gt; ComputedFieldName
-&gt; ComputedFieldSelect b r v
-&gt; AnnFieldG b r v
</span><a href="Hasura.RQL.IR.Select.html#AFComputedField"><span class="hs-identifier hs-var">IR.AFComputedField</span></a></span><span> </span><span class="annot"><span class="annottext">XComputedField ('Postgres pgKind)
</span><a href="#local-6989586621688150772"><span class="hs-identifier hs-var">_cfiXComputedFieldInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150771"><span class="hs-identifier hs-var">_cfiName</span></a></span><span> </span><span class="annot"><span class="annottext">(ComputedFieldSelect
   ('Postgres pgKind)
   (RemoteRelationshipField UnpreparedValue)
   (UnpreparedValue ('Postgres pgKind))
 -&gt; AnnotatedField ('Postgres pgKind))
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
-&gt; AnnotatedField ('Postgres pgKind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1366"></span><span>              </span><span class="annot"><span class="annottext">JsonAggSelect
-&gt; AnnSimpleSelectG
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType) r v.
JsonAggSelect
-&gt; AnnSimpleSelectG b r v -&gt; ComputedFieldSelect b r v
</span><a href="Hasura.RQL.IR.Select.html#CFSTable"><span class="hs-identifier hs-var">IR.CFSTable</span></a></span><span> </span><span class="annot"><span class="annottext">JsonAggSelect
</span><a href="Hasura.RQL.Types.Common.html#JASMultipleRows"><span class="hs-identifier hs-var">JASMultipleRows</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnSimpleSelectG
   ('Postgres pgKind)
   (RemoteRelationshipField UnpreparedValue)
   (UnpreparedValue ('Postgres pgKind))
 -&gt; ComputedFieldSelect
      ('Postgres pgKind)
      (RemoteRelationshipField UnpreparedValue)
      (UnpreparedValue ('Postgres pgKind)))
-&gt; AnnSimpleSelectG
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
-&gt; ComputedFieldSelect
     ('Postgres pgKind)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres pgKind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1367"></span><span>                </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-1368"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: AnnotatedFields ('Postgres pgKind)
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields ('Postgres pgKind)
</span><a href="#local-6989586621688150728"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1369"></span><span>                    </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionName ('Postgres pgKind)
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; Maybe
     [(Column ('Postgres pgKind), ScalarType ('Postgres pgKind))]
-&gt; SelectFromG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType) v.
FunctionName b
-&gt; FunctionArgsExpTableRow v
-&gt; Maybe [(Column b, ScalarType b)]
-&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromFunction"><span class="hs-identifier hs-var">IR.FromFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
-&gt; FunctionName ('Postgres pgKind)
forall (b :: BackendType).
ComputedFieldFunction b -&gt; FunctionName b
</span><a href="Hasura.RQL.Types.ComputedField.html#_cffName"><span class="hs-identifier hs-var hs-var">_cffName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldFunction ('Postgres pgKind)
</span><a href="#local-6989586621688150770"><span class="hs-identifier hs-var">_cfiFunction</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150730"><span class="hs-identifier hs-var">functionArgs'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(Column ('Postgres pgKind), ScalarType ('Postgres pgKind))]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-1370"></span><span>                    </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
-&gt; TablePermG
     ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres pgKind)
</span><a href="#local-6989586621688150734"><span class="hs-identifier hs-var">remotePerms</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1371"></span><span>                    </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectArgsG ('Postgres pgKind) (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150729"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1372"></span><span>                    </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688150759"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-1373"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-1374"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1375"></span><span>    </span><span class="annot"><a href="#local-6989586621688150738"><span class="hs-identifier hs-type">fieldDescription</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">G.Description</span></span><span>
</span><span id="line-1376"></span><span>    </span><span id="local-6989586621688150738"><span class="annot"><span class="annottext">fieldDescription :: Maybe Description
</span><a href="#local-6989586621688150738"><span class="hs-identifier hs-var hs-var">fieldDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Maybe Text -&gt; Maybe Description
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621688150768"><span class="hs-identifier hs-var">_cfiDescription</span></a></span><span>
</span><span id="line-1377"></span><span>
</span><span id="line-1378"></span><span>    </span><span class="annot"><a href="#local-6989586621688150756"><span class="hs-identifier hs-type">computedFieldFunctionArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1379"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#ComputedFieldFunction"><span class="hs-identifier hs-type">ComputedFieldFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1380"></span><span>      </span><span class="annot"><a href="#local-6989586621688150776"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150775"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#FunctionArgsExpTableRow"><span class="hs-identifier hs-type">IR.FunctionArgsExpTableRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150778"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1381"></span><span>    </span><span id="local-6989586621688150756"><span class="annot"><span class="annottext">computedFieldFunctionArgs :: ComputedFieldFunction ('Postgres pgKind)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
</span><a href="#local-6989586621688150756"><span class="hs-identifier hs-var hs-var">computedFieldFunctionArgs</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#ComputedFieldFunction"><span class="hs-identifier hs-type">ComputedFieldFunction</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688150721"><span id="local-6989586621688150722"><span id="local-6989586621688150723"><span id="local-6989586621688150724"><span id="local-6989586621688150725"><span class="annot"><span class="annottext">Maybe PGDescription
Maybe FunctionSessionArgument
Seq (FunctionArg ('Postgres pgKind))
FunctionName ('Postgres pgKind)
FunctionTableArgument
_cffDescription :: forall (b :: BackendType).
ComputedFieldFunction b -&gt; Maybe PGDescription
_cffSessionArgument :: forall (b :: BackendType).
ComputedFieldFunction b -&gt; Maybe FunctionSessionArgument
_cffTableArgument :: forall (b :: BackendType).
ComputedFieldFunction b -&gt; FunctionTableArgument
_cffInputArgs :: forall (b :: BackendType).
ComputedFieldFunction b -&gt; Seq (FunctionArg b)
_cffDescription :: Maybe PGDescription
_cffSessionArgument :: Maybe FunctionSessionArgument
_cffTableArgument :: FunctionTableArgument
_cffInputArgs :: Seq (FunctionArg ('Postgres pgKind))
_cffName :: FunctionName ('Postgres pgKind)
_cffName :: forall (b :: BackendType).
ComputedFieldFunction b -&gt; FunctionName b
</span><a href="Hasura.RQL.Types.ComputedField.html#_cffDescription"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1382"></span><span>      </span><span class="annot"><span class="annottext">FunctionTrackedAs ('Postgres pgKind)
-&gt; Seq (FunctionInputArgument ('Postgres pgKind))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
forall (b :: BackendType) (m :: * -&gt; *) (n :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 Has MkTypename r) =&gt;
FunctionTrackedAs b
-&gt; Seq (FunctionInputArgument b)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#functionArgs"><span class="hs-identifier hs-var">functionArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComputedFieldName
-&gt; SourceName
-&gt; TableName ('Postgres pgKind)
-&gt; FunctionTrackedAs ('Postgres pgKind)
forall (b :: BackendType).
ComputedFieldName
-&gt; SourceName -&gt; TableName b -&gt; FunctionTrackedAs b
</span><a href="Hasura.RQL.Types.ComputedField.html#FTAComputedField"><span class="hs-identifier hs-var">FTAComputedField</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150771"><span class="hs-identifier hs-var">_cfiName</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150774"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres pgKind)
</span><a href="#local-6989586621688150762"><span class="hs-identifier hs-var">parentTable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctionArg ('Postgres pgKind)
-&gt; FunctionInputArgument ('Postgres pgKind)
forall a. a -&gt; InputArgument a
</span><a href="Hasura.RQL.Types.Function.html#IAUserProvided"><span class="hs-identifier hs-var">IAUserProvided</span></a></span><span> </span><span class="annot"><span class="annottext">(FunctionArg ('Postgres pgKind)
 -&gt; FunctionInputArgument ('Postgres pgKind))
-&gt; Seq (FunctionArg ('Postgres pgKind))
-&gt; Seq (FunctionInputArgument ('Postgres pgKind))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Seq (FunctionArg ('Postgres pgKind))
</span><a href="#local-6989586621688150724"><span class="hs-identifier hs-var">_cffInputArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
-&gt; (InputFieldsParser
      n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
    -&gt; InputFieldsParser
         n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
 -&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150713"><span class="hs-identifier hs-var">addTableAndSessionArgument</span></a></span><span>
</span><span id="line-1383"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1384"></span><span>        </span><span id="local-6989586621688150713"><span class="annot"><span class="annottext">addTableAndSessionArgument :: FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150713"><span class="hs-identifier hs-var hs-var">addTableAndSessionArgument</span></a></span></span><span> </span><span id="local-6989586621688150712"><span class="annot"><span class="annottext">args :: FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150712"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#FunctionArgsExp"><span class="hs-identifier hs-type">IR.FunctionArgsExp</span></a></span><span> </span><span id="local-6989586621688150710"><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue ('Postgres pgKind))]
</span><a href="#local-6989586621688150710"><span class="hs-identifier hs-var">positional</span></a></span></span><span> </span><span id="local-6989586621688150709"><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150709"><span class="hs-identifier hs-var">named</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1385"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150708"><span class="annot"><span class="annottext">withTable :: FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150708"><span class="hs-identifier hs-var hs-var">withTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionTableArgument
</span><a href="#local-6989586621688150723"><span class="hs-identifier hs-var">_cffTableArgument</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1386"></span><span>                </span><span class="annot"><span class="annottext">FunctionTableArgument
</span><a href="Hasura.RQL.Types.ComputedField.html#FTAFirst"><span class="hs-identifier hs-var">FTAFirst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue ('Postgres pgKind))]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue ('Postgres pgKind)))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
forall a. [a] -&gt; HashMap Text a -&gt; FunctionArgsExpG a
</span><a href="Hasura.RQL.IR.Select.html#FunctionArgsExp"><span class="hs-identifier hs-var">IR.FunctionArgsExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue ('Postgres pgKind))
forall a. ArgumentExp a
</span><a href="Hasura.RQL.IR.Select.html#AETableRow"><span class="hs-identifier hs-var">IR.AETableRow</span></a></span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue ('Postgres pgKind))
-&gt; [ArgumentExp (UnpreparedValue ('Postgres pgKind))]
-&gt; [ArgumentExp (UnpreparedValue ('Postgres pgKind))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue ('Postgres pgKind))]
</span><a href="#local-6989586621688150710"><span class="hs-identifier hs-var">positional</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue ('Postgres pgKind)))
</span><a href="#local-6989586621688150709"><span class="hs-identifier hs-var">named</span></a></span><span>
</span><span id="line-1387"></span><span>                </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FTANamed"><span class="hs-identifier hs-type">FTANamed</span></a></span><span> </span><span id="local-6989586621688150704"><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150704"><span class="hs-identifier hs-var">argName</span></a></span></span><span> </span><span id="local-6989586621688150703"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150703"><span class="hs-identifier hs-var">index</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctionArgName
-&gt; Int
-&gt; ArgumentExp (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
forall a.
FunctionArgName
-&gt; Int -&gt; a -&gt; FunctionArgsExpG a -&gt; FunctionArgsExpG a
</span><a href="Hasura.RQL.IR.Select.html#insertFunctionArg"><span class="hs-identifier hs-var">IR.insertFunctionArg</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150704"><span class="hs-identifier hs-var">argName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150703"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue ('Postgres pgKind))
forall a. ArgumentExp a
</span><a href="Hasura.RQL.IR.Select.html#AETableRow"><span class="hs-identifier hs-var">IR.AETableRow</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150712"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1388"></span><span>              </span><span id="local-6989586621688150701"><span class="annot"><span class="annottext">sessionArgVal :: ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150701"><span class="hs-identifier hs-var hs-var">sessionArgVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b -&gt; ArgumentExp (UnpreparedValue b)
forall a. a -&gt; ArgumentExp a
</span><a href="Hasura.RQL.IR.Select.html#AESession"><span class="hs-identifier hs-var">IR.AESession</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
forall (b :: BackendType). UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#UVSession"><span class="hs-identifier hs-var">UVSession</span></a></span><span>
</span><span id="line-1389"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe FunctionSessionArgument
</span><a href="#local-6989586621688150722"><span class="hs-identifier hs-var">_cffSessionArgument</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1390"></span><span>                </span><span class="annot"><span class="annottext">Maybe FunctionSessionArgument
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150708"><span class="hs-identifier hs-var">withTable</span></a></span><span>
</span><span id="line-1391"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FunctionSessionArgument"><span class="hs-identifier hs-type">FunctionSessionArgument</span></a></span><span> </span><span id="local-6989586621688150697"><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150697"><span class="hs-identifier hs-var">argName</span></a></span></span><span> </span><span id="local-6989586621688150696"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150696"><span class="hs-identifier hs-var">index</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1392"></span><span>                  </span><span class="annot"><span class="annottext">FunctionArgName
-&gt; Int
-&gt; ArgumentExp (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
-&gt; FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
forall a.
FunctionArgName
-&gt; Int -&gt; a -&gt; FunctionArgsExpG a -&gt; FunctionArgsExpG a
</span><a href="Hasura.RQL.IR.Select.html#insertFunctionArg"><span class="hs-identifier hs-var">IR.insertFunctionArg</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150697"><span class="hs-identifier hs-var">argName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150696"><span class="hs-identifier hs-var">index</span></a></span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue ('Postgres pgKind))
forall (b :: BackendType). ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150701"><span class="hs-identifier hs-var">sessionArgVal</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue ('Postgres pgKind))
</span><a href="#local-6989586621688150708"><span class="hs-identifier hs-var">withTable</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="hs-comment">-- | The custom SQL functions' input &quot;args&quot; field parser</span><span>
</span><span id="line-1395"></span><span class="hs-comment">-- &gt; function_name(args: function_args)</span><span>
</span><span id="line-1396"></span><span id="local-6989586621688152016"><span id="local-6989586621688152017"><span id="local-6989586621688152018"><span id="local-6989586621688152019"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#customSQLFunctionArgs"><span class="hs-identifier hs-type">customSQLFunctionArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1397"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152019"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadSchema"><span class="hs-identifier hs-type">MonadSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152018"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152017"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadTableInfo"><span class="hs-identifier hs-type">MonadTableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152016"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152017"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">P.MkTypename</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152016"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1398"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152019"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1399"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1400"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">G.Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1401"></span><span>  </span><span class="annot"><a href="#local-6989586621688152017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152018"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#FunctionArgsExpTableRow"><span class="hs-identifier hs-type">IR.FunctionArgsExpTableRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152019"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-1402"></span><span id="customSQLFunctionArgs"><span class="annot"><span class="annottext">customSQLFunctionArgs :: FunctionInfo b
-&gt; Name
-&gt; Name
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#customSQLFunctionArgs"><span class="hs-identifier hs-var hs-var">customSQLFunctionArgs</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInfo"><span class="hs-identifier hs-type">FunctionInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688150683"><span id="local-6989586621688150684"><span id="local-6989586621688150685"><span id="local-6989586621688150686"><span id="local-6989586621688150687"><span id="local-6989586621688150688"><span id="local-6989586621688150689"><span id="local-6989586621688150690"><span id="local-6989586621688150691"><span id="local-6989586621688150692"><span id="local-6989586621688150693"><span id="local-6989586621688150694"><span id="local-6989586621688150695"><span class="annot"><span class="annottext">Maybe Text
Seq (FunctionInputArgument b)
FunctionPermissionsMap
Name
TableName b
FunctionName b
SystemDefined
JsonAggSelect
FunctionVolatility
FunctionExposedAs
_fiComment :: Maybe Text
_fiJsonAggSelect :: JsonAggSelect
_fiPermissions :: FunctionPermissionsMap
_fiDescription :: Maybe Text
_fiReturnType :: TableName b
_fiInputArgs :: Seq (FunctionInputArgument b)
_fiExposedAs :: FunctionExposedAs
_fiVolatility :: FunctionVolatility
_fiSystemDefined :: SystemDefined
_fiGQLAggregateName :: Name
_fiGQLArgsName :: Name
_fiGQLName :: Name
_fiSQLName :: FunctionName b
_fiComment :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiJsonAggSelect :: forall (b :: BackendType). FunctionInfo b -&gt; JsonAggSelect
_fiPermissions :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionPermissionsMap
_fiDescription :: forall (b :: BackendType). FunctionInfo b -&gt; Maybe Text
_fiReturnType :: forall (b :: BackendType). FunctionInfo b -&gt; TableName b
_fiInputArgs :: forall (b :: BackendType).
FunctionInfo b -&gt; Seq (FunctionInputArgument b)
_fiExposedAs :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionExposedAs
_fiVolatility :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionVolatility
_fiSystemDefined :: forall (b :: BackendType). FunctionInfo b -&gt; SystemDefined
_fiGQLAggregateName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLArgsName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiGQLName :: forall (b :: BackendType). FunctionInfo b -&gt; Name
_fiSQLName :: forall (b :: BackendType). FunctionInfo b -&gt; FunctionName b
</span><a href="#local-6989586621688150683"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621688150682"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150682"><span class="hs-identifier hs-var">functionName</span></a></span></span><span> </span><span id="local-6989586621688150681"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150681"><span class="hs-identifier hs-var">functionArgsName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1403"></span><span>  </span><span class="annot"><span class="annottext">FunctionTrackedAs b
-&gt; Seq (FunctionInputArgument b)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (b :: BackendType) (m :: * -&gt; *) (n :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadTableInfo r m,
 Has MkTypename r) =&gt;
FunctionTrackedAs b
-&gt; Seq (FunctionInputArgument b)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#functionArgs"><span class="hs-identifier hs-var">functionArgs</span></a></span><span>
</span><span id="line-1404"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">CustomFunctionNames -&gt; FunctionTrackedAs b
forall (b :: BackendType).
CustomFunctionNames -&gt; FunctionTrackedAs b
</span><a href="Hasura.RQL.Types.ComputedField.html#FTACustomFunction"><span class="hs-identifier hs-var">FTACustomFunction</span></a></span><span> </span><span class="annot"><span class="annottext">(CustomFunctionNames -&gt; FunctionTrackedAs b)
-&gt; CustomFunctionNames -&gt; FunctionTrackedAs b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1405"></span><span>        </span><span class="annot"><span class="annottext">CustomFunctionNames :: Name -&gt; Name -&gt; CustomFunctionNames
</span><a href="Hasura.RQL.Types.ComputedField.html#CustomFunctionNames"><span class="hs-identifier hs-type">CustomFunctionNames</span></a></span><span>
</span><span id="line-1406"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cfnFunctionName :: Name
</span><a href="Hasura.RQL.Types.ComputedField.html#cfnFunctionName"><span class="hs-identifier hs-var">cfnFunctionName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150682"><span class="hs-identifier hs-var">functionName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1407"></span><span>            </span><span class="annot"><span class="annottext">cfnArgsName :: Name
</span><a href="Hasura.RQL.Types.ComputedField.html#cfnArgsName"><span class="hs-identifier hs-var">cfnArgsName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150681"><span class="hs-identifier hs-var">functionArgsName</span></a></span><span>
</span><span id="line-1408"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1409"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1410"></span><span>    </span><span class="annot"><span class="annottext">Seq (FunctionInputArgument b)
</span><a href="#local-6989586621688150688"><span class="hs-identifier hs-var">_fiInputArgs</span></a></span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span class="hs-comment">-- | Parses the arguments to the underlying sql function of a computed field or</span><span>
</span><span id="line-1413"></span><span class="hs-comment">--   a custom function. All arguments to the underlying sql function are parsed</span><span>
</span><span id="line-1414"></span><span class="hs-comment">--   as an &quot;args&quot; object. Named arguments are expected in a field with the same</span><span>
</span><span id="line-1415"></span><span class="hs-comment">--   name, while positional arguments are expected in an field named &quot;arg_$n&quot;.</span><span>
</span><span id="line-1416"></span><span class="hs-comment">--   Note that collisions are possible, but ignored for now, if a named argument</span><span>
</span><span id="line-1417"></span><span class="hs-comment">--   is also named &quot;arg_$n&quot;. (FIXME: link to an issue?)</span><span>
</span><span id="line-1418"></span><span class="hs-comment">--</span><span>
</span><span id="line-1419"></span><span class="hs-comment">--   If the function requires no argument, or if its only argument is not</span><span>
</span><span id="line-1420"></span><span class="hs-comment">--   user-provided (the session argument in the case of custom functions, the</span><span>
</span><span id="line-1421"></span><span class="hs-comment">--   table row argument in the case of computed fields), the args object will</span><span>
</span><span id="line-1422"></span><span class="hs-comment">--   be omitted.</span><span>
</span><span id="line-1423"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#functionArgs"><span class="hs-identifier hs-type">functionArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1424"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688151676"><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621688151674"><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688151675"><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621688151673"><span class="annot"><a href="#local-6989586621688151673"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1425"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1426"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadSchema"><span class="hs-identifier hs-type">MonadSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1427"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.html#MonadTableInfo"><span class="hs-identifier hs-type">MonadTableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151673"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1428"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Has</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#MkTypename"><span class="hs-identifier hs-type">P.MkTypename</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151673"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-1429"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1430"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FunctionTrackedAs"><span class="hs-identifier hs-type">FunctionTrackedAs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1431"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Seq.Seq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInputArgument"><span class="hs-identifier hs-type">FunctionInputArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1432"></span><span>  </span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#FunctionArgsExpTableRow"><span class="hs-identifier hs-type">IR.FunctionArgsExpTableRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1433"></span><span id="functionArgs"><span class="annot"><span class="annottext">functionArgs :: FunctionTrackedAs b
-&gt; Seq (FunctionInputArgument b)
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#functionArgs"><span class="hs-identifier hs-var hs-var">functionArgs</span></a></span></span><span> </span><span id="local-6989586621688150676"><span class="annot"><span class="annottext">FunctionTrackedAs b
</span><a href="#local-6989586621688150676"><span class="hs-identifier hs-var">functionTrackedAs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (FunctionInputArgument b) -&gt; [FunctionInputArgument b]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621688150675"><span class="annot"><span class="annottext">[FunctionInputArgument b]
</span><a href="#local-6989586621688150675"><span class="hs-identifier hs-var">inputArgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1434"></span><span>  </span><span class="hs-comment">-- First, we iterate through the original sql arguments in order, to find the</span><span>
</span><span id="line-1435"></span><span>  </span><span class="hs-comment">-- corresponding graphql names. At the same time, we create the input field</span><span>
</span><span id="line-1436"></span><span>  </span><span class="hs-comment">-- parsers, in three groups: session argument, optional arguments, and</span><span>
</span><span id="line-1437"></span><span>  </span><span class="hs-comment">-- mandatory arguments. Optional arguments have a default value, mandatory</span><span>
</span><span id="line-1438"></span><span>  </span><span class="hs-comment">-- arguments don't.</span><span>
</span><span id="line-1439"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150674"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688150674"><span class="hs-identifier hs-var">names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150673"><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150673"><span class="hs-identifier hs-var">session</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150672"><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150672"><span class="hs-identifier hs-var">optional</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150671"><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150671"><span class="hs-identifier hs-var">mandatory</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Text], [(Text, ArgumentExp (UnpreparedValue b))],
  [m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
  [m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])]
-&gt; ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([([Text], [(Text, ArgumentExp (UnpreparedValue b))],
   [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
   [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])]
 -&gt; ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]))
-&gt; [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])]
-&gt; ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int,
 [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
   [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
   [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])])
-&gt; [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Int,
  [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
    [m (InputFieldsParser
          n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])])
 -&gt; [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])])
-&gt; (Int,
    [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])])
-&gt; [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int
 -&gt; FunctionInputArgument b
 -&gt; (Int,
     ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])))
-&gt; Int
-&gt; [FunctionInputArgument b]
-&gt; (Int,
    [([Text], [(Text, ArgumentExp (UnpreparedValue b))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
      [m (InputFieldsParser
            n (Maybe (Text, ArgumentExp (UnpreparedValue b))))])])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><span class="hs-identifier hs-var">mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; FunctionInputArgument b
-&gt; (Int,
    ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]))
</span><a href="#local-6989586621688150670"><span class="hs-identifier hs-var">splitArguments</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[FunctionInputArgument b]
</span><a href="#local-6989586621688150675"><span class="hs-identifier hs-var">inputArgs</span></a></span><span>
</span><span id="line-1440"></span><span>      </span><span id="local-6989586621688150669"><span class="annot"><span class="annottext">defaultArguments :: FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688150669"><span class="hs-identifier hs-var hs-var">defaultArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue b)]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; FunctionArgsExpTableRow (UnpreparedValue b)
forall a. [a] -&gt; HashMap Text a -&gt; FunctionArgsExpG a
</span><a href="Hasura.RQL.IR.Select.html#FunctionArgsExp"><span class="hs-identifier hs-var">IR.FunctionArgsExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text, ArgumentExp (UnpreparedValue b))
-&gt; ArgumentExp (UnpreparedValue b)
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Text, ArgumentExp (UnpreparedValue b))
 -&gt; ArgumentExp (UnpreparedValue b))
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
-&gt; [ArgumentExp (UnpreparedValue b)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150673"><span class="hs-identifier hs-var">session</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-1441"></span><span>
</span><span id="line-1442"></span><span>  </span><span class="hs-keyword">if</span><span>
</span><span id="line-1443"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150673"><span class="hs-identifier hs-var">session</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1444"></span><span>        </span><span class="hs-comment">-- We somehow found more than one session argument; this should never</span><span>
</span><span id="line-1445"></span><span>        </span><span class="hs-comment">-- happen and is an error on our side.</span><span>
</span><span id="line-1446"></span><span>        </span><span class="annot"><span class="annottext">Text
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;there shouldn't be more than one session argument&quot;</span></span><span>
</span><span id="line-1447"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150672"><span class="hs-identifier hs-var">optional</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150671"><span class="hs-identifier hs-var">mandatory</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1448"></span><span>        </span><span class="hs-comment">-- There are no user-provided arguments to the function: there will be</span><span>
</span><span id="line-1449"></span><span>        </span><span class="hs-comment">-- no args field.</span><span>
</span><span id="line-1450"></span><span>        </span><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
 -&gt; m (InputFieldsParser
         n (FunctionArgsExpTableRow (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FunctionArgsExpTableRow (UnpreparedValue b)
</span><a href="#local-6989586621688150669"><span class="hs-identifier hs-var">defaultArguments</span></a></span><span>
</span><span id="line-1451"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1452"></span><span>        </span><span class="hs-comment">-- There are user-provided arguments: we need to parse an args object.</span><span>
</span><span id="line-1453"></span><span>        </span><span id="local-6989586621688150666"><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Text, ArgumentExp (UnpreparedValue b)))]
</span><a href="#local-6989586621688150666"><span class="hs-identifier hs-var">argumentParsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; m [InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b)))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">([m (InputFieldsParser
       n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
 -&gt; m [InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b)))])
-&gt; [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; m [InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b)))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150672"><span class="hs-identifier hs-var">optional</span></a></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
-&gt; [m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[m (InputFieldsParser
      n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]
</span><a href="#local-6989586621688150671"><span class="hs-identifier hs-var">mandatory</span></a></span><span>
</span><span id="line-1454"></span><span>        </span><span id="local-6989586621688150665"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150665"><span class="hs-identifier hs-var">objectName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1455"></span><span>          </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall r (m :: * -&gt; *).
(MonadReader r m, Has MkTypename r) =&gt;
Name -&gt; m Name
</span><a href="Hasura.GraphQL.Parser.Schema.html#mkTypename"><span class="hs-identifier hs-var">P.mkTypename</span></a></span><span>
</span><span id="line-1456"></span><span>            </span><span class="annot"><span class="annottext">(Name -&gt; m Name) -&gt; m Name -&gt; m Name
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionTrackedAs b
</span><a href="#local-6989586621688150676"><span class="hs-identifier hs-var">functionTrackedAs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1457"></span><span>              </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FTAComputedField"><span class="hs-identifier hs-type">FTAComputedField</span></a></span><span> </span><span id="local-6989586621688150664"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150664"><span class="hs-identifier hs-var">computedFieldName</span></a></span></span><span> </span><span id="local-6989586621688150663"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150663"><span class="hs-identifier hs-var">sourceName</span></a></span></span><span> </span><span id="local-6989586621688150662"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150662"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1458"></span><span>                </span><span id="local-6989586621688150661"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150661"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; TableName b -&gt; m (TableInfo b)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150663"><span class="hs-identifier hs-var">sourceName</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150662"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-1459"></span><span>                </span><span id="local-6989586621688150660"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150660"><span class="hs-identifier hs-var">computedFieldGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; m Name) -&gt; Text -&gt; m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName -&gt; Text
</span><a href="Hasura.RQL.Types.ComputedField.html#computedFieldNameToText"><span class="hs-identifier hs-var">computedFieldNameToText</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150664"><span class="hs-identifier hs-var">computedFieldName</span></a></span><span>
</span><span id="line-1460"></span><span>                </span><span id="local-6989586621688150659"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150659"><span class="hs-identifier hs-var">tableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; m Name
forall (b :: BackendType) (m :: * -&gt; *).
(Backend b, MonadError QErr m) =&gt;
TableInfo b -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Table.html#getTableGQLName"><span class="hs-identifier hs-var">getTableGQLName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621688150661"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1461"></span><span>                </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150660"><span class="hs-identifier hs-var">computedFieldGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150659"><span class="hs-identifier hs-var">tableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Name
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;_args&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1462"></span><span>              </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FTACustomFunction"><span class="hs-identifier hs-type">FTACustomFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#CustomFunctionNames"><span class="hs-identifier hs-type">CustomFunctionNames</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688150658"><span class="annot"><span class="annottext">Name
cfnArgsName :: Name
cfnArgsName :: CustomFunctionNames -&gt; Name
</span><a href="#local-6989586621688150658"><span class="hs-identifier hs-var hs-var">cfnArgsName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1463"></span><span>                </span><span class="annot"><span class="annottext">Name -&gt; m Name
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150658"><span class="hs-identifier hs-var">cfnArgsName</span></a></span><span>
</span><span id="line-1464"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150657"><span class="annot"><span class="annottext">fieldName :: Name
</span><a href="#local-6989586621688150657"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;args&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1465"></span><span>            </span><span id="local-6989586621688150656"><span class="annot"><span class="annottext">fieldDesc :: Description
</span><a href="#local-6989586621688150656"><span class="hs-identifier hs-var hs-var">fieldDesc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1466"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionTrackedAs b
</span><a href="#local-6989586621688150676"><span class="hs-identifier hs-var">functionTrackedAs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1467"></span><span>                </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FTAComputedField"><span class="hs-identifier hs-type">FTAComputedField</span></a></span><span> </span><span id="local-6989586621688150655"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150655"><span class="hs-identifier hs-var">computedFieldName</span></a></span></span><span> </span><span id="local-6989586621688150654"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150654"><span class="hs-identifier hs-var">_sourceName</span></a></span></span><span> </span><span id="local-6989586621688150653"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150653"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1468"></span><span>                  </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1469"></span><span>                    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;input parameters for computed field &quot;</span></span><span>
</span><span id="line-1470"></span><span>                      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621688150655"><span class="hs-identifier hs-var">computedFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; defined on table &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TableName b -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621688150653"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-1471"></span><span>                </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#FTACustomFunction"><span class="hs-identifier hs-type">FTACustomFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.html#CustomFunctionNames"><span class="hs-identifier hs-type">CustomFunctionNames</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688150651"><span class="annot"><span class="annottext">Name
cfnFunctionName :: Name
cfnFunctionName :: CustomFunctionNames -&gt; Name
</span><a href="#local-6989586621688150651"><span class="hs-identifier hs-var hs-var">cfnFunctionName</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1472"></span><span>                  </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;input parameters for function &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Name -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150651"><span class="hs-identifier hs-var">cfnFunctionName</span></a></span><span>
</span><span id="line-1473"></span><span>            </span><span id="local-6989586621688150650"><span class="annot"><span class="annottext">objectParser :: Parser 'Input n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688150650"><span class="hs-identifier hs-var hs-var">objectParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1474"></span><span>              </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser
     n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; Parser 'Input n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name
-&gt; Maybe Description -&gt; InputFieldsParser m a -&gt; Parser 'Input m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#object"><span class="hs-identifier hs-var">P.object</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150665"><span class="hs-identifier hs-var">objectName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Text, ArgumentExp (UnpreparedValue b)))]
-&gt; InputFieldsParser
     n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span> </span><span class="annot"><span class="annottext">[InputFieldsParser
   n (Maybe (Text, ArgumentExp (UnpreparedValue b)))]
</span><a href="#local-6989586621688150666"><span class="hs-identifier hs-var">argumentParsers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Input n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; ([Maybe (Text, ArgumentExp (UnpreparedValue b))]
    -&gt; n (FunctionArgsExpTableRow (UnpreparedValue b)))
-&gt; Parser 'Input n (FunctionArgsExpTableRow (UnpreparedValue b))
forall (m :: * -&gt; *) (k :: Kind) a b.
Monad m =&gt;
Parser k m a -&gt; (a -&gt; m b) -&gt; Parser k m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bind"><span class="hs-operator hs-var">`P.bind`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150647"><span class="annot"><span class="annottext">[Maybe (Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150647"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1475"></span><span>                </span><span class="hs-comment">-- After successfully parsing, we create a dictionary of the parsed fields</span><span>
</span><span id="line-1476"></span><span>                </span><span class="hs-comment">-- and we re-iterate through the original list of sql arguments, now with</span><span>
</span><span id="line-1477"></span><span>                </span><span class="hs-comment">-- the knowledge of their graphql name.</span><span>
</span><span id="line-1478"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150646"><span class="annot"><span class="annottext">foundArguments :: HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150646"><span class="hs-identifier hs-var hs-var">foundArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Text, ArgumentExp (UnpreparedValue b))]
 -&gt; HashMap Text (ArgumentExp (UnpreparedValue b)))
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150647"><span class="hs-identifier hs-var">arguments</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
</span><a href="#local-6989586621688150673"><span class="hs-identifier hs-var">session</span></a></span><span>
</span><span id="line-1479"></span><span>                    </span><span id="local-6989586621688150644"><span class="annot"><span class="annottext">argsWithNames :: [(Text, FunctionInputArgument b)]
</span><a href="#local-6989586621688150644"><span class="hs-identifier hs-var hs-var">argsWithNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
-&gt; [FunctionInputArgument b] -&gt; [(Text, FunctionInputArgument b)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621688150674"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">[FunctionInputArgument b]
</span><a href="#local-6989586621688150675"><span class="hs-identifier hs-var">inputArgs</span></a></span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span>                </span><span class="hs-comment">-- All elements (in the orignal sql order) that are found in the result map</span><span>
</span><span id="line-1482"></span><span>                </span><span class="hs-comment">-- are treated as positional arguments, whether they were originally named or</span><span>
</span><span id="line-1483"></span><span>                </span><span class="hs-comment">-- not.</span><span>
</span><span id="line-1484"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621688150643"><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue b)]
</span><a href="#local-6989586621688150643"><span class="hs-identifier hs-var">positional</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150642"><span class="annot"><span class="annottext">[(Text, FunctionInputArgument b)]
</span><a href="#local-6989586621688150642"><span class="hs-identifier hs-var">left</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Text, FunctionInputArgument b)
 -&gt; n (Maybe (ArgumentExp (UnpreparedValue b))))
-&gt; [(Text, FunctionInputArgument b)]
-&gt; n ([ArgumentExp (UnpreparedValue b)],
      [(Text, FunctionInputArgument b)])
forall (f :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable f, Monad m) =&gt;
(a -&gt; m (Maybe b)) -&gt; f a -&gt; m ([b], [a])
</span><a href="Hasura.Prelude.html#spanMaybeM"><span class="hs-identifier hs-var">spanMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688150640"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150640"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FunctionInputArgument b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (ArgumentExp (UnpreparedValue b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (ArgumentExp (UnpreparedValue b))
 -&gt; n (Maybe (ArgumentExp (UnpreparedValue b))))
-&gt; Maybe (ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (ArgumentExp (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; Maybe (ArgumentExp (UnpreparedValue b))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150640"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150646"><span class="hs-identifier hs-var">foundArguments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, FunctionInputArgument b)]
</span><a href="#local-6989586621688150644"><span class="hs-identifier hs-var">argsWithNames</span></a></span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span>                </span><span class="hs-comment">-- If there are arguments left, it means we found one that was not passed</span><span>
</span><span id="line-1487"></span><span>                </span><span class="hs-comment">-- positionally. As a result, any remaining argument will have to be passed</span><span>
</span><span id="line-1488"></span><span>                </span><span class="hs-comment">-- by name. We fail with a parse error if we encounter a positional sql</span><span>
</span><span id="line-1489"></span><span>                </span><span class="hs-comment">-- argument (that does not have a name in the sql function), as:</span><span>
</span><span id="line-1490"></span><span>                </span><span class="hs-comment">--   * only the last positional arguments can be omitted;</span><span>
</span><span id="line-1491"></span><span>                </span><span class="hs-comment">--   * it has no name we can use.</span><span>
</span><span id="line-1492"></span><span>                </span><span class="hs-comment">-- We also fail if we find a mandatory argument that was not</span><span>
</span><span id="line-1493"></span><span>                </span><span class="hs-comment">-- provided by the user.</span><span>
</span><span id="line-1494"></span><span>                </span><span id="local-6989586621688150639"><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150639"><span class="hs-identifier hs-var">named</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Text, ArgumentExp (UnpreparedValue b))]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Text, ArgumentExp (UnpreparedValue b))]
 -&gt; HashMap Text (ArgumentExp (UnpreparedValue b)))
-&gt; ([Maybe (Text, ArgumentExp (UnpreparedValue b))]
    -&gt; [(Text, ArgumentExp (UnpreparedValue b))])
-&gt; [Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; [(Text, ArgumentExp (UnpreparedValue b))]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe (Text, ArgumentExp (UnpreparedValue b))]
 -&gt; HashMap Text (ArgumentExp (UnpreparedValue b)))
-&gt; n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
-&gt; n (HashMap Text (ArgumentExp (UnpreparedValue b)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Text, FunctionInputArgument b)
 -&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
-&gt; [(Text, FunctionInputArgument b)]
-&gt; n [Maybe (Text, ArgumentExp (UnpreparedValue b))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; (Text, FunctionInputArgument b)
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
</span><a href="#local-6989586621688150638"><span class="hs-identifier hs-var">namedArgument</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150646"><span class="hs-identifier hs-var">foundArguments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, FunctionInputArgument b)]
</span><a href="#local-6989586621688150642"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-1495"></span><span>                </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue b)]
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; FunctionArgsExpTableRow (UnpreparedValue b)
forall a. [a] -&gt; HashMap Text a -&gt; FunctionArgsExpG a
</span><a href="Hasura.RQL.IR.Select.html#FunctionArgsExp"><span class="hs-identifier hs-var">IR.FunctionArgsExp</span></a></span><span> </span><span class="annot"><span class="annottext">[ArgumentExp (UnpreparedValue b)]
</span><a href="#local-6989586621688150643"><span class="hs-identifier hs-var">positional</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150639"><span class="hs-identifier hs-var">named</span></a></span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span>        </span><span class="annot"><span class="annottext">InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser n (FunctionArgsExpTableRow (UnpreparedValue b))
 -&gt; m (InputFieldsParser
         n (FunctionArgsExpTableRow (UnpreparedValue b))))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; m (InputFieldsParser
        n (FunctionArgsExpTableRow (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Input n (FunctionArgsExpTableRow (UnpreparedValue b))
-&gt; InputFieldsParser
     n (FunctionArgsExpTableRow (UnpreparedValue b))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name -&gt; Maybe Description -&gt; Parser k m a -&gt; InputFieldsParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#field"><span class="hs-identifier hs-var">P.field</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150657"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688150656"><span class="hs-identifier hs-var">fieldDesc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Input n (FunctionArgsExpTableRow (UnpreparedValue b))
</span><a href="#local-6989586621688150650"><span class="hs-identifier hs-var">objectParser</span></a></span><span>
</span><span id="line-1498"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1499"></span><span>    </span><span class="annot"><a href="#local-6989586621688150637"><span class="hs-identifier hs-type">sessionPlaceholder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1500"></span><span>    </span><span id="local-6989586621688150637"><span class="annot"><span class="annottext">sessionPlaceholder :: ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150637"><span class="hs-identifier hs-var hs-var">sessionPlaceholder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b -&gt; ArgumentExp (UnpreparedValue b)
forall a. a -&gt; ArgumentExp a
</span><a href="Hasura.RQL.IR.Select.html#AEInput"><span class="hs-identifier hs-var">IR.AEInput</span></a></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
forall (b :: BackendType). UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#UVSession"><span class="hs-identifier hs-var">P.UVSession</span></a></span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span>    </span><span class="annot"><a href="#local-6989586621688150670"><span class="hs-identifier hs-type">splitArguments</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1503"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1504"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInputArgument"><span class="hs-identifier hs-type">FunctionInputArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1505"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>
</span><span id="line-1506"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- graphql names, in order</span><span>
</span><span id="line-1507"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- session argument</span><span>
</span><span id="line-1508"></span><span>          </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- optional argument</span><span>
</span><span id="line-1509"></span><span>          </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- mandatory argument</span><span>
</span><span id="line-1510"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1512"></span><span>    </span><span id="local-6989586621688150670"><span class="annot"><span class="annottext">splitArguments :: Int
-&gt; FunctionInputArgument b
-&gt; (Int,
    ([Text], [(Text, ArgumentExp (UnpreparedValue b))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))],
     [m (InputFieldsParser
           n (Maybe (Text, ArgumentExp (UnpreparedValue b))))]))
</span><a href="#local-6989586621688150670"><span class="hs-identifier hs-var hs-var">splitArguments</span></a></span></span><span> </span><span id="local-6989586621688150635"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150635"><span class="hs-identifier hs-var">positionalIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#IASessionVariables"><span class="hs-identifier hs-type">IASessionVariables</span></a></span><span> </span><span id="local-6989586621688150633"><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150633"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1513"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150632"><span class="annot"><span class="annottext">argName :: Text
</span><a href="#local-6989586621688150632"><span class="hs-identifier hs-var hs-var">argName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunctionArgName -&gt; Text
</span><a href="Hasura.RQL.Types.Function.html#getFuncArgNameTxt"><span class="hs-identifier hs-var hs-var">getFuncArgNameTxt</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150633"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1514"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150635"><span class="hs-identifier hs-var">positionalIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150632"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150632"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150637"><span class="hs-identifier hs-var">sessionPlaceholder</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>    </span><span class="annot"><a href="#local-6989586621688150670"><span class="hs-identifier hs-var">splitArguments</span></a></span><span> </span><span id="local-6989586621688150630"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150630"><span class="hs-identifier hs-var">positionalIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Function.html#IAUserProvided"><span class="hs-identifier hs-type">IAUserProvided</span></a></span><span> </span><span id="local-6989586621688150629"><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150629"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1516"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150628"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150628"><span class="hs-identifier hs-var">argName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150627"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150627"><span class="hs-identifier hs-var">newIndex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionArg b -&gt; Maybe FunctionArgName
forall (b :: BackendType). FunctionArg b -&gt; Maybe FunctionArgName
</span><a href="Hasura.RQL.Types.Function.html#faName"><span class="hs-identifier hs-var hs-var">faName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150629"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1517"></span><span>            </span><span class="annot"><span class="annottext">Maybe FunctionArgName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;arg_&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150630"><span class="hs-identifier hs-var">positionalIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150630"><span class="hs-identifier hs-var">positionalIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1518"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688150623"><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150623"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctionArgName -&gt; Text
</span><a href="Hasura.RQL.Types.Function.html#getFuncArgNameTxt"><span class="hs-identifier hs-var hs-var">getFuncArgNameTxt</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><a href="#local-6989586621688150623"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150630"><span class="hs-identifier hs-var">positionalIndex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">HasDefault -&gt; Bool
</span><a href="Hasura.RQL.Types.Function.html#unHasDefault"><span class="hs-identifier hs-var hs-var">unHasDefault</span></a></span><span> </span><span class="annot"><span class="annottext">(HasDefault -&gt; Bool) -&gt; HasDefault -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctionArg b -&gt; HasDefault
forall (b :: BackendType). FunctionArg b -&gt; HasDefault
</span><a href="Hasura.RQL.Types.Function.html#faHasDefault"><span class="hs-identifier hs-var hs-var">faHasDefault</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150629"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1520"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150627"><span class="hs-identifier hs-var">newIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150628"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FunctionArg b
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
</span><a href="#local-6989586621688150620"><span class="hs-identifier hs-var">parseArgument</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150629"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150628"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621688150627"><span class="hs-identifier hs-var">newIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150628"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FunctionArg b
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
</span><a href="#local-6989586621688150620"><span class="hs-identifier hs-var">parseArgument</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150629"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150628"><span class="hs-identifier hs-var">argName</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>
</span><span id="line-1523"></span><span>    </span><span class="annot"><a href="#local-6989586621688150620"><span class="hs-identifier hs-type">parseArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionArg"><span class="hs-identifier hs-type">FunctionArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688151674"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Input.html#InputFieldsParser"><span class="hs-identifier hs-type">InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1524"></span><span>    </span><span id="local-6989586621688150620"><span class="annot"><span class="annottext">parseArgument :: FunctionArg b
-&gt; Text
-&gt; m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
</span><a href="#local-6989586621688150620"><span class="hs-identifier hs-var hs-var">parseArgument</span></a></span></span><span> </span><span id="local-6989586621688150619"><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150619"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621688150618"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150618"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1525"></span><span>      </span><span id="local-6989586621688150617"><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150617"><span class="hs-identifier hs-var">typedParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
forall (b :: BackendType) (n :: * -&gt; *) (m :: * -&gt; *) r.
(BackendSchema b, MonadSchema n m, MonadError QErr m,
 MonadReader r m, Has MkTypename r) =&gt;
ColumnType b
-&gt; Nullability
-&gt; m (Parser 'Both n (ValueWithOrigin (ColumnValue b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#columnParser"><span class="hs-identifier hs-var">columnParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarType b -&gt; ColumnType b
forall (b :: BackendType). ScalarType b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ColumnScalar"><span class="hs-identifier hs-var">ColumnScalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarType b -&gt; ColumnType b) -&gt; ScalarType b -&gt; ColumnType b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Backend b =&gt; FunctionArgType b -&gt; ScalarType b
forall (b :: BackendType).
Backend b =&gt;
FunctionArgType b -&gt; ScalarType b
</span><a href="Hasura.RQL.Types.Backend.html#functionArgScalarType"><span class="hs-identifier hs-var">functionArgScalarType</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">(FunctionArgType b -&gt; ScalarType b)
-&gt; FunctionArgType b -&gt; ScalarType b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctionArg b -&gt; FunctionArgType b
forall (b :: BackendType). FunctionArg b -&gt; FunctionArgType b
</span><a href="Hasura.RQL.Types.Function.html#faType"><span class="hs-identifier hs-var hs-var">faType</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150619"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Nullability
</span><span class="hs-identifier hs-var">G.Nullability</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>      </span><span id="local-6989586621688150614"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150614"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150618"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1527"></span><span>
</span><span id="line-1528"></span><span>      </span><span class="hs-comment">-- Since all postgres function arguments are nullable, we define the</span><span>
</span><span id="line-1529"></span><span>      </span><span class="hs-comment">-- GraphQL fields in nullable types. As explained in Note [When are fields</span><span>
</span><span id="line-1530"></span><span>      </span><span class="hs-comment">-- optional?], this implies that they can be omitted. For backwards</span><span>
</span><span id="line-1531"></span><span>      </span><span class="hs-comment">-- compatibility reasons, and also to avoid surprises, we prefer to reject</span><span>
</span><span id="line-1532"></span><span>      </span><span class="hs-comment">-- the query if a mandatory argument is missing rather than filling the</span><span>
</span><span id="line-1533"></span><span>      </span><span class="hs-comment">-- blanks for the user.</span><span>
</span><span id="line-1534"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1535"></span><span>      </span><span class="hs-comment">-- As explained in Note [The value of omitted fields], we can still reject</span><span>
</span><span id="line-1536"></span><span>      </span><span class="hs-comment">-- queries when such nullable fields are omitted, and accept them when an</span><span>
</span><span id="line-1537"></span><span>      </span><span class="hs-comment">-- explicit value of `null` is used, as long as we don't set a default</span><span>
</span><span id="line-1538"></span><span>      </span><span class="hs-comment">-- value, not even `null`.</span><span>
</span><span id="line-1539"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150613"><span class="annot"><span class="annottext">argParser :: InputFieldsParser n (Maybe (ValueWithOrigin (ColumnValue b)))
</span><a href="#local-6989586621688150613"><span class="hs-identifier hs-var hs-var">argParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n (ValueWithOrigin (ColumnValue b))
-&gt; InputFieldsParser n (Maybe (ValueWithOrigin (ColumnValue b)))
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name
-&gt; Maybe Description
-&gt; Parser k m a
-&gt; InputFieldsParser m (Maybe a)
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#fieldOptional"><span class="hs-identifier hs-var">P.fieldOptional</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621688150614"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both n (ValueWithOrigin (ColumnValue b))
</span><a href="#local-6989586621688150617"><span class="hs-identifier hs-var">typedParser</span></a></span><span>
</span><span id="line-1540"></span><span>      </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
-&gt; m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(InputFieldsParser
   n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
 -&gt; m (InputFieldsParser
         n (Maybe (Text, ArgumentExp (UnpreparedValue b)))))
-&gt; InputFieldsParser
     n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
-&gt; m (InputFieldsParser
        n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (ValueWithOrigin (ColumnValue b)))
</span><a href="#local-6989586621688150613"><span class="hs-identifier hs-var">argParser</span></a></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n (Maybe (ValueWithOrigin (ColumnValue b)))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; (Text, ArgumentExp (UnpreparedValue b)))
-&gt; InputFieldsParser
     n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall (m :: * -&gt; *) a b.
Functor m =&gt;
InputFieldsParser m (Maybe a)
-&gt; (a -&gt; b) -&gt; InputFieldsParser m (Maybe b)
</span><a href="Hasura.GraphQL.Schema.Common.html#mapField"><span class="hs-operator hs-var">`mapField`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150618"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ArgumentExp (UnpreparedValue b)
 -&gt; (Text, ArgumentExp (UnpreparedValue b)))
-&gt; (ValueWithOrigin (ColumnValue b)
    -&gt; ArgumentExp (UnpreparedValue b))
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; (Text, ArgumentExp (UnpreparedValue b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b -&gt; ArgumentExp (UnpreparedValue b)
forall a. a -&gt; ArgumentExp a
</span><a href="Hasura.RQL.IR.Select.html#AEInput"><span class="hs-identifier hs-var">IR.AEInput</span></a></span><span> </span><span class="annot"><span class="annottext">(UnpreparedValue b -&gt; ArgumentExp (UnpreparedValue b))
-&gt; (ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b)
-&gt; ValueWithOrigin (ColumnValue b)
-&gt; ArgumentExp (UnpreparedValue b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
forall (b :: BackendType).
ValueWithOrigin (ColumnValue b) -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#mkParameter"><span class="hs-identifier hs-var">mkParameter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span>
</span><span id="line-1542"></span><span>    </span><span class="annot"><a href="#local-6989586621688150638"><span class="hs-identifier hs-type">namedArgument</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1543"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1544"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#FunctionInputArgument"><span class="hs-identifier hs-type">FunctionInputArgument</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1545"></span><span>      </span><span class="annot"><a href="#local-6989586621688151675"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ArgumentExp"><span class="hs-identifier hs-type">IR.ArgumentExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688151676"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>    </span><span id="local-6989586621688150638"><span class="annot"><span class="annottext">namedArgument :: HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; (Text, FunctionInputArgument b)
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
</span><a href="#local-6989586621688150638"><span class="hs-identifier hs-var hs-var">namedArgument</span></a></span></span><span> </span><span id="local-6989586621688150611"><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150611"><span class="hs-identifier hs-var">dictionary</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150610"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150610"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150609"><span class="annot"><span class="annottext">FunctionInputArgument b
</span><a href="#local-6989586621688150609"><span class="hs-identifier hs-var">inputArgument</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionInputArgument b
</span><a href="#local-6989586621688150609"><span class="hs-identifier hs-var">inputArgument</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1547"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#IASessionVariables"><span class="hs-identifier hs-type">IASessionVariables</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Text, ArgumentExp (UnpreparedValue b))
 -&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
-&gt; Maybe (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text, ArgumentExp (UnpreparedValue b))
-&gt; Maybe (Text, ArgumentExp (UnpreparedValue b))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150610"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150637"><span class="hs-identifier hs-var">sessionPlaceholder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1548"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Function.html#IAUserProvided"><span class="hs-identifier hs-type">IAUserProvided</span></a></span><span> </span><span id="local-6989586621688150608"><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150608"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; HashMap Text (ArgumentExp (UnpreparedValue b))
-&gt; Maybe (ArgumentExp (UnpreparedValue b))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150610"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (ArgumentExp (UnpreparedValue b))
</span><a href="#local-6989586621688150611"><span class="hs-identifier hs-var">dictionary</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1549"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688150607"><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150607"><span class="hs-identifier hs-var">parsedValue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FunctionArg b -&gt; Maybe FunctionArgName
forall (b :: BackendType). FunctionArg b -&gt; Maybe FunctionArgName
</span><a href="Hasura.RQL.Types.Function.html#faName"><span class="hs-identifier hs-var hs-var">faName</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150608"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1550"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">FunctionArgName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Text, ArgumentExp (UnpreparedValue b))
 -&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
-&gt; Maybe (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text, ArgumentExp (UnpreparedValue b))
-&gt; Maybe (Text, ArgumentExp (UnpreparedValue b))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150610"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgumentExp (UnpreparedValue b)
</span><a href="#local-6989586621688150607"><span class="hs-identifier hs-var">parsedValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>          </span><span class="annot"><span class="annottext">Maybe FunctionArgName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall (m :: * -&gt; *) a. MonadParse m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseErrorWith"><span class="hs-identifier hs-var">parseErrorWith</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotSupported"><span class="hs-identifier hs-var">NotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Only last set of positional arguments can be omitted&quot;</span></span><span>
</span><span id="line-1552"></span><span>        </span><span class="annot"><span class="annottext">Maybe (ArgumentExp (UnpreparedValue b))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1553"></span><span>          </span><span class="annot"><span class="annottext">Bool
-&gt; n (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Bool -&gt; m a -&gt; m (Maybe a)
</span><a href="Hasura.Prelude.html#whenMaybe"><span class="hs-identifier hs-var">whenMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDefault -&gt; Bool
</span><a href="Hasura.RQL.Types.Function.html#unHasDefault"><span class="hs-identifier hs-var hs-var">unHasDefault</span></a></span><span> </span><span class="annot"><span class="annottext">(HasDefault -&gt; Bool) -&gt; HasDefault -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FunctionArg b -&gt; HasDefault
forall (b :: BackendType). FunctionArg b -&gt; HasDefault
</span><a href="Hasura.RQL.Types.Function.html#faHasDefault"><span class="hs-identifier hs-var hs-var">faHasDefault</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionArg b
</span><a href="#local-6989586621688150608"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(n (Text, ArgumentExp (UnpreparedValue b))
 -&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b))))
-&gt; n (Text, ArgumentExp (UnpreparedValue b))
-&gt; n (Maybe (Text, ArgumentExp (UnpreparedValue b)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1554"></span><span>            </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; n (Text, ArgumentExp (UnpreparedValue b))
forall (m :: * -&gt; *) a. MonadParse m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseErrorWith"><span class="hs-identifier hs-var">parseErrorWith</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#NotSupported"><span class="hs-identifier hs-var">NotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Non default arguments cannot be omitted&quot;</span></span><span>
</span><span id="line-1555"></span><span>
</span><span id="line-1556"></span><span id="local-6989586621688152233"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-type">tablePermissionsInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152233"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152233"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#TablePerms"><span class="hs-identifier hs-type">TablePerms</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688152233"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1557"></span><span id="tablePermissionsInfo"><span class="annot"><span class="annottext">tablePermissionsInfo :: SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var hs-var">tablePermissionsInfo</span></a></span></span><span> </span><span id="local-6989586621688150603"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150603"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1558"></span><span>  </span><span class="annot"><span class="annottext">TablePerm :: forall (b :: BackendType) v.
AnnBoolExp b v -&gt; Maybe Int -&gt; TablePermG b v
</span><a href="Hasura.RQL.IR.Select.html#TablePerm"><span class="hs-identifier hs-type">IR.TablePerm</span></a></span><span>
</span><span id="line-1559"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_tpFilter :: AnnBoolExp b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.html#_tpFilter"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnBoolExpFld b (PartialSQLExp b)
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld b (PartialSQLExp b)
 -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
forall (b :: BackendType). SelPermInfo b -&gt; AnnBoolExpPartialSQL b
</span><a href="Hasura.RQL.Types.Table.html#spiFilter"><span class="hs-identifier hs-var hs-var">spiFilter</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150603"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1560"></span><span>      </span><span class="annot"><span class="annottext">_tpLimit :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#_tpLimit"><span class="hs-identifier hs-var">IR._tpLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Maybe Int
forall (b :: BackendType). SelPermInfo b -&gt; Maybe Int
</span><a href="Hasura.RQL.Types.Table.html#spiLimit"><span class="hs-identifier hs-var hs-var">spiLimit</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621688150603"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-1561"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1562"></span><span>
</span><span id="line-1563"></span><span class="hs-comment">------------------------ Node interface from Relay ---------------------------</span><span>
</span><span id="line-1564"></span><span>
</span><span id="line-1565"></span><span class="hs-comment">{- Note [Relay Node Id]
~~~~~~~~~~~~~~~~~~~~~~~

The 'Node' interface in Relay schema has exactly one field which returns
a non-null 'ID' value. Each table object type in Relay schema should implement
'Node' interface to provide global object identification.
See https://relay.dev/graphql/objectidentification.htm for more details.

To identify each row in a table, we need to encode the table information
(schema and name) and primary key column values in the 'Node' id.

Node id data:
-------------
We are using JSON format for encoding and decoding the node id. The JSON
schema looks like following

'[&lt;version-integer&gt;, &quot;&lt;table-schema&gt;&quot;, &quot;&lt;table-name&gt;&quot;, &quot;column-1&quot;, &quot;column-2&quot;, ... &quot;column-n&quot;]'

It is represented in the type @'NodeId'. The 'version-integer' represents the JSON
schema version to enable any backward compatibility if it is broken in upcoming versions.

The stringified JSON is Base64 encoded and sent to client. Also the same
base64 encoded JSON string is accepted for 'node' field resolver's 'id' input.
-}</span><span>
</span><span id="line-1589"></span><span>
</span><span id="line-1590"></span><span class="hs-keyword">data</span><span> </span><span id="V1NodeId"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#V1NodeId"><span class="hs-identifier hs-var">V1NodeId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="V1NodeId"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#V1NodeId"><span class="hs-identifier hs-var">V1NodeId</span></a></span></span><span>
</span><span id="line-1591"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_nidTable"><span class="annot"><span class="annottext">V1NodeId -&gt; TableName ('Postgres 'Vanilla)
</span><a href="Hasura.GraphQL.Schema.Select.html#_nidTable"><span class="hs-identifier hs-var hs-var">_nidTable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1592"></span><span>    </span><span id="_nidColumns"><span class="annot"><span class="annottext">V1NodeId -&gt; NESeq Value
</span><a href="Hasura.GraphQL.Schema.Select.html#_nidColumns"><span class="hs-identifier hs-var hs-var">_nidColumns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Data.Sequence.NonEmpty.html#NESeq"><span class="hs-identifier hs-type">NESeq.NESeq</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1594"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150591"><span id="local-6989586621688150593"><span id="local-6989586621688150595"><span class="annot"><span class="annottext">Int -&gt; V1NodeId -&gt; ShowS
[V1NodeId] -&gt; ShowS
V1NodeId -&gt; String
(Int -&gt; V1NodeId -&gt; ShowS)
-&gt; (V1NodeId -&gt; String) -&gt; ([V1NodeId] -&gt; ShowS) -&gt; Show V1NodeId
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [V1NodeId] -&gt; ShowS
$cshowList :: [V1NodeId] -&gt; ShowS
show :: V1NodeId -&gt; String
$cshow :: V1NodeId -&gt; String
showsPrec :: Int -&gt; V1NodeId -&gt; ShowS
$cshowsPrec :: Int -&gt; V1NodeId -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150586"><span id="local-6989586621688150588"><span class="annot"><span class="annottext">V1NodeId -&gt; V1NodeId -&gt; Bool
(V1NodeId -&gt; V1NodeId -&gt; Bool)
-&gt; (V1NodeId -&gt; V1NodeId -&gt; Bool) -&gt; Eq V1NodeId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: V1NodeId -&gt; V1NodeId -&gt; Bool
$c/= :: V1NodeId -&gt; V1NodeId -&gt; Bool
== :: V1NodeId -&gt; V1NodeId -&gt; Bool
$c== :: V1NodeId -&gt; V1NodeId -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1595"></span><span>
</span><span id="line-1596"></span><span class="hs-comment">-- | The Relay 'Node' inteface's 'id' field value.</span><span>
</span><span id="line-1597"></span><span class="hs-comment">-- See Note [Relay Node id].</span><span>
</span><span id="line-1598"></span><span class="hs-keyword">data</span><span> </span><span id="NodeId"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#NodeId"><span class="hs-identifier hs-var">NodeId</span></a></span></span><span>
</span><span id="line-1599"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NodeIdV1"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#NodeIdV1"><span class="hs-identifier hs-var">NodeIdV1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#V1NodeId"><span class="hs-identifier hs-type">V1NodeId</span></a></span><span>
</span><span id="line-1600"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150578"><span id="local-6989586621688150580"><span id="local-6989586621688150582"><span class="annot"><span class="annottext">Int -&gt; NodeId -&gt; ShowS
[NodeId] -&gt; ShowS
NodeId -&gt; String
(Int -&gt; NodeId -&gt; ShowS)
-&gt; (NodeId -&gt; String) -&gt; ([NodeId] -&gt; ShowS) -&gt; Show NodeId
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NodeId] -&gt; ShowS
$cshowList :: [NodeId] -&gt; ShowS
show :: NodeId -&gt; String
$cshow :: NodeId -&gt; String
showsPrec :: Int -&gt; NodeId -&gt; ShowS
$cshowsPrec :: Int -&gt; NodeId -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150574"><span id="local-6989586621688150576"><span class="annot"><span class="annottext">NodeId -&gt; NodeId -&gt; Bool
(NodeId -&gt; NodeId -&gt; Bool)
-&gt; (NodeId -&gt; NodeId -&gt; Bool) -&gt; Eq NodeId
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NodeId -&gt; NodeId -&gt; Bool
$c/= :: NodeId -&gt; NodeId -&gt; Bool
== :: NodeId -&gt; NodeId -&gt; Bool
$c== :: NodeId -&gt; NodeId -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1601"></span><span>
</span><span id="line-1602"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688150571"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#NodeId"><span class="hs-identifier hs-type">NodeId</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1603"></span><span>  </span><span id="local-6989586621688150569"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser NodeId
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span id="local-6989586621688150567"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150567"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1604"></span><span>    </span><span id="local-6989586621688150566"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150566"><span class="hs-identifier hs-var">valueList</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser [Value]
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150567"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1605"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150566"><span class="hs-identifier hs-var">valueList</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1606"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser NodeId
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected GUID format, found empty list&quot;</span></span><span>
</span><span id="line-1607"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">J.Number</span></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621688150564"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150564"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">V1NodeId -&gt; NodeId
</span><a href="Hasura.GraphQL.Schema.Select.html#NodeIdV1"><span class="hs-identifier hs-var">NodeIdV1</span></a></span><span> </span><span class="annot"><span class="annottext">(V1NodeId -&gt; NodeId) -&gt; Parser V1NodeId -&gt; Parser NodeId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Parser V1NodeId
</span><a href="#local-6989586621688150563"><span class="hs-identifier hs-var">parseNodeIdV1</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150564"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1608"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">J.Number</span></span><span> </span><span id="local-6989586621688150562"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621688150562"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser NodeId
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser NodeId) -&gt; String -&gt; Parser NodeId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unsupported GUID version: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621688150562"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1609"></span><span>      </span><span class="annot"><span class="annottext">[Value]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser NodeId
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected GUID format, needs to start with a version number&quot;</span></span><span>
</span><span id="line-1610"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1611"></span><span>      </span><span id="local-6989586621688150563"><span class="annot"><span class="annottext">parseNodeIdV1 :: [Value] -&gt; Parser V1NodeId
</span><a href="#local-6989586621688150563"><span class="hs-identifier hs-var hs-var">parseNodeIdV1</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150560"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150560"><span class="hs-identifier hs-var">schemaValue</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150559"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150559"><span class="hs-identifier hs-var">nameValue</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150558"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150558"><span class="hs-identifier hs-var">firstColumn</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621688150557"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150557"><span class="hs-identifier hs-var">remainingColumns</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1612"></span><span>        </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla) -&gt; NESeq Value -&gt; V1NodeId
QualifiedTable -&gt; NESeq Value -&gt; V1NodeId
</span><a href="Hasura.GraphQL.Schema.Select.html#V1NodeId"><span class="hs-identifier hs-var">V1NodeId</span></a></span><span>
</span><span id="line-1613"></span><span>          </span><span class="annot"><span class="annottext">(QualifiedTable -&gt; NESeq Value -&gt; V1NodeId)
-&gt; Parser QualifiedTable -&gt; Parser (NESeq Value -&gt; V1NodeId)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">PG.QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaName -&gt; TableName -&gt; QualifiedTable)
-&gt; Parser SchemaName -&gt; Parser (TableName -&gt; QualifiedTable)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser SchemaName
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150560"><span class="hs-identifier hs-var">schemaValue</span></a></span><span> </span><span class="annot"><span class="annottext">Parser (TableName -&gt; QualifiedTable)
-&gt; Parser TableName -&gt; Parser QualifiedTable
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser TableName
forall a. FromJSON a =&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.parseJSON</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150559"><span class="hs-identifier hs-var">nameValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1614"></span><span>          </span><span class="annot"><span class="annottext">Parser (NESeq Value -&gt; V1NodeId)
-&gt; Parser (NESeq Value) -&gt; Parser V1NodeId
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">NESeq Value -&gt; Parser (NESeq Value)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150558"><span class="hs-identifier hs-var">firstColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Seq Value -&gt; NESeq Value
forall a. a -&gt; Seq a -&gt; NESeq a
</span><a href="Data.Sequence.NonEmpty.html#%3A%3C%7C%7C"><span class="hs-operator hs-var">NESeq.:&lt;||</span></a></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Seq Value
forall a. [a] -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150557"><span class="hs-identifier hs-var">remainingColumns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>      </span><span class="annot"><a href="#local-6989586621688150563"><span class="hs-identifier hs-var">parseNodeIdV1</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser V1NodeId
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GUID version 1: expecting schema name, table name and at least one column value&quot;</span></span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span id="local-6989586621688150552"><span id="local-6989586621688150553"><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-type">throwInvalidNodeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Class.Parse.html#MonadParse"><span class="hs-identifier hs-type">MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150553"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688150553"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150552"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1618"></span><span id="throwInvalidNodeId"><span class="annot"><span class="annottext">throwInvalidNodeId :: Text -&gt; n a
</span><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-var hs-var">throwInvalidNodeId</span></a></span></span><span> </span><span id="local-6989586621688150550"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150550"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; n a
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseError"><span class="hs-identifier hs-var">parseError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; n a) -&gt; Text -&gt; n a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the node id is invalid: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150550"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1619"></span><span>
</span><span id="line-1620"></span><span class="hs-comment">-- | The 'node' root field of a Relay request.</span><span>
</span><span id="line-1621"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nodePG"><span class="hs-identifier hs-type">nodePG</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1622"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688150549"><span class="annot"><a href="#local-6989586621688150549"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688150548"><span class="annot"><a href="#local-6989586621688150548"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621688150547"><span class="annot"><a href="#local-6989586621688150547"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1623"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688150547"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150549"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150548"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1624"></span><span>  </span><span class="annot"><a href="#local-6989586621688150549"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1625"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Types.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span>
</span><span id="line-1626"></span><span>        </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.GraphQL.Parser.Schema.html#Output"><span class="hs-identifier hs-type">Output</span></a></span><span>
</span><span id="line-1627"></span><span>        </span><span class="annot"><a href="#local-6989586621688150548"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-1628"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span>
</span><span id="line-1629"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SourceName"><span class="hs-identifier hs-type">SourceName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1631"></span><span>              </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#SourceConfig"><span class="hs-identifier hs-type">SourceConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1632"></span><span>              </span><span class="annot"><a href="Hasura.RQL.Types.Table.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1633"></span><span>              </span><span class="annot"><a href="Hasura.RQL.Types.Column.html#PrimaryKeyColumns"><span class="hs-identifier hs-type">PrimaryKeyColumns</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1634"></span><span>              </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-type">AnnotatedFields</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1635"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1636"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1637"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1638"></span><span id="nodePG"><span class="annot"><span class="annottext">nodePG :: m (Parser
     'Output
     n
     (HashMap
        (TableName ('Postgres 'Vanilla))
        (SourceName, SourceConfig ('Postgres 'Vanilla),
         SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla))))
</span><a href="Hasura.GraphQL.Schema.Select.html#nodePG"><span class="hs-identifier hs-var hs-var">nodePG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; ()
-&gt; m (Parser
        'Output
        n
        (HashMap
           QualifiedTable
           (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
            PrimaryKeyColumns ('Postgres 'Vanilla),
            AnnotatedFields ('Postgres 'Vanilla))))
-&gt; m (Parser
        'Output
        n
        (HashMap
           QualifiedTable
           (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
            PrimaryKeyColumns ('Postgres 'Vanilla),
            AnnotatedFields ('Postgres 'Vanilla))))
forall (n :: * -&gt; *) (m :: * -&gt; *) (p :: (* -&gt; *) -&gt; * -&gt; *) a b.
(MonadSchema n m, HasCallStack, Ord a, Typeable p, Typeable a,
 Typeable b) =&gt;
Name -&gt; a -&gt; m (p n b) -&gt; m (p n b)
</span><a href="Hasura.GraphQL.Parser.Class.html#memoizeOn"><span class="hs-identifier hs-var">memoizeOn</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">nodePG</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150546"><span class="annot"><span class="annottext">idDescription :: Description
</span><a href="#local-6989586621688150546"><span class="hs-identifier hs-var hs-var">idDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;A globally unique identifier&quot;</span></span><span>
</span><span id="line-1640"></span><span>      </span><span id="local-6989586621688150545"><span class="annot"><span class="annottext">idField :: FieldParser n ()
</span><a href="#local-6989586621688150545"><span class="hs-identifier hs-var hs-var">idField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description -&gt; Parser 'Both n Text -&gt; FieldParser n ()
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Name -&gt; Maybe Description -&gt; Parser 'Both m a -&gt; FieldParser m ()
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selection_"><span class="hs-identifier hs-var">P.selection_</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688150546"><span class="hs-identifier hs-var">idDescription</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#identifier"><span class="hs-identifier hs-var">P.identifier</span></a></span><span>
</span><span id="line-1641"></span><span>      </span><span id="local-6989586621688150544"><span class="annot"><span class="annottext">nodeInterfaceDescription :: Description
</span><a href="#local-6989586621688150544"><span class="hs-identifier hs-var hs-var">nodeInterfaceDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;An object with globally unique ID&quot;</span></span><span>
</span><span id="line-1642"></span><span>  </span><span id="local-6989586621688150543"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688150543"><span class="hs-identifier hs-var">sources</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; SourceCache) -&gt; m SourceCache
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SourceCache
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1643"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150542"><span class="annot"><span class="annottext">allTables :: HashMap
  QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
</span><a href="#local-6989586621688150542"><span class="hs-identifier hs-var hs-var">allTables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(QualifiedTable,
  (SourceName, PGSourceConfig, SourceCustomization))]
-&gt; HashMap
     QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(QualifiedTable,
   (SourceName, PGSourceConfig, SourceCustomization))]
 -&gt; HashMap
      QualifiedTable (SourceName, PGSourceConfig, SourceCustomization))
-&gt; [(QualifiedTable,
     (SourceName, PGSourceConfig, SourceCustomization))]
-&gt; HashMap
     QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1644"></span><span>        </span><span class="hs-comment">-- FIXME? When source name is used in type generation?</span><span>
</span><span id="line-1645"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621688150541"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150541"><span class="hs-identifier hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150540"><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688150540"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SourceCache -&gt; [(SourceName, BackendSourceInfo)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621688150543"><span class="hs-identifier hs-var">sources</span></a></span><span>
</span><span id="line-1646"></span><span>        </span><span id="local-6989586621688150538"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688150538"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QualifiedTable]
-&gt; (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
    -&gt; [QualifiedTable])
-&gt; Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
-&gt; [QualifiedTable]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
-&gt; [QualifiedTable]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">(HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
 -&gt; [QualifiedTable])
-&gt; (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
    -&gt; HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
-&gt; HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
-&gt; [QualifiedTable]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
-&gt; HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla))
forall (b :: BackendType).
Backend b =&gt;
TableCache b -&gt; TableCache b
</span><a href="Hasura.GraphQL.Schema.Common.html#takeValidTables"><span class="hs-identifier hs-var">takeValidTables</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
 -&gt; [QualifiedTable])
-&gt; Maybe (HashMap QualifiedTable (TableInfo ('Postgres 'Vanilla)))
-&gt; [QualifiedTable]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo -&gt; Maybe (TableCache ('Postgres 'Vanilla))
forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (TableCache b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceTables"><span class="hs-identifier hs-var">unsafeSourceTables</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688150540"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-1647"></span><span>        </span><span id="local-6989586621688150535"><span class="annot"><span class="annottext">PGSourceConfig
</span><a href="#local-6989586621688150535"><span class="hs-identifier hs-var">sourceConfig</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe PGSourceConfig -&gt; [PGSourceConfig]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe PGSourceConfig -&gt; [PGSourceConfig])
-&gt; Maybe PGSourceConfig -&gt; [PGSourceConfig]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo -&gt; Maybe (SourceConfig ('Postgres 'Vanilla))
forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (SourceConfig b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceConfiguration"><span class="hs-identifier hs-var">unsafeSourceConfiguration</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688150540"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-1648"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688150538"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150541"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PGSourceConfig
</span><a href="#local-6989586621688150535"><span class="hs-identifier hs-var">sourceConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
-&gt; (forall (b :: BackendType). SourceInfo b -&gt; SourceCustomization)
-&gt; SourceCustomization
forall (i :: BackendType -&gt; *) r.
AnyBackend i -&gt; (forall (b :: BackendType). i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#runBackend"><span class="hs-identifier hs-var">AB.runBackend</span></a></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621688150540"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (b :: BackendType). SourceInfo b -&gt; SourceCustomization
</span><a href="Hasura.RQL.Types.Source.html#_siCustomization"><span class="hs-identifier hs-var hs-var">_siCustomization</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1649"></span><span>  </span><span id="local-6989586621688150531"><span class="annot"><span class="annottext">HashMap
  QualifiedTable
  (Parser
     'Output
     n
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150531"><span class="hs-identifier hs-var">tables</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1650"></span><span>    </span><span class="annot"><span class="annottext">(Maybe
   (Parser
      'Output
      n
      (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
       PrimaryKeyColumns ('Postgres 'Vanilla),
       AnnotatedFields ('Postgres 'Vanilla)))
 -&gt; Maybe
      (Parser
         'Output
         n
         (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
          PrimaryKeyColumns ('Postgres 'Vanilla),
          AnnotatedFields ('Postgres 'Vanilla))))
-&gt; HashMap
     QualifiedTable
     (Maybe
        (Parser
           'Output
           n
           (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
            PrimaryKeyColumns ('Postgres 'Vanilla),
            AnnotatedFields ('Postgres 'Vanilla))))
-&gt; HashMap
     QualifiedTable
     (Parser
        'Output
        n
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
forall v1 v2 k. (v1 -&gt; Maybe v2) -&gt; HashMap k v1 -&gt; HashMap k v2
</span><span class="hs-identifier hs-var">Map.mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Parser
     'Output
     n
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
-&gt; Maybe
     (Parser
        'Output
        n
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(HashMap
   QualifiedTable
   (Maybe
      (Parser
         'Output
         n
         (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
          PrimaryKeyColumns ('Postgres 'Vanilla),
          AnnotatedFields ('Postgres 'Vanilla))))
 -&gt; HashMap
      QualifiedTable
      (Parser
         'Output
         n
         (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
          PrimaryKeyColumns ('Postgres 'Vanilla),
          AnnotatedFields ('Postgres 'Vanilla))))
-&gt; m (HashMap
        QualifiedTable
        (Maybe
           (Parser
              'Output
              n
              (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
               PrimaryKeyColumns ('Postgres 'Vanilla),
               AnnotatedFields ('Postgres 'Vanilla)))))
-&gt; m (HashMap
        QualifiedTable
        (Parser
           'Output
           n
           (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
            PrimaryKeyColumns ('Postgres 'Vanilla),
            AnnotatedFields ('Postgres 'Vanilla))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((QualifiedTable
  -&gt; (SourceName, PGSourceConfig, SourceCustomization)
  -&gt; m (Maybe
          (Parser
             'Output
             n
             (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
              PrimaryKeyColumns ('Postgres 'Vanilla),
              AnnotatedFields ('Postgres 'Vanilla)))))
 -&gt; HashMap
      QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
 -&gt; m (HashMap
         QualifiedTable
         (Maybe
            (Parser
               'Output
               n
               (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
                PrimaryKeyColumns ('Postgres 'Vanilla),
                AnnotatedFields ('Postgres 'Vanilla))))))
-&gt; HashMap
     QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
-&gt; (QualifiedTable
    -&gt; (SourceName, PGSourceConfig, SourceCustomization)
    -&gt; m (Maybe
            (Parser
               'Output
               n
               (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
                PrimaryKeyColumns ('Postgres 'Vanilla),
                AnnotatedFields ('Postgres 'Vanilla)))))
-&gt; m (HashMap
        QualifiedTable
        (Maybe
           (Parser
              'Output
              n
              (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
               PrimaryKeyColumns ('Postgres 'Vanilla),
               AnnotatedFields ('Postgres 'Vanilla)))))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(QualifiedTable
 -&gt; (SourceName, PGSourceConfig, SourceCustomization)
 -&gt; m (Maybe
         (Parser
            'Output
            n
            (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
             PrimaryKeyColumns ('Postgres 'Vanilla),
             AnnotatedFields ('Postgres 'Vanilla)))))
-&gt; HashMap
     QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
-&gt; m (HashMap
        QualifiedTable
        (Maybe
           (Parser
              'Output
              n
              (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
               PrimaryKeyColumns ('Postgres 'Vanilla),
               AnnotatedFields ('Postgres 'Vanilla)))))
forall (f :: * -&gt; *) k v1 v2.
Applicative f =&gt;
(k -&gt; v1 -&gt; f v2) -&gt; HashMap k v1 -&gt; f (HashMap k v2)
</span><span class="hs-identifier hs-var">Map.traverseWithKey</span></span><span> </span><span class="annot"><span class="annottext">HashMap
  QualifiedTable (SourceName, PGSourceConfig, SourceCustomization)
</span><a href="#local-6989586621688150542"><span class="hs-identifier hs-var">allTables</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688150528"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621688150528"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621688150527"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150527"><span class="hs-identifier hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150526"><span class="annot"><span class="annottext">PGSourceConfig
</span><a href="#local-6989586621688150526"><span class="hs-identifier hs-var">sourceConfig</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150525"><span class="annot"><span class="annottext">SourceCustomization
</span><a href="#local-6989586621688150525"><span class="hs-identifier hs-var">sourceCustomization</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MaybeT
  m
  (Parser
     'Output
     n
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
-&gt; m (Maybe
        (Parser
           'Output
           n
           (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
            PrimaryKeyColumns ('Postgres 'Vanilla),
            AnnotatedFields ('Postgres 'Vanilla))))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1651"></span><span>      </span><span id="local-6989586621688150524"><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150524"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (TableInfo ('Postgres 'Vanilla))
-&gt; MaybeT m (TableInfo ('Postgres 'Vanilla))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (TableInfo ('Postgres 'Vanilla))
 -&gt; MaybeT m (TableInfo ('Postgres 'Vanilla)))
-&gt; m (TableInfo ('Postgres 'Vanilla))
-&gt; MaybeT m (TableInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres 'Vanilla)
-&gt; m (TableInfo ('Postgres 'Vanilla))
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadTableInfo r m) =&gt;
SourceName -&gt; TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Parser.Class.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150527"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621688150528"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-1652"></span><span>      </span><span id="local-6989586621688150523"><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150523"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (PrimaryKeyColumns ('Postgres 'Vanilla))
-&gt; MaybeT m (PrimaryKeyColumns ('Postgres 'Vanilla))
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (PrimaryKeyColumns ('Postgres 'Vanilla))
 -&gt; MaybeT m (PrimaryKeyColumns ('Postgres 'Vanilla)))
-&gt; Maybe (PrimaryKeyColumns ('Postgres 'Vanilla))
-&gt; MaybeT m (PrimaryKeyColumns ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150524"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
-&gt; Getting
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (TableInfo ('Postgres 'Vanilla))
     (PrimaryKeyColumns ('Postgres 'Vanilla))
-&gt; Maybe (PrimaryKeyColumns ('Postgres 'Vanilla))
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfo ('Postgres 'Vanilla)
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (TableCoreInfo ('Postgres 'Vanilla)))
-&gt; TableInfo ('Postgres 'Vanilla)
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (TableInfo ('Postgres 'Vanilla))
forall (b :: BackendType). Lens' (TableInfo b) (TableCoreInfo b)
</span><a href="Hasura.RQL.Types.Table.html#tiCoreInfo"><span class="hs-identifier hs-var">tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((TableCoreInfo ('Postgres 'Vanilla)
  -&gt; Const
       (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
       (TableCoreInfo ('Postgres 'Vanilla)))
 -&gt; TableInfo ('Postgres 'Vanilla)
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (TableInfo ('Postgres 'Vanilla)))
-&gt; ((PrimaryKeyColumns ('Postgres 'Vanilla)
     -&gt; Const
          (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
          (PrimaryKeyColumns ('Postgres 'Vanilla)))
    -&gt; TableCoreInfo ('Postgres 'Vanilla)
    -&gt; Const
         (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
         (TableCoreInfo ('Postgres 'Vanilla)))
-&gt; Getting
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (TableInfo ('Postgres 'Vanilla))
     (PrimaryKeyColumns ('Postgres 'Vanilla))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Maybe
   (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (Maybe
         (PrimaryKey
            ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; TableCoreInfo ('Postgres 'Vanilla)
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (TableCoreInfo ('Postgres 'Vanilla))
forall (b :: BackendType) field primaryKeyColumn1
       primaryKeyColumn2.
Lens
  (TableCoreInfoG b field primaryKeyColumn1)
  (TableCoreInfoG b field primaryKeyColumn2)
  (Maybe (PrimaryKey b primaryKeyColumn1))
  (Maybe (PrimaryKey b primaryKeyColumn2))
</span><a href="Hasura.RQL.Types.Table.html#tciPrimaryKey"><span class="hs-identifier hs-var">tciPrimaryKey</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe
    (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
  -&gt; Const
       (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
       (Maybe
          (PrimaryKey
             ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))))
 -&gt; TableCoreInfo ('Postgres 'Vanilla)
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (TableCoreInfo ('Postgres 'Vanilla)))
-&gt; ((PrimaryKeyColumns ('Postgres 'Vanilla)
     -&gt; Const
          (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
          (PrimaryKeyColumns ('Postgres 'Vanilla)))
    -&gt; Maybe
         (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
    -&gt; Const
         (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
         (Maybe
            (PrimaryKey
               ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; (PrimaryKeyColumns ('Postgres 'Vanilla)
    -&gt; Const
         (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
         (PrimaryKeyColumns ('Postgres 'Vanilla)))
-&gt; TableCoreInfo ('Postgres 'Vanilla)
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (TableCoreInfo ('Postgres 'Vanilla))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (PrimaryKey
         ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))))
-&gt; Maybe
     (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (Maybe
        (PrimaryKey
           ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))))
forall a b. Prism (Maybe a) (Maybe b) a b
</span><span class="hs-identifier hs-var">_Just</span></span><span> </span><span class="annot"><span class="annottext">((PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))
  -&gt; Const
       (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
       (PrimaryKey
          ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))))
 -&gt; Maybe
      (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (Maybe
         (PrimaryKey
            ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))))
-&gt; ((PrimaryKeyColumns ('Postgres 'Vanilla)
     -&gt; Const
          (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
          (PrimaryKeyColumns ('Postgres 'Vanilla)))
    -&gt; PrimaryKey
         ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))
    -&gt; Const
         (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
         (PrimaryKey
            ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))))
-&gt; (PrimaryKeyColumns ('Postgres 'Vanilla)
    -&gt; Const
         (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
         (PrimaryKeyColumns ('Postgres 'Vanilla)))
-&gt; Maybe
     (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (Maybe
        (PrimaryKey
           ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PrimaryKeyColumns ('Postgres 'Vanilla)
 -&gt; Const
      (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
      (PrimaryKeyColumns ('Postgres 'Vanilla)))
-&gt; PrimaryKey
     ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla))
-&gt; Const
     (First (PrimaryKeyColumns ('Postgres 'Vanilla)))
     (PrimaryKey ('Postgres 'Vanilla) (ColumnInfo ('Postgres 'Vanilla)))
forall (b :: BackendType) a1 a2.
Lens (PrimaryKey b a1) (PrimaryKey b a2) (NESeq a1) (NESeq a2)
</span><a href="Hasura.RQL.Types.Table.html#pkColumns"><span class="hs-identifier hs-var">pkColumns</span></a></span><span>
</span><span id="line-1653"></span><span>      </span><span id="local-6989586621688150522"><span class="annot"><span class="annottext">SelPermInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150522"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Maybe (SelPermInfo ('Postgres 'Vanilla)))
-&gt; MaybeT m (SelPermInfo ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe (SelPermInfo ('Postgres 'Vanilla)))
 -&gt; MaybeT m (SelPermInfo ('Postgres 'Vanilla)))
-&gt; m (Maybe (SelPermInfo ('Postgres 'Vanilla)))
-&gt; MaybeT m (SelPermInfo ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
-&gt; m (Maybe (SelPermInfo ('Postgres 'Vanilla)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(MonadSchema n m, MonadRole r m) =&gt;
TableInfo b -&gt; m (Maybe (SelPermInfo b))
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150524"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1654"></span><span>      </span><span id="local-6989586621688150521"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150521"><span class="hs-identifier hs-var">annotatedFieldsParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1655"></span><span>        </span><span class="annot"><span class="annottext">m (Maybe (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
-&gt; MaybeT
     m (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla)))
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe
      (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
 -&gt; MaybeT
      m (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
-&gt; MaybeT
     m (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1656"></span><span>          </span><span class="annot"><span class="annottext">MkTypename
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
forall (m :: * -&gt; *) r a.
(MonadReader r m, Has MkTypename r) =&gt;
MkTypename -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Schema.html#withTypenameCustomization"><span class="hs-identifier hs-var">P.withTypenameCustomization</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe SourceTypeCustomization -&gt; MkTypename
</span><a href="Hasura.RQL.Types.SourceCustomization.html#mkCustomizedTypename"><span class="hs-identifier hs-var">mkCustomizedTypename</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe SourceTypeCustomization -&gt; MkTypename)
-&gt; Maybe SourceTypeCustomization -&gt; MkTypename
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceCustomization -&gt; Maybe SourceTypeCustomization
</span><a href="Hasura.RQL.Types.SourceCustomization.html#_scTypeNames"><span class="hs-identifier hs-var hs-var">_scTypeNames</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCustomization
</span><a href="#local-6989586621688150525"><span class="hs-identifier hs-var">sourceCustomization</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe
      (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
 -&gt; m (Maybe
         (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla)))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1657"></span><span>            </span><span class="annot"><span class="annottext">SourceName
-&gt; TableInfo ('Postgres 'Vanilla)
-&gt; m (Maybe
        (Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSchema b r m n =&gt;
SourceName
-&gt; TableInfo b -&gt; m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Select.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150527"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150524"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-1658"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150527"><span class="hs-identifier hs-var">source</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">PGSourceConfig
</span><a href="#local-6989586621688150526"><span class="hs-identifier hs-var">sourceConfig</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SelPermInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150522"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150523"><span class="hs-identifier hs-var">tablePkeyColumns</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AnnotatedFields ('Postgres 'Vanilla)
 -&gt; (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
     PrimaryKeyColumns ('Postgres 'Vanilla),
     AnnotatedFields ('Postgres 'Vanilla)))
-&gt; Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))
-&gt; Parser
     'Output
     n
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150521"><span class="hs-identifier hs-var">annotatedFieldsParser</span></a></span><span>
</span><span id="line-1659"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1660"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; [FieldParser n ()]
-&gt; HashMap
     QualifiedTable
     (Parser
        'Output
        n
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
-&gt; Parser
     'Output
     n
     (HashMap
        QualifiedTable
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
forall (n :: * -&gt; *) (t :: * -&gt; *) a b.
(MonadParse n, Traversable t) =&gt;
Name
-&gt; Maybe Description
-&gt; [FieldParser n a]
-&gt; t (Parser 'Output n b)
-&gt; Parser 'Output n (t b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#selectionSetInterface"><span class="hs-identifier hs-var">P.selectionSetInterface</span></a></span><span>
</span><span id="line-1661"></span><span>      </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Node&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1662"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688150544"><span class="hs-identifier hs-var">nodeInterfaceDescription</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1663"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FieldParser n ()
</span><a href="#local-6989586621688150545"><span class="hs-identifier hs-var">idField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1664"></span><span>      </span><span class="annot"><span class="annottext">HashMap
  QualifiedTable
  (Parser
     'Output
     n
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150531"><span class="hs-identifier hs-var">tables</span></a></span><span>
</span><span id="line-1665"></span><span>
</span><span id="line-1666"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#nodeField"><span class="hs-identifier hs-type">nodeField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1667"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688150516"><span class="annot"><a href="#local-6989586621688150516"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621688150515"><span class="annot"><a href="#local-6989586621688150515"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621688150514"><span class="annot"><a href="#local-6989586621688150514"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1668"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#MonadBuildSchema"><span class="hs-identifier hs-type">MonadBuildSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688150514"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150516"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150515"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1669"></span><span>  </span><span class="annot"><a href="#local-6989586621688150516"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Internal.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688150515"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#QueryRootField"><span class="hs-identifier hs-type">IR.QueryRootField</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1670"></span><span id="nodeField"><span class="annot"><span class="annottext">nodeField :: m (FieldParser n (QueryRootField UnpreparedValue))
</span><a href="Hasura.GraphQL.Schema.Select.html#nodeField"><span class="hs-identifier hs-var hs-var">nodeField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1671"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150513"><span class="annot"><span class="annottext">idDescription :: Description
</span><a href="#local-6989586621688150513"><span class="hs-identifier hs-var hs-var">idDescription</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><span class="hs-identifier hs-var">G.Description</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;A globally unique id&quot;</span></span><span>
</span><span id="line-1672"></span><span>      </span><span id="local-6989586621688150512"><span class="annot"><span class="annottext">idArgument :: InputFieldsParser n Text
</span><a href="#local-6989586621688150512"><span class="hs-identifier hs-var hs-var">idArgument</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Both n Text
-&gt; InputFieldsParser n Text
forall (m :: * -&gt; *) (k :: Kind) a.
(MonadParse m, 'Input &lt;: k) =&gt;
Name -&gt; Maybe Description -&gt; Parser k m a -&gt; InputFieldsParser m a
</span><a href="Hasura.GraphQL.Parser.Internal.Input.html#field"><span class="hs-identifier hs-var">P.field</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Description -&gt; Maybe Description
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Description
</span><a href="#local-6989586621688150513"><span class="hs-identifier hs-var">idDescription</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser 'Both n Text
forall (m :: * -&gt; *). MonadParse m =&gt; Parser 'Both m Text
</span><a href="Hasura.GraphQL.Parser.Internal.Scalars.html#identifier"><span class="hs-identifier hs-var">P.identifier</span></a></span><span>
</span><span id="line-1673"></span><span>  </span><span id="local-6989586621688150511"><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688150511"><span class="hs-identifier hs-var">stringifyNum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; StringifyNumbers) -&gt; m StringifyNumbers)
-&gt; (r -&gt; StringifyNumbers) -&gt; m StringifyNumbers
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QueryContext -&gt; StringifyNumbers
</span><a href="Hasura.GraphQL.Schema.Common.html#qcStringifyNum"><span class="hs-identifier hs-var hs-var">qcStringifyNum</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryContext -&gt; StringifyNumbers)
-&gt; (r -&gt; QueryContext) -&gt; r -&gt; StringifyNumbers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; QueryContext
forall a t. Has a t =&gt; t -&gt; a
</span><span class="hs-identifier hs-var">getter</span></span><span>
</span><span id="line-1674"></span><span>  </span><span id="local-6989586621688150510"><span class="annot"><span class="annottext">Parser
  'Output
  n
  (HashMap
     QualifiedTable
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150510"><span class="hs-identifier hs-var">nodeObject</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Parser
     'Output
     n
     (HashMap
        QualifiedTable
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla))))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendSchema b, MonadBuildSchema b r m n) =&gt;
m (Parser
     'Output
     n
     (HashMap
        (TableName b)
        (SourceName, SourceConfig b, SelPermInfo b, PrimaryKeyColumns b,
         AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#node"><span class="hs-identifier hs-var">node</span></a></span><span>
</span><span id="line-1675"></span><span>  </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1676"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; InputFieldsParser n Text
-&gt; Parser
     'Output
     n
     (HashMap
        QualifiedTable
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
-&gt; FieldParser
     n
     (Text,
      HashMap
        QualifiedTable
        (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
         PrimaryKeyColumns ('Postgres 'Vanilla),
         AnnotatedFields ('Postgres 'Vanilla)))
forall (m :: * -&gt; *) a b.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; InputFieldsParser m a
-&gt; Parser 'Output m b
-&gt; FieldParser m (a, b)
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#subselection"><span class="hs-identifier hs-var">P.subselection</span></a></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">G.litName</span></span><span> </span><span class="annot"><span class="hs-string">&quot;node&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">InputFieldsParser n Text
</span><a href="#local-6989586621688150512"><span class="hs-identifier hs-var">idArgument</span></a></span><span> </span><span class="annot"><span class="annottext">Parser
  'Output
  n
  (HashMap
     QualifiedTable
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150510"><span class="hs-identifier hs-var">nodeObject</span></a></span><span>
</span><span id="line-1677"></span><span>      </span><span class="annot"><span class="annottext">FieldParser
  n
  (Text,
   HashMap
     QualifiedTable
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla)))
-&gt; ((Text,
     HashMap
       QualifiedTable
       (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
        PrimaryKeyColumns ('Postgres 'Vanilla),
        AnnotatedFields ('Postgres 'Vanilla)))
    -&gt; n (QueryRootField UnpreparedValue))
-&gt; FieldParser n (QueryRootField UnpreparedValue)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
FieldParser m a -&gt; (a -&gt; m b) -&gt; FieldParser m b
</span><a href="Hasura.GraphQL.Parser.Internal.Parser.html#bindField"><span class="hs-operator hs-var">`P.bindField`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688150508"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150508"><span class="hs-identifier hs-var">ident</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150507"><span class="annot"><span class="annottext">HashMap
  QualifiedTable
  (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
   PrimaryKeyColumns ('Postgres 'Vanilla),
   AnnotatedFields ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150507"><span class="hs-identifier hs-var">parseds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1678"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#NodeIdV1"><span class="hs-identifier hs-type">NodeIdV1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#V1NodeId"><span class="hs-identifier hs-type">V1NodeId</span></a></span><span> </span><span id="local-6989586621688150506"><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150506"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621688150505"><span class="annot"><span class="annottext">NESeq Value
</span><a href="#local-6989586621688150505"><span class="hs-identifier hs-var">columnValues</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; n NodeId
</span><a href="#local-6989586621688150504"><span class="hs-identifier hs-var">parseNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150508"><span class="hs-identifier hs-var">ident</span></a></span><span>
</span><span id="line-1679"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621688150503"><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150503"><span class="hs-identifier hs-var">source</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150502"><span class="annot"><span class="annottext">PGSourceConfig
</span><a href="#local-6989586621688150502"><span class="hs-identifier hs-var">sourceConfig</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150501"><span class="annot"><span class="annottext">SelPermInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150501"><span class="hs-identifier hs-var">perms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150500"><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150500"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150499"><span class="annot"><span class="annottext">AnnotatedFields ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150499"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1680"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
   PrimaryKeyColumns ('Postgres 'Vanilla),
   AnnotatedFields ('Postgres 'Vanilla))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedTable
-&gt; HashMap
     QualifiedTable
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
-&gt; Maybe
     (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621688150506"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  QualifiedTable
  (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
   PrimaryKeyColumns ('Postgres 'Vanilla),
   AnnotatedFields ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150507"><span class="hs-identifier hs-var">parseds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
    PrimaryKeyColumns ('Postgres 'Vanilla),
    AnnotatedFields ('Postgres 'Vanilla))
 -&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
       PrimaryKeyColumns ('Postgres 'Vanilla),
       AnnotatedFields ('Postgres 'Vanilla)))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1681"></span><span>            </span><span class="annot"><span class="annottext">n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
   PrimaryKeyColumns ('Postgres 'Vanilla),
   AnnotatedFields ('Postgres 'Vanilla))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall a. n a -&gt; n a
</span><a href="#local-6989586621688150498"><span class="hs-identifier hs-var">withArgsPath</span></a></span><span> </span><span class="annot"><span class="annottext">(n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
    PrimaryKeyColumns ('Postgres 'Vanilla),
    AnnotatedFields ('Postgres 'Vanilla))
 -&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
       PrimaryKeyColumns ('Postgres 'Vanilla),
       AnnotatedFields ('Postgres 'Vanilla)))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-var">throwInvalidNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
       PrimaryKeyColumns ('Postgres 'Vanilla),
       AnnotatedFields ('Postgres 'Vanilla)))
-&gt; Text
-&gt; n (SourceName, PGSourceConfig, SelPermInfo ('Postgres 'Vanilla),
      PrimaryKeyColumns ('Postgres 'Vanilla),
      AnnotatedFields ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;the table &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150508"><span class="hs-identifier hs-var">ident</span></a></span><span>
</span><span id="line-1682"></span><span>        </span><span id="local-6989586621688150497"><span class="annot"><span class="annottext">AnnBoolExp
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150497"><span class="hs-identifier hs-var">whereExp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NESeq Value
-&gt; PrimaryKeyColumns ('Postgres 'Vanilla)
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150496"><span class="hs-identifier hs-var">buildNodeIdBoolExp</span></a></span><span> </span><span class="annot"><span class="annottext">NESeq Value
</span><a href="#local-6989586621688150505"><span class="hs-identifier hs-var">columnValues</span></a></span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150500"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-1683"></span><span>        </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-1684"></span><span>          </span><span class="annot"><span class="annottext">SourceName
-&gt; AnyBackend
     (SourceConfigWith
        (QueryDBRoot
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
-&gt; QueryRootField UnpreparedValue
forall (db :: BackendType -&gt; *) remote action raw.
SourceName
-&gt; AnyBackend (SourceConfigWith db)
-&gt; RootField db remote action raw
</span><a href="Hasura.RQL.IR.Root.html#RFDB"><span class="hs-identifier hs-var">IR.RFDB</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621688150503"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="annot"><span class="annottext">(AnyBackend
   (SourceConfigWith
      (QueryDBRoot
         (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
 -&gt; QueryRootField UnpreparedValue)
-&gt; AnyBackend
     (SourceConfigWith
        (QueryDBRoot
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
-&gt; QueryRootField UnpreparedValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1685"></span><span>            </span><span class="annot"><span class="annottext">SourceConfigWith
  (QueryDBRoot
     (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
  ('Postgres 'Vanilla)
-&gt; AnyBackend
     (SourceConfigWith
        (QueryDBRoot
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
forall (b :: BackendType) (i :: BackendType -&gt; *).
HasTag b =&gt;
i b -&gt; AnyBackend i
</span><a href="Hasura.SQL.AnyBackend.html#mkAnyBackend"><span class="hs-identifier hs-var">AB.mkAnyBackend</span></a></span><span> </span><span class="annot"><span class="annottext">(SourceConfigWith
   (QueryDBRoot
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
   ('Postgres 'Vanilla)
 -&gt; AnyBackend
      (SourceConfigWith
         (QueryDBRoot
            (RemoteRelationshipField UnpreparedValue) UnpreparedValue)))
-&gt; SourceConfigWith
     (QueryDBRoot
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
     ('Postgres 'Vanilla)
-&gt; AnyBackend
     (SourceConfigWith
        (QueryDBRoot
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1686"></span><span>              </span><span class="annot"><span class="annottext">SourceConfig ('Postgres 'Vanilla)
-&gt; Maybe QueryTagsConfig
-&gt; QueryDBRoot
     (RemoteRelationshipField UnpreparedValue)
     UnpreparedValue
     ('Postgres 'Vanilla)
-&gt; SourceConfigWith
     (QueryDBRoot
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
     ('Postgres 'Vanilla)
forall (db :: BackendType -&gt; *) (b :: BackendType).
SourceConfig b
-&gt; Maybe QueryTagsConfig -&gt; db b -&gt; SourceConfigWith db b
</span><a href="Hasura.RQL.IR.Root.html#SourceConfigWith"><span class="hs-identifier hs-var">IR.SourceConfigWith</span></a></span><span> </span><span class="annot"><span class="annottext">SourceConfig ('Postgres 'Vanilla)
PGSourceConfig
</span><a href="#local-6989586621688150502"><span class="hs-identifier hs-var">sourceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QueryTagsConfig
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(QueryDBRoot
   (RemoteRelationshipField UnpreparedValue)
   UnpreparedValue
   ('Postgres 'Vanilla)
 -&gt; SourceConfigWith
      (QueryDBRoot
         (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
      ('Postgres 'Vanilla))
-&gt; QueryDBRoot
     (RemoteRelationshipField UnpreparedValue)
     UnpreparedValue
     ('Postgres 'Vanilla)
-&gt; SourceConfigWith
     (QueryDBRoot
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
     ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1687"></span><span>                </span><span class="annot"><span class="annottext">QueryDB
  ('Postgres 'Vanilla)
  (RemoteRelationshipField UnpreparedValue)
  (UnpreparedValue ('Postgres 'Vanilla))
-&gt; QueryDBRoot
     (RemoteRelationshipField UnpreparedValue)
     UnpreparedValue
     ('Postgres 'Vanilla)
forall r (v :: BackendType -&gt; *) (b :: BackendType).
QueryDB b r (v b) -&gt; QueryDBRoot r v b
</span><a href="Hasura.RQL.IR.Root.html#QDBR"><span class="hs-identifier hs-var">IR.QDBR</span></a></span><span> </span><span class="annot"><span class="annottext">(QueryDB
   ('Postgres 'Vanilla)
   (RemoteRelationshipField UnpreparedValue)
   (UnpreparedValue ('Postgres 'Vanilla))
 -&gt; QueryDBRoot
      (RemoteRelationshipField UnpreparedValue)
      UnpreparedValue
      ('Postgres 'Vanilla))
-&gt; QueryDB
     ('Postgres 'Vanilla)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres 'Vanilla))
-&gt; QueryDBRoot
     (RemoteRelationshipField UnpreparedValue)
     UnpreparedValue
     ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1688"></span><span>                  </span><span class="annot"><span class="annottext">AnnSimpleSelectG
  ('Postgres 'Vanilla)
  (RemoteRelationshipField UnpreparedValue)
  (UnpreparedValue ('Postgres 'Vanilla))
-&gt; QueryDB
     ('Postgres 'Vanilla)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) r v.
AnnSimpleSelectG b r v -&gt; QueryDB b r v
</span><a href="Hasura.RQL.IR.Select.html#QDBSingleRow"><span class="hs-identifier hs-var">IR.QDBSingleRow</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnSimpleSelectG
   ('Postgres 'Vanilla)
   (RemoteRelationshipField UnpreparedValue)
   (UnpreparedValue ('Postgres 'Vanilla))
 -&gt; QueryDB
      ('Postgres 'Vanilla)
      (RemoteRelationshipField UnpreparedValue)
      (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; AnnSimpleSelectG
     ('Postgres 'Vanilla)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres 'Vanilla))
-&gt; QueryDB
     ('Postgres 'Vanilla)
     (RemoteRelationshipField UnpreparedValue)
     (UnpreparedValue ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1689"></span><span>                    </span><span class="annot"><span class="annottext">AnnSelectG :: forall (b :: BackendType) r (f :: * -&gt; *) v.
Fields (f v)
-&gt; SelectFromG b v
-&gt; TablePermG b v
-&gt; SelectArgsG b v
-&gt; StringifyNumbers
-&gt; AnnSelectG b r f v
</span><a href="Hasura.RQL.IR.Select.html#AnnSelectG"><span class="hs-identifier hs-type">IR.AnnSelectG</span></a></span><span>
</span><span id="line-1690"></span><span>                      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_asnFields :: AnnotatedFields ('Postgres 'Vanilla)
</span><a href="Hasura.RQL.IR.Select.html#_asnFields"><span class="hs-identifier hs-var">IR._asnFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnotatedFields ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150499"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1691"></span><span>                        </span><span class="annot"><span class="annottext">_asnFrom :: SelectFromG
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
</span><a href="Hasura.RQL.IR.Select.html#_asnFrom"><span class="hs-identifier hs-var">IR._asnFrom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; SelectFromG
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150506"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1692"></span><span>                        </span><span class="annot"><span class="annottext">_asnPerm :: TablePermG
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
</span><a href="Hasura.RQL.IR.Select.html#_asnPerm"><span class="hs-identifier hs-var">IR._asnPerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres 'Vanilla)
-&gt; TablePermG
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Select.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150501"><span class="hs-identifier hs-var">perms</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1693"></span><span>                        </span><span class="annot"><span class="annottext">_asnArgs :: SelectArgsG
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
</span><a href="Hasura.RQL.IR.Select.html#_asnArgs"><span class="hs-identifier hs-var">IR._asnArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1694"></span><span>                          </span><span class="annot"><span class="annottext">SelectArgs :: forall (b :: BackendType) v.
Maybe (AnnBoolExp b v)
-&gt; Maybe (NonEmpty (AnnotatedOrderByItemG b v))
-&gt; Maybe Int
-&gt; Maybe Int64
-&gt; Maybe (NonEmpty (Column b))
-&gt; SelectArgsG b v
</span><a href="Hasura.RQL.IR.Select.html#SelectArgs"><span class="hs-identifier hs-type">IR.SelectArgs</span></a></span><span>
</span><span id="line-1695"></span><span>                            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_saWhere :: Maybe
  (AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
</span><a href="Hasura.RQL.IR.Select.html#_saWhere"><span class="hs-identifier hs-var">IR._saWhere</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnBoolExp
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
-&gt; Maybe
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExp
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150497"><span class="hs-identifier hs-var">whereExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1696"></span><span>                              </span><span class="annot"><span class="annottext">_saOrderBy :: Maybe
  (NonEmpty
     (AnnotatedOrderByItemG
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
</span><a href="Hasura.RQL.IR.Select.html#_saOrderBy"><span class="hs-identifier hs-var">IR._saOrderBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (AnnotatedOrderByItemG
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-1697"></span><span>                              </span><span class="annot"><span class="annottext">_saLimit :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.html#_saLimit"><span class="hs-identifier hs-var">IR._saLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-1698"></span><span>                              </span><span class="annot"><span class="annottext">_saOffset :: Maybe Int64
</span><a href="Hasura.RQL.IR.Select.html#_saOffset"><span class="hs-identifier hs-var">IR._saOffset</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-1699"></span><span>                              </span><span class="annot"><span class="annottext">_saDistinct :: Maybe (NonEmpty (Column ('Postgres 'Vanilla)))
</span><a href="Hasura.RQL.IR.Select.html#_saDistinct"><span class="hs-identifier hs-var">IR._saDistinct</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty (Column ('Postgres 'Vanilla)))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1700"></span><span>                            </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-1701"></span><span>                        </span><span class="annot"><span class="annottext">_asnStrfyNum :: StringifyNumbers
</span><a href="Hasura.RQL.IR.Select.html#_asnStrfyNum"><span class="hs-identifier hs-var">IR._asnStrfyNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StringifyNumbers
</span><a href="#local-6989586621688150511"><span class="hs-identifier hs-var">stringifyNum</span></a></span><span>
</span><span id="line-1702"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-1703"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1704"></span><span>    </span><span class="annot"><a href="#local-6989586621688150504"><span class="hs-identifier hs-type">parseNodeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621688150515"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Select.html#NodeId"><span class="hs-identifier hs-type">NodeId</span></a></span><span>
</span><span id="line-1705"></span><span>    </span><span id="local-6989586621688150504"><span class="annot"><span class="annottext">parseNodeId :: Text -&gt; n NodeId
</span><a href="#local-6989586621688150504"><span class="hs-identifier hs-var hs-var">parseNodeId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1706"></span><span>      </span><span class="annot"><span class="annottext">(String -&gt; n NodeId)
-&gt; (NodeId -&gt; n NodeId) -&gt; Either String NodeId -&gt; n NodeId
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">n NodeId -&gt; n NodeId
forall a. n a -&gt; n a
</span><a href="#local-6989586621688150498"><span class="hs-identifier hs-var">withArgsPath</span></a></span><span> </span><span class="annot"><span class="annottext">(n NodeId -&gt; n NodeId)
-&gt; (String -&gt; n NodeId) -&gt; String -&gt; n NodeId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; n NodeId
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-var">throwInvalidNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; n NodeId) -&gt; (String -&gt; Text) -&gt; String -&gt; n NodeId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeId -&gt; n NodeId
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either String NodeId -&gt; n NodeId)
-&gt; (Text -&gt; Either String NodeId) -&gt; Text -&gt; n NodeId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String NodeId
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">J.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String NodeId)
-&gt; (Text -&gt; ByteString) -&gt; Text -&gt; Either String NodeId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><a href="Hasura.Prelude.html#base64Decode"><span class="hs-identifier hs-var">base64Decode</span></a></span><span>
</span><span id="line-1707"></span><span>    </span><span id="local-6989586621688150498"><span class="annot"><span class="annottext">withArgsPath :: n a -&gt; n a
</span><a href="#local-6989586621688150498"><span class="hs-identifier hs-var hs-var">withArgsPath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([JSONPathElement] -&gt; [JSONPathElement]) -&gt; n a -&gt; n a
forall (m :: * -&gt; *) a.
MonadParse m =&gt;
([JSONPathElement] -&gt; [JSONPathElement]) -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#withPath"><span class="hs-identifier hs-var">withPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[JSONPathElement] -&gt; [JSONPathElement] -&gt; [JSONPathElement]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">Key</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;args&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; JSONPathElement
</span><span class="hs-identifier hs-var">Key</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1708"></span><span>
</span><span id="line-1709"></span><span>    </span><span class="annot"><a href="#local-6989586621688150496"><span class="hs-identifier hs-type">buildNodeIdBoolExp</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1710"></span><span>      </span><span class="annot"><a href="Data.Sequence.NonEmpty.html#NESeq"><span class="hs-identifier hs-type">NESeq.NESeq</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1711"></span><span>      </span><span class="annot"><a href="Data.Sequence.NonEmpty.html#NESeq"><span class="hs-identifier hs-type">NESeq.NESeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Column.html#ColumnInfo"><span class="hs-identifier hs-type">ColumnInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1712"></span><span>      </span><span class="annot"><a href="#local-6989586621688150515"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnBoolExp"><span class="hs-identifier hs-type">IR.AnnBoolExp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Parser.Column.html#UnpreparedValue"><span class="hs-identifier hs-type">UnpreparedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.SQL.Backend.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1713"></span><span>    </span><span id="local-6989586621688150496"><span class="annot"><span class="annottext">buildNodeIdBoolExp :: NESeq Value
-&gt; PrimaryKeyColumns ('Postgres 'Vanilla)
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
</span><a href="#local-6989586621688150496"><span class="hs-identifier hs-var hs-var">buildNodeIdBoolExp</span></a></span></span><span> </span><span id="local-6989586621688150490"><span class="annot"><span class="annottext">NESeq Value
</span><a href="#local-6989586621688150490"><span class="hs-identifier hs-var">columnValues</span></a></span></span><span> </span><span id="local-6989586621688150489"><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150489"><span class="hs-identifier hs-var">pkeyColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1714"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150488"><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150488"><span class="hs-identifier hs-var">firstPkColumn</span></a></span></span><span> </span><span class="annot"><a href="Data.Sequence.NonEmpty.html#%3A%3C%7C%7C"><span class="hs-operator hs-type">NESeq.:&lt;||</span></a></span><span> </span><span id="local-6989586621688150487"><span class="annot"><span class="annottext">Seq (ColumnInfo ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150487"><span class="hs-identifier hs-var">remainingPkColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimaryKeyColumns ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150489"><span class="hs-identifier hs-var">pkeyColumns</span></a></span><span>
</span><span id="line-1715"></span><span>          </span><span id="local-6989586621688150486"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150486"><span class="hs-identifier hs-var">firstColumnValue</span></a></span></span><span> </span><span class="annot"><a href="Data.Sequence.NonEmpty.html#%3A%3C%7C%7C"><span class="hs-operator hs-type">NESeq.:&lt;||</span></a></span><span> </span><span id="local-6989586621688150485"><span class="annot"><span class="annottext">Seq Value
</span><a href="#local-6989586621688150485"><span class="hs-identifier hs-var">remainingColumns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NESeq Value
</span><a href="#local-6989586621688150490"><span class="hs-identifier hs-var">columnValues</span></a></span><span>
</span><span id="line-1716"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621688150484"><span class="annot"><span class="annottext">[ColumnInfo ('Postgres 'Vanilla)]
</span><a href="#local-6989586621688150484"><span class="hs-identifier hs-var">nonAlignedPkColumns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150483"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150483"><span class="hs-identifier hs-var">nonAlignedColumnValues</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150482"><span class="annot"><span class="annottext">[(ColumnInfo ('Postgres 'Vanilla), Value)]
</span><a href="#local-6989586621688150482"><span class="hs-identifier hs-var">alignedTuples</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1717"></span><span>            </span><span class="annot"><span class="annottext">[These (ColumnInfo ('Postgres 'Vanilla)) Value]
-&gt; ([ColumnInfo ('Postgres 'Vanilla)], [Value],
    [(ColumnInfo ('Postgres 'Vanilla), Value)])
forall a b. [These a b] -&gt; ([a], [b], [(a, b)])
</span><span class="hs-identifier hs-var">partitionThese</span></span><span> </span><span class="annot"><span class="annottext">([These (ColumnInfo ('Postgres 'Vanilla)) Value]
 -&gt; ([ColumnInfo ('Postgres 'Vanilla)], [Value],
     [(ColumnInfo ('Postgres 'Vanilla), Value)]))
-&gt; [These (ColumnInfo ('Postgres 'Vanilla)) Value]
-&gt; ([ColumnInfo ('Postgres 'Vanilla)], [Value],
    [(ColumnInfo ('Postgres 'Vanilla), Value)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Seq (These (ColumnInfo ('Postgres 'Vanilla)) Value)
-&gt; [These (ColumnInfo ('Postgres 'Vanilla)) Value]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(Seq (These (ColumnInfo ('Postgres 'Vanilla)) Value)
 -&gt; [These (ColumnInfo ('Postgres 'Vanilla)) Value])
-&gt; Seq (These (ColumnInfo ('Postgres 'Vanilla)) Value)
-&gt; [These (ColumnInfo ('Postgres 'Vanilla)) Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Seq (ColumnInfo ('Postgres 'Vanilla))
-&gt; Seq Value -&gt; Seq (These (ColumnInfo ('Postgres 'Vanilla)) Value)
forall (f :: * -&gt; *) a b.
Semialign f =&gt;
f a -&gt; f b -&gt; f (These a b)
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">Seq (ColumnInfo ('Postgres 'Vanilla))
</span><a href="#local-6989586621688150487"><span class="hs-identifier hs-var">remainingPkColumns</span></a></span><span> </span><span class="annot"><span class="annottext">Seq Value
</span><a href="#local-6989586621688150485"><span class="hs-identifier hs-var">remainingColumns</span></a></span><span>
</span><span id="line-1718"></span><span>
</span><span id="line-1719"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; n () -&gt; n ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ColumnInfo ('Postgres 'Vanilla)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo ('Postgres 'Vanilla)]
</span><a href="#local-6989586621688150484"><span class="hs-identifier hs-var">nonAlignedPkColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(n () -&gt; n ()) -&gt; n () -&gt; n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1720"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; n ()
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-var">throwInvalidNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; n ()) -&gt; Text -&gt; n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1721"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;primary key columns &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[PGCol] -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="Data.Text.Extended.html#dquoteList"><span class="hs-identifier hs-var">dquoteList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ColumnInfo ('Postgres 'Vanilla) -&gt; PGCol)
-&gt; [ColumnInfo ('Postgres 'Vanilla)] -&gt; [PGCol]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla) -&gt; PGCol
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">[ColumnInfo ('Postgres 'Vanilla)]
</span><a href="#local-6989586621688150484"><span class="hs-identifier hs-var">nonAlignedPkColumns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; are missing&quot;</span></span><span>
</span><span id="line-1722"></span><span>
</span><span id="line-1723"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; n () -&gt; n ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150483"><span class="hs-identifier hs-var">nonAlignedColumnValues</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(n () -&gt; n ()) -&gt; n () -&gt; n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1724"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; n ()
forall (m :: * -&gt; *) a. MonadParse m =&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Select.html#throwInvalidNodeId"><span class="hs-identifier hs-var">throwInvalidNodeId</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; n ()) -&gt; Text -&gt; n ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1725"></span><span>          </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;unexpected column values &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Text
forall a. ToJSON a =&gt; a -&gt; Text
</span><a href="Data.Aeson.Extended.html#encodeToStrictText"><span class="hs-identifier hs-var">J.encodeToStrictText</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621688150483"><span class="hs-identifier hs-var">nonAlignedColumnValues</span></a></span><span>
</span><span id="line-1726"></span><span>
</span><span id="line-1727"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150479"><span class="annot"><span class="annottext">allTuples :: [(ColumnInfo ('Postgres 'Vanilla), Value)]
</span><a href="#local-6989586621688150479"><span class="hs-identifier hs-var hs-var">allTuples</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150488"><span class="hs-identifier hs-var">firstPkColumn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150486"><span class="hs-identifier hs-var">firstColumnValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ColumnInfo ('Postgres 'Vanilla), Value)
-&gt; [(ColumnInfo ('Postgres 'Vanilla), Value)]
-&gt; [(ColumnInfo ('Postgres 'Vanilla), Value)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnInfo ('Postgres 'Vanilla), Value)]
</span><a href="#local-6989586621688150482"><span class="hs-identifier hs-var">alignedTuples</span></a></span><span>
</span><span id="line-1728"></span><span>
</span><span id="line-1729"></span><span>      </span><span class="annot"><span class="annottext">(Either
   QErr
   (AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
 -&gt; (QErr
     -&gt; n (AnnBoolExp
             ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
 -&gt; n (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; (QErr
    -&gt; n (AnnBoolExp
            ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; Either
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Either
  QErr
  (AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; (QErr
    -&gt; n (AnnBoolExp
            ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall (m :: * -&gt; *) e a.
Applicative m =&gt;
Either e a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="Hasura.Prelude.html#onLeft"><span class="hs-identifier hs-var">onLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Code
-&gt; Text
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall (m :: * -&gt; *) a. MonadParse m =&gt; Code -&gt; Text -&gt; m a
</span><a href="Hasura.GraphQL.Parser.Class.Parse.html#parseErrorWith"><span class="hs-identifier hs-var">parseErrorWith</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="Hasura.Base.Error.html#ParseFailed"><span class="hs-identifier hs-var">ParseFailed</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; n (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; (QErr -&gt; Text)
-&gt; QErr
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QErr -&gt; Text
</span><a href="Hasura.Base.Error.html#qeError"><span class="hs-identifier hs-var hs-var">qeError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either
   QErr
   (AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
 -&gt; n (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; Either
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; n (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1730"></span><span>        </span><span class="annot"><span class="annottext">Except
  QErr
  (AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; Either
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall e a. Except e a -&gt; Either e a
</span><span class="hs-identifier hs-var">runExcept</span></span><span> </span><span class="annot"><span class="annottext">(Except
   QErr
   (AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
 -&gt; Either
      QErr
      (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; Except
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; Either
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1731"></span><span>          </span><span class="annot"><span class="annottext">([AnnBoolExp
    ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
 -&gt; AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; ExceptT
     QErr
     Identity
     [AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
-&gt; Except
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[AnnBoolExp
   ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
-&gt; AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) a. [GBoolExp b a] -&gt; GBoolExp b a
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolAnd"><span class="hs-identifier hs-var">IR.BoolAnd</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   QErr
   Identity
   [AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
 -&gt; Except
      QErr
      (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; ExceptT
     QErr
     Identity
     [AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
-&gt; Except
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1732"></span><span>            </span><span class="annot"><span class="annottext">[(ColumnInfo ('Postgres 'Vanilla), Value)]
-&gt; ((ColumnInfo ('Postgres 'Vanilla), Value)
    -&gt; Except
         QErr
         (AnnBoolExp
            ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; ExceptT
     QErr
     Identity
     [AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnInfo ('Postgres 'Vanilla), Value)]
</span><a href="#local-6989586621688150479"><span class="hs-identifier hs-var">allTuples</span></a></span><span> </span><span class="annot"><span class="annottext">(((ColumnInfo ('Postgres 'Vanilla), Value)
  -&gt; Except
       QErr
       (AnnBoolExp
          ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
 -&gt; ExceptT
      QErr
      Identity
      [AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))])
-&gt; ((ColumnInfo ('Postgres 'Vanilla), Value)
    -&gt; Except
         QErr
         (AnnBoolExp
            ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; ExceptT
     QErr
     Identity
     [AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621688150477"><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150477"><span class="hs-identifier hs-var">columnInfo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688150476"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150476"><span class="hs-identifier hs-var">columnValue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1733"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150475"><span class="annot"><span class="annottext">modifyErrFn :: Text -&gt; Text
</span><a href="#local-6989586621688150475"><span class="hs-identifier hs-var hs-var">modifyErrFn</span></a></span></span><span> </span><span id="local-6989586621688150474"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150474"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1734"></span><span>                    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;value of column &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla) -&gt; Column ('Postgres 'Vanilla)
forall (b :: BackendType). ColumnInfo b -&gt; Column b
</span><a href="Hasura.RQL.Types.Column.html#ciColumn"><span class="hs-identifier hs-var hs-var">ciColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150477"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-1735"></span><span>                      </span><span class="annot"><span class="annottext">PGCol -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in node id: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688150474"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1736"></span><span>                  </span><span id="local-6989586621688150473"><span class="annot"><span class="annottext">pgColumnType :: ColumnType ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150473"><span class="hs-identifier hs-var hs-var">pgColumnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla) -&gt; ColumnType ('Postgres 'Vanilla)
forall (b :: BackendType). ColumnInfo b -&gt; ColumnType b
</span><a href="Hasura.RQL.Types.Column.html#ciType"><span class="hs-identifier hs-var hs-var">ciType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150477"><span class="hs-identifier hs-var">columnInfo</span></a></span><span>
</span><span id="line-1737"></span><span>              </span><span id="local-6989586621688150472"><span class="annot"><span class="annottext">PGScalarValue
</span><a href="#local-6989586621688150472"><span class="hs-identifier hs-var">pgValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text)
-&gt; ExceptT QErr Identity PGScalarValue
-&gt; ExceptT QErr Identity PGScalarValue
forall (m :: * -&gt; *) a. QErrM m =&gt; (Text -&gt; Text) -&gt; m a -&gt; m a
</span><a href="Hasura.Base.Error.html#modifyErr"><span class="hs-identifier hs-var">modifyErr</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="#local-6989586621688150475"><span class="hs-identifier hs-var">modifyErrFn</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT QErr Identity PGScalarValue
 -&gt; ExceptT QErr Identity PGScalarValue)
-&gt; ExceptT QErr Identity PGScalarValue
-&gt; ExceptT QErr Identity PGScalarValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres 'Vanilla)
-&gt; Value
-&gt; ExceptT QErr Identity (ScalarValue ('Postgres 'Vanilla))
forall (m :: * -&gt; *) (b :: BackendType).
(MonadError QErr m, Backend b) =&gt;
ColumnType b -&gt; Value -&gt; m (ScalarValue b)
</span><a href="Hasura.RQL.Types.Column.html#parseScalarValueColumnType"><span class="hs-identifier hs-var">parseScalarValueColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150473"><span class="hs-identifier hs-var">pgColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621688150476"><span class="hs-identifier hs-var">columnValue</span></a></span><span>
</span><span id="line-1738"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688150470"><span class="annot"><span class="annottext">unpreparedValue :: UnpreparedValue ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150470"><span class="hs-identifier hs-var hs-var">unpreparedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
-&gt; ColumnValue ('Postgres 'Vanilla)
-&gt; UnpreparedValue ('Postgres 'Vanilla)
forall (b :: BackendType).
Maybe VariableInfo -&gt; ColumnValue b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Parser.Column.html#UVParameter"><span class="hs-identifier hs-var">UVParameter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VariableInfo
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(ColumnValue ('Postgres 'Vanilla)
 -&gt; UnpreparedValue ('Postgres 'Vanilla))
-&gt; ColumnValue ('Postgres 'Vanilla)
-&gt; UnpreparedValue ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres 'Vanilla)
-&gt; ScalarValue ('Postgres 'Vanilla)
-&gt; ColumnValue ('Postgres 'Vanilla)
forall (b :: BackendType).
ColumnType b -&gt; ScalarValue b -&gt; ColumnValue b
</span><a href="Hasura.RQL.Types.Column.html#ColumnValue"><span class="hs-identifier hs-var">ColumnValue</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnType ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150473"><span class="hs-identifier hs-var">pgColumnType</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarValue ('Postgres 'Vanilla)
PGScalarValue
</span><a href="#local-6989586621688150472"><span class="hs-identifier hs-var">pgValue</span></a></span><span>
</span><span id="line-1739"></span><span>              </span><span class="annot"><span class="annottext">AnnBoolExp
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
-&gt; Except
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExp
   ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
 -&gt; Except
      QErr
      (AnnBoolExp
         ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))))
-&gt; AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
-&gt; Except
     QErr
     (AnnBoolExp
        ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AnnBoolExpFld
  ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
-&gt; AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) a. a -&gt; GBoolExp b a
</span><a href="Hasura.RQL.IR.BoolExp.html#BoolFld"><span class="hs-identifier hs-var">IR.BoolFld</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld
   ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
 -&gt; AnnBoolExp
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla)))
-&gt; AnnBoolExpFld
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
-&gt; AnnBoolExp
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
-&gt; [OpExpG
      ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))]
-&gt; AnnBoolExpFld
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) a.
ColumnInfo b -&gt; [OpExpG b a] -&gt; AnnBoolExpFld b a
</span><a href="Hasura.RQL.IR.BoolExp.html#AVColumn"><span class="hs-identifier hs-var">IR.AVColumn</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnInfo ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150477"><span class="hs-identifier hs-var">columnInfo</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool
-&gt; UnpreparedValue ('Postgres 'Vanilla)
-&gt; OpExpG
     ('Postgres 'Vanilla) (UnpreparedValue ('Postgres 'Vanilla))
forall (b :: BackendType) a. Bool -&gt; a -&gt; OpExpG b a
</span><a href="Hasura.RQL.IR.BoolExp.html#AEQ"><span class="hs-identifier hs-var">IR.AEQ</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">UnpreparedValue ('Postgres 'Vanilla)
</span><a href="#local-6989586621688150470"><span class="hs-identifier hs-var">unpreparedValue</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1740"></span></pre></body></html>