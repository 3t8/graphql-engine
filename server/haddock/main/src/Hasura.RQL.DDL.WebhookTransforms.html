<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24maxtag_FlOgc28bWxnGQS2r09v8Y1"><span id="%24tag2con_FlOgc28bWxnGQS2r09v8Y1"><span id="%24con2tag_FlOgc28bWxnGQS2r09v8Y1"><span id="%24maxtag_7LBPmu5RO479kdfJtN87OG"><span id="%24tag2con_7LBPmu5RO479kdfJtN87OG"><span id="%24con2tag_7LBPmu5RO479kdfJtN87OG"><span id="%24maxtag_DK1mRmFpGYHCQKyiWaIX6z"><span id="%24tag2con_DK1mRmFpGYHCQKyiWaIX6z"><span id="%24con2tag_DK1mRmFpGYHCQKyiWaIX6z"></span></span></span></span></span></span></span></span></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.RQL.DDL.WebhookTransforms</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier">applyRequestTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier">applyResponseTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier">buildReqTransformCtx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier">buildRespTransformCtx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier">mkRequestTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier">mkResponseTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier">RequestMethod</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier">StringTemplateText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier">TemplatingEngine</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier">TemplateText</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier">ContentType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier">TransformHeaders</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier">RequestTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier">ResponseTransform</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">view</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bimap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.CaseInsensitive</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CI</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either.Validation</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">nubBy</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TE</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Incremental.html"><span class="hs-identifier">Hasura.Incremental</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier">Cacheable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Session.html"><span class="hs-identifier">Hasura.Session</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier">SessionVariables</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">RenderedError</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runKriti</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">render</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Kriti.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parser</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html"><span class="hs-identifier">Network.HTTP.Client.Transformable</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HTTP</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Network.URI</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">URI</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">{-

Webhook Transformations are data transformations used to modify HTTP
Requests before those requests are executed or Responses after
requests are executed.

'MetadataRequestTransform'/'MetadataResponseTransform' values are
stored in Metadata within the 'CreateAction' and
'CreateEventTriggerQuery' Types and then converted into
'RequestTransform'/'ResponseTransform' values using
'mkRequestTransform'/'mkResponseTransform'.

'RequestTransforms' and 'ResponseTransforms' are applied to an HTTP
Request/Response using 'applyRequestTransform' and
'applyResponseTransform'.

In the case of body transformations, a user specified templating
script is applied.

-}</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-65"></span><span class="hs-comment">--- Types ---</span><span>
</span><span id="line-66"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">data</span><span> </span><span id="ReqTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-var">ReqTransformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReqTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-var">ReqTransformCtx</span></a></span></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="tcUrl"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcUrl"><span class="hs-identifier hs-var hs-var">tcUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span id="tcBody"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcBody"><span class="hs-identifier hs-var hs-var">tcBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span id="tcSessionVars"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcSessionVars"><span class="hs-identifier hs-var hs-var">tcSessionVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span id="tcQueryParams"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcQueryParams"><span class="hs-identifier hs-var hs-var">tcQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986173"><span id="local-6989586621687986175"><span id="local-6989586621687986177"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-76"></span><span>  </span><span id="local-6989586621687986171"><span class="annot"><span class="annottext">toJSON :: ReqTransformCtx -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687986166"><span id="local-6989586621687986167"><span id="local-6989586621687986168"><span id="local-6989586621687986169"><span class="annot"><span class="annottext">Maybe Value
Value
tcQueryParams :: Maybe Value
tcSessionVars :: Value
tcBody :: Value
tcUrl :: Maybe Value
tcQueryParams :: ReqTransformCtx -&gt; Maybe Value
tcSessionVars :: ReqTransformCtx -&gt; Value
tcBody :: ReqTransformCtx -&gt; Value
tcUrl :: ReqTransformCtx -&gt; Maybe Value
</span><a href="#local-6989586621687986166"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;base_url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687986169"><span class="hs-identifier hs-var">tcUrl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687986168"><span class="hs-identifier hs-var">tcBody</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;session_variables&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687986167"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687986166"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">data</span><span> </span><span id="RespTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-var">RespTransformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RespTransformCtx"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-var">RespTransformCtx</span></a></span></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="rtcBody"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcBody"><span class="hs-identifier hs-var hs-var">rtcBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span id="rtcReqCtx"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcReqCtx"><span class="hs-identifier hs-var hs-var">rtcReqCtx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | A set of data transformation functions and substitutions</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- generated from a 'MetadataRequestTransform'. 'Nothing' values mean</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- use the original request value, unless otherwise indicated.</span><span>
</span><span id="line-87"></span><span class="hs-keyword">data</span><span> </span><span id="RequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Change the request method to one provided here. Nothing means POST.</span><span>
</span><span id="line-89"></span><span>    </span><span id="reqTransformRequestMethod"><span class="annot"><span class="annottext">RequestTransform -&gt; Maybe RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestMethod"><span class="hs-identifier hs-var hs-var">reqTransformRequestMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-comment">-- | A function which contructs a new URL given the request context.</span><span>
</span><span id="line-91"></span><span>    </span><span id="reqTransformRequestURL"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestURL"><span class="hs-identifier hs-var hs-var">reqTransformRequestURL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">-- | A function for transforming the request body.</span><span>
</span><span id="line-93"></span><span>    </span><span id="reqTransformBody"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformBody"><span class="hs-identifier hs-var hs-var">reqTransformBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">-- | Change content type to one provided here.</span><span>
</span><span id="line-95"></span><span>    </span><span id="reqTransformContentType"><span class="annot"><span class="annottext">RequestTransform -&gt; Maybe ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformContentType"><span class="hs-identifier hs-var hs-var">reqTransformContentType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-comment">-- | A function which contructs new query parameters given the request context.</span><span>
</span><span id="line-97"></span><span>    </span><span id="reqTransformQueryParams"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformQueryParams"><span class="hs-identifier hs-var hs-var">reqTransformQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-comment">-- | A function which contructs new Headers given the request context.</span><span>
</span><span id="line-99"></span><span>    </span><span id="reqTransformRequestHeaders"><span class="annot"><span class="annottext">RequestTransform
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#reqTransformRequestHeaders"><span class="hs-identifier hs-var hs-var">reqTransformRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | A set of data transformation functions generated from a</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- 'MetadataResponseTransform'. 'Nothing' means use the original</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- response value.</span><span>
</span><span id="line-105"></span><span class="hs-keyword">newtype</span><span> </span><span id="ResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span></span><span> </span><span class="hs-special">{</span><span id="respTransformBody"><span class="annot"><span class="annottext">ResponseTransform
-&gt; Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#respTransformBody"><span class="hs-identifier hs-var hs-var">respTransformBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-comment">-- | A de/serializable request transformation template which can be stored in</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- the metadata associated with an action/event trigger/etc. and used to produce</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- a 'RequestTransform'.</span><span>
</span><span id="line-110"></span><span class="hs-comment">--</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- NOTE: This data type is _only_ intended to be parsed from and stored as user</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- metadata; no direct logical transformations should be done upon it.</span><span>
</span><span id="line-113"></span><span class="hs-comment">--</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- NOTE: Users should convert this to 'RequestTransform' as close as possible to</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- the call site that performs a transformed HTTP request, as 'RequestTransform'</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- has a representation that makes it more difficult to deserialize for</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- debugging.</span><span>
</span><span id="line-118"></span><span class="hs-comment">--</span><span>
</span><span id="line-119"></span><span class="hs-comment">-- Nothing values mean use the original request value, unless</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- otherwise indicated.</span><span>
</span><span id="line-121"></span><span id="local-6989586621687986148"><span id="local-6989586621687986149"></span></span><span class="hs-keyword">data</span><span> </span><span id="MetadataRequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataRequestTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Change the request method to one provided here. Nothing means POST.</span><span>
</span><span id="line-123"></span><span>    </span><span id="mtRequestMethod"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestMethod"><span class="hs-identifier hs-var hs-var">mtRequestMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-comment">-- | Template script for transforming the URL.</span><span>
</span><span id="line-125"></span><span>    </span><span id="mtRequestURL"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestURL"><span class="hs-identifier hs-var hs-var">mtRequestURL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-comment">-- | Template script for transforming the request body.</span><span>
</span><span id="line-127"></span><span>    </span><span id="mtBodyTransform"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe TemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtBodyTransform"><span class="hs-identifier hs-var hs-var">mtBodyTransform</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-comment">-- | Replace the Content-Type with this value. Only</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">-- &quot;application/json&quot; and &quot;application/x-www-form-urlencoded&quot; are</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-comment">-- allowed.</span><span>
</span><span id="line-131"></span><span>    </span><span id="mtContentType"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtContentType"><span class="hs-identifier hs-var hs-var">mtContentType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- | A list of template scripts for constructing new Query Params.</span><span>
</span><span id="line-133"></span><span>    </span><span id="mtQueryParams"><span class="annot"><span class="annottext">MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtQueryParams"><span class="hs-identifier hs-var hs-var">mtQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-comment">-- | Transform headers as defined here.</span><span>
</span><span id="line-135"></span><span>    </span><span id="mtRequestHeaders"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Maybe TransformHeaders
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtRequestHeaders"><span class="hs-identifier hs-var hs-var">mtRequestHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-comment">-- | The template engine to use for transformations. Default: Kriti</span><span>
</span><span id="line-137"></span><span>    </span><span id="mtTemplatingEngine"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mtTemplatingEngine"><span class="hs-identifier hs-var hs-var">mtTemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687986134"><span id="local-6989586621687986136"><span id="local-6989586621687986138"><span class="annot"><span class="annottext">Int -&gt; MetadataRequestTransform -&gt; ShowS
[MetadataRequestTransform] -&gt; ShowS
MetadataRequestTransform -&gt; String
(Int -&gt; MetadataRequestTransform -&gt; ShowS)
-&gt; (MetadataRequestTransform -&gt; String)
-&gt; ([MetadataRequestTransform] -&gt; ShowS)
-&gt; Show MetadataRequestTransform
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MetadataRequestTransform] -&gt; ShowS
$cshowList :: [MetadataRequestTransform] -&gt; ShowS
show :: MetadataRequestTransform -&gt; String
$cshow :: MetadataRequestTransform -&gt; String
showsPrec :: Int -&gt; MetadataRequestTransform -&gt; ShowS
$cshowsPrec :: Int -&gt; MetadataRequestTransform -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687986129"><span id="local-6989586621687986131"><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
(MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool)
-&gt; (MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool)
-&gt; Eq MetadataRequestTransform
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$c/= :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
== :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
$c== :: MetadataRequestTransform -&gt; MetadataRequestTransform -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 MetadataRequestTransform -&gt; Rep MetadataRequestTransform x)
-&gt; (forall x.
    Rep MetadataRequestTransform x -&gt; MetadataRequestTransform)
-&gt; Generic MetadataRequestTransform
forall x.
Rep MetadataRequestTransform x -&gt; MetadataRequestTransform
forall x.
MetadataRequestTransform -&gt; Rep MetadataRequestTransform x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep MetadataRequestTransform x -&gt; MetadataRequestTransform
$cfrom :: forall x.
MetadataRequestTransform -&gt; Rep MetadataRequestTransform x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986123"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986119"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">8</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-type">.=?</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621687986355"><span id="local-6989586621687986356"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-type">(.=?)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621687986356"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687986355"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621687986356"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687986355"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-148"></span><span id=".%3D%3F"><span class="annot"><span class="annottext">.=? :: k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var hs-var">(.=?)</span></a></span></span><span> </span><span class="annot"><span class="annottext">k
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe v
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (k, Value)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-149"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">(.=?)</span></a></span><span> </span><span id="local-6989586621687986116"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621687986116"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687986115"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621687986115"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(k, Value) -&gt; Maybe (k, Value)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621687986116"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621687986115"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986108"><span id="local-6989586621687986110"><span id="local-6989586621687986112"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621687986107"><span class="annot"><span class="annottext">toJSON :: MetadataRequestTransform -&gt; Value
</span><a href="#local-6989586621687986107"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687986100"><span id="local-6989586621687986101"><span id="local-6989586621687986102"><span id="local-6989586621687986103"><span id="local-6989586621687986104"><span id="local-6989586621687986105"><span id="local-6989586621687986106"><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
Maybe TransformHeaders
Maybe ContentType
Maybe StringTemplateText
Maybe TemplateText
Maybe RequestMethod
TemplatingEngine
mtTemplatingEngine :: TemplatingEngine
mtRequestHeaders :: Maybe TransformHeaders
mtQueryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtContentType :: Maybe ContentType
mtBodyTransform :: Maybe TemplateText
mtRequestURL :: Maybe StringTemplateText
mtRequestMethod :: Maybe RequestMethod
mtTemplatingEngine :: MetadataRequestTransform -&gt; TemplatingEngine
mtRequestHeaders :: MetadataRequestTransform -&gt; Maybe TransformHeaders
mtQueryParams :: MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtContentType :: MetadataRequestTransform -&gt; Maybe ContentType
mtBodyTransform :: MetadataRequestTransform -&gt; Maybe TemplateText
mtRequestURL :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtRequestMethod :: MetadataRequestTransform -&gt; Maybe RequestMethod
</span><a href="#local-6989586621687986100"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-154"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplatingEngine -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687986100"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span>
</span><span id="line-156"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe RequestMethod -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
</span><a href="#local-6989586621687986106"><span class="hs-identifier hs-var">mtRequestMethod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe StringTemplateText -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621687986105"><span class="hs-identifier hs-var">mtRequestURL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe TemplateText -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986104"><span class="hs-identifier hs-var">mtBodyTransform</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;content_type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe ContentType -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ContentType
</span><a href="#local-6989586621687986103"><span class="hs-identifier hs-var">mtContentType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">([(StringTemplateText, Maybe StringTemplateText)]
 -&gt; HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
-&gt; HashMap StringTemplateText (Maybe StringTemplateText)
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687986102"><span class="hs-identifier hs-var">mtQueryParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;request_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe TransformHeaders -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621687986101"><span class="hs-identifier hs-var">mtRequestHeaders</span></a></span><span>
</span><span id="line-162"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986096"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>  </span><span id="local-6989586621687986094"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MetadataRequestTransform
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser MetadataRequestTransform)
-&gt; Value
-&gt; Parser MetadataRequestTransform
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser MetadataRequestTransform)
 -&gt; Value -&gt; Parser MetadataRequestTransform)
-&gt; (Object -&gt; Parser MetadataRequestTransform)
-&gt; Value
-&gt; Parser MetadataRequestTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687986091"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621687986090"><span class="annot"><span class="annottext">Maybe RequestMethod
</span><a href="#local-6989586621687986090"><span class="hs-identifier hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe RequestMethod)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;method&quot;</span></span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621687986088"><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621687986088"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe StringTemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;url&quot;</span></span><span>
</span><span id="line-168"></span><span>    </span><span id="local-6989586621687986087"><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986087"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621687986086"><span class="annot"><span class="annottext">Maybe ContentType
</span><a href="#local-6989586621687986086"><span class="hs-identifier hs-var">contentType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe ContentType)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;content_type&quot;</span></span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621687986085"><span class="annot"><span class="annottext">Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
</span><a href="#local-6989586621687986085"><span class="hs-identifier hs-var">queryParams'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object
-&gt; Text
-&gt; Parser
     (Maybe (HashMap StringTemplateText (Maybe StringTemplateText)))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query_params&quot;</span></span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687986084"><span class="annot"><span class="annottext">queryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687986084"><span class="hs-identifier hs-var hs-var">queryParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HashMap StringTemplateText (Maybe StringTemplateText)
 -&gt; [(StringTemplateText, Maybe StringTemplateText)])
-&gt; Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HashMap StringTemplateText (Maybe StringTemplateText)
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Maybe (HashMap StringTemplateText (Maybe StringTemplateText))
</span><a href="#local-6989586621687986085"><span class="hs-identifier hs-var">queryParams'</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621687986082"><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621687986082"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TransformHeaders)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;request_headers&quot;</span></span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621687986081"><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621687986081"><span class="hs-identifier hs-var">templateEngine</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986091"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplatingEngine)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687986080"><span class="annot"><span class="annottext">templateEngine' :: TemplatingEngine
</span><a href="#local-6989586621687986080"><span class="hs-identifier hs-var hs-var">templateEngine'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Maybe TemplatingEngine -&gt; TemplatingEngine
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621687986081"><span class="hs-identifier hs-var">templateEngine</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="annottext">MetadataRequestTransform -&gt; Parser MetadataRequestTransform
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(MetadataRequestTransform -&gt; Parser MetadataRequestTransform)
-&gt; MetadataRequestTransform -&gt; Parser MetadataRequestTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
-&gt; Maybe StringTemplateText
-&gt; Maybe TemplateText
-&gt; Maybe ContentType
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe TransformHeaders
-&gt; TemplatingEngine
-&gt; MetadataRequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-var">MetadataRequestTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
</span><a href="#local-6989586621687986090"><span class="hs-identifier hs-var">method</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621687986088"><span class="hs-identifier hs-var">url</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986087"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ContentType
</span><a href="#local-6989586621687986086"><span class="hs-identifier hs-var">contentType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687986084"><span class="hs-identifier hs-var">queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621687986082"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687986080"><span class="hs-identifier hs-var">templateEngine'</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span id="local-6989586621687986076"><span id="local-6989586621687986077"></span></span><span class="hs-keyword">data</span><span> </span><span id="MetadataResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataResponseTransform"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="mrtBodyTransform"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; Maybe TemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mrtBodyTransform"><span class="hs-identifier hs-var hs-var">mrtBodyTransform</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>    </span><span id="mrtTemplatingEngine"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mrtTemplatingEngine"><span class="hs-identifier hs-var hs-var">mrtTemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687986067"><span id="local-6989586621687986069"><span id="local-6989586621687986071"><span class="annot"><span class="annottext">Int -&gt; MetadataResponseTransform -&gt; ShowS
[MetadataResponseTransform] -&gt; ShowS
MetadataResponseTransform -&gt; String
(Int -&gt; MetadataResponseTransform -&gt; ShowS)
-&gt; (MetadataResponseTransform -&gt; String)
-&gt; ([MetadataResponseTransform] -&gt; ShowS)
-&gt; Show MetadataResponseTransform
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MetadataResponseTransform] -&gt; ShowS
$cshowList :: [MetadataResponseTransform] -&gt; ShowS
show :: MetadataResponseTransform -&gt; String
$cshow :: MetadataResponseTransform -&gt; String
showsPrec :: Int -&gt; MetadataResponseTransform -&gt; ShowS
$cshowsPrec :: Int -&gt; MetadataResponseTransform -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687986063"><span id="local-6989586621687986065"><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
(MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool)
-&gt; (MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool)
-&gt; Eq MetadataResponseTransform
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$c/= :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
== :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
$c== :: MetadataResponseTransform -&gt; MetadataResponseTransform -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x.
 MetadataResponseTransform -&gt; Rep MetadataResponseTransform x)
-&gt; (forall x.
    Rep MetadataResponseTransform x -&gt; MetadataResponseTransform)
-&gt; Generic MetadataResponseTransform
forall x.
Rep MetadataResponseTransform x -&gt; MetadataResponseTransform
forall x.
MetadataResponseTransform -&gt; Rep MetadataResponseTransform x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x.
Rep MetadataResponseTransform x -&gt; MetadataResponseTransform
$cfrom :: forall x.
MetadataResponseTransform -&gt; Rep MetadataResponseTransform x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986059"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986056"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986049"><span id="local-6989586621687986051"><span id="local-6989586621687986053"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621687986048"><span class="annot"><span class="annottext">toJSON :: MetadataResponseTransform -&gt; Value
</span><a href="#local-6989586621687986048"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687986046"><span id="local-6989586621687986047"><span class="annot"><span class="annottext">Maybe TemplateText
TemplatingEngine
mrtTemplatingEngine :: TemplatingEngine
mrtBodyTransform :: Maybe TemplateText
mrtTemplatingEngine :: MetadataResponseTransform -&gt; TemplatingEngine
mrtBodyTransform :: MetadataResponseTransform -&gt; Maybe TemplateText
</span><a href="#local-6989586621687986046"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplatingEngine -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687986046"><span class="hs-identifier hs-var">mrtTemplatingEngine</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe TemplateText -&gt; Maybe Pair
forall v k. ToJSON v =&gt; k -&gt; Maybe v -&gt; Maybe (k, Value)
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#.%3D%3F"><span class="hs-operator hs-var">.=?</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986047"><span class="hs-identifier hs-var">mrtBodyTransform</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687986043"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621687986042"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MetadataResponseTransform
</span><a href="#local-6989586621687986042"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser MetadataResponseTransform)
-&gt; Value
-&gt; Parser MetadataResponseTransform
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser MetadataResponseTransform)
 -&gt; Value -&gt; Parser MetadataResponseTransform)
-&gt; (Object -&gt; Parser MetadataResponseTransform)
-&gt; Value
-&gt; Parser MetadataResponseTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687986041"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986041"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>    </span><span id="local-6989586621687986040"><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986040"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986041"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplateText)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;body&quot;</span></span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621687986039"><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621687986039"><span class="hs-identifier hs-var">templateEngine</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687986041"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe TemplatingEngine)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;template_engine&quot;</span></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687986038"><span class="annot"><span class="annottext">templateEngine' :: TemplatingEngine
</span><a href="#local-6989586621687986038"><span class="hs-identifier hs-var hs-var">templateEngine'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Maybe TemplatingEngine -&gt; TemplatingEngine
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplatingEngine
</span><a href="#local-6989586621687986039"><span class="hs-identifier hs-var">templateEngine</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">MetadataResponseTransform -&gt; Parser MetadataResponseTransform
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(MetadataResponseTransform -&gt; Parser MetadataResponseTransform)
-&gt; MetadataResponseTransform -&gt; Parser MetadataResponseTransform
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText -&gt; TemplatingEngine -&gt; MetadataResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-var">MetadataResponseTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687986040"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687986038"><span class="hs-identifier hs-var">templateEngine'</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span id="local-6989586621687986036"><span id="local-6989586621687986037"></span></span><span class="hs-keyword">data</span><span> </span><span id="RequestMethod"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-var">RequestMethod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GET"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#GET"><span class="hs-identifier hs-var">GET</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="POST"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#POST"><span class="hs-identifier hs-var">POST</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="PUT"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#PUT"><span class="hs-identifier hs-var">PUT</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="PATCH"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#PATCH"><span class="hs-identifier hs-var">PATCH</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DELETE"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#DELETE"><span class="hs-identifier hs-var">DELETE</span></a></span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687986025"><span id="local-6989586621687986027"><span id="local-6989586621687986029"><span class="annot"><span class="annottext">Int -&gt; RequestMethod -&gt; ShowS
[RequestMethod] -&gt; ShowS
RequestMethod -&gt; String
(Int -&gt; RequestMethod -&gt; ShowS)
-&gt; (RequestMethod -&gt; String)
-&gt; ([RequestMethod] -&gt; ShowS)
-&gt; Show RequestMethod
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RequestMethod] -&gt; ShowS
$cshowList :: [RequestMethod] -&gt; ShowS
show :: RequestMethod -&gt; String
$cshow :: RequestMethod -&gt; String
showsPrec :: Int -&gt; RequestMethod -&gt; ShowS
$cshowsPrec :: Int -&gt; RequestMethod -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687986021"><span id="local-6989586621687986023"><span class="annot"><span class="annottext">RequestMethod -&gt; RequestMethod -&gt; Bool
(RequestMethod -&gt; RequestMethod -&gt; Bool)
-&gt; (RequestMethod -&gt; RequestMethod -&gt; Bool) -&gt; Eq RequestMethod
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RequestMethod -&gt; RequestMethod -&gt; Bool
$c/= :: RequestMethod -&gt; RequestMethod -&gt; Bool
== :: RequestMethod -&gt; RequestMethod -&gt; Bool
$c== :: RequestMethod -&gt; RequestMethod -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687986005"><span id="local-6989586621687986007"><span id="local-6989586621687986009"><span id="local-6989586621687986011"><span id="local-6989586621687986013"><span id="local-6989586621687986015"><span id="local-6989586621687986017"><span id="local-6989586621687986019"><span class="annot"><span class="annottext">Int -&gt; RequestMethod
RequestMethod -&gt; Int
RequestMethod -&gt; [RequestMethod]
RequestMethod -&gt; RequestMethod
RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
RequestMethod -&gt; RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
(RequestMethod -&gt; RequestMethod)
-&gt; (RequestMethod -&gt; RequestMethod)
-&gt; (Int -&gt; RequestMethod)
-&gt; (RequestMethod -&gt; Int)
-&gt; (RequestMethod -&gt; [RequestMethod])
-&gt; (RequestMethod -&gt; RequestMethod -&gt; [RequestMethod])
-&gt; (RequestMethod -&gt; RequestMethod -&gt; [RequestMethod])
-&gt; (RequestMethod
    -&gt; RequestMethod -&gt; RequestMethod -&gt; [RequestMethod])
-&gt; Enum RequestMethod
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: RequestMethod -&gt; RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
$cenumFromThenTo :: RequestMethod -&gt; RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
enumFromTo :: RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
$cenumFromTo :: RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
enumFromThen :: RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
$cenumFromThen :: RequestMethod -&gt; RequestMethod -&gt; [RequestMethod]
enumFrom :: RequestMethod -&gt; [RequestMethod]
$cenumFrom :: RequestMethod -&gt; [RequestMethod]
fromEnum :: RequestMethod -&gt; Int
$cfromEnum :: RequestMethod -&gt; Int
toEnum :: Int -&gt; RequestMethod
$ctoEnum :: Int -&gt; RequestMethod
pred :: RequestMethod -&gt; RequestMethod
$cpred :: RequestMethod -&gt; RequestMethod
succ :: RequestMethod -&gt; RequestMethod
$csucc :: RequestMethod -&gt; RequestMethod
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687986000"><span id="local-6989586621687986002"><span class="annot"><span class="annottext">RequestMethod
RequestMethod -&gt; RequestMethod -&gt; Bounded RequestMethod
forall a. a -&gt; a -&gt; Bounded a
maxBound :: RequestMethod
$cmaxBound :: RequestMethod
minBound :: RequestMethod
$cminBound :: RequestMethod
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. RequestMethod -&gt; Rep RequestMethod x)
-&gt; (forall x. Rep RequestMethod x -&gt; RequestMethod)
-&gt; Generic RequestMethod
forall x. Rep RequestMethod x -&gt; RequestMethod
forall x. RequestMethod -&gt; Rep RequestMethod x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep RequestMethod x -&gt; RequestMethod
$cfrom :: forall x. RequestMethod -&gt; Rep RequestMethod x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderRequestMethod"><span class="hs-identifier hs-type">renderRequestMethod</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-204"></span><span id="renderRequestMethod"><span class="annot"><span class="annottext">renderRequestMethod :: RequestMethod -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderRequestMethod"><span class="hs-identifier hs-var hs-var">renderRequestMethod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#GET"><span class="hs-identifier hs-var">GET</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;GET&quot;</span></span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#POST"><span class="hs-identifier hs-var">POST</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;POST&quot;</span></span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#PUT"><span class="hs-identifier hs-var">PUT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PUT&quot;</span></span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#PATCH"><span class="hs-identifier hs-var">PATCH</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PATCH&quot;</span></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#DELETE"><span class="hs-identifier hs-var">DELETE</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DELETE&quot;</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985989"><span id="local-6989586621687985991"><span id="local-6989586621687985993"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621687985988"><span class="annot"><span class="annottext">toJSON :: RequestMethod -&gt; Value
</span><a href="#local-6989586621687985988"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (RequestMethod -&gt; Text) -&gt; RequestMethod -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderRequestMethod"><span class="hs-identifier hs-var">renderRequestMethod</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985983"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621687985982"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser RequestMethod
</span><a href="#local-6989586621687985982"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser RequestMethod) -&gt; Value -&gt; Parser RequestMethod
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RequestMethod&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;GET&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#GET"><span class="hs-identifier hs-var">GET</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;POST&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#POST"><span class="hs-identifier hs-var">POST</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PUT&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#PUT"><span class="hs-identifier hs-var">PUT</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PATCH&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#PATCH"><span class="hs-identifier hs-var">PATCH</span></a></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DELETE&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Parser RequestMethod
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#DELETE"><span class="hs-identifier hs-var">DELETE</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser RequestMethod
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid Request Method&quot;</span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985979"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985976"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestMethod"><span class="hs-identifier hs-type">RequestMethod</span></a></span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- | Available Template Languages</span><span>
</span><span id="line-228"></span><span id="local-6989586621687985974"><span id="local-6989586621687985975"></span></span><span class="hs-keyword">data</span><span> </span><span id="TemplatingEngine"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-var">TemplatingEngine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Kriti"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985968"><span id="local-6989586621687985970"><span id="local-6989586621687985972"><span class="annot"><span class="annottext">Int -&gt; TemplatingEngine -&gt; ShowS
[TemplatingEngine] -&gt; ShowS
TemplatingEngine -&gt; String
(Int -&gt; TemplatingEngine -&gt; ShowS)
-&gt; (TemplatingEngine -&gt; String)
-&gt; ([TemplatingEngine] -&gt; ShowS)
-&gt; Show TemplatingEngine
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TemplatingEngine] -&gt; ShowS
$cshowList :: [TemplatingEngine] -&gt; ShowS
show :: TemplatingEngine -&gt; String
$cshow :: TemplatingEngine -&gt; String
showsPrec :: Int -&gt; TemplatingEngine -&gt; ShowS
$cshowsPrec :: Int -&gt; TemplatingEngine -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985964"><span id="local-6989586621687985966"><span class="annot"><span class="annottext">TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
(TemplatingEngine -&gt; TemplatingEngine -&gt; Bool)
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; Bool)
-&gt; Eq TemplatingEngine
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$c/= :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
== :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
$c== :: TemplatingEngine -&gt; TemplatingEngine -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985948"><span id="local-6989586621687985950"><span id="local-6989586621687985952"><span id="local-6989586621687985954"><span id="local-6989586621687985956"><span id="local-6989586621687985958"><span id="local-6989586621687985960"><span id="local-6989586621687985962"><span class="annot"><span class="annottext">Int -&gt; TemplatingEngine
TemplatingEngine -&gt; Int
TemplatingEngine -&gt; [TemplatingEngine]
TemplatingEngine -&gt; TemplatingEngine
TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
(TemplatingEngine -&gt; TemplatingEngine)
-&gt; (TemplatingEngine -&gt; TemplatingEngine)
-&gt; (Int -&gt; TemplatingEngine)
-&gt; (TemplatingEngine -&gt; Int)
-&gt; (TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; (TemplatingEngine
    -&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine])
-&gt; Enum TemplatingEngine
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromThenTo :: TemplatingEngine
-&gt; TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFromTo :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromTo :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFromThen :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
$cenumFromThen :: TemplatingEngine -&gt; TemplatingEngine -&gt; [TemplatingEngine]
enumFrom :: TemplatingEngine -&gt; [TemplatingEngine]
$cenumFrom :: TemplatingEngine -&gt; [TemplatingEngine]
fromEnum :: TemplatingEngine -&gt; Int
$cfromEnum :: TemplatingEngine -&gt; Int
toEnum :: Int -&gt; TemplatingEngine
$ctoEnum :: Int -&gt; TemplatingEngine
pred :: TemplatingEngine -&gt; TemplatingEngine
$cpred :: TemplatingEngine -&gt; TemplatingEngine
succ :: TemplatingEngine -&gt; TemplatingEngine
$csucc :: TemplatingEngine -&gt; TemplatingEngine
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985944"><span id="local-6989586621687985946"><span class="annot"><span class="annottext">TemplatingEngine
TemplatingEngine -&gt; TemplatingEngine -&gt; Bounded TemplatingEngine
forall a. a -&gt; a -&gt; Bounded a
maxBound :: TemplatingEngine
$cmaxBound :: TemplatingEngine
minBound :: TemplatingEngine
$cminBound :: TemplatingEngine
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TemplatingEngine -&gt; Rep TemplatingEngine x)
-&gt; (forall x. Rep TemplatingEngine x -&gt; TemplatingEngine)
-&gt; Generic TemplatingEngine
forall x. Rep TemplatingEngine x -&gt; TemplatingEngine
forall x. TemplatingEngine -&gt; Rep TemplatingEngine x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TemplatingEngine x -&gt; TemplatingEngine
$cfrom :: forall x. TemplatingEngine -&gt; Rep TemplatingEngine x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-type">renderTemplatingEngine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-232"></span><span id="renderTemplatingEngine"><span class="annot"><span class="annottext">renderTemplatingEngine :: TemplatingEngine -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-var hs-var">renderTemplatingEngine</span></a></span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Kriti&quot;</span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985938"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-235"></span><span>  </span><span id="local-6989586621687985937"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TemplatingEngine
</span><a href="#local-6989586621687985937"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser TemplatingEngine)
-&gt; Value
-&gt; Parser TemplatingEngine
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TemplatingEngine&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Kriti&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Parser TemplatingEngine
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser TemplatingEngine
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid TemplatingEngine&quot;</span></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985930"><span id="local-6989586621687985932"><span id="local-6989586621687985934"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>  </span><span id="local-6989586621687985929"><span class="annot"><span class="annottext">toJSON :: TemplatingEngine -&gt; Value
</span><a href="#local-6989586621687985929"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (TemplatingEngine -&gt; Text) -&gt; TemplatingEngine -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderTemplatingEngine"><span class="hs-identifier hs-var">renderTemplatingEngine</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985927"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985924"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- | Unparsed Kriti templating code</span><span>
</span><span id="line-247"></span><span id="local-6989586621687985922"><span id="local-6989586621687985923"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="TemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unTemplateText"><span class="annot"><span class="annottext">TemplateText -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unTemplateText"><span class="hs-identifier hs-var hs-var">unTemplateText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985914"><span id="local-6989586621687985916"><span id="local-6989586621687985918"><span class="annot"><span class="annottext">Int -&gt; TemplateText -&gt; ShowS
[TemplateText] -&gt; ShowS
TemplateText -&gt; String
(Int -&gt; TemplateText -&gt; ShowS)
-&gt; (TemplateText -&gt; String)
-&gt; ([TemplateText] -&gt; ShowS)
-&gt; Show TemplateText
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TemplateText] -&gt; ShowS
$cshowList :: [TemplateText] -&gt; ShowS
show :: TemplateText -&gt; String
$cshow :: TemplateText -&gt; String
showsPrec :: Int -&gt; TemplateText -&gt; ShowS
$cshowsPrec :: Int -&gt; TemplateText -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985910"><span id="local-6989586621687985912"><span class="annot"><span class="annottext">TemplateText -&gt; TemplateText -&gt; Bool
(TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool) -&gt; Eq TemplateText
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TemplateText -&gt; TemplateText -&gt; Bool
$c/= :: TemplateText -&gt; TemplateText -&gt; Bool
== :: TemplateText -&gt; TemplateText -&gt; Bool
$c== :: TemplateText -&gt; TemplateText -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985895"><span id="local-6989586621687985897"><span id="local-6989586621687985899"><span id="local-6989586621687985901"><span id="local-6989586621687985903"><span id="local-6989586621687985905"><span id="local-6989586621687985907"><span class="annot"><span class="annottext">Eq TemplateText
Eq TemplateText
-&gt; (TemplateText -&gt; TemplateText -&gt; Ordering)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; Bool)
-&gt; (TemplateText -&gt; TemplateText -&gt; TemplateText)
-&gt; (TemplateText -&gt; TemplateText -&gt; TemplateText)
-&gt; Ord TemplateText
TemplateText -&gt; TemplateText -&gt; Bool
TemplateText -&gt; TemplateText -&gt; Ordering
TemplateText -&gt; TemplateText -&gt; TemplateText
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TemplateText -&gt; TemplateText -&gt; TemplateText
$cmin :: TemplateText -&gt; TemplateText -&gt; TemplateText
max :: TemplateText -&gt; TemplateText -&gt; TemplateText
$cmax :: TemplateText -&gt; TemplateText -&gt; TemplateText
&gt;= :: TemplateText -&gt; TemplateText -&gt; Bool
$c&gt;= :: TemplateText -&gt; TemplateText -&gt; Bool
&gt; :: TemplateText -&gt; TemplateText -&gt; Bool
$c&gt; :: TemplateText -&gt; TemplateText -&gt; Bool
&lt;= :: TemplateText -&gt; TemplateText -&gt; Bool
$c&lt;= :: TemplateText -&gt; TemplateText -&gt; Bool
&lt; :: TemplateText -&gt; TemplateText -&gt; Bool
$c&lt; :: TemplateText -&gt; TemplateText -&gt; Bool
compare :: TemplateText -&gt; TemplateText -&gt; Ordering
$ccompare :: TemplateText -&gt; TemplateText -&gt; Ordering
$cp1Ord :: Eq TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TemplateText -&gt; Rep TemplateText x)
-&gt; (forall x. Rep TemplateText x -&gt; TemplateText)
-&gt; Generic TemplateText
forall x. Rep TemplateText x -&gt; TemplateText
forall x. TemplateText -&gt; Rep TemplateText x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TemplateText x -&gt; TemplateText
$cfrom :: forall x. TemplateText -&gt; Rep TemplateText x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985888"><span id="local-6989586621687985890"><span class="annot"><span class="annottext">Int -&gt; TemplateText -&gt; Int
TemplateText -&gt; Int
(Int -&gt; TemplateText -&gt; Int)
-&gt; (TemplateText -&gt; Int) -&gt; Hashable TemplateText
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: TemplateText -&gt; Int
$chash :: TemplateText -&gt; Int
hashWithSalt :: Int -&gt; TemplateText -&gt; Int
$chashWithSalt :: Int -&gt; TemplateText -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985883"><span id="local-6989586621687985885"><span class="annot"><span class="annottext">ToJSONKeyFunction [TemplateText]
ToJSONKeyFunction TemplateText
ToJSONKeyFunction TemplateText
-&gt; ToJSONKeyFunction [TemplateText] -&gt; ToJSONKey TemplateText
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [TemplateText]
$ctoJSONKeyList :: ToJSONKeyFunction [TemplateText]
toJSONKey :: ToJSONKeyFunction TemplateText
$ctoJSONKey :: ToJSONKeyFunction TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSONKey</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985878"><span id="local-6989586621687985880"><span class="annot"><span class="annottext">FromJSONKeyFunction [TemplateText]
FromJSONKeyFunction TemplateText
FromJSONKeyFunction TemplateText
-&gt; FromJSONKeyFunction [TemplateText] -&gt; FromJSONKey TemplateText
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [TemplateText]
$cfromJSONKeyList :: FromJSONKeyFunction [TemplateText]
fromJSONKey :: FromJSONKeyFunction TemplateText
$cfromJSONKey :: FromJSONKeyFunction TemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSONKey</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985875"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985872"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985869"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>  </span><span id="local-6989586621687985868"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TemplateText
</span><a href="#local-6989586621687985868"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser TemplateText) -&gt; Value -&gt; Parser TemplateText
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TemplateText&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687985867"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985867"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985866"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621687985866"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985867"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-258"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either ParseError ValueExt
</span><span class="hs-identifier hs-var">parser</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985866"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-259"></span><span>          </span><span class="hs-comment">-- TODO: Use the parsed ValueExt in MetadataRequestTransform so that we</span><span>
</span><span id="line-260"></span><span>          </span><span class="hs-comment">-- don't have to parse at every request.</span><span>
</span><span id="line-261"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ValueExt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Parser TemplateText
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TemplateText -&gt; Parser TemplateText)
-&gt; TemplateText -&gt; Parser TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; TemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-var">TemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985867"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-262"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687985864"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621687985864"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-263"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RenderedError</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985862"><span class="annot"><span class="annottext">Text
_message :: RenderedError -&gt; Text
_message :: Text
</span><span class="hs-identifier hs-var hs-var">_message</span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; RenderedError
forall e. RenderError e =&gt; e -&gt; RenderedError
</span><span class="hs-identifier hs-var">render</span></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621687985864"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-264"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser TemplateText
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser TemplateText) -&gt; String -&gt; Parser TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985862"><span class="hs-identifier hs-var">_message</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985853"><span id="local-6989586621687985855"><span id="local-6989586621687985857"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621687985852"><span class="annot"><span class="annottext">toJSON :: TemplateText -&gt; Value
</span><a href="#local-6989586621687985852"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (TemplateText -&gt; Text) -&gt; TemplateText -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TemplateText -&gt; Text
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | Unparsed Kriti templating code for string interpolations only.</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- NOTE: WE are highly coupled to Kriti at this point and will likely</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- need to rethink Kriti string interpolation when we start adding</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- other template engines.</span><span>
</span><span id="line-273"></span><span id="local-6989586621687985850"><span id="local-6989586621687985851"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="StringTemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StringTemplateText"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unStringTemplateText"><span class="annot"><span class="annottext">StringTemplateText -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unStringTemplateText"><span class="hs-identifier hs-var hs-var">unStringTemplateText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985842"><span id="local-6989586621687985844"><span id="local-6989586621687985846"><span class="annot"><span class="annottext">Int -&gt; StringTemplateText -&gt; ShowS
[StringTemplateText] -&gt; ShowS
StringTemplateText -&gt; String
(Int -&gt; StringTemplateText -&gt; ShowS)
-&gt; (StringTemplateText -&gt; String)
-&gt; ([StringTemplateText] -&gt; ShowS)
-&gt; Show StringTemplateText
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [StringTemplateText] -&gt; ShowS
$cshowList :: [StringTemplateText] -&gt; ShowS
show :: StringTemplateText -&gt; String
$cshow :: StringTemplateText -&gt; String
showsPrec :: Int -&gt; StringTemplateText -&gt; ShowS
$cshowsPrec :: Int -&gt; StringTemplateText -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985838"><span id="local-6989586621687985840"><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText -&gt; Bool
(StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; Eq StringTemplateText
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c/= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
== :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c== :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985823"><span id="local-6989586621687985825"><span id="local-6989586621687985827"><span id="local-6989586621687985829"><span id="local-6989586621687985831"><span id="local-6989586621687985833"><span id="local-6989586621687985835"><span class="annot"><span class="annottext">Eq StringTemplateText
Eq StringTemplateText
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Ordering)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; Bool)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText)
-&gt; (StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText)
-&gt; Ord StringTemplateText
StringTemplateText -&gt; StringTemplateText -&gt; Bool
StringTemplateText -&gt; StringTemplateText -&gt; Ordering
StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
$cmin :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
max :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
$cmax :: StringTemplateText -&gt; StringTemplateText -&gt; StringTemplateText
&gt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&gt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&gt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&gt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&lt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&lt;= :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
&lt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
$c&lt; :: StringTemplateText -&gt; StringTemplateText -&gt; Bool
compare :: StringTemplateText -&gt; StringTemplateText -&gt; Ordering
$ccompare :: StringTemplateText -&gt; StringTemplateText -&gt; Ordering
$cp1Ord :: Eq StringTemplateText
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. StringTemplateText -&gt; Rep StringTemplateText x)
-&gt; (forall x. Rep StringTemplateText x -&gt; StringTemplateText)
-&gt; Generic StringTemplateText
forall x. Rep StringTemplateText x -&gt; StringTemplateText
forall x. StringTemplateText -&gt; Rep StringTemplateText x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep StringTemplateText x -&gt; StringTemplateText
$cfrom :: forall x. StringTemplateText -&gt; Rep StringTemplateText x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985817"><span id="local-6989586621687985819"><span class="annot"><span class="annottext">Int -&gt; StringTemplateText -&gt; Int
StringTemplateText -&gt; Int
(Int -&gt; StringTemplateText -&gt; Int)
-&gt; (StringTemplateText -&gt; Int) -&gt; Hashable StringTemplateText
forall a. (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: StringTemplateText -&gt; Int
$chash :: StringTemplateText -&gt; Int
hashWithSalt :: Int -&gt; StringTemplateText -&gt; Int
$chashWithSalt :: Int -&gt; StringTemplateText -&gt; Int
</span><a href="#local-6989586621687985817"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985813"><span id="local-6989586621687985815"><span class="annot"><span class="annottext">ToJSONKeyFunction [StringTemplateText]
ToJSONKeyFunction StringTemplateText
ToJSONKeyFunction StringTemplateText
-&gt; ToJSONKeyFunction [StringTemplateText]
-&gt; ToJSONKey StringTemplateText
forall a.
ToJSONKeyFunction a -&gt; ToJSONKeyFunction [a] -&gt; ToJSONKey a
toJSONKeyList :: ToJSONKeyFunction [StringTemplateText]
$ctoJSONKeyList :: ToJSONKeyFunction [StringTemplateText]
toJSONKey :: ToJSONKeyFunction StringTemplateText
$ctoJSONKey :: ToJSONKeyFunction StringTemplateText
</span><a href="#local-6989586621687985813"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSONKey</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985809"><span id="local-6989586621687985811"><span class="annot"><span class="annottext">FromJSONKeyFunction [StringTemplateText]
FromJSONKeyFunction StringTemplateText
FromJSONKeyFunction StringTemplateText
-&gt; FromJSONKeyFunction [StringTemplateText]
-&gt; FromJSONKey StringTemplateText
forall a.
FromJSONKeyFunction a -&gt; FromJSONKeyFunction [a] -&gt; FromJSONKey a
fromJSONKeyList :: FromJSONKeyFunction [StringTemplateText]
$cfromJSONKeyList :: FromJSONKeyFunction [StringTemplateText]
fromJSONKey :: FromJSONKeyFunction StringTemplateText
$cfromJSONKey :: FromJSONKeyFunction StringTemplateText
</span><a href="#local-6989586621687985809"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">J.FromJSONKey</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985807"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985804"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985801"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-282"></span><span>  </span><span id="local-6989586621687985800"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser StringTemplateText
</span><a href="#local-6989586621687985800"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser StringTemplateText)
-&gt; Value
-&gt; Parser StringTemplateText
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StringTemplateText&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687985799"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985799"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985798"><span class="annot"><span class="annottext">wrapped :: Text
</span><a href="#local-6989586621687985798"><span class="hs-identifier hs-var hs-var">wrapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985799"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-284"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either ParseError ValueExt
</span><span class="hs-identifier hs-var">parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985798"><span class="hs-identifier hs-var">wrapped</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-285"></span><span>          </span><span class="hs-comment">-- NOTE: We can't simplfy use the wrapped value because the</span><span>
</span><span id="line-286"></span><span>          </span><span class="hs-comment">-- 'FromJSONKey' instance uses coercion rather then this</span><span>
</span><span id="line-287"></span><span>          </span><span class="hs-comment">-- instance to wrap the newtype.  This means we would need to</span><span>
</span><span id="line-288"></span><span>          </span><span class="hs-comment">-- handle QueryParam keys explicitly in 'mkQueryParamsTransform'</span><span>
</span><span id="line-289"></span><span>          </span><span class="hs-comment">-- while values would be handled implicitliy via this aeson</span><span>
</span><span id="line-290"></span><span>          </span><span class="hs-comment">-- instance. That is confusing, so we just handle everything</span><span>
</span><span id="line-291"></span><span>          </span><span class="hs-comment">-- explicitly down the call stack.</span><span>
</span><span id="line-292"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ValueExt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Parser StringTemplateText
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Parser StringTemplateText)
-&gt; StringTemplateText -&gt; Parser StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985799"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-293"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687985797"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621687985797"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-294"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RenderedError</span></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985796"><span class="annot"><span class="annottext">Text
_message :: Text
_message :: RenderedError -&gt; Text
</span><a href="#local-6989586621687985796"><span class="hs-identifier hs-var hs-var">_message</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; RenderedError
forall e. RenderError e =&gt; e -&gt; RenderedError
</span><span class="hs-identifier hs-var">render</span></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621687985797"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-295"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser StringTemplateText
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser StringTemplateText)
-&gt; String -&gt; Parser StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985796"><span class="hs-identifier hs-var">_message</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985789"><span id="local-6989586621687985791"><span id="local-6989586621687985793"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621687985788"><span class="annot"><span class="annottext">toJSON :: StringTemplateText -&gt; Value
</span><a href="#local-6989586621687985788"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value)
-&gt; (StringTemplateText -&gt; Text) -&gt; StringTemplateText -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Text
</span><span class="hs-identifier hs-var">coerce</span></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-comment">-- | Wrap a template with escaped double quotes.</span><span>
</span><span id="line-301"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-type">wrapTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span>
</span><span id="line-302"></span><span id="wrapTemplate"><span class="annot"><span class="annottext">wrapTemplate :: StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var hs-var">wrapTemplate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span id="local-6989586621687985786"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985786"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-var">StringTemplateText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; StringTemplateText) -&gt; Text -&gt; StringTemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985786"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621687985784"><span id="local-6989586621687985785"></span></span><span class="hs-keyword">data</span><span> </span><span id="ContentType"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-var">ContentType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JSON"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="XWWWFORM"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#XWWWFORM"><span class="hs-identifier hs-var">XWWWFORM</span></a></span></span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985776"><span id="local-6989586621687985778"><span id="local-6989586621687985780"><span class="annot"><span class="annottext">Int -&gt; ContentType -&gt; ShowS
[ContentType] -&gt; ShowS
ContentType -&gt; String
(Int -&gt; ContentType -&gt; ShowS)
-&gt; (ContentType -&gt; String)
-&gt; ([ContentType] -&gt; ShowS)
-&gt; Show ContentType
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ContentType] -&gt; ShowS
$cshowList :: [ContentType] -&gt; ShowS
show :: ContentType -&gt; String
$cshow :: ContentType -&gt; String
showsPrec :: Int -&gt; ContentType -&gt; ShowS
$cshowsPrec :: Int -&gt; ContentType -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985772"><span id="local-6989586621687985774"><span class="annot"><span class="annottext">ContentType -&gt; ContentType -&gt; Bool
(ContentType -&gt; ContentType -&gt; Bool)
-&gt; (ContentType -&gt; ContentType -&gt; Bool) -&gt; Eq ContentType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ContentType -&gt; ContentType -&gt; Bool
$c/= :: ContentType -&gt; ContentType -&gt; Bool
== :: ContentType -&gt; ContentType -&gt; Bool
$c== :: ContentType -&gt; ContentType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985756"><span id="local-6989586621687985758"><span id="local-6989586621687985760"><span id="local-6989586621687985762"><span id="local-6989586621687985764"><span id="local-6989586621687985766"><span id="local-6989586621687985768"><span id="local-6989586621687985770"><span class="annot"><span class="annottext">Int -&gt; ContentType
ContentType -&gt; Int
ContentType -&gt; [ContentType]
ContentType -&gt; ContentType
ContentType -&gt; ContentType -&gt; [ContentType]
ContentType -&gt; ContentType -&gt; ContentType -&gt; [ContentType]
(ContentType -&gt; ContentType)
-&gt; (ContentType -&gt; ContentType)
-&gt; (Int -&gt; ContentType)
-&gt; (ContentType -&gt; Int)
-&gt; (ContentType -&gt; [ContentType])
-&gt; (ContentType -&gt; ContentType -&gt; [ContentType])
-&gt; (ContentType -&gt; ContentType -&gt; [ContentType])
-&gt; (ContentType -&gt; ContentType -&gt; ContentType -&gt; [ContentType])
-&gt; Enum ContentType
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: ContentType -&gt; ContentType -&gt; ContentType -&gt; [ContentType]
$cenumFromThenTo :: ContentType -&gt; ContentType -&gt; ContentType -&gt; [ContentType]
enumFromTo :: ContentType -&gt; ContentType -&gt; [ContentType]
$cenumFromTo :: ContentType -&gt; ContentType -&gt; [ContentType]
enumFromThen :: ContentType -&gt; ContentType -&gt; [ContentType]
$cenumFromThen :: ContentType -&gt; ContentType -&gt; [ContentType]
enumFrom :: ContentType -&gt; [ContentType]
$cenumFrom :: ContentType -&gt; [ContentType]
fromEnum :: ContentType -&gt; Int
$cfromEnum :: ContentType -&gt; Int
toEnum :: Int -&gt; ContentType
$ctoEnum :: Int -&gt; ContentType
pred :: ContentType -&gt; ContentType
$cpred :: ContentType -&gt; ContentType
succ :: ContentType -&gt; ContentType
$csucc :: ContentType -&gt; ContentType
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985752"><span id="local-6989586621687985754"><span class="annot"><span class="annottext">ContentType
ContentType -&gt; ContentType -&gt; Bounded ContentType
forall a. a -&gt; a -&gt; Bounded a
maxBound :: ContentType
$cmaxBound :: ContentType
minBound :: ContentType
$cminBound :: ContentType
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ContentType -&gt; Rep ContentType x)
-&gt; (forall x. Rep ContentType x -&gt; ContentType)
-&gt; Generic ContentType
forall x. Rep ContentType x -&gt; ContentType
forall x. ContentType -&gt; Rep ContentType x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ContentType x -&gt; ContentType
$cfrom :: forall x. ContentType -&gt; Rep ContentType x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderContentType"><span class="hs-identifier hs-type">renderContentType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-308"></span><span id="renderContentType"><span class="annot"><span class="annottext">renderContentType :: ContentType -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderContentType"><span class="hs-identifier hs-var hs-var">renderContentType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-309"></span><span>  </span><span class="annot"><span class="annottext">ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application/json&quot;</span></span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><span class="annottext">ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#XWWWFORM"><span class="hs-identifier hs-var">XWWWFORM</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application/x-www-form-urlencoded&quot;</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985742"><span id="local-6989586621687985744"><span id="local-6989586621687985746"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621687985741"><span class="annot"><span class="annottext">toJSON :: ContentType -&gt; Value
</span><a href="#local-6989586621687985741"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (ContentType -&gt; Text) -&gt; ContentType -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ContentType -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderContentType"><span class="hs-identifier hs-var">renderContentType</span></a></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985738"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>  </span><span id="local-6989586621687985737"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ContentType
</span><a href="#local-6989586621687985737"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser ContentType) -&gt; Value -&gt; Parser ContentType
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ContentType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application/json&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContentType -&gt; Parser ContentType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#JSON"><span class="hs-identifier hs-var">JSON</span></a></span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application/x-www-form-urlencoded&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ContentType -&gt; Parser ContentType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#XWWWFORM"><span class="hs-identifier hs-var">XWWWFORM</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser ContentType
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid ContentType&quot;</span></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985735"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985732"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ContentType"><span class="hs-identifier hs-type">ContentType</span></a></span></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">-- | This newtype exists solely to anchor a `FromJSON` instance and is</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- eliminated in the `TransformHeaders` `FromJSON` instance.</span><span>
</span><span id="line-327"></span><span id="local-6989586621687985730"><span id="local-6989586621687985731"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="HeaderKey"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HeaderKey"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unHeaderKey"><span class="annot"><span class="annottext">HeaderKey -&gt; CI Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unHeaderKey"><span class="hs-identifier hs-var hs-var">unHeaderKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985722"><span id="local-6989586621687985724"><span id="local-6989586621687985726"><span class="annot"><span class="annottext">Int -&gt; HeaderKey -&gt; ShowS
[HeaderKey] -&gt; ShowS
HeaderKey -&gt; String
(Int -&gt; HeaderKey -&gt; ShowS)
-&gt; (HeaderKey -&gt; String)
-&gt; ([HeaderKey] -&gt; ShowS)
-&gt; Show HeaderKey
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HeaderKey] -&gt; ShowS
$cshowList :: [HeaderKey] -&gt; ShowS
show :: HeaderKey -&gt; String
$cshow :: HeaderKey -&gt; String
showsPrec :: Int -&gt; HeaderKey -&gt; ShowS
$cshowsPrec :: Int -&gt; HeaderKey -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985718"><span id="local-6989586621687985720"><span class="annot"><span class="annottext">HeaderKey -&gt; HeaderKey -&gt; Bool
(HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool) -&gt; Eq HeaderKey
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c/= :: HeaderKey -&gt; HeaderKey -&gt; Bool
== :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c== :: HeaderKey -&gt; HeaderKey -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985703"><span id="local-6989586621687985705"><span id="local-6989586621687985707"><span id="local-6989586621687985709"><span id="local-6989586621687985711"><span id="local-6989586621687985713"><span id="local-6989586621687985715"><span class="annot"><span class="annottext">Eq HeaderKey
Eq HeaderKey
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Ordering)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; Bool)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; HeaderKey)
-&gt; (HeaderKey -&gt; HeaderKey -&gt; HeaderKey)
-&gt; Ord HeaderKey
HeaderKey -&gt; HeaderKey -&gt; Bool
HeaderKey -&gt; HeaderKey -&gt; Ordering
HeaderKey -&gt; HeaderKey -&gt; HeaderKey
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
$cmin :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
max :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
$cmax :: HeaderKey -&gt; HeaderKey -&gt; HeaderKey
&gt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&gt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
&gt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&gt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
&lt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&lt;= :: HeaderKey -&gt; HeaderKey -&gt; Bool
&lt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
$c&lt; :: HeaderKey -&gt; HeaderKey -&gt; Bool
compare :: HeaderKey -&gt; HeaderKey -&gt; Ordering
$ccompare :: HeaderKey -&gt; HeaderKey -&gt; Ordering
$cp1Ord :: Eq HeaderKey
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. HeaderKey -&gt; Rep HeaderKey x)
-&gt; (forall x. Rep HeaderKey x -&gt; HeaderKey) -&gt; Generic HeaderKey
forall x. Rep HeaderKey x -&gt; HeaderKey
forall x. HeaderKey -&gt; Rep HeaderKey x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep HeaderKey x -&gt; HeaderKey
$cfrom :: forall x. HeaderKey -&gt; Rep HeaderKey x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985699"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-type">HeaderKey</span></a></span></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985696"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-type">HeaderKey</span></a></span></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985693"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-type">HeaderKey</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>  </span><span id="local-6989586621687985692"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HeaderKey
</span><a href="#local-6989586621687985692"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser HeaderKey) -&gt; Value -&gt; Parser HeaderKey
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HeaderKey&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687985691"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985691"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985691"><span class="hs-identifier hs-var">txt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="annottext">CI Text
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser HeaderKey
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Restricted Header: Content-Type&quot;</span></span><span>
</span><span id="line-337"></span><span>    </span><span id="local-6989586621687985689"><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985689"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HeaderKey -&gt; Parser HeaderKey
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(HeaderKey -&gt; Parser HeaderKey) -&gt; HeaderKey -&gt; Parser HeaderKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; HeaderKey
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#HeaderKey"><span class="hs-identifier hs-var">HeaderKey</span></a></span><span> </span><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985689"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span id="local-6989586621687985687"><span id="local-6989586621687985688"></span></span><span class="hs-keyword">data</span><span> </span><span id="TransformHeaders"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransformHeaders"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="addHeaders"><span class="annot"><span class="annottext">TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#addHeaders"><span class="hs-identifier hs-var hs-var">addHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-341"></span><span>    </span><span id="removeHeaders"><span class="annot"><span class="annottext">TransformHeaders -&gt; [CI Text]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#removeHeaders"><span class="hs-identifier hs-var hs-var">removeHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">CI.CI</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985678"><span id="local-6989586621687985680"><span id="local-6989586621687985682"><span class="annot"><span class="annottext">Int -&gt; TransformHeaders -&gt; ShowS
[TransformHeaders] -&gt; ShowS
TransformHeaders -&gt; String
(Int -&gt; TransformHeaders -&gt; ShowS)
-&gt; (TransformHeaders -&gt; String)
-&gt; ([TransformHeaders] -&gt; ShowS)
-&gt; Show TransformHeaders
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransformHeaders] -&gt; ShowS
$cshowList :: [TransformHeaders] -&gt; ShowS
show :: TransformHeaders -&gt; String
$cshow :: TransformHeaders -&gt; String
showsPrec :: Int -&gt; TransformHeaders -&gt; ShowS
$cshowsPrec :: Int -&gt; TransformHeaders -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985674"><span id="local-6989586621687985676"><span class="annot"><span class="annottext">TransformHeaders -&gt; TransformHeaders -&gt; Bool
(TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; Eq TransformHeaders
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c/= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
== :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c== :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985659"><span id="local-6989586621687985661"><span id="local-6989586621687985663"><span id="local-6989586621687985665"><span id="local-6989586621687985667"><span id="local-6989586621687985669"><span id="local-6989586621687985671"><span class="annot"><span class="annottext">Eq TransformHeaders
Eq TransformHeaders
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Ordering)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; Bool)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders)
-&gt; (TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders)
-&gt; Ord TransformHeaders
TransformHeaders -&gt; TransformHeaders -&gt; Bool
TransformHeaders -&gt; TransformHeaders -&gt; Ordering
TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
$cmin :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
max :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
$cmax :: TransformHeaders -&gt; TransformHeaders -&gt; TransformHeaders
&gt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&gt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&gt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&gt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&lt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&lt;= :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
&lt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
$c&lt; :: TransformHeaders -&gt; TransformHeaders -&gt; Bool
compare :: TransformHeaders -&gt; TransformHeaders -&gt; Ordering
$ccompare :: TransformHeaders -&gt; TransformHeaders -&gt; Ordering
$cp1Ord :: Eq TransformHeaders
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TransformHeaders -&gt; Rep TransformHeaders x)
-&gt; (forall x. Rep TransformHeaders x -&gt; TransformHeaders)
-&gt; Generic TransformHeaders
forall x. Rep TransformHeaders x -&gt; TransformHeaders
forall x. TransformHeaders -&gt; Rep TransformHeaders x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TransformHeaders x -&gt; TransformHeaders
$cfrom :: forall x. TransformHeaders -&gt; Rep TransformHeaders x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985655"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985652"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985645"><span id="local-6989586621687985647"><span id="local-6989586621687985649"><span class="annot"><span class="hs-identifier hs-type">J.ToJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-350"></span><span>  </span><span id="local-6989586621687985644"><span class="annot"><span class="annottext">toJSON :: TransformHeaders -&gt; Value
</span><a href="#local-6989586621687985644"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985642"><span id="local-6989586621687985643"><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
[CI Text]
removeHeaders :: [CI Text]
addHeaders :: [(CI Text, StringTemplateText)]
removeHeaders :: TransformHeaders -&gt; [CI Text]
addHeaders :: TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985642"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;add_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashMap Text StringTemplateText -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">[(Text, StringTemplateText)] -&gt; HashMap Text StringTemplateText
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((CI Text, StringTemplateText) -&gt; (Text, StringTemplateText))
-&gt; [(CI Text, StringTemplateText)] -&gt; [(Text, StringTemplateText)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; Text)
-&gt; (CI Text, StringTemplateText) -&gt; (Text, StringTemplateText)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985643"><span class="hs-identifier hs-var">addHeaders</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-353"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove_headers&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">(CI Text -&gt; Text) -&gt; [CI Text] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621687985642"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985638"><span class="annot"><span class="hs-identifier hs-type">J.FromJSON</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>  </span><span id="local-6989586621687985637"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser TransformHeaders
</span><a href="#local-6989586621687985637"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser TransformHeaders)
-&gt; Value
-&gt; Parser TransformHeaders
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">J.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TransformHeaders&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser TransformHeaders)
 -&gt; Value -&gt; Parser TransformHeaders)
-&gt; (Object -&gt; Parser TransformHeaders)
-&gt; Value
-&gt; Parser TransformHeaders
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687985636"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687985636"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621687985635"><span class="annot"><span class="annottext">HashMap Text StringTemplateText
</span><a href="#local-6989586621687985635"><span class="hs-identifier hs-var">addHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
-&gt; Maybe (HashMap Text StringTemplateText)
-&gt; HashMap Text StringTemplateText
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (HashMap Text StringTemplateText)
 -&gt; HashMap Text StringTemplateText)
-&gt; Parser (Maybe (HashMap Text StringTemplateText))
-&gt; Parser (HashMap Text StringTemplateText)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687985636"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe (HashMap Text StringTemplateText))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;add_headers&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985634"><span class="annot"><span class="annottext">headers :: [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985634"><span class="hs-identifier hs-var hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap (CI Text) StringTemplateText
-&gt; [(CI Text, StringTemplateText)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">(HashMap (CI Text) StringTemplateText
 -&gt; [(CI Text, StringTemplateText)])
-&gt; HashMap (CI Text) StringTemplateText
-&gt; [(CI Text, StringTemplateText)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; CI Text)
-&gt; HashMap Text StringTemplateText
-&gt; HashMap (CI Text) StringTemplateText
forall k2 k1 a.
(Eq k2, Hashable k2) =&gt;
(k1 -&gt; k2) -&gt; HashMap k1 a -&gt; HashMap k2 a
</span><a href="Hasura.Prelude.html#mapKeys"><span class="hs-identifier hs-var">mapKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; CI Text
forall s. FoldCase s =&gt; s -&gt; CI s
</span><span class="hs-identifier hs-var">CI.mk</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text StringTemplateText
</span><a href="#local-6989586621687985635"><span class="hs-identifier hs-var">addHeaders</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621687985632"><span class="annot"><span class="annottext">Maybe [HeaderKey]
</span><a href="#local-6989586621687985632"><span class="hs-identifier hs-var">removeHeaders</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621687985636"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe [HeaderKey])
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">J..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remove_headers&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985631"><span class="annot"><span class="annottext">removeHeaders' :: [CI Text]
</span><a href="#local-6989586621687985631"><span class="hs-identifier hs-var hs-var">removeHeaders'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HeaderKey -&gt; CI Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#unHeaderKey"><span class="hs-identifier hs-var hs-var">unHeaderKey</span></a></span><span> </span><span class="annot"><span class="annottext">(HeaderKey -&gt; CI Text) -&gt; [HeaderKey] -&gt; [CI Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[HeaderKey] -&gt; Maybe [HeaderKey] -&gt; [HeaderKey]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">[HeaderKey]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Maybe [HeaderKey]
</span><a href="#local-6989586621687985632"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><span class="annottext">TransformHeaders -&gt; Parser TransformHeaders
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TransformHeaders -&gt; Parser TransformHeaders)
-&gt; TransformHeaders -&gt; Parser TransformHeaders
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)] -&gt; [CI Text] -&gt; TransformHeaders
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-var">TransformHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985634"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621687985631"><span class="hs-identifier hs-var">removeHeaders'</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span id="local-6989586621687985629"><span id="local-6989586621687985630"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="TransformErrorBundle"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TransformErrorBundle"><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span></span><span> </span><span class="hs-special">{</span><span id="teMessages"><span class="annot"><span class="annottext">TransformErrorBundle -&gt; [Value]
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#teMessages"><span class="hs-identifier hs-var hs-var">teMessages</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985621"><span id="local-6989586621687985623"><span id="local-6989586621687985625"><span class="annot"><span class="annottext">Int -&gt; TransformErrorBundle -&gt; ShowS
[TransformErrorBundle] -&gt; ShowS
TransformErrorBundle -&gt; String
(Int -&gt; TransformErrorBundle -&gt; ShowS)
-&gt; (TransformErrorBundle -&gt; String)
-&gt; ([TransformErrorBundle] -&gt; ShowS)
-&gt; Show TransformErrorBundle
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [TransformErrorBundle] -&gt; ShowS
$cshowList :: [TransformErrorBundle] -&gt; ShowS
show :: TransformErrorBundle -&gt; String
$cshow :: TransformErrorBundle -&gt; String
showsPrec :: Int -&gt; TransformErrorBundle -&gt; ShowS
$cshowsPrec :: Int -&gt; TransformErrorBundle -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985617"><span id="local-6989586621687985619"><span class="annot"><span class="annottext">TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
(TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool)
-&gt; (TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool)
-&gt; Eq TransformErrorBundle
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$c/= :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
== :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
$c== :: TransformErrorBundle -&gt; TransformErrorBundle -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x)
-&gt; (forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle)
-&gt; Generic TransformErrorBundle
forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle
forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep TransformErrorBundle x -&gt; TransformErrorBundle
$cfrom :: forall x. TransformErrorBundle -&gt; Rep TransformErrorBundle x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687985609"><span id="local-6989586621687985611"><span id="local-6989586621687985613"><span class="annot"><span class="annottext">b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
(TransformErrorBundle
 -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; (NonEmpty TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; (forall b.
    Integral b =&gt;
    b -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; Semigroup TransformErrorBundle
forall b.
Integral b =&gt;
b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
stimes :: b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
$cstimes :: forall b.
Integral b =&gt;
b -&gt; TransformErrorBundle -&gt; TransformErrorBundle
sconcat :: NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
$csconcat :: NonEmpty TransformErrorBundle -&gt; TransformErrorBundle
&lt;&gt; :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
$c&lt;&gt; :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985601"><span id="local-6989586621687985603"><span id="local-6989586621687985605"><span class="annot"><span class="annottext">Semigroup TransformErrorBundle
TransformErrorBundle
Semigroup TransformErrorBundle
-&gt; TransformErrorBundle
-&gt; (TransformErrorBundle
    -&gt; TransformErrorBundle -&gt; TransformErrorBundle)
-&gt; ([TransformErrorBundle] -&gt; TransformErrorBundle)
-&gt; Monoid TransformErrorBundle
[TransformErrorBundle] -&gt; TransformErrorBundle
TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
forall a.
Semigroup a -&gt; a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
mconcat :: [TransformErrorBundle] -&gt; TransformErrorBundle
$cmconcat :: [TransformErrorBundle] -&gt; TransformErrorBundle
mappend :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
$cmappend :: TransformErrorBundle
-&gt; TransformErrorBundle -&gt; TransformErrorBundle
mempty :: TransformErrorBundle
$cmempty :: TransformErrorBundle
$cp1Monoid :: Semigroup TransformErrorBundle
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687985592"><span id="local-6989586621687985594"><span id="local-6989586621687985596"><span id="local-6989586621687985598"><span class="annot"><span class="annottext">[TransformErrorBundle] -&gt; Value
[TransformErrorBundle] -&gt; Encoding
TransformErrorBundle -&gt; Value
TransformErrorBundle -&gt; Encoding
(TransformErrorBundle -&gt; Value)
-&gt; (TransformErrorBundle -&gt; Encoding)
-&gt; ([TransformErrorBundle] -&gt; Value)
-&gt; ([TransformErrorBundle] -&gt; Encoding)
-&gt; ToJSON TransformErrorBundle
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [TransformErrorBundle] -&gt; Encoding
$ctoEncodingList :: [TransformErrorBundle] -&gt; Encoding
toJSONList :: [TransformErrorBundle] -&gt; Value
$ctoJSONList :: [TransformErrorBundle] -&gt; Value
toEncoding :: TransformErrorBundle -&gt; Encoding
$ctoEncoding :: TransformErrorBundle -&gt; Encoding
toJSON :: TransformErrorBundle -&gt; Value
$ctoJSON :: TransformErrorBundle -&gt; Value
</span><a href="#local-6989586621687985592"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">J.ToJSON</span></a></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985590"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687985587"><span class="annot"><a href="Hasura.Incremental.Internal.Dependency.html#Cacheable"><span class="hs-identifier hs-type">Cacheable</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-------------------------------</span><span>
</span><span id="line-373"></span><span class="hs-comment">--- Constructing Transforms ---</span><span>
</span><span id="line-374"></span><span class="hs-comment">-------------------------------</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- | Construct a `RequestTransform` from its metadata representation.</span><span>
</span><span id="line-377"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier hs-type">mkRequestTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span>
</span><span id="line-378"></span><span id="mkRequestTransform"><span class="annot"><span class="annottext">mkRequestTransform :: MetadataRequestTransform -&gt; RequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRequestTransform"><span class="hs-identifier hs-var hs-var">mkRequestTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataRequestTransform"><span class="hs-identifier hs-type">MetadataRequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985580"><span id="local-6989586621687985581"><span id="local-6989586621687985582"><span id="local-6989586621687985583"><span id="local-6989586621687985584"><span id="local-6989586621687985585"><span id="local-6989586621687985586"><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
Maybe TransformHeaders
Maybe ContentType
Maybe StringTemplateText
Maybe TemplateText
Maybe RequestMethod
TemplatingEngine
mtTemplatingEngine :: TemplatingEngine
mtRequestHeaders :: Maybe TransformHeaders
mtQueryParams :: Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtContentType :: Maybe ContentType
mtBodyTransform :: Maybe TemplateText
mtRequestURL :: Maybe StringTemplateText
mtRequestMethod :: Maybe RequestMethod
mtTemplatingEngine :: MetadataRequestTransform -&gt; TemplatingEngine
mtRequestHeaders :: MetadataRequestTransform -&gt; Maybe TransformHeaders
mtQueryParams :: MetadataRequestTransform
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
mtContentType :: MetadataRequestTransform -&gt; Maybe ContentType
mtBodyTransform :: MetadataRequestTransform -&gt; Maybe TemplateText
mtRequestURL :: MetadataRequestTransform -&gt; Maybe StringTemplateText
mtRequestMethod :: MetadataRequestTransform -&gt; Maybe RequestMethod
</span><a href="#local-6989586621687985580"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985579"><span class="annot"><span class="annottext">urlTransform :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621687985579"><span class="hs-identifier hs-var hs-var">urlTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-var">mkUrlTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985580"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Text)
-&gt; Maybe StringTemplateText
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe StringTemplateText
</span><a href="#local-6989586621687985585"><span class="hs-identifier hs-var">mtRequestURL</span></a></span><span>
</span><span id="line-380"></span><span>      </span><span id="local-6989586621687985577"><span class="annot"><span class="annottext">queryTransform :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621687985577"><span class="hs-identifier hs-var hs-var">queryTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Query
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-var">mkQueryParamsTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985580"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">([(StringTemplateText, Maybe StringTemplateText)]
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Query)
-&gt; Maybe [(StringTemplateText, Maybe StringTemplateText)]
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe [(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687985582"><span class="hs-identifier hs-var">mtQueryParams</span></a></span><span>
</span><span id="line-381"></span><span>      </span><span id="local-6989586621687985575"><span class="annot"><span class="annottext">headerTransform :: Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621687985575"><span class="hs-identifier hs-var hs-var">headerTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TransformHeaders
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-var">mkHeaderTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985580"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(TransformHeaders
 -&gt; ReqTransformCtx
 -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; Maybe TransformHeaders
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe TransformHeaders
</span><a href="#local-6989586621687985581"><span class="hs-identifier hs-var">mtRequestHeaders</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span id="local-6989586621687985573"><span class="annot"><span class="annottext">bodyTransform :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985573"><span class="hs-identifier hs-var hs-var">bodyTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985580"><span class="hs-identifier hs-var">mtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(TemplateText
 -&gt; ReqTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; Maybe TemplateText
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687985584"><span class="hs-identifier hs-var">mtBodyTransform</span></a></span><span>
</span><span id="line-383"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; Maybe ContentType
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
-&gt; RequestTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-var">RequestTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
</span><a href="#local-6989586621687985586"><span class="hs-identifier hs-var">mtRequestMethod</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621687985579"><span class="hs-identifier hs-var">urlTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985573"><span class="hs-identifier hs-var">bodyTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ContentType
</span><a href="#local-6989586621687985583"><span class="hs-identifier hs-var">mtContentType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621687985577"><span class="hs-identifier hs-var">queryTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621687985575"><span class="hs-identifier hs-var">headerTransform</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier hs-type">mkResponseTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span>
</span><span id="line-386"></span><span id="mkResponseTransform"><span class="annot"><span class="annottext">mkResponseTransform :: MetadataResponseTransform -&gt; ResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkResponseTransform"><span class="hs-identifier hs-var hs-var">mkResponseTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#MetadataResponseTransform"><span class="hs-identifier hs-type">MetadataResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985570"><span id="local-6989586621687985571"><span class="annot"><span class="annottext">Maybe TemplateText
TemplatingEngine
mrtTemplatingEngine :: TemplatingEngine
mrtBodyTransform :: Maybe TemplateText
mrtTemplatingEngine :: MetadataResponseTransform -&gt; TemplatingEngine
mrtBodyTransform :: MetadataResponseTransform -&gt; Maybe TemplateText
</span><a href="#local-6989586621687985570"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985569"><span class="annot"><span class="annottext">bodyTransform :: Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985569"><span class="hs-identifier hs-var hs-var">bodyTransform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; RespTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-var">mkRespTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985570"><span class="hs-identifier hs-var">mrtTemplatingEngine</span></a></span><span> </span><span class="annot"><span class="annottext">(TemplateText
 -&gt; RespTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; Maybe TemplateText
-&gt; Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe TemplateText
</span><a href="#local-6989586621687985571"><span class="hs-identifier hs-var">mrtBodyTransform</span></a></span><span>
</span><span id="line-388"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
-&gt; ResponseTransform
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-var">ResponseTransform</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985569"><span class="hs-identifier hs-var">bodyTransform</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-type">mkQueryParamsTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span>
</span><span id="line-391"></span><span id="mkQueryParamsTransform"><span class="annot"><span class="annottext">mkQueryParamsTransform :: TemplatingEngine
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Query
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkQueryParamsTransform"><span class="hs-identifier hs-var hs-var">mkQueryParamsTransform</span></a></span></span><span> </span><span id="local-6989586621687985567"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985567"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621687985566"><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687985566"><span class="hs-identifier hs-var">templates</span></a></span></span><span> </span><span id="local-6989586621687985565"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985565"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985564"><span class="annot"><span class="annottext">transform :: StringTemplateText -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985564"><span class="hs-identifier hs-var hs-var">transform</span></a></span></span><span> </span><span id="local-6989586621687985563"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985563"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-393"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985567"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; StringTemplateText)
-&gt; StringTemplateText -&gt; TemplateText
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var">wrapTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985563"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985565"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-394"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687985562"><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985562"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985562"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-395"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621687985561"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985561"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either TransformErrorBundle Text)
-&gt; Text -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985561"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-396"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Number</span></span><span> </span><span id="local-6989586621687985559"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621687985559"><span class="hs-identifier hs-var">num</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either TransformErrorBundle Text)
-&gt; Text -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621687985559"><span class="hs-identifier hs-var">num</span></a></span><span>
</span><span id="line-397"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either TransformErrorBundle Text)
-&gt; Text -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;true&quot;</span></span><span>
</span><span id="line-398"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either TransformErrorBundle Text)
-&gt; Text -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-399"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621687985556"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985556"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-400"></span><span>            </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; Either TransformErrorBundle Text)
-&gt; TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-401"></span><span>              </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-402"></span><span>                </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-403"></span><span>                  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-404"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-405"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Query Param Transforms must produce a String, Number, or Boolean value&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-406"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;value&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985556"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-407"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-408"></span><span>      </span><span class="annot"><a href="#local-6989586621687985555"><span class="hs-identifier hs-type">toValidation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Validation</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Validation</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-409"></span><span>      </span><span id="local-6989586621687985555"><span class="annot"><span class="annottext">toValidation :: [(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
-&gt; [(Validation TransformErrorBundle Text,
     Maybe (Validation TransformErrorBundle Text))]
</span><a href="#local-6989586621687985555"><span class="hs-identifier hs-var hs-var">toValidation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))
 -&gt; (Validation TransformErrorBundle Text,
     Maybe (Validation TransformErrorBundle Text)))
-&gt; [(Either TransformErrorBundle Text,
     Maybe (Either TransformErrorBundle Text))]
-&gt; [(Validation TransformErrorBundle Text,
     Maybe (Validation TransformErrorBundle Text))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either TransformErrorBundle Text
 -&gt; Validation TransformErrorBundle Text)
-&gt; (Maybe (Either TransformErrorBundle Text)
    -&gt; Maybe (Validation TransformErrorBundle Text))
-&gt; (Either TransformErrorBundle Text,
    Maybe (Either TransformErrorBundle Text))
-&gt; (Validation TransformErrorBundle Text,
    Maybe (Validation TransformErrorBundle Text))
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle Text
-&gt; Validation TransformErrorBundle Text
forall e a. Either e a -&gt; Validation e a
</span><span class="hs-identifier hs-var">eitherToValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either TransformErrorBundle Text
 -&gt; Validation TransformErrorBundle Text)
-&gt; Maybe (Either TransformErrorBundle Text)
-&gt; Maybe (Validation TransformErrorBundle Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle Text
-&gt; Validation TransformErrorBundle Text
forall e a. Either e a -&gt; Validation e a
</span><span class="hs-identifier hs-var">eitherToValidation</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>      </span><span class="annot"><a href="#local-6989586621687985553"><span class="hs-identifier hs-type">collectErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Validation</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-412"></span><span>      </span><span id="local-6989586621687985553"><span class="annot"><span class="annottext">collectErrors :: [(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
-&gt; Validation TransformErrorBundle [(Text, Maybe Text)]
</span><a href="#local-6989586621687985553"><span class="hs-identifier hs-var hs-var">collectErrors</span></a></span></span><span> </span><span id="local-6989586621687985552"><span class="annot"><span class="annottext">[(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
</span><a href="#local-6989586621687985552"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Validation TransformErrorBundle Text,
  Maybe (Validation TransformErrorBundle Text))
 -&gt; Validation TransformErrorBundle (Text, Maybe Text))
-&gt; [(Validation TransformErrorBundle Text,
     Maybe (Validation TransformErrorBundle Text))]
-&gt; Validation TransformErrorBundle [(Text, Maybe Text)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Validation TransformErrorBundle Text
 -&gt; Validation TransformErrorBundle Text)
-&gt; (Maybe (Validation TransformErrorBundle Text)
    -&gt; Validation TransformErrorBundle (Maybe Text))
-&gt; (Validation TransformErrorBundle Text,
    Maybe (Validation TransformErrorBundle Text))
-&gt; Validation TransformErrorBundle (Text, Maybe Text)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle Text
-&gt; Validation TransformErrorBundle Text
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Validation TransformErrorBundle Text)
-&gt; Validation TransformErrorBundle (Maybe Text)
forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Traversable t, Applicative f) =&gt;
t (f a) -&gt; f (t a)
</span><span class="hs-identifier hs-var">sequenceA</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
-&gt; [(Validation TransformErrorBundle Text,
     Maybe (Validation TransformErrorBundle Text))]
</span><a href="#local-6989586621687985555"><span class="hs-identifier hs-var">toValidation</span></a></span><span> </span><span class="annot"><span class="annottext">[(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
</span><a href="#local-6989586621687985552"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span>      </span><span id="local-6989586621687985547"><span class="annot"><span class="annottext">results :: [(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
</span><a href="#local-6989586621687985547"><span class="hs-identifier hs-var hs-var">results</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((StringTemplateText, Maybe StringTemplateText)
 -&gt; (Either TransformErrorBundle Text,
     Maybe (Either TransformErrorBundle Text)))
-&gt; [(StringTemplateText, Maybe StringTemplateText)]
-&gt; [(Either TransformErrorBundle Text,
     Maybe (Either TransformErrorBundle Text))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Either TransformErrorBundle Text)
-&gt; (Maybe StringTemplateText
    -&gt; Maybe (Either TransformErrorBundle Text))
-&gt; (StringTemplateText, Maybe StringTemplateText)
-&gt; (Either TransformErrorBundle Text,
    Maybe (Either TransformErrorBundle Text))
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985564"><span class="hs-identifier hs-var">transform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StringTemplateText -&gt; Either TransformErrorBundle Text)
-&gt; Maybe StringTemplateText
-&gt; Maybe (Either TransformErrorBundle Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985564"><span class="hs-identifier hs-var">transform</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(StringTemplateText, Maybe StringTemplateText)]
</span><a href="#local-6989586621687985566"><span class="hs-identifier hs-var">templates</span></a></span><span>
</span><span id="line-415"></span><span>      </span><span id="local-6989586621687985546"><span class="annot"><span class="annottext">collectedResults :: Either TransformErrorBundle [(Text, Maybe Text)]
</span><a href="#local-6989586621687985546"><span class="hs-identifier hs-var hs-var">collectedResults</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle [(Text, Maybe Text)]
-&gt; Either TransformErrorBundle [(Text, Maybe Text)]
forall e a. Validation e a -&gt; Either e a
</span><span class="hs-identifier hs-var">validationToEither</span></span><span> </span><span class="annot"><span class="annottext">(Validation TransformErrorBundle [(Text, Maybe Text)]
 -&gt; Either TransformErrorBundle [(Text, Maybe Text)])
-&gt; Validation TransformErrorBundle [(Text, Maybe Text)]
-&gt; Either TransformErrorBundle [(Text, Maybe Text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
-&gt; Validation TransformErrorBundle [(Text, Maybe Text)]
</span><a href="#local-6989586621687985553"><span class="hs-identifier hs-var">collectErrors</span></a></span><span> </span><span class="annot"><span class="annottext">[(Either TransformErrorBundle Text,
  Maybe (Either TransformErrorBundle Text))]
</span><a href="#local-6989586621687985547"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-416"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([(Text, Maybe Text)] -&gt; Query)
-&gt; Either TransformErrorBundle [(Text, Maybe Text)]
-&gt; Either TransformErrorBundle Query
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(([(Text, Maybe Text)] -&gt; Query)
 -&gt; Either TransformErrorBundle [(Text, Maybe Text)]
 -&gt; Either TransformErrorBundle Query)
-&gt; (((Text, Maybe Text) -&gt; (ByteString, Maybe ByteString))
    -&gt; [(Text, Maybe Text)] -&gt; Query)
-&gt; ((Text, Maybe Text) -&gt; (ByteString, Maybe ByteString))
-&gt; Either TransformErrorBundle [(Text, Maybe Text)]
-&gt; Either TransformErrorBundle Query
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Text, Maybe Text) -&gt; (ByteString, Maybe ByteString))
-&gt; [(Text, Maybe Text)] -&gt; Query
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; (Maybe Text -&gt; Maybe ByteString)
-&gt; (Text, Maybe Text)
-&gt; (ByteString, Maybe ByteString)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; Maybe Text -&gt; Maybe ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle [(Text, Maybe Text)]
</span><a href="#local-6989586621687985546"><span class="hs-identifier hs-var">collectedResults</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-comment">-- | Given a `TransformHeaders` and the `ReqTransformCtx`, Construct a</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- function to transform the existing headers.</span><span>
</span><span id="line-420"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-type">mkHeaderTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span id="mkHeaderTransform"><span class="annot"><span class="annottext">mkHeaderTransform :: TemplatingEngine
-&gt; TransformHeaders
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkHeaderTransform"><span class="hs-identifier hs-var hs-var">mkHeaderTransform</span></a></span></span><span> </span><span id="local-6989586621687985544"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985544"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformHeaders"><span class="hs-identifier hs-type">TransformHeaders</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985542"><span id="local-6989586621687985543"><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
[CI Text]
removeHeaders :: [CI Text]
addHeaders :: [(CI Text, StringTemplateText)]
removeHeaders :: TransformHeaders -&gt; [CI Text]
addHeaders :: TransformHeaders -&gt; [(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985542"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621687985541"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985541"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985540"><span class="annot"><span class="annottext">transform :: StringTemplateText -&gt; Validation TransformErrorBundle ByteString
</span><a href="#local-6989586621687985540"><span class="hs-identifier hs-var hs-var">transform</span></a></span></span><span> </span><span id="local-6989586621687985539"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985539"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-423"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985544"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StringTemplateText -&gt; TemplateText
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText -&gt; TemplateText)
-&gt; StringTemplateText -&gt; TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var">wrapTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985539"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985541"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-424"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687985538"><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985538"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Validation TransformErrorBundle ByteString
forall e a. e -&gt; Validation e a
</span><span class="hs-identifier hs-var">Failure</span></span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985538"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-425"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621687985536"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985536"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Validation TransformErrorBundle ByteString
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Validation TransformErrorBundle ByteString)
-&gt; ByteString -&gt; Validation TransformErrorBundle ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985536"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-426"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Number</span></span><span> </span><span id="local-6989586621687985534"><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621687985534"><span class="hs-identifier hs-var">num</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Validation TransformErrorBundle ByteString
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Validation TransformErrorBundle ByteString)
-&gt; ByteString -&gt; Validation TransformErrorBundle ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; Text -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Scientific -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><a href="#local-6989586621687985534"><span class="hs-identifier hs-var">num</span></a></span><span>
</span><span id="line-427"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Validation TransformErrorBundle ByteString
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;true&quot;</span></span><span>
</span><span id="line-428"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.Bool</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Validation TransformErrorBundle ByteString
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-429"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621687985533"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985533"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-430"></span><span>            </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Validation TransformErrorBundle ByteString
forall e a. e -&gt; Validation e a
</span><span class="hs-identifier hs-var">Failure</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle
 -&gt; Validation TransformErrorBundle ByteString)
-&gt; TransformErrorBundle
-&gt; Validation TransformErrorBundle ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-431"></span><span>              </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-432"></span><span>                </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-433"></span><span>                  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-434"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-435"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Header Transforms must produce a String, Number, or Boolean value: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985533"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span>      </span><span id="local-6989586621687985532"><span class="annot"><span class="annottext">failIfCT :: CI Text -&gt; Validation TransformErrorBundle (CI ByteString)
</span><a href="#local-6989586621687985532"><span class="hs-identifier hs-var hs-var">failIfCT</span></a></span></span><span> </span><span id="local-6989586621687985531"><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985531"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-439"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.foldedCase</span></span><span> </span><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985531"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;content-type&quot;</span></span><span>
</span><span id="line-440"></span><span>          </span><span class="hs-keyword">then</span><span>
</span><span id="line-441"></span><span>            </span><span class="annot"><span class="annottext">TransformErrorBundle
-&gt; Validation TransformErrorBundle (CI ByteString)
forall e a. e -&gt; Validation e a
</span><span class="hs-identifier hs-var">Failure</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle
 -&gt; Validation TransformErrorBundle (CI ByteString))
-&gt; TransformErrorBundle
-&gt; Validation TransformErrorBundle (CI ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-442"></span><span>              </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-443"></span><span>                </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-444"></span><span>                  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-445"></span><span>                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-446"></span><span>                      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Header Transforms cannot add Content-Type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Text
forall s. CI s -&gt; s
</span><span class="hs-identifier hs-var hs-var">CI.original</span></span><span> </span><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985531"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-448"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">CI ByteString -&gt; Validation TransformErrorBundle (CI ByteString)
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">(CI ByteString -&gt; Validation TransformErrorBundle (CI ByteString))
-&gt; CI ByteString -&gt; Validation TransformErrorBundle (CI ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; CI Text -&gt; CI ByteString
forall s2 s1. FoldCase s2 =&gt; (s1 -&gt; s2) -&gt; CI s1 -&gt; CI s2
</span><span class="hs-identifier hs-var">CI.map</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">CI Text
</span><a href="#local-6989586621687985531"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span>      </span><span id="local-6989586621687985528"><span class="annot"><span class="annottext">toBeAdded :: Validation TransformErrorBundle [Header]
</span><a href="#local-6989586621687985528"><span class="hs-identifier hs-var hs-var">toBeAdded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((CI Text, StringTemplateText)
 -&gt; Validation TransformErrorBundle Header)
-&gt; [(CI Text, StringTemplateText)]
-&gt; Validation TransformErrorBundle [Header]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; Validation TransformErrorBundle (CI ByteString))
-&gt; (StringTemplateText
    -&gt; Validation TransformErrorBundle ByteString)
-&gt; (CI Text, StringTemplateText)
-&gt; Validation TransformErrorBundle Header
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">CI Text -&gt; Validation TransformErrorBundle (CI ByteString)
</span><a href="#local-6989586621687985532"><span class="hs-identifier hs-var">failIfCT</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; Validation TransformErrorBundle ByteString
</span><a href="#local-6989586621687985540"><span class="hs-identifier hs-var">transform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(CI Text, StringTemplateText)]
</span><a href="#local-6989586621687985543"><span class="hs-identifier hs-var">addHeaders</span></a></span><span>
</span><span id="line-451"></span><span>      </span><span id="local-6989586621687985527"><span class="annot"><span class="annottext">toBeRemoved :: [CI ByteString]
</span><a href="#local-6989586621687985527"><span class="hs-identifier hs-var hs-var">toBeRemoved</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CI Text -&gt; CI ByteString) -&gt; [CI Text] -&gt; [CI ByteString]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((CI Text -&gt; CI ByteString) -&gt; [CI Text] -&gt; [CI ByteString])
-&gt; ((Text -&gt; ByteString) -&gt; CI Text -&gt; CI ByteString)
-&gt; (Text -&gt; ByteString)
-&gt; [CI Text]
-&gt; [CI ByteString]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; CI Text -&gt; CI ByteString
forall s2 s1. FoldCase s2 =&gt; (s1 -&gt; s2) -&gt; CI s1 -&gt; CI s2
</span><span class="hs-identifier hs-var">CI.map</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">[CI Text]
</span><a href="#local-6989586621687985542"><span class="hs-identifier hs-var">removeHeaders</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>      </span><span id="local-6989586621687985526"><span class="annot"><span class="annottext">filterHeaders :: [Header] -&gt; [Header]
</span><a href="#local-6989586621687985526"><span class="hs-identifier hs-var hs-var">filterHeaders</span></a></span></span><span> </span><span id="local-6989586621687985525"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985525"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Bool) -&gt; [Header] -&gt; [Header]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CI ByteString -&gt; [CI ByteString] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">[CI ByteString]
</span><a href="#local-6989586621687985527"><span class="hs-identifier hs-var">toBeRemoved</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(CI ByteString -&gt; Bool)
-&gt; (Header -&gt; CI ByteString) -&gt; Header -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Header -&gt; CI ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985525"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-454"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Validation TransformErrorBundle [Header]
</span><a href="#local-6989586621687985528"><span class="hs-identifier hs-var">toBeAdded</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-455"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Failure</span></span><span> </span><span id="local-6989586621687985523"><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985523"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985523"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-456"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Success</span></span><span> </span><span id="local-6989586621687985521"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985521"><span class="hs-identifier hs-var">toBeAdded'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621687985526"><span class="hs-identifier hs-var">filterHeaders</span></a></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; ([Header] -&gt; [Header]) -&gt; [Header] -&gt; [Header]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985521"><span class="hs-identifier hs-var">toBeAdded'</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header] -&gt; [Header]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-type">mkUrlTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#StringTemplateText"><span class="hs-identifier hs-type">StringTemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-459"></span><span id="mkUrlTransform"><span class="annot"><span class="annottext">mkUrlTransform :: TemplatingEngine
-&gt; StringTemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkUrlTransform"><span class="hs-identifier hs-var hs-var">mkUrlTransform</span></a></span></span><span> </span><span id="local-6989586621687985520"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985520"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span id="local-6989586621687985519"><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985519"><span class="hs-identifier hs-var">template</span></a></span></span><span> </span><span id="local-6989586621687985518"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985518"><span class="hs-identifier hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var">mkReqTemplateTransform</span></a></span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985520"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StringTemplateText -&gt; TemplateText
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(StringTemplateText -&gt; TemplateText)
-&gt; StringTemplateText -&gt; TemplateText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StringTemplateText -&gt; StringTemplateText
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#wrapTemplate"><span class="hs-identifier hs-var">wrapTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">StringTemplateText
</span><a href="#local-6989586621687985519"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985518"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687985517"><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985517"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TransformErrorBundle
</span><a href="#local-6989586621687985517"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">J.String</span></span><span> </span><span id="local-6989586621687985516"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985516"><span class="hs-identifier hs-var">url</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-463"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe URI
</span><span class="hs-identifier hs-var">URI.parseURI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985516"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-464"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">URI
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985516"><span class="hs-identifier hs-var">url</span></a></span><span>
</span><span id="line-465"></span><span>        </span><span class="annot"><span class="annottext">Maybe URI
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-466"></span><span>          </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; Either TransformErrorBundle Text)
-&gt; TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-467"></span><span>            </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-468"></span><span>              </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-469"></span><span>                </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-470"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-471"></span><span>                    </span><span class="hs-comment">-- TODO: This error message is not very</span><span>
</span><span id="line-472"></span><span>                    </span><span class="hs-comment">-- helpful. We should find a way to identity what</span><span>
</span><span id="line-473"></span><span>                    </span><span class="hs-comment">-- is wrong with the URL.</span><span>
</span><span id="line-474"></span><span>                    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Invalid URL: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985516"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621687985514"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985514"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-477"></span><span>      </span><span class="annot"><span class="annottext">TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(TransformErrorBundle -&gt; Either TransformErrorBundle Text)
-&gt; TransformErrorBundle -&gt; Either TransformErrorBundle Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; [Value] -&gt; TransformErrorBundle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-479"></span><span>          </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value]) -&gt; Value -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-480"></span><span>            </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">J.object</span></span><span>
</span><span id="line-481"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;error_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TransformationError&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-482"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">J..=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">J.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Url Transforms must produce a String value: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. Show a =&gt; a -&gt; Text
</span><a href="Hasura.Prelude.html#tshow"><span class="hs-identifier hs-var">tshow</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985514"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-comment">-- | Construct a Template Transformation function for Requests</span><span>
</span><span id="line-486"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-type">mkReqTemplateTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-487"></span><span id="mkReqTemplateTransform"><span class="annot"><span class="annottext">mkReqTemplateTransform :: TemplatingEngine
-&gt; TemplateText
-&gt; ReqTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkReqTemplateTransform"><span class="hs-identifier hs-var hs-var">mkReqTemplateTransform</span></a></span></span><span> </span><span id="local-6989586621687985513"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985513"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span id="local-6989586621687985512"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985512"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985508"><span id="local-6989586621687985509"><span id="local-6989586621687985510"><span id="local-6989586621687985511"><span class="annot"><span class="annottext">Maybe Value
Value
tcQueryParams :: Maybe Value
tcSessionVars :: Value
tcBody :: Value
tcUrl :: Maybe Value
tcQueryParams :: ReqTransformCtx -&gt; Maybe Value
tcSessionVars :: ReqTransformCtx -&gt; Value
tcBody :: ReqTransformCtx -&gt; Value
tcUrl :: ReqTransformCtx -&gt; Maybe Value
</span><a href="#local-6989586621687985508"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985507"><span class="annot"><span class="annottext">context :: [Pair]
</span><a href="#local-6989586621687985507"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985510"><span class="hs-identifier hs-var">tcBody</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$session_variables&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985509"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; [Pair] -&gt; [Pair]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Pair] -&gt; [Pair]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$query_params&quot;</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687985508"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$base_url&quot;</span></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Pair) -&gt; Maybe Value -&gt; Maybe Pair
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687985511"><span class="hs-identifier hs-var">tcUrl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-489"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985513"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-490"></span><span>        </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RenderedError -&gt; TransformErrorBundle)
-&gt; Either RenderedError Value -&gt; Either TransformErrorBundle Value
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; (RenderedError -&gt; [Value])
-&gt; RenderedError
-&gt; TransformErrorBundle
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value])
-&gt; (RenderedError -&gt; Value) -&gt; RenderedError -&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RenderedError -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either RenderedError Value -&gt; Either TransformErrorBundle Value)
-&gt; Either RenderedError Value -&gt; Either TransformErrorBundle Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Pair] -&gt; Either RenderedError Value
</span><span class="hs-identifier hs-var">runKriti</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985512"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Pair]
</span><a href="#local-6989586621687985507"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">-- | Construct a Template Transformation function for Responses</span><span>
</span><span id="line-493"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-type">mkRespTemplateTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplatingEngine"><span class="hs-identifier hs-type">TemplatingEngine</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span>
</span><span id="line-494"></span><span id="mkRespTemplateTransform"><span class="annot"><span class="annottext">mkRespTemplateTransform :: TemplatingEngine
-&gt; TemplateText
-&gt; RespTransformCtx
-&gt; Either TransformErrorBundle Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#mkRespTemplateTransform"><span class="hs-identifier hs-var hs-var">mkRespTemplateTransform</span></a></span></span><span> </span><span id="local-6989586621687985506"><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985506"><span class="hs-identifier hs-var">engine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TemplateText"><span class="hs-identifier hs-type">TemplateText</span></a></span><span> </span><span id="local-6989586621687985505"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985505"><span class="hs-identifier hs-var">template</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985503"><span id="local-6989586621687985504"><span class="annot"><span class="annottext">Value
rtcReqCtx :: Value
rtcBody :: Value
rtcReqCtx :: RespTransformCtx -&gt; Value
rtcBody :: RespTransformCtx -&gt; Value
</span><a href="#local-6989586621687985503"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985502"><span class="annot"><span class="annottext">context :: [Pair]
</span><a href="#local-6989586621687985502"><span class="hs-identifier hs-var hs-var">context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985504"><span class="hs-identifier hs-var">rtcBody</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;$request&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985503"><span class="hs-identifier hs-var">rtcReqCtx</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-496"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="#local-6989586621687985506"><span class="hs-identifier hs-var">engine</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-497"></span><span>        </span><span class="annot"><span class="annottext">TemplatingEngine
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#Kriti"><span class="hs-identifier hs-var">Kriti</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RenderedError -&gt; TransformErrorBundle)
-&gt; Either RenderedError Value -&gt; Either TransformErrorBundle Value
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; TransformErrorBundle
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-var">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; TransformErrorBundle)
-&gt; (RenderedError -&gt; [Value])
-&gt; RenderedError
-&gt; TransformErrorBundle
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; [Value]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; [Value])
-&gt; (RenderedError -&gt; Value) -&gt; RenderedError -&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RenderedError -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either RenderedError Value -&gt; Either TransformErrorBundle Value)
-&gt; Either RenderedError Value -&gt; Either TransformErrorBundle Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Pair] -&gt; Either RenderedError Value
</span><span class="hs-identifier hs-var">runKriti</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985505"><span class="hs-identifier hs-var">template</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Pair]
</span><a href="#local-6989586621687985502"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier hs-type">buildReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Session.html#SessionVariables"><span class="hs-identifier hs-type">SessionVariables</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span>
</span><span id="line-500"></span><span id="buildReqTransformCtx"><span class="annot"><span class="annottext">buildReqTransformCtx :: Text -&gt; Maybe SessionVariables -&gt; Request -&gt; ReqTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildReqTransformCtx"><span class="hs-identifier hs-var hs-var">buildReqTransformCtx</span></a></span></span><span> </span><span id="local-6989586621687985501"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985501"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span id="local-6989586621687985500"><span class="annot"><span class="annottext">Maybe SessionVariables
</span><a href="#local-6989586621687985500"><span class="hs-identifier hs-var">sessionVars</span></a></span></span><span> </span><span id="local-6989586621687985499"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985499"><span class="hs-identifier hs-var">reqData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-501"></span><span>  </span><span class="annot"><span class="annottext">ReqTransformCtx :: Maybe Value -&gt; Value -&gt; Value -&gt; Maybe Value -&gt; ReqTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcUrl :: Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcUrl"><span class="hs-identifier hs-var">tcUrl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985501"><span class="hs-identifier hs-var">url</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-503"></span><span>      </span><span class="annot"><span class="annottext">tcBody :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcBody"><span class="hs-identifier hs-var">tcBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FromJSON Value =&gt; ByteString -&gt; Maybe Value
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">J.decode</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe Value) -&gt; Maybe ByteString -&gt; Maybe Value
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe ByteString) Request (Maybe ByteString)
-&gt; Request -&gt; Maybe ByteString
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe ByteString) Request (Maybe ByteString)
Lens' Request (Maybe ByteString)
</span><a href="Network.HTTP.Client.Transformable.html#body"><span class="hs-identifier hs-var">HTTP.body</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985499"><span class="hs-identifier hs-var">reqData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-504"></span><span>      </span><span class="annot"><span class="annottext">tcSessionVars :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcSessionVars"><span class="hs-identifier hs-var">tcSessionVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">Maybe SessionVariables
</span><a href="#local-6989586621687985500"><span class="hs-identifier hs-var">sessionVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-505"></span><span>      </span><span class="annot"><span class="annottext">tcQueryParams :: Maybe Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#tcQueryParams"><span class="hs-identifier hs-var">tcQueryParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Text, Maybe Text)] -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">([(Text, Maybe Text)] -&gt; Value) -&gt; [(Text, Maybe Text)] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text)
-&gt; (Maybe ByteString -&gt; Maybe Text)
-&gt; (ByteString, Maybe ByteString)
-&gt; (Text, Maybe Text)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; Maybe ByteString -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">TE.decodeUtf8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ByteString, Maybe ByteString) -&gt; (Text, Maybe Text))
-&gt; Query -&gt; [(Text, Maybe Text)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Getting Query Request Query -&gt; Request -&gt; Query
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Query Request Query
Lens' Request Query
</span><a href="Network.HTTP.Client.Transformable.html#queryParams"><span class="hs-identifier hs-var">HTTP.queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985499"><span class="hs-identifier hs-var">reqData</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier hs-type">buildRespTransformCtx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span>
</span><span id="line-509"></span><span id="buildRespTransformCtx"><span class="annot"><span class="annottext">buildRespTransformCtx :: ReqTransformCtx -&gt; ByteString -&gt; RespTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#buildRespTransformCtx"><span class="hs-identifier hs-var hs-var">buildRespTransformCtx</span></a></span></span><span> </span><span id="local-6989586621687985492"><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985492"><span class="hs-identifier hs-var">reqCtx</span></a></span></span><span> </span><span id="local-6989586621687985491"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985491"><span class="hs-identifier hs-var">respBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>  </span><span class="annot"><span class="annottext">RespTransformCtx :: Value -&gt; Value -&gt; RespTransformCtx
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtcBody :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcBody"><span class="hs-identifier hs-var">rtcBody</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value -&gt; Value
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier hs-var">J.Null</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Value) -&gt; Maybe Value -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe Value
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">J.decode</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">J.Value</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985491"><span class="hs-identifier hs-var">respBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-512"></span><span>      </span><span class="annot"><span class="annottext">rtcReqCtx :: Value
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#rtcReqCtx"><span class="hs-identifier hs-var">rtcReqCtx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">J.toJSON</span></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985492"><span class="hs-identifier hs-var">reqCtx</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="hs-comment">-- | Transform an `HTTP.Request` with a `RequestTransform`.</span><span>
</span><span id="line-516"></span><span class="hs-comment">--</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- Note: we pass in the request url explicitly for use in the</span><span>
</span><span id="line-518"></span><span class="hs-comment">-- 'ReqTransformCtx'. We do this so that we can ensure that the url</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- is syntactically identical to what the use submits. If we use the</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- parsed request from the 'HTTP.Request' term then it is possible</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- that the url is semantically equivalent but syntactically</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- different. An example of this is the presence or lack of a trailing</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- slash on the URL path. This important when performing string</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- interpolation on the request url.</span><span>
</span><span id="line-525"></span><span class="hs-comment">--</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- Because of this requirement, we must ensure the sequence of</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- transformation applications. If a query param transformation</span><span>
</span><span id="line-528"></span><span class="hs-comment">-- occured before the url transformation then the query param</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- transformation would be wiped out.</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- applyRequestTransform :: T.Text -&gt; RequestTransform -&gt; HTTP.Request -&gt; Maybe SessionVariables -&gt; Either TransformErrorBundle HTTP.Request</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- applyRequestTransform reqUrl RequestTransform {..} reqData sessionVars =</span><span>
</span><span id="line-532"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier hs-type">applyRequestTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ReqTransformCtx"><span class="hs-identifier hs-type">ReqTransformCtx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><a href="Network.HTTP.Client.Transformable.html#Request"><span class="hs-identifier hs-type">HTTP.Request</span></a></span><span>
</span><span id="line-533"></span><span id="applyRequestTransform"><span class="annot"><span class="annottext">applyRequestTransform :: (Request -&gt; ReqTransformCtx)
-&gt; RequestTransform
-&gt; Request
-&gt; Either TransformErrorBundle Request
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyRequestTransform"><span class="hs-identifier hs-var hs-var">applyRequestTransform</span></a></span></span><span> </span><span id="local-6989586621687985490"><span class="annot"><span class="annottext">Request -&gt; ReqTransformCtx
</span><a href="#local-6989586621687985490"><span class="hs-identifier hs-var">transformCtx'</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RequestTransform"><span class="hs-identifier hs-type">RequestTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985484"><span id="local-6989586621687985485"><span id="local-6989586621687985486"><span id="local-6989586621687985487"><span id="local-6989586621687985488"><span id="local-6989586621687985489"><span class="annot"><span class="annottext">Maybe ContentType
Maybe RequestMethod
Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformRequestHeaders :: Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformQueryParams :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
reqTransformContentType :: Maybe ContentType
reqTransformBody :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
reqTransformRequestURL :: Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
reqTransformRequestMethod :: Maybe RequestMethod
reqTransformRequestHeaders :: RequestTransform
-&gt; Maybe
     (ReqTransformCtx
      -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
reqTransformQueryParams :: RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
reqTransformContentType :: RequestTransform -&gt; Maybe ContentType
reqTransformBody :: RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
reqTransformRequestURL :: RequestTransform
-&gt; Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
reqTransformRequestMethod :: RequestTransform -&gt; Maybe RequestMethod
</span><a href="#local-6989586621687985484"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621687985483"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985483"><span class="hs-identifier hs-var">reqData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687985482"><span class="annot"><span class="annottext">transformCtx :: ReqTransformCtx
</span><a href="#local-6989586621687985482"><span class="hs-identifier hs-var hs-var">transformCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; ReqTransformCtx
</span><a href="#local-6989586621687985490"><span class="hs-identifier hs-var">transformCtx'</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985483"><span class="hs-identifier hs-var">reqData</span></a></span><span>
</span><span id="line-535"></span><span>      </span><span id="local-6989586621687985481"><span class="annot"><span class="annottext">method :: Maybe ByteString
</span><a href="#local-6989586621687985481"><span class="hs-identifier hs-var hs-var">method</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RequestMethod -&gt; ByteString)
-&gt; Maybe RequestMethod -&gt; Maybe ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; (RequestMethod -&gt; Text) -&gt; RequestMethod -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RequestMethod -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderRequestMethod"><span class="hs-identifier hs-var">renderRequestMethod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe RequestMethod
</span><a href="#local-6989586621687985489"><span class="hs-identifier hs-var">reqTransformRequestMethod</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span>      </span><span class="annot"><a href="#local-6989586621687985480"><span class="hs-identifier hs-type">bodyFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>      </span><span id="local-6989586621687985480"><span class="annot"><span class="annottext">bodyFunc :: Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
</span><a href="#local-6989586621687985480"><span class="hs-identifier hs-var hs-var">bodyFunc</span></a></span></span><span> </span><span id="local-6989586621687985479"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621687985479"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-539"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985487"><span class="hs-identifier hs-var">reqTransformBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-540"></span><span>          </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Value)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621687985479"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-541"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687985478"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621687985478"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe ByteString)
-&gt; (Value -&gt; ByteString) -&gt; Value -&gt; Maybe ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe ByteString)
-&gt; Either TransformErrorBundle Value
-&gt; Either TransformErrorBundle (Maybe ByteString)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621687985478"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985482"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>      </span><span class="annot"><a href="#local-6989586621687985476"><span class="hs-identifier hs-type">urlFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-544"></span><span>      </span><span id="local-6989586621687985476"><span class="annot"><span class="annottext">urlFunc :: Text -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985476"><span class="hs-identifier hs-var hs-var">urlFunc</span></a></span></span><span> </span><span id="local-6989586621687985475"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985475"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><a href="#local-6989586621687985488"><span class="hs-identifier hs-var">reqTransformRequestURL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-546"></span><span>          </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687985475"><span class="hs-identifier hs-var">url</span></a></span><span>
</span><span id="line-547"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687985474"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985474"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985474"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985482"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><a href="#local-6989586621687985473"><span class="hs-identifier hs-type">queryFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HTTP.Query</span></span><span>
</span><span id="line-550"></span><span>      </span><span id="local-6989586621687985473"><span class="annot"><span class="annottext">queryFunc :: Query -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621687985473"><span class="hs-identifier hs-var hs-var">queryFunc</span></a></span></span><span> </span><span id="local-6989586621687985472"><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621687985472"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-551"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><a href="#local-6989586621687985485"><span class="hs-identifier hs-var">reqTransformQueryParams</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-552"></span><span>          </span><span class="annot"><span class="annottext">Maybe (ReqTransformCtx -&gt; Either TransformErrorBundle Query)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Query -&gt; Either TransformErrorBundle Query
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621687985472"><span class="hs-identifier hs-var">query</span></a></span><span>
</span><span id="line-553"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687985471"><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621687985471"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621687985471"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985482"><span class="hs-identifier hs-var">transformCtx</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span>      </span><span class="annot"><a href="#local-6989586621687985470"><span class="hs-identifier hs-type">headerFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span>
</span><span id="line-556"></span><span>      </span><span id="local-6989586621687985470"><span class="annot"><span class="annottext">headerFunc :: [Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621687985470"><span class="hs-identifier hs-var hs-var">headerFunc</span></a></span></span><span> </span><span id="local-6989586621687985469"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985469"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-557"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><a href="#local-6989586621687985484"><span class="hs-identifier hs-var">reqTransformRequestHeaders</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-558"></span><span>          </span><span class="annot"><span class="annottext">Maybe
  (ReqTransformCtx
   -&gt; Either TransformErrorBundle ([Header] -&gt; [Header]))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985469"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-559"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687985468"><span class="annot"><span class="annottext">ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="#local-6989586621687985468"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
-&gt; Either TransformErrorBundle ([Header] -&gt; [Header])
</span><a href="#local-6989586621687985468"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ReqTransformCtx
</span><a href="#local-6989586621687985482"><span class="hs-identifier hs-var">transformCtx</span></a></span><span> </span><span class="annot"><span class="annottext">Either TransformErrorBundle ([Header] -&gt; [Header])
-&gt; (([Header] -&gt; [Header]) -&gt; Either TransformErrorBundle [Header])
-&gt; Either TransformErrorBundle [Header]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687985467"><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621687985467"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; Either TransformErrorBundle [Header])
-&gt; [Header] -&gt; Either TransformErrorBundle [Header]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; [Header]
</span><a href="#local-6989586621687985467"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687985469"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span>      </span><span class="annot"><a href="#local-6989586621687985466"><span class="hs-identifier hs-type">contentTypeFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">HTTP.Header</span></span><span class="hs-special">]</span><span>
</span><span id="line-562"></span><span>      </span><span id="local-6989586621687985466"><span class="annot"><span class="annottext">contentTypeFunc :: [Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621687985466"><span class="hs-identifier hs-var hs-var">contentTypeFunc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; Either TransformErrorBundle [Header])
-&gt; ([Header] -&gt; [Header])
-&gt; [Header]
-&gt; Either TransformErrorBundle [Header]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Header -&gt; Header -&gt; Bool) -&gt; [Header] -&gt; [Header]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nubBy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621687985465"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621687985465"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687985464"><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621687985464"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Header -&gt; CI ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621687985465"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">CI ByteString -&gt; CI ByteString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Header -&gt; CI ByteString
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">Header
</span><a href="#local-6989586621687985464"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Header] -&gt; [Header])
-&gt; ([Header] -&gt; [Header]) -&gt; [Header] -&gt; [Header]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CI ByteString
</span><span class="hs-string">&quot;Content-Type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985463"><span class="hs-identifier hs-var">contentType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-564"></span><span>          </span><span id="local-6989586621687985463"><span class="annot"><span class="annottext">contentType :: ByteString
</span><a href="#local-6989586621687985463"><span class="hs-identifier hs-var hs-var">contentType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
-&gt; (ContentType -&gt; ByteString) -&gt; Maybe ContentType -&gt; ByteString
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;application/json&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">TE.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString)
-&gt; (ContentType -&gt; Text) -&gt; ContentType -&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ContentType -&gt; Text
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#renderContentType"><span class="hs-identifier hs-var">renderContentType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe ContentType
</span><a href="#local-6989586621687985486"><span class="hs-identifier hs-var">reqTransformContentType</span></a></span><span>
</span><span id="line-565"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687985483"><span class="hs-identifier hs-var">reqData</span></a></span><span> </span><span class="annot"><span class="annottext">Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Text Text
-&gt; LensLike (Either TransformErrorBundle) Request Request Text Text
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Text Text
Lens' Request Text
</span><a href="Network.HTTP.Client.Transformable.html#url"><span class="hs-identifier hs-var">HTTP.url</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TransformErrorBundle Text
</span><a href="#local-6989586621687985476"><span class="hs-identifier hs-var">urlFunc</span></a></span><span>
</span><span id="line-566"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle)
  Request
  Request
  (Maybe ByteString)
  (Maybe ByteString)
-&gt; LensLike
     (Either TransformErrorBundle)
     Request
     Request
     (Maybe ByteString)
     (Maybe ByteString)
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle)
  Request
  Request
  (Maybe ByteString)
  (Maybe ByteString)
Lens' Request (Maybe ByteString)
</span><a href="Network.HTTP.Client.Transformable.html#body"><span class="hs-identifier hs-var">HTTP.body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString -&gt; Either TransformErrorBundle (Maybe ByteString)
</span><a href="#local-6989586621687985480"><span class="hs-identifier hs-var">bodyFunc</span></a></span><span>
</span><span id="line-567"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Query Query
-&gt; LensLike
     (Either TransformErrorBundle) Request Request Query Query
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike (Either TransformErrorBundle) Request Request Query Query
Lens' Request Query
</span><a href="Network.HTTP.Client.Transformable.html#queryParams"><span class="hs-identifier hs-var">HTTP.queryParams</span></a></span><span> </span><span class="annot"><span class="annottext">Query -&gt; Either TransformErrorBundle Query
</span><a href="#local-6989586621687985473"><span class="hs-identifier hs-var">queryFunc</span></a></span><span>
</span><span id="line-568"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request ByteString ByteString
-&gt; LensLike
     (Either TransformErrorBundle) Request Request ByteString ByteString
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request ByteString ByteString
Lens' Request ByteString
</span><a href="Network.HTTP.Client.Transformable.html#method"><span class="hs-identifier hs-var">HTTP.method</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either TransformErrorBundle ByteString)
-&gt; (ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Either TransformErrorBundle ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Maybe ByteString -&gt; ByteString
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-operator hs-var">`fromMaybe`</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621687985481"><span class="hs-identifier hs-var">method</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
-&gt; LensLike
     (Either TransformErrorBundle) Request Request [Header] [Header]
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
Lens' Request [Header]
</span><a href="Network.HTTP.Client.Transformable.html#headers"><span class="hs-identifier hs-var">HTTP.headers</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621687985470"><span class="hs-identifier hs-var">headerFunc</span></a></span><span>
</span><span id="line-570"></span><span>        </span><span class="annot"><span class="annottext">Either TransformErrorBundle Request
-&gt; (Request -&gt; Either TransformErrorBundle Request)
-&gt; Either TransformErrorBundle Request
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
-&gt; LensLike
     (Either TransformErrorBundle) Request Request [Header] [Header]
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="annot"><span class="annottext">LensLike
  (Either TransformErrorBundle) Request Request [Header] [Header]
Lens' Request [Header]
</span><a href="Network.HTTP.Client.Transformable.html#headers"><span class="hs-identifier hs-var">HTTP.headers</span></a></span><span> </span><span class="annot"><span class="annottext">[Header] -&gt; Either TransformErrorBundle [Header]
</span><a href="#local-6989586621687985466"><span class="hs-identifier hs-var">contentTypeFunc</span></a></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="hs-comment">-- | At the moment we only transform the body of</span><span>
</span><span id="line-573"></span><span class="hs-comment">-- Responses. 'http-client' does not export the constructors for</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- 'Response'. If we want to transform then we will need additional</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- 'apply' functions.</span><span>
</span><span id="line-576"></span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier hs-type">applyResponseTransform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span>
</span><span id="line-577"></span><span id="applyResponseTransform"><span class="annot"><span class="annottext">applyResponseTransform :: ResponseTransform
-&gt; RespTransformCtx -&gt; Either TransformErrorBundle ByteString
</span><a href="Hasura.RQL.DDL.WebhookTransforms.html#applyResponseTransform"><span class="hs-identifier hs-var hs-var">applyResponseTransform</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#ResponseTransform"><span class="hs-identifier hs-type">ResponseTransform</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985457"><span class="annot"><span class="annottext">Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
respTransformBody :: Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
respTransformBody :: ResponseTransform
-&gt; Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985457"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621687985456"><span class="annot"><span class="annottext">ctx :: RespTransformCtx
</span><a href="#local-6989586621687985456"><span class="hs-identifier hs-var">ctx</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#RespTransformCtx"><span class="hs-identifier hs-type">RespTransformCtx</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687985454"><span id="local-6989586621687985455"><span class="annot"><span class="annottext">Value
rtcReqCtx :: Value
rtcBody :: Value
rtcReqCtx :: RespTransformCtx -&gt; Value
rtcBody :: RespTransformCtx -&gt; Value
</span><a href="#local-6989586621687985454"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621687985453"><span class="hs-identifier hs-type">bodyFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.WebhookTransforms.html#TransformErrorBundle"><span class="hs-identifier hs-type">TransformErrorBundle</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span>
</span><span id="line-579"></span><span>      </span><span id="local-6989586621687985453"><span class="annot"><span class="annottext">bodyFunc :: ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621687985453"><span class="hs-identifier hs-var hs-var">bodyFunc</span></a></span></span><span> </span><span id="local-6989586621687985452"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985452"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-580"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><a href="#local-6989586621687985457"><span class="hs-identifier hs-var">respTransformBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-581"></span><span>          </span><span class="annot"><span class="annottext">Maybe (RespTransformCtx -&gt; Either TransformErrorBundle Value)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687985452"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-582"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687985451"><span class="annot"><span class="annottext">RespTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621687985451"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ByteString)
-&gt; Either TransformErrorBundle Value
-&gt; Either TransformErrorBundle ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RespTransformCtx -&gt; Either TransformErrorBundle Value
</span><a href="#local-6989586621687985451"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RespTransformCtx
</span><a href="#local-6989586621687985456"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-583"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either TransformErrorBundle ByteString
</span><a href="#local-6989586621687985453"><span class="hs-identifier hs-var">bodyFunc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">J.encode</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687985455"><span class="hs-identifier hs-var">rtcBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span></pre></body></html>